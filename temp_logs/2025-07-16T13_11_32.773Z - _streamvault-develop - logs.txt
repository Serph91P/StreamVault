2025-07-16T13:06:50.074062775Z [2025-07-16 15:06:50] Starting StreamVault entrypoint script
2025-07-16T13:06:50.074735815Z [2025-07-16 15:06:50] ENVIRONMENT: development, LOG_LEVEL: DEBUG
2025-07-16T13:06:50.076958719Z [2025-07-16 15:06:50] Running in development environment...
2025-07-16T13:06:50.079648912Z [2025-07-16 15:06:50] Frontend dist assets directory found. Skipping build.
2025-07-16T13:06:50.082421379Z [2025-07-16 15:06:50] Setting proper permissions for migrations directory...
2025-07-16T13:06:50.276550956Z [2025-07-16 15:06:50] Migrations directory permissions set.
2025-07-16T13:06:50.279367240Z [2025-07-16 15:06:50] Category images are now managed by unified_image_service
2025-07-16T13:06:50.282403584Z [2025-07-16 15:06:50] Database migrations will be handled by application startup...
2025-07-16T13:06:50.285367621Z [2025-07-16 15:06:50] Starting FastAPI application...
2025-07-16T13:06:51.535385578Z INFO:     Started server process [1]
2025-07-16T13:06:51.535401305Z INFO:     Waiting for application startup.
2025-07-16T13:06:51.535545657Z Connecting to database with URL: postgresql+psycopg://streamvault-develop:yLdAXmEO0fargQQkBqVnYL4rJ#Qy$&L6@db:5432/streamvault-develop
2025-07-16T13:06:51.535547775Z 2025-07-16 15:06:51,535 - streamvault - INFO - Starting application initialization...
2025-07-16T13:06:51.535579649Z 2025-07-16 15:06:51,535 - streamvault - INFO - ðŸ”„ Running database migrations...
2025-07-16T13:06:51.535607023Z 2025-07-16 15:06:51,535 - streamvault - INFO - ðŸ”„ Starting database migrations...
2025-07-16T13:06:51.540756044Z 2025-07-16 15:06:51,540 - streamvault - INFO - âœ… Migrations table already exists with correct schema
2025-07-16T13:06:51.541424122Z 2025-07-16 15:06:51,541 - streamvault - INFO - âœ… Migrations table exists with correct schema
2025-07-16T13:06:51.541926265Z 2025-07-16 15:06:51,541 - streamvault - INFO - Found 13 previously applied migrations
2025-07-16T13:06:51.542183602Z 2025-07-16 15:06:51,542 - streamvault - INFO - No pending migrations to apply
2025-07-16T13:06:51.542217708Z 2025-07-16 15:06:51,542 - streamvault - INFO - ðŸŽ¯ Migration summary: 0 successful, 0 failed
2025-07-16T13:06:51.542246875Z 2025-07-16 15:06:51,542 - streamvault - INFO - âœ… All database migrations completed successfully
2025-07-16T13:06:51.542273458Z 2025-07-16 15:06:51,542 - streamvault - DEBUG - Initializing event registry
2025-07-16T13:06:51.544423519Z 2025-07-16 15:06:51,544 - streamvault - DEBUG - No notification URL configured
2025-07-16T13:06:51.544567362Z 2025-07-16 15:06:51,544 - streamvault - DEBUG - Initializing EventSub with callback URL: https://streamvault-develop.meberthosting.de/eventsub
2025-07-16T13:06:51.544588304Z 2025-07-16 15:06:51,544 - streamvault - INFO - EventSub initialized successfully
2025-07-16T13:06:51.544610758Z 2025-07-16 15:06:51,544 - streamvault - DEBUG - Event registry initialization complete
2025-07-16T13:06:51.544708954Z 2025-07-16 15:06:51,544 - streamvault - DEBUG - EventSub already initialized, skipping...
2025-07-16T13:06:51.544717705Z 2025-07-16 15:06:51,544 - streamvault - INFO - EventSub initialized successfully
2025-07-16T13:06:51.544729793Z 2025-07-16 15:06:51,544 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16T13:06:51.545010059Z 2025-07-16 15:06:51,544 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16T13:06:51.545032131Z 2025-07-16 15:06:51,545 - streamvault - INFO - Cleaned /app/logs/ffmpeg: deleted 0 log files, kept 1
2025-07-16T13:06:51.545112914Z 2025-07-16 15:06:51,545 - streamvault - INFO - Cleaned /app/logs/streamlink: deleted 0 log files, kept 1
2025-07-16T13:06:51.545216163Z 2025-07-16 15:06:51,545 - streamvault - INFO - Cleaned /app/logs/app: deleted 0 log files, kept 1
2025-07-16T13:06:51.545221798Z 2025-07-16 15:06:51,545 - streamvault - INFO - Log cleanup completed
2025-07-16T13:06:51.545224040Z 2025-07-16 15:06:51,545 - streamvault - INFO - Log cleanup service started
2025-07-16T13:06:51.545229970Z 2025-07-16 15:06:51,545 - streamvault - INFO - Recording cleanup service started
2025-07-16T13:06:51.545249869Z 2025-07-16 15:06:51,545 - streamvault - INFO - Image sync worker started
2025-07-16T13:06:51.545268679Z 2025-07-16 15:06:51,545 - streamvault - INFO - Image sync service started
2025-07-16T13:06:51.545720297Z 2025-07-16 15:06:51,545 - streamvault - INFO - Initializing background services...
2025-07-16T13:06:51.545745373Z 2025-07-16 15:06:51,545 - streamvault - INFO - Initializing background queue service...
2025-07-16T13:06:51.545771315Z 2025-07-16 15:06:51,545 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16T13:06:51.545788913Z 2025-07-16 15:06:51,545 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16T13:06:51.545806769Z 2025-07-16 15:06:51,545 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16T13:06:51.545824191Z 2025-07-16 15:06:51,545 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16T13:06:51.545841360Z 2025-07-16 15:06:51,545 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16T13:06:51.545859739Z 2025-07-16 15:06:51,545 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16T13:06:51.545895003Z 2025-07-16 15:06:51,545 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16T13:06:51.545917979Z 2025-07-16 15:06:51,545 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16T13:06:51.545933421Z 2025-07-16 15:06:51,545 - streamvault - INFO - Background queue service initialized successfully
2025-07-16T13:06:51.545950018Z 2025-07-16 15:06:51,545 - streamvault - INFO - Background services initialized successfully
2025-07-16T13:06:51.545967649Z 2025-07-16 15:06:51,545 - streamvault - INFO - Background queue service started
2025-07-16T13:06:51.545988681Z 2025-07-16 15:06:51,545 - streamvault - INFO - WebSocket broadcast task started
2025-07-16T13:06:51.546004419Z 2025-07-16 15:06:51,545 - streamvault - INFO - WebSocket broadcast task started
2025-07-16T13:06:51.546020706Z 2025-07-16 15:06:51,546 - streamvault - INFO - Application startup complete
2025-07-16T13:06:51.546086293Z 2025-07-16 15:06:51,546 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16T13:06:51.557236405Z 2025-07-16 15:06:51,557 - streamvault - INFO - Processing streamer herrmaximal (1/1) with policy count (threshold: 10)
2025-07-16T13:06:51.562585017Z 2025-07-16 15:06:51,562 - streamvault - INFO - Applying cleanup policy for streamer 1: type=count, threshold=10
2025-07-16T13:06:51.564726265Z 2025-07-16 15:06:51,564 - streamvault - INFO - No recordings to clean up for streamer herrmaximal
2025-07-16T13:06:51.564754545Z 2025-07-16 15:06:51,564 - streamvault - INFO - Scheduled cleanup completed for 0/1 streamers. Deleted 0 recordings in total.
2025-07-16T13:06:51.564928472Z 2025-07-16 15:06:51,564 - streamvault - INFO - Worker worker-0 started
2025-07-16T13:06:51.565041544Z 2025-07-16 15:06:51,564 - streamvault - INFO - Worker worker-1 started
2025-07-16T13:06:51.565050080Z 2025-07-16 15:06:51,564 - streamvault - INFO - Worker worker-2 started
2025-07-16T13:06:51.565052824Z 2025-07-16 15:06:51,565 - streamvault - INFO - Dependency worker started
2025-07-16T13:06:51.567937948Z INFO:     Application startup complete.
2025-07-16T13:06:51.568237978Z INFO:     Uvicorn running on http://0.0.0.0:7000 (Press CTRL+C to quit)
2025-07-16T13:06:51.746304607Z 2025-07-16 15:06:51,745 - streamvault - DEBUG - Real client IP found in x-forwarded-for: 87.190.33.10
2025-07-16T13:06:51.746352842Z 2025-07-16 15:06:51,746 - streamvault - INFO - ðŸ“ž New WebSocket connection attempt from 87.190.33.10
2025-07-16T13:06:51.746761593Z INFO:     ('172.23.0.1', 53712) - "WebSocket /ws" [accepted]
2025-07-16T13:06:51.747006490Z 2025-07-16 15:06:51,746 - streamvault - DEBUG - Real client IP found in x-forwarded-for: 87.190.33.10
2025-07-16T13:06:51.747257453Z 2025-07-16 15:06:51,747 - streamvault - INFO - ðŸ”Œ WebSocket connected: 87.190.33.10 (via proxy 172.23.0.1) - Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:140.0... (ID: 135355253800336) - Total: 1 connections
2025-07-16T13:06:51.748463423Z INFO:     connection open
2025-07-16T13:06:51.798826610Z 2025-07-16 15:06:51,798 - streamvault - INFO - Request b29c6c7f-b729-4b69-95c8-745890290eab: GET /api/streamers
2025-07-16T13:06:51.801463758Z 2025-07-16 15:06:51,801 - streamvault - DEBUG - Incoming request: GET /api/streamers
2025-07-16T13:06:51.801572532Z 2025-07-16 15:06:51,801 - streamvault - INFO - Request 75b370b5-960f-482b-a1fc-50628866a136: GET /api/recording/active
2025-07-16T13:06:51.801974322Z 2025-07-16 15:06:51,801 - streamvault - DEBUG - Incoming request: GET /api/recording/active
2025-07-16T13:06:51.814592540Z 2025-07-16 15:06:51,814 - streamvault - DEBUG - Response status: 200
2025-07-16T13:06:51.815350868Z INFO:     172.23.0.1:53732 - "GET /api/recording/active HTTP/1.1" 200 OK
2025-07-16T13:06:51.833937911Z 2025-07-16 15:06:51,833 - streamvault - ERROR - Auth middleware error for /api/streamers: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:06:51.834585791Z 2025-07-16 15:06:51,834 - streamvault - INFO - Request 55e7d854-5d32-4241-8b59-73f59f23c3a0: GET /api/streamers
2025-07-16T13:06:51.835144302Z 2025-07-16 15:06:51,835 - streamvault - DEBUG - Incoming request: GET /api/streamers
2025-07-16T13:06:51.867303841Z 2025-07-16 15:06:51,847 - streamvault - ERROR - Error processing request: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:06:51.867312705Z   + Exception Group Traceback (most recent call last):
2025-07-16T13:06:51.867314100Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
2025-07-16T13:06:51.867315342Z   |     yield
2025-07-16T13:06:51.867316243Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 186, in __call__
2025-07-16T13:06:51.867317384Z   |     async with anyio.create_task_group() as task_group:
2025-07-16T13:06:51.867318278Z   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.867319130Z   |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
2025-07-16T13:06:51.867320095Z   |     raise BaseExceptionGroup(
2025-07-16T13:06:51.867320906Z   |         "unhandled errors in a TaskGroup", self._exceptions
2025-07-16T13:06:51.867321825Z   |     ) from None
2025-07-16T13:06:51.867322674Z   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
2025-07-16T13:06:51.867323577Z   +-+---------------- 1 ----------------
2025-07-16T13:06:51.867324433Z     | Traceback (most recent call last):
2025-07-16T13:06:51.867325305Z     |   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:06:51.867326224Z     |     return await self.app(scope, receive, send)
2025-07-16T13:06:51.867327069Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867327896Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.867328837Z     |     with collapse_excgroups():
2025-07-16T13:06:51.867329678Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.867330510Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.867331477Z     |     self.gen.throw(value)
2025-07-16T13:06:51.867332352Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.867333966Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.867334921Z     |     raise exc
2025-07-16T13:06:51.867335709Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.867336638Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.867337516Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867343255Z     |   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:06:51.867344300Z     |     response = await call_next(request)
2025-07-16T13:06:51.867345192Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867346530Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.867347505Z     |     raise app_exc
2025-07-16T13:06:51.867348332Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.867349265Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.867350143Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.867351085Z     |     with collapse_excgroups():
2025-07-16T13:06:51.867351911Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.867352698Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.867353612Z     |     self.gen.throw(value)
2025-07-16T13:06:51.867354441Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.867355241Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.867356163Z     |     raise exc
2025-07-16T13:06:51.867356941Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.867357859Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.867358757Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867359602Z     |   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:06:51.867360477Z     |     response = await call_next(request)
2025-07-16T13:06:51.867361301Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867362123Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.867363042Z     |     raise app_exc
2025-07-16T13:06:51.867363823Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.867364737Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.867365639Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.867366562Z     |     with collapse_excgroups():
2025-07-16T13:06:51.867367379Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.867368235Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.867369180Z     |     self.gen.throw(value)
2025-07-16T13:06:51.867371065Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.867371921Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.867372874Z     |     raise exc
2025-07-16T13:06:51.867373747Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.867374659Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.867375512Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867376604Z     |   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:06:51.867377525Z     |     response = await call_next(request)
2025-07-16T13:06:51.867378353Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867379166Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.867380091Z     |     raise app_exc
2025-07-16T13:06:51.867380936Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.867381843Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.867382685Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.867383602Z     |     with collapse_excgroups():
2025-07-16T13:06:51.867384419Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.867385241Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.867386131Z     |     self.gen.throw(value)
2025-07-16T13:06:51.867386931Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.867387746Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.867388717Z     |     raise exc
2025-07-16T13:06:51.867389504Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.867390428Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.867391286Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867392126Z     |   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:06:51.867393014Z     |     response = await call_next(request)
2025-07-16T13:06:51.867393843Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867394679Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.867395597Z     |     raise app_exc
2025-07-16T13:06:51.867396374Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.867397282Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.867398939Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:06:51.867399926Z     |     await self.app(scope, receive, send)
2025-07-16T13:06:51.867400743Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:06:51.867401683Z     |     await self.app(scope, receive, send)
2025-07-16T13:06:51.867402550Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:06:51.867403626Z     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:06:51.867404519Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:06:51.867405441Z     |     raise exc
2025-07-16T13:06:51.867406226Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:06:51.867407177Z     |     await app(scope, receive, sender)
2025-07-16T13:06:51.867408012Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:06:51.867408954Z     |     await self.middleware_stack(scope, receive, send)
2025-07-16T13:06:51.867409832Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:06:51.867410747Z     |     await route.handle(scope, receive, send)
2025-07-16T13:06:51.867411573Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:06:51.867412491Z     |     await self.app(scope, receive, send)
2025-07-16T13:06:51.867413338Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:06:51.867414255Z     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:06:51.867415103Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:06:51.867416025Z     |     raise exc
2025-07-16T13:06:51.867416826Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:06:51.867417763Z     |     await app(scope, receive, sender)
2025-07-16T13:06:51.867418593Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:06:51.867419499Z     |     response = await f(request)
2025-07-16T13:06:51.867420316Z     |                ^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867421134Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:06:51.867422053Z     |     raw_response = await run_endpoint_function(
2025-07-16T13:06:51.867422919Z     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867424569Z     |     ...<3 lines>...
2025-07-16T13:06:51.867425591Z     |     )
2025-07-16T13:06:51.867426419Z     |     ^
2025-07-16T13:06:51.867427178Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:06:51.867428164Z     |     return await dependant.call(**values)
2025-07-16T13:06:51.867429008Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867429831Z     |   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:06:51.867430717Z     |     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:06:51.867431764Z     |                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:06:51.867432653Z     |         streamer.id,
2025-07-16T13:06:51.867433458Z     |         ^^^^^^^^^^^^
2025-07-16T13:06:51.867434262Z     |         streamer.profile_image_url
2025-07-16T13:06:51.867435119Z     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867435942Z     |     ),
2025-07-16T13:06:51.867436737Z     |     ^
2025-07-16T13:06:51.867437498Z     | TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:06:51.867438435Z     +------------------------------------
2025-07-16T13:06:51.867439280Z 
2025-07-16T13:06:51.867440093Z During handling of the above exception, another exception occurred:
2025-07-16T13:06:51.867440955Z 
2025-07-16T13:06:51.867441700Z Traceback (most recent call last):
2025-07-16T13:06:51.867442537Z   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:06:51.867443447Z     return await self.app(scope, receive, send)
2025-07-16T13:06:51.867444284Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867445206Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.867446151Z     with collapse_excgroups():
2025-07-16T13:06:51.867447095Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.867447945Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.867448847Z     self.gen.throw(value)
2025-07-16T13:06:51.867449660Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.867450454Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.867451370Z     raise exc
2025-07-16T13:06:51.867452177Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.867453089Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.867454742Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867455608Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:06:51.867456519Z     response = await call_next(request)
2025-07-16T13:06:51.867457330Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867458157Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.867459081Z     raise app_exc
2025-07-16T13:06:51.867459888Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.867460787Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.867461652Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.867462562Z     with collapse_excgroups():
2025-07-16T13:06:51.867463377Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.867464198Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.867465093Z     self.gen.throw(value)
2025-07-16T13:06:51.867465882Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.867466894Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.867467837Z     raise exc
2025-07-16T13:06:51.867468650Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.867469570Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.867470426Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867471259Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:06:51.867472116Z     response = await call_next(request)
2025-07-16T13:06:51.867472926Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867473750Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.867474670Z     raise app_exc
2025-07-16T13:06:51.867475464Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.867476355Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.867477223Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.867478127Z     with collapse_excgroups():
2025-07-16T13:06:51.867478940Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.867479760Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.867480670Z     self.gen.throw(value)
2025-07-16T13:06:51.867481470Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.867484809Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.867492381Z     raise exc
2025-07-16T13:06:51.867493188Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.867494141Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.867495004Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867495859Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:06:51.867496751Z     response = await call_next(request)
2025-07-16T13:06:51.867497566Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867498387Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.867499294Z     raise app_exc
2025-07-16T13:06:51.867500068Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.867500965Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.867501801Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.867502720Z     with collapse_excgroups():
2025-07-16T13:06:51.867503557Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.867504376Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.867505267Z     self.gen.throw(value)
2025-07-16T13:06:51.867506063Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.867506992Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.867507942Z     raise exc
2025-07-16T13:06:51.867508700Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.867509630Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.867510506Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867511380Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:06:51.867512302Z     response = await call_next(request)
2025-07-16T13:06:51.867513131Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867513948Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.867514866Z     raise app_exc
2025-07-16T13:06:51.867515654Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.867516558Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.867517416Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:06:51.867518326Z     await self.app(scope, receive, send)
2025-07-16T13:06:51.867520168Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:06:51.867521133Z     await self.app(scope, receive, send)
2025-07-16T13:06:51.867521950Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:06:51.867522870Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:06:51.867523731Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:06:51.867524646Z     raise exc
2025-07-16T13:06:51.867525449Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:06:51.867526354Z     await app(scope, receive, sender)
2025-07-16T13:06:51.867527159Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:06:51.867528063Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:06:51.867528894Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:06:51.867529802Z     await route.handle(scope, receive, send)
2025-07-16T13:06:51.867530636Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:06:51.867531535Z     await self.app(scope, receive, send)
2025-07-16T13:06:51.867532372Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:06:51.867533263Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:06:51.867534266Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:06:51.867535215Z     raise exc
2025-07-16T13:06:51.867535970Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:06:51.867536889Z     await app(scope, receive, sender)
2025-07-16T13:06:51.867537701Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:06:51.867538579Z     response = await f(request)
2025-07-16T13:06:51.867539443Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867540245Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:06:51.867541131Z     raw_response = await run_endpoint_function(
2025-07-16T13:06:51.867541965Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867542781Z     ...<3 lines>...
2025-07-16T13:06:51.867543655Z     )
2025-07-16T13:06:51.867544459Z     ^
2025-07-16T13:06:51.867545225Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:06:51.867547014Z     return await dependant.call(**values)
2025-07-16T13:06:51.867547859Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867548672Z   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:06:51.867549572Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:06:51.867550505Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:06:51.867551378Z         streamer.id,
2025-07-16T13:06:51.867552190Z         ^^^^^^^^^^^^
2025-07-16T13:06:51.867552987Z         streamer.profile_image_url
2025-07-16T13:06:51.867553833Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867554661Z     ),
2025-07-16T13:06:51.867555445Z     ^
2025-07-16T13:06:51.867556205Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:06:51.867557130Z 
2025-07-16T13:06:51.867557892Z During handling of the above exception, another exception occurred:
2025-07-16T13:06:51.867558782Z 
2025-07-16T13:06:51.867559527Z Traceback (most recent call last):
2025-07-16T13:06:51.867560344Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
2025-07-16T13:06:51.867561267Z     await self.app(scope, receive, _send)
2025-07-16T13:06:51.867562085Z   File "/app/app/middleware/auth.py", line 70, in __call__
2025-07-16T13:06:51.867562989Z     return await self.app(scope, receive, send)
2025-07-16T13:06:51.867563806Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867564635Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.867565562Z     with collapse_excgroups():
2025-07-16T13:06:51.867566388Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.867567217Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.867568132Z     self.gen.throw(value)
2025-07-16T13:06:51.867569239Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.867570065Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.867570995Z     raise exc
2025-07-16T13:06:51.867571904Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.867572848Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.867573694Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867574578Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:06:51.867575436Z     response = await call_next(request)
2025-07-16T13:06:51.867576256Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867577870Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.867578808Z     raise app_exc
2025-07-16T13:06:51.867579590Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.867580493Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.867581344Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.867582291Z     with collapse_excgroups():
2025-07-16T13:06:51.867583104Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.867583915Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.867584800Z     self.gen.throw(value)
2025-07-16T13:06:51.867585615Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.867586401Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.867587338Z     raise exc
2025-07-16T13:06:51.867588112Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.867589054Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.867589895Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867590719Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:06:51.867591577Z     response = await call_next(request)
2025-07-16T13:06:51.867592409Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867593233Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.867594143Z     raise app_exc
2025-07-16T13:06:51.867594927Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.867595931Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.867596778Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.867597681Z     with collapse_excgroups():
2025-07-16T13:06:51.867598484Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.867599296Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.867600187Z     self.gen.throw(value)
2025-07-16T13:06:51.867600993Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.867601867Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.867602817Z     raise exc
2025-07-16T13:06:51.867603582Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.867604486Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.867606485Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867607344Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:06:51.867608214Z     response = await call_next(request)
2025-07-16T13:06:51.867609015Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867609833Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.867610766Z     raise app_exc
2025-07-16T13:06:51.867611547Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.867612447Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.867613287Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.867614186Z     with collapse_excgroups():
2025-07-16T13:06:51.867614990Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.867615802Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.867616689Z     self.gen.throw(value)
2025-07-16T13:06:51.867617494Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.867618272Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.867619195Z     raise exc
2025-07-16T13:06:51.867619950Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.867620872Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.867621706Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867622541Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:06:51.867623407Z     response = await call_next(request)
2025-07-16T13:06:51.867624250Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867625087Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.867626017Z     raise app_exc
2025-07-16T13:06:51.867626796Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.867627693Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.867628544Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:06:51.867629459Z     await self.app(scope, receive, send)
2025-07-16T13:06:51.867630266Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:06:51.867631198Z     await self.app(scope, receive, send)
2025-07-16T13:06:51.867632099Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:06:51.867633781Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:06:51.867634694Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:06:51.867635628Z     raise exc
2025-07-16T13:06:51.867636404Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:06:51.867637307Z     await app(scope, receive, sender)
2025-07-16T13:06:51.867638134Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:06:51.867639042Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:06:51.867639889Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:06:51.867640785Z     await route.handle(scope, receive, send)
2025-07-16T13:06:51.867641611Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:06:51.867642498Z     await self.app(scope, receive, send)
2025-07-16T13:06:51.867643320Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:06:51.867644206Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:06:51.867645088Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:06:51.867646034Z     raise exc
2025-07-16T13:06:51.867646806Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:06:51.867647716Z     await app(scope, receive, sender)
2025-07-16T13:06:51.867648534Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:06:51.867649475Z     response = await f(request)
2025-07-16T13:06:51.867650300Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867651119Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:06:51.867652001Z     raw_response = await run_endpoint_function(
2025-07-16T13:06:51.867652839Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867653666Z     ...<3 lines>...
2025-07-16T13:06:51.867654498Z     )
2025-07-16T13:06:51.867655268Z     ^
2025-07-16T13:06:51.867656009Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:06:51.867656929Z     return await dependant.call(**values)
2025-07-16T13:06:51.867657745Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867658564Z   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:06:51.867659462Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:06:51.867661011Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:06:51.867661919Z         streamer.id,
2025-07-16T13:06:51.867662827Z         ^^^^^^^^^^^^
2025-07-16T13:06:51.867663645Z         streamer.profile_image_url
2025-07-16T13:06:51.867664461Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.867665274Z     ),
2025-07-16T13:06:51.867666047Z     ^
2025-07-16T13:06:51.867666839Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:06:51.867667775Z INFO:     172.23.0.1:53716 - "GET /api/streamers HTTP/1.1" 500 Internal Server Error
2025-07-16T13:06:51.876709350Z ERROR:    Exception in ASGI application
2025-07-16T13:06:51.876711660Z   + Exception Group Traceback (most recent call last):
2025-07-16T13:06:51.876712601Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
2025-07-16T13:06:51.876713674Z   |     yield
2025-07-16T13:06:51.876714505Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 186, in __call__
2025-07-16T13:06:51.876715460Z   |     async with anyio.create_task_group() as task_group:
2025-07-16T13:06:51.876716413Z   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.876717225Z   |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
2025-07-16T13:06:51.876718151Z   |     raise BaseExceptionGroup(
2025-07-16T13:06:51.876718990Z   |         "unhandled errors in a TaskGroup", self._exceptions
2025-07-16T13:06:51.876719914Z   |     ) from None
2025-07-16T13:06:51.876720707Z   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
2025-07-16T13:06:51.876721572Z   +-+---------------- 1 ----------------
2025-07-16T13:06:51.876722407Z     | Traceback (most recent call last):
2025-07-16T13:06:51.876723253Z     |   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:06:51.876724144Z     |     return await self.app(scope, receive, send)
2025-07-16T13:06:51.876724986Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876725891Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.876726821Z     |     with collapse_excgroups():
2025-07-16T13:06:51.876727643Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.876728466Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.876729372Z     |     self.gen.throw(value)
2025-07-16T13:06:51.876730224Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.876731021Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.876733430Z     |     raise exc
2025-07-16T13:06:51.876734250Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.876735182Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.876736045Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876736910Z     |   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:06:51.876737829Z     |     response = await call_next(request)
2025-07-16T13:06:51.876738672Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876739482Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.876740411Z     |     raise app_exc
2025-07-16T13:06:51.876741350Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.876742347Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.876743207Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.876744128Z     |     with collapse_excgroups():
2025-07-16T13:06:51.876744942Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.876745789Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.876746674Z     |     self.gen.throw(value)
2025-07-16T13:06:51.876747488Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.876748279Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.876749220Z     |     raise exc
2025-07-16T13:06:51.876750003Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.876750910Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.876751768Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876752633Z     |   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:06:51.876753520Z     |     response = await call_next(request)
2025-07-16T13:06:51.876754372Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876755189Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.876756114Z     |     raise app_exc
2025-07-16T13:06:51.876756902Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.876757815Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.876758663Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.876760471Z     |     with collapse_excgroups():
2025-07-16T13:06:51.876761323Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.876762133Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.876763033Z     |     self.gen.throw(value)
2025-07-16T13:06:51.876763844Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.876764629Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.876765578Z     |     raise exc
2025-07-16T13:06:51.876766350Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.876767313Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.876768166Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876769030Z     |   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:06:51.876769925Z     |     response = await call_next(request)
2025-07-16T13:06:51.876770846Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876771684Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.876772599Z     |     raise app_exc
2025-07-16T13:06:51.876773416Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.876775104Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.876775997Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.876776925Z     |     with collapse_excgroups():
2025-07-16T13:06:51.876777750Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.876778582Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.876779476Z     |     self.gen.throw(value)
2025-07-16T13:06:51.876780285Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.876781071Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.876782067Z     |     raise exc
2025-07-16T13:06:51.876782855Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.876783780Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.876784630Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876785487Z     |   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:06:51.876786393Z     |     response = await call_next(request)
2025-07-16T13:06:51.876787981Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876788853Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.876789795Z     |     raise app_exc
2025-07-16T13:06:51.876790594Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.876791514Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.876792372Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:06:51.876793292Z     |     await self.app(scope, receive, send)
2025-07-16T13:06:51.876794108Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:06:51.876795037Z     |     await self.app(scope, receive, send)
2025-07-16T13:06:51.876795868Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:06:51.876796805Z     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:06:51.876797811Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:06:51.876798825Z     |     raise exc
2025-07-16T13:06:51.876799616Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:06:51.876800573Z     |     await app(scope, receive, sender)
2025-07-16T13:06:51.876801386Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:06:51.876802297Z     |     await self.middleware_stack(scope, receive, send)
2025-07-16T13:06:51.876803137Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:06:51.876804071Z     |     await route.handle(scope, receive, send)
2025-07-16T13:06:51.876804889Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:06:51.876805816Z     |     await self.app(scope, receive, send)
2025-07-16T13:06:51.876806640Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:06:51.876807543Z     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:06:51.876808383Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:06:51.876809296Z     |     raise exc
2025-07-16T13:06:51.876810092Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:06:51.876811023Z     |     await app(scope, receive, sender)
2025-07-16T13:06:51.876811842Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:06:51.876813576Z     |     response = await f(request)
2025-07-16T13:06:51.876814408Z     |                ^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876815255Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:06:51.876816168Z     |     raw_response = await run_endpoint_function(
2025-07-16T13:06:51.876817007Z     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876817842Z     |     ...<3 lines>...
2025-07-16T13:06:51.876818733Z     |     )
2025-07-16T13:06:51.876819556Z     |     ^
2025-07-16T13:06:51.876820328Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:06:51.876821271Z     |     return await dependant.call(**values)
2025-07-16T13:06:51.876822086Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876822984Z     |   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:06:51.876823886Z     |     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:06:51.876824816Z     |                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:06:51.876825713Z     |         streamer.id,
2025-07-16T13:06:51.876826593Z     |         ^^^^^^^^^^^^
2025-07-16T13:06:51.876827412Z     |         streamer.profile_image_url
2025-07-16T13:06:51.876828263Z     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876829074Z     |     ),
2025-07-16T13:06:51.876829856Z     |     ^
2025-07-16T13:06:51.876830643Z     | TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:06:51.876831549Z     +------------------------------------
2025-07-16T13:06:51.876832391Z 
2025-07-16T13:06:51.876833177Z During handling of the above exception, another exception occurred:
2025-07-16T13:06:51.876834028Z 
2025-07-16T13:06:51.876834771Z Traceback (most recent call last):
2025-07-16T13:06:51.876835587Z   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:06:51.876836465Z     return await self.app(scope, receive, send)
2025-07-16T13:06:51.876837278Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876838100Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.876839061Z     with collapse_excgroups():
2025-07-16T13:06:51.876839874Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.876840668Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.876841569Z     self.gen.throw(value)
2025-07-16T13:06:51.876842366Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.876844027Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.876844996Z     raise exc
2025-07-16T13:06:51.876845782Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.876846731Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.876847576Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876848436Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:06:51.876849331Z     response = await call_next(request)
2025-07-16T13:06:51.876850157Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876850984Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.876851912Z     raise app_exc
2025-07-16T13:06:51.876852704Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.876853660Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.876854508Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.876855413Z     with collapse_excgroups():
2025-07-16T13:06:51.876856225Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.876857035Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.876857921Z     self.gen.throw(value)
2025-07-16T13:06:51.876858720Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.876859507Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.876860445Z     raise exc
2025-07-16T13:06:51.876861311Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.876862233Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.876863078Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876863929Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:06:51.876864811Z     response = await call_next(request)
2025-07-16T13:06:51.876865630Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876866454Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.876867376Z     raise app_exc
2025-07-16T13:06:51.876868175Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.876869077Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.876869919Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.876871729Z     with collapse_excgroups():
2025-07-16T13:06:51.876872578Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.876873412Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.876874294Z     self.gen.throw(value)
2025-07-16T13:06:51.876875111Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.876875904Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.876876836Z     raise exc
2025-07-16T13:06:51.876877608Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.876878526Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.876879379Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876880225Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:06:51.876881073Z     response = await call_next(request)
2025-07-16T13:06:51.876881939Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876882755Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.876883661Z     raise app_exc
2025-07-16T13:06:51.876884450Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.876885359Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.876886217Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.876887126Z     with collapse_excgroups():
2025-07-16T13:06:51.876887947Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.876888790Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.876889665Z     self.gen.throw(value)
2025-07-16T13:06:51.876890477Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.876891280Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.876892233Z     raise exc
2025-07-16T13:06:51.876893453Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.876894656Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.876895491Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876896368Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:06:51.876897231Z     response = await call_next(request)
2025-07-16T13:06:51.876898034Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876898856Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.876900592Z     raise app_exc
2025-07-16T13:06:51.876901397Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.876902289Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.876903132Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:06:51.876904059Z     await self.app(scope, receive, send)
2025-07-16T13:06:51.876904898Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:06:51.876905798Z     await self.app(scope, receive, send)
2025-07-16T13:06:51.876906619Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:06:51.876907530Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:06:51.876908411Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:06:51.876909345Z     raise exc
2025-07-16T13:06:51.876910116Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:06:51.876911036Z     await app(scope, receive, sender)
2025-07-16T13:06:51.876911865Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:06:51.876912779Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:06:51.876913630Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:06:51.876914586Z     await route.handle(scope, receive, send)
2025-07-16T13:06:51.876915415Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:06:51.876916316Z     await self.app(scope, receive, send)
2025-07-16T13:06:51.876917137Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:06:51.876918079Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:06:51.876918939Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:06:51.876919849Z     raise exc
2025-07-16T13:06:51.876920752Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:06:51.876921700Z     await app(scope, receive, sender)
2025-07-16T13:06:51.876922552Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:06:51.876923435Z     response = await f(request)
2025-07-16T13:06:51.876924258Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876925085Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:06:51.876925979Z     raw_response = await run_endpoint_function(
2025-07-16T13:06:51.876927556Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876928417Z     ...<3 lines>...
2025-07-16T13:06:51.876929244Z     )
2025-07-16T13:06:51.876930014Z     ^
2025-07-16T13:06:51.876930766Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:06:51.876931710Z     return await dependant.call(**values)
2025-07-16T13:06:51.876932585Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876933398Z   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:06:51.876934268Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:06:51.876935167Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:06:51.876936030Z         streamer.id,
2025-07-16T13:06:51.876936853Z         ^^^^^^^^^^^^
2025-07-16T13:06:51.876937652Z         streamer.profile_image_url
2025-07-16T13:06:51.876938465Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876939302Z     ),
2025-07-16T13:06:51.876940083Z     ^
2025-07-16T13:06:51.876940845Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:06:51.876941746Z 
2025-07-16T13:06:51.876942497Z During handling of the above exception, another exception occurred:
2025-07-16T13:06:51.876943352Z 
2025-07-16T13:06:51.876944094Z Traceback (most recent call last):
2025-07-16T13:06:51.876944918Z   File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
2025-07-16T13:06:51.876945877Z     result = await app(  # type: ignore[func-returns-value]
2025-07-16T13:06:51.876946726Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876947564Z         self.scope, self.receive, self.send
2025-07-16T13:06:51.876948375Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876949198Z     )
2025-07-16T13:06:51.876949982Z     ^
2025-07-16T13:06:51.876950746Z   File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2025-07-16T13:06:51.876951662Z     return await self.app(scope, receive, send)
2025-07-16T13:06:51.876952497Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876953324Z   File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
2025-07-16T13:06:51.876954245Z     await super().__call__(scope, receive, send)
2025-07-16T13:06:51.876955074Z   File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
2025-07-16T13:06:51.876956049Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:06:51.876957720Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
2025-07-16T13:06:51.876958686Z     raise exc
2025-07-16T13:06:51.876959449Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
2025-07-16T13:06:51.876960375Z     await self.app(scope, receive, _send)
2025-07-16T13:06:51.876961193Z   File "/app/app/middleware/auth.py", line 70, in __call__
2025-07-16T13:06:51.876962083Z     return await self.app(scope, receive, send)
2025-07-16T13:06:51.876962904Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876963728Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.876964647Z     with collapse_excgroups():
2025-07-16T13:06:51.876965450Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.876966283Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.876967199Z     self.gen.throw(value)
2025-07-16T13:06:51.876967987Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.876968769Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.876969698Z     raise exc
2025-07-16T13:06:51.876970496Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.876971404Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.876972244Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876973090Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:06:51.876973976Z     response = await call_next(request)
2025-07-16T13:06:51.876974796Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876975619Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.876976524Z     raise app_exc
2025-07-16T13:06:51.876977294Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.876978197Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.876979044Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.876979946Z     with collapse_excgroups():
2025-07-16T13:06:51.876980771Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.876981575Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.876982446Z     self.gen.throw(value)
2025-07-16T13:06:51.876983262Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.876984053Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.876985755Z     raise exc
2025-07-16T13:06:51.876986528Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.876987444Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.876988461Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876989349Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:06:51.876990204Z     response = await call_next(request)
2025-07-16T13:06:51.876991018Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.876991836Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.876992757Z     raise app_exc
2025-07-16T13:06:51.876993539Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.876994446Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.876995343Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.876996260Z     with collapse_excgroups():
2025-07-16T13:06:51.876997135Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.876997935Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.876998836Z     self.gen.throw(value)
2025-07-16T13:06:51.876999629Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.877000418Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.877001343Z     raise exc
2025-07-16T13:06:51.877002200Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.877003505Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.877004357Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.877005210Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:06:51.877006089Z     response = await call_next(request)
2025-07-16T13:06:51.877006897Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.877007746Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.877008653Z     raise app_exc
2025-07-16T13:06:51.877009464Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.877010370Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.877011226Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:06:51.877012152Z     with collapse_excgroups():
2025-07-16T13:06:51.877013718Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:06:51.877014535Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:06:51.877015448Z     self.gen.throw(value)
2025-07-16T13:06:51.877016250Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:06:51.877017060Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:06:51.877017997Z     raise exc
2025-07-16T13:06:51.877018767Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:06:51.877019744Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:06:51.877020590Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.877021440Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:06:51.877022322Z     response = await call_next(request)
2025-07-16T13:06:51.877023138Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.877023977Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:06:51.877024883Z     raise app_exc
2025-07-16T13:06:51.877025662Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:06:51.877026563Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:06:51.877027389Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:06:51.877028297Z     await self.app(scope, receive, send)
2025-07-16T13:06:51.877029110Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:06:51.877030025Z     await self.app(scope, receive, send)
2025-07-16T13:06:51.877030853Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:06:51.877031765Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:06:51.877032627Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:06:51.877033637Z     raise exc
2025-07-16T13:06:51.877034417Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:06:51.877035336Z     await app(scope, receive, sender)
2025-07-16T13:06:51.877036148Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:06:51.877037063Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:06:51.877037918Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:06:51.877038809Z     await route.handle(scope, receive, send)
2025-07-16T13:06:51.877040415Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:06:51.877041344Z     await self.app(scope, receive, send)
2025-07-16T13:06:51.877042184Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:06:51.877043098Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:06:51.877043951Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:06:51.877044867Z     raise exc
2025-07-16T13:06:51.877045663Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:06:51.877046765Z     await app(scope, receive, sender)
2025-07-16T13:06:51.877047603Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:06:51.877048499Z     response = await f(request)
2025-07-16T13:06:51.877049313Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.877050126Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:06:51.877051017Z     raw_response = await run_endpoint_function(
2025-07-16T13:06:51.877051846Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.877052698Z     ...<3 lines>...
2025-07-16T13:06:51.877053529Z     )
2025-07-16T13:06:51.877054293Z     ^
2025-07-16T13:06:51.877055066Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:06:51.877055993Z     return await dependant.call(**values)
2025-07-16T13:06:51.877056808Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.877057612Z   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:06:51.877058472Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:06:51.877059381Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:06:51.877060230Z         streamer.id,
2025-07-16T13:06:51.877061032Z         ^^^^^^^^^^^^
2025-07-16T13:06:51.877061828Z         streamer.profile_image_url
2025-07-16T13:06:51.877062634Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:06:51.877063443Z     ),
2025-07-16T13:06:51.877064219Z     ^
2025-07-16T13:06:51.877064994Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:07:01.573549561Z 2025-07-16 15:07:01,573 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:07:01.572941'}
2025-07-16T13:07:01.573854007Z 2025-07-16 15:07:01,573 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=53712)
2025-07-16T13:07:01.573864588Z 2025-07-16 15:07:01,573 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:07:01.573865894Z 2025-07-16 15:07:01,573 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:07:11.575692945Z 2025-07-16 15:07:11,575 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:07:11.575500'}
2025-07-16T13:07:11.575955777Z 2025-07-16 15:07:11,575 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=53712)
2025-07-16T13:07:11.575959333Z 2025-07-16 15:07:11,575 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:07:11.575973551Z 2025-07-16 15:07:11,575 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:07:21.565440175Z 2025-07-16 15:07:21,565 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16T13:07:21.568226147Z 2025-07-16 15:07:21,568 - streamvault - INFO - Requested sync for 1 streamers
2025-07-16T13:07:21.574301027Z 2025-07-16 15:07:21,574 - streamvault - INFO - Requested sync for 1 popular categories
2025-07-16T13:07:21.574463230Z 2025-07-16 15:07:21,574 - streamvault - INFO - Delayed initial image sync completed
2025-07-16T13:07:21.574759959Z 2025-07-16 15:07:21,574 - streamvault - INFO - Syncing profile image for streamer 1
2025-07-16T13:07:21.578704022Z 2025-07-16 15:07:21,578 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:07:21.578258'}
2025-07-16T13:07:21.579645676Z 2025-07-16 15:07:21,579 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=53712)
2025-07-16T13:07:21.579767313Z 2025-07-16 15:07:21,579 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:07:21.579858871Z 2025-07-16 15:07:21,579 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:07:22.075661520Z 2025-07-16 15:07:22,075 - streamvault - INFO - Syncing category image for Just Chatting
2025-07-16T13:07:31.587127612Z 2025-07-16 15:07:31,586 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:07:31.586626'}
2025-07-16T13:07:31.587695742Z 2025-07-16 15:07:31,587 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=53712)
2025-07-16T13:07:31.587748487Z 2025-07-16 15:07:31,587 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:07:31.587983129Z 2025-07-16 15:07:31,587 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:07:41.594476404Z 2025-07-16 15:07:41,593 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:07:41.593859'}
2025-07-16T13:07:41.594991743Z 2025-07-16 15:07:41,594 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=53712)
2025-07-16T13:07:41.595170015Z 2025-07-16 15:07:41,594 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:07:41.595293797Z 2025-07-16 15:07:41,595 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:07:51.601222944Z 2025-07-16 15:07:51,600 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:07:51.600651'}
2025-07-16T13:07:51.602090382Z 2025-07-16 15:07:51,601 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=53712)
2025-07-16T13:07:51.602260805Z 2025-07-16 15:07:51,602 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:07:51.602425571Z 2025-07-16 15:07:51,602 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:08:01.604753147Z 2025-07-16 15:08:01,604 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:08:01.604522'}
2025-07-16T13:08:01.604940842Z 2025-07-16 15:08:01,604 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=53712)
2025-07-16T13:08:01.604952066Z 2025-07-16 15:08:01,604 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:08:01.604956007Z 2025-07-16 15:08:01,604 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:08:11.608588427Z 2025-07-16 15:08:11,608 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:08:11.608051'}
2025-07-16T13:08:11.609216923Z 2025-07-16 15:08:11,608 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=53712)
2025-07-16T13:08:11.609402305Z 2025-07-16 15:08:11,609 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:08:11.609442338Z 2025-07-16 15:08:11,609 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:08:21.615476497Z 2025-07-16 15:08:21,614 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:08:21.614855'}
2025-07-16T13:08:21.616075565Z 2025-07-16 15:08:21,615 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=53712)
2025-07-16T13:08:21.616189252Z 2025-07-16 15:08:21,615 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:08:21.616252409Z 2025-07-16 15:08:21,616 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:08:31.621749588Z 2025-07-16 15:08:31,621 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:08:31.621276'}
2025-07-16T13:08:31.622402362Z 2025-07-16 15:08:31,622 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=53712)
2025-07-16T13:08:31.622557932Z 2025-07-16 15:08:31,622 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:08:31.622748557Z 2025-07-16 15:08:31,622 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:08:37.080918404Z 2025-07-16 15:08:37,080 - streamvault - INFO - ðŸ“ž WebSocket disconnected: 87.190.33.10
2025-07-16T13:08:37.080985993Z 2025-07-16 15:08:37,080 - streamvault - INFO - ðŸ”Œ WebSocket disconnected: 87.190.33.10 (ID: 135355253800336) - Remaining: 0 total, 0 from this client
2025-07-16T13:08:37.081279112Z INFO:     connection closed
2025-07-16T13:08:37.141150517Z 2025-07-16 15:08:37,140 - streamvault - INFO - Request b8af95cf-135e-44b7-8859-f76218766701: GET /
2025-07-16T13:08:37.141955599Z 2025-07-16 15:08:37,141 - streamvault - DEBUG - Incoming request: GET /
2025-07-16T13:08:37.151585402Z 2025-07-16 15:08:37,151 - streamvault - INFO - Serving root index.html from: app/frontend/dist/index.html
2025-07-16T13:08:37.152836434Z 2025-07-16 15:08:37,152 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.153660617Z INFO:     172.23.0.1:56132 - "GET / HTTP/1.1" 200 OK
2025-07-16T13:08:37.304194558Z 2025-07-16 15:08:37,303 - streamvault - INFO - Request 65155c30-8a7b-439a-baec-2e06f72e4645: GET /assets/vue-vendor-DOrOIFu1.js
2025-07-16T13:08:37.304813996Z 2025-07-16 15:08:37,304 - streamvault - DEBUG - Incoming request: GET /assets/vue-vendor-DOrOIFu1.js
2025-07-16T13:08:37.306273108Z 2025-07-16 15:08:37,306 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.306441558Z 2025-07-16 15:08:37,306 - streamvault - INFO - Request b3f52299-ff7e-4dc2-9358-08e8aad774d2: GET /assets/index-pVBqnH27.js
2025-07-16T13:08:37.306636780Z 2025-07-16 15:08:37,306 - streamvault - DEBUG - Incoming request: GET /assets/index-pVBqnH27.js
2025-07-16T13:08:37.306887728Z INFO:     172.23.0.1:56132 - "GET /assets/vue-vendor-DOrOIFu1.js HTTP/1.1" 200 OK
2025-07-16T13:08:37.307981335Z 2025-07-16 15:08:37,307 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.308117912Z INFO:     172.23.0.1:56140 - "GET /assets/index-pVBqnH27.js HTTP/1.1" 200 OK
2025-07-16T13:08:37.320795578Z 2025-07-16 15:08:37,320 - streamvault - INFO - Request f0df77c4-ba48-461b-9f36-a4863a4f7883: GET /assets/index-EzjA6dWj.css
2025-07-16T13:08:37.321449057Z 2025-07-16 15:08:37,321 - streamvault - DEBUG - Incoming request: GET /assets/index-EzjA6dWj.css
2025-07-16T13:08:37.323500830Z 2025-07-16 15:08:37,323 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.324444961Z INFO:     172.23.0.1:56140 - "GET /assets/index-EzjA6dWj.css HTTP/1.1" 200 OK
2025-07-16T13:08:37.349422889Z 2025-07-16 15:08:37,349 - streamvault - INFO - Request 9d7e8fbd-40d9-4742-b42b-3af3ed1d9a0e: GET /registerSW.js
2025-07-16T13:08:37.350154960Z 2025-07-16 15:08:37,349 - streamvault - DEBUG - Incoming request: GET /registerSW.js
2025-07-16T13:08:37.353992467Z 2025-07-16 15:08:37,353 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.354795899Z INFO:     172.23.0.1:56140 - "GET /registerSW.js HTTP/1.1" 200 OK
2025-07-16T13:08:37.424547372Z 2025-07-16 15:08:37,424 - streamvault - DEBUG - Request eac6f0bc-9e04-48f5-8e28-5ed6c40aa213: GET /api/background-queue/stats
2025-07-16T13:08:37.430856541Z 2025-07-16 15:08:37,430 - streamvault - DEBUG - Request 35cfc48e-ca77-4e93-b067-24c78d2d4160: GET /api/background-queue/active-tasks
2025-07-16T13:08:37.431162710Z 2025-07-16 15:08:37,431 - streamvault - DEBUG - Incoming request: GET /api/background-queue/stats
2025-07-16T13:08:37.431972383Z 2025-07-16 15:08:37,431 - streamvault - DEBUG - Background queue stats requested via REST API (consider WebSocket)
2025-07-16T13:08:37.432468184Z 2025-07-16 15:08:37,432 - streamvault - DEBUG - Incoming request: GET /api/background-queue/active-tasks
2025-07-16T13:08:37.433153978Z 2025-07-16 15:08:37,433 - streamvault - DEBUG - Background queue active tasks requested via REST API (consider WebSocket)
2025-07-16T13:08:37.433669404Z 2025-07-16 15:08:37,433 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.436669437Z 2025-07-16 15:08:37,436 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.436835928Z 2025-07-16 15:08:37,436 - streamvault - INFO - Request 8cf83a41-2ed3-4666-9c40-e1988f57c231: GET /api/background-queue/recent-tasks
2025-07-16T13:08:37.437361969Z 2025-07-16 15:08:37,437 - streamvault - INFO - Request 20a5e87e-341a-4b74-8f65-cbabcce84812: GET /assets/pwaDebug-DEAyeGsa.js
2025-07-16T13:08:37.475454354Z 2025-07-16 15:08:37,475 - streamvault - DEBUG - Incoming request: GET /api/background-queue/recent-tasks
2025-07-16T13:08:37.475590146Z 2025-07-16 15:08:37,475 - streamvault - INFO - Request b6ed4351-b2c7-4205-bd58-bc6751fab4ad: GET /assets/workbox-window.prod.es5-B9K5rw8f.js
2025-07-16T13:08:37.476260995Z 2025-07-16 15:08:37,476 - streamvault - DEBUG - Incoming request: GET /assets/pwaDebug-DEAyeGsa.js
2025-07-16T13:08:37.476718804Z 2025-07-16 15:08:37,476 - streamvault - DEBUG - Incoming request: GET /assets/workbox-window.prod.es5-B9K5rw8f.js
2025-07-16T13:08:37.476786801Z 2025-07-16 15:08:37,476 - streamvault - INFO - Request 658e7eca-6d66-49be-95ce-77706a6edcc9: GET /auth/setup
2025-07-16T13:08:37.476910955Z INFO:     172.23.0.1:56140 - "GET /api/background-queue/stats HTTP/1.1" 200 OK
2025-07-16T13:08:37.477003945Z 2025-07-16 15:08:37,476 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.477346440Z INFO:     172.23.0.1:56132 - "GET /api/background-queue/active-tasks HTTP/1.1" 200 OK
2025-07-16T13:08:37.477474998Z 2025-07-16 15:08:37,477 - streamvault - DEBUG - Incoming request: GET /auth/setup
2025-07-16T13:08:37.478613879Z INFO:     172.23.0.1:56150 - "GET /api/background-queue/recent-tasks HTTP/1.1" 200 OK
2025-07-16T13:08:37.479792697Z 2025-07-16 15:08:37,479 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.479920082Z 2025-07-16 15:08:37,479 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.481205487Z INFO:     172.23.0.1:56166 - "GET /assets/pwaDebug-DEAyeGsa.js HTTP/1.1" 200 OK
2025-07-16T13:08:37.481345430Z INFO:     172.23.0.1:56176 - "GET /assets/workbox-window.prod.es5-B9K5rw8f.js HTTP/1.1" 200 OK
2025-07-16T13:08:37.482312540Z 2025-07-16 15:08:37,482 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.482486013Z INFO:     172.23.0.1:56178 - "GET /auth/setup HTTP/1.1" 200 OK
2025-07-16T13:08:37.512930985Z 2025-07-16 15:08:37,512 - streamvault - DEBUG - Real client IP found in x-forwarded-for: 87.190.33.10
2025-07-16T13:08:37.513033829Z 2025-07-16 15:08:37,512 - streamvault - INFO - ðŸ“ž New WebSocket connection attempt from 87.190.33.10
2025-07-16T13:08:37.513193480Z INFO:     ('172.23.0.1', 56182) - "WebSocket /ws" [accepted]
2025-07-16T13:08:37.513298497Z 2025-07-16 15:08:37,513 - streamvault - DEBUG - Real client IP found in x-forwarded-for: 87.190.33.10
2025-07-16T13:08:37.513438276Z 2025-07-16 15:08:37,513 - streamvault - INFO - ðŸ”Œ WebSocket connected: 87.190.33.10 (via proxy 172.23.0.1) - Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:140.0... (ID: 135355253816544) - Total: 1 connections
2025-07-16T13:08:37.513981284Z INFO:     connection open
2025-07-16T13:08:37.570064760Z 2025-07-16 15:08:37,569 - streamvault - INFO - Request 56e12c21-e18d-49ad-8c18-cae06fc9e1f1: GET /auth/check
2025-07-16T13:08:37.570762265Z 2025-07-16 15:08:37,570 - streamvault - DEBUG - Incoming request: GET /auth/check
2025-07-16T13:08:37.580583725Z 2025-07-16 15:08:37,580 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.581720654Z INFO:     172.23.0.1:56132 - "GET /auth/check HTTP/1.1" 200 OK
2025-07-16T13:08:37.614783212Z 2025-07-16 15:08:37,614 - streamvault - INFO - Request 30a2c123-1f1b-4b5f-92c6-9bf054a1cd56: GET /apple-icon-180x180.png
2025-07-16T13:08:37.620787144Z 2025-07-16 15:08:37,620 - streamvault - INFO - Request 1038f3b7-3d6c-4dbc-8ecd-ecd09dd7e666: GET /favicon-16x16.png
2025-07-16T13:08:37.621168463Z 2025-07-16 15:08:37,621 - streamvault - DEBUG - Incoming request: GET /apple-icon-180x180.png
2025-07-16T13:08:37.624699744Z 2025-07-16 15:08:37,624 - streamvault - DEBUG - Incoming request: GET /favicon-16x16.png
2025-07-16T13:08:37.629344539Z 2025-07-16 15:08:37,629 - streamvault - INFO - Request 0be65f5a-b277-46c9-bba8-c87724998823: GET /assets/HomeView-BlgGuS-o.js
2025-07-16T13:08:37.631292495Z 2025-07-16 15:08:37,631 - streamvault - DEBUG - Incoming request: GET /assets/HomeView-BlgGuS-o.js
2025-07-16T13:08:37.632278005Z 2025-07-16 15:08:37,632 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.632516787Z 2025-07-16 15:08:37,632 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.636104403Z 2025-07-16 15:08:37,635 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.637919794Z INFO:     172.23.0.1:56196 - "GET /assets/HomeView-BlgGuS-o.js HTTP/1.1" 200 OK
2025-07-16T13:08:37.658084915Z 2025-07-16 15:08:37,657 - streamvault - INFO - Request 6473314d-eea4-420c-88ee-cee09278c12d: GET /assets/useStreamers-BfkmvEcg.js
2025-07-16T13:08:37.659775266Z 2025-07-16 15:08:37,659 - streamvault - DEBUG - Incoming request: GET /assets/useStreamers-BfkmvEcg.js
2025-07-16T13:08:37.661355536Z 2025-07-16 15:08:37,661 - streamvault - INFO - Request bd043904-3053-4d92-beaa-636b69b2f627: GET /assets/useRecordingSettings-D9Isbtwr.js
2025-07-16T13:08:37.662185823Z 2025-07-16 15:08:37,661 - streamvault - DEBUG - Incoming request: GET /assets/useRecordingSettings-D9Isbtwr.js
2025-07-16T13:08:37.664979776Z 2025-07-16 15:08:37,664 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.666634154Z 2025-07-16 15:08:37,666 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.667645349Z INFO:     172.23.0.1:56196 - "GET /assets/useStreamers-BfkmvEcg.js HTTP/1.1" 200 OK
2025-07-16T13:08:37.668456199Z INFO:     172.23.0.1:56198 - "GET /assets/useRecordingSettings-D9Isbtwr.js HTTP/1.1" 200 OK
2025-07-16T13:08:37.676624891Z 2025-07-16 15:08:37,676 - streamvault - INFO - Request 5eea62a7-2613-44c5-babd-6cafacff442d: GET /assets/HomeView-BZpDkFcy.css
2025-07-16T13:08:37.677736226Z 2025-07-16 15:08:37,677 - streamvault - DEBUG - Incoming request: GET /assets/HomeView-BZpDkFcy.css
2025-07-16T13:08:37.680530555Z 2025-07-16 15:08:37,680 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.682861683Z INFO:     172.23.0.1:56198 - "GET /assets/HomeView-BZpDkFcy.css HTTP/1.1" 200 OK
2025-07-16T13:08:37.732454811Z 2025-07-16 15:08:37,732 - streamvault - INFO - Request 7b250376-4763-42fe-9977-6cb812ebee49: GET /api/recording/active
2025-07-16T13:08:37.733671475Z 2025-07-16 15:08:37,733 - streamvault - INFO - Request 5f1994c3-9de5-4934-aa20-2a35c6b88f5b: GET /api/streamers
2025-07-16T13:08:37.734640104Z 2025-07-16 15:08:37,734 - streamvault - DEBUG - Incoming request: GET /api/recording/active
2025-07-16T13:08:37.734767663Z 2025-07-16 15:08:37,734 - streamvault - INFO - Request 5382d4c7-adef-4d76-8bb7-380d4fa07fb6: GET /api/streamers
2025-07-16T13:08:37.735039193Z 2025-07-16 15:08:37,735 - streamvault - DEBUG - Incoming request: GET /api/streamers
2025-07-16T13:08:37.735662985Z 2025-07-16 15:08:37,735 - streamvault - DEBUG - Incoming request: GET /api/streamers
2025-07-16T13:08:37.735723798Z 2025-07-16 15:08:37,735 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.736065562Z INFO:     172.23.0.1:56198 - "GET /api/recording/active HTTP/1.1" 200 OK
2025-07-16T13:08:37.748100067Z 2025-07-16 15:08:37,748 - streamvault - ERROR - Auth middleware error for /api/streamers: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:37.748305911Z 2025-07-16 15:08:37,748 - streamvault - INFO - Request 0e3529a8-a4d4-44cf-b387-a03f64bb36fa: GET /api/streamers
2025-07-16T13:08:37.748440584Z 2025-07-16 15:08:37,748 - streamvault - DEBUG - Incoming request: GET /api/streamers
2025-07-16T13:08:37.751599556Z 2025-07-16 15:08:37,751 - streamvault - ERROR - Auth middleware error for /api/streamers: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:37.751971154Z 2025-07-16 15:08:37,751 - streamvault - INFO - Request 2628a160-766a-4aaa-a7af-f4615cc0456c: GET /api/streamers
2025-07-16T13:08:37.752250700Z 2025-07-16 15:08:37,752 - streamvault - DEBUG - Incoming request: GET /api/streamers
2025-07-16T13:08:37.763575693Z 2025-07-16 15:08:37,755 - streamvault - ERROR - Error processing request: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:37.763588891Z   + Exception Group Traceback (most recent call last):
2025-07-16T13:08:37.763590393Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
2025-07-16T13:08:37.763591525Z   |     yield
2025-07-16T13:08:37.763592395Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 186, in __call__
2025-07-16T13:08:37.763593643Z   |     async with anyio.create_task_group() as task_group:
2025-07-16T13:08:37.763594532Z   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.763595399Z   |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
2025-07-16T13:08:37.763596332Z   |     raise BaseExceptionGroup(
2025-07-16T13:08:37.763597138Z   |         "unhandled errors in a TaskGroup", self._exceptions
2025-07-16T13:08:37.763598070Z   |     ) from None
2025-07-16T13:08:37.763599025Z   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
2025-07-16T13:08:37.763599939Z   +-+---------------- 1 ----------------
2025-07-16T13:08:37.763600829Z     | Traceback (most recent call last):
2025-07-16T13:08:37.763601700Z     |   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:08:37.763602699Z     |     return await self.app(scope, receive, send)
2025-07-16T13:08:37.763603535Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763604364Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.763605322Z     |     with collapse_excgroups():
2025-07-16T13:08:37.763606120Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.763606974Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.763607905Z     |     self.gen.throw(value)
2025-07-16T13:08:37.763608716Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.763609530Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.763610475Z     |     raise exc
2025-07-16T13:08:37.763611258Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.763612183Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.763613052Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763613908Z     |   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:37.763614835Z     |     response = await call_next(request)
2025-07-16T13:08:37.763615677Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763616880Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.763619192Z     |     raise app_exc
2025-07-16T13:08:37.763620023Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.763620949Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.763621793Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.763622960Z     |     with collapse_excgroups():
2025-07-16T13:08:37.763623817Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.763624651Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.763625570Z     |     self.gen.throw(value)
2025-07-16T13:08:37.763626459Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.763627253Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.763628188Z     |     raise exc
2025-07-16T13:08:37.763628976Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.763629897Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.763630775Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763631634Z     |   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:37.763632541Z     |     response = await call_next(request)
2025-07-16T13:08:37.763633375Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763634194Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.763635109Z     |     raise app_exc
2025-07-16T13:08:37.763635892Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.763636801Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.763637694Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.763638607Z     |     with collapse_excgroups():
2025-07-16T13:08:37.763639434Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.763640249Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.763641146Z     |     self.gen.throw(value)
2025-07-16T13:08:37.763641964Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.763642759Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.763643694Z     |     raise exc
2025-07-16T13:08:37.763644499Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.763645413Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.763647089Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763648159Z     |   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:37.763649108Z     |     response = await call_next(request)
2025-07-16T13:08:37.763649952Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763650767Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.763651700Z     |     raise app_exc
2025-07-16T13:08:37.763652714Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.763653624Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.763654469Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.763655373Z     |     with collapse_excgroups():
2025-07-16T13:08:37.763656205Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.763657011Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.763657901Z     |     self.gen.throw(value)
2025-07-16T13:08:37.763658720Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.763659537Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.763660472Z     |     raise exc
2025-07-16T13:08:37.763661246Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.763662157Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.763663010Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763663853Z     |   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:37.763664770Z     |     response = await call_next(request)
2025-07-16T13:08:37.763665605Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763666426Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.763667345Z     |     raise app_exc
2025-07-16T13:08:37.763668148Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.763669061Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.763669915Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:37.763670833Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:37.763671645Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:37.763673719Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:37.763674607Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:37.763675805Z     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:37.763676707Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.763677625Z     |     raise exc
2025-07-16T13:08:37.763678411Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.763679323Z     |     await app(scope, receive, sender)
2025-07-16T13:08:37.763680126Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:37.763681100Z     |     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:37.763682530Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:37.763683488Z     |     await route.handle(scope, receive, send)
2025-07-16T13:08:37.763684407Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:37.763685312Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:37.763686139Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:37.763687051Z     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:37.763687901Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.763688818Z     |     raise exc
2025-07-16T13:08:37.763689637Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.763690551Z     |     await app(scope, receive, sender)
2025-07-16T13:08:37.763691369Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:37.763692265Z     |     response = await f(request)
2025-07-16T13:08:37.763693093Z     |                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763693921Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:37.763694827Z     |     raw_response = await run_endpoint_function(
2025-07-16T13:08:37.763695653Z     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763696506Z     |     ...<3 lines>...
2025-07-16T13:08:37.763697532Z     |     )
2025-07-16T13:08:37.763698340Z     |     ^
2025-07-16T13:08:37.763699160Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:37.763700189Z     |     return await dependant.call(**values)
2025-07-16T13:08:37.763701767Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763702628Z     |   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:08:37.763703612Z     |     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:08:37.763704693Z     |                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:08:37.763705576Z     |         streamer.id,
2025-07-16T13:08:37.763706380Z     |         ^^^^^^^^^^^^
2025-07-16T13:08:37.763707183Z     |         streamer.profile_image_url
2025-07-16T13:08:37.763707990Z     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763708829Z     |     ),
2025-07-16T13:08:37.763709630Z     |     ^
2025-07-16T13:08:37.763710413Z     | TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:37.763711340Z     +------------------------------------
2025-07-16T13:08:37.763712162Z 
2025-07-16T13:08:37.763712945Z During handling of the above exception, another exception occurred:
2025-07-16T13:08:37.763713810Z 
2025-07-16T13:08:37.763714561Z Traceback (most recent call last):
2025-07-16T13:08:37.763715368Z   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:08:37.763716286Z     return await self.app(scope, receive, send)
2025-07-16T13:08:37.763717106Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763717968Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.763718907Z     with collapse_excgroups():
2025-07-16T13:08:37.763719732Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.763720536Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.763721432Z     self.gen.throw(value)
2025-07-16T13:08:37.763722248Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.763723044Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.763723967Z     raise exc
2025-07-16T13:08:37.763724761Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.763725662Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.763726521Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763727344Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:37.763728238Z     response = await call_next(request)
2025-07-16T13:08:37.763729039Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763729856Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.763731570Z     raise app_exc
2025-07-16T13:08:37.763732412Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.763733324Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.763734176Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.763735099Z     with collapse_excgroups():
2025-07-16T13:08:37.763735907Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.763736712Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.763737584Z     self.gen.throw(value)
2025-07-16T13:08:37.763738397Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.763739325Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.763740243Z     raise exc
2025-07-16T13:08:37.763741009Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.763741919Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.763742755Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763743588Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:37.763744439Z     response = await call_next(request)
2025-07-16T13:08:37.763745235Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763746068Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.763746975Z     raise app_exc
2025-07-16T13:08:37.763747760Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.763748652Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.763749491Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.763750395Z     with collapse_excgroups():
2025-07-16T13:08:37.763751204Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.763752018Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.763752918Z     self.gen.throw(value)
2025-07-16T13:08:37.763753699Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.763754474Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.763755395Z     raise exc
2025-07-16T13:08:37.763756158Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.763757062Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.763757910Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763759513Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:37.763760453Z     response = await call_next(request)
2025-07-16T13:08:37.763761286Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763762087Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.763762992Z     raise app_exc
2025-07-16T13:08:37.763763762Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.763764673Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.763765515Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.763766409Z     with collapse_excgroups():
2025-07-16T13:08:37.763767228Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.763768022Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.763768919Z     self.gen.throw(value)
2025-07-16T13:08:37.763769707Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.763770641Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.763771572Z     raise exc
2025-07-16T13:08:37.763772383Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.763773299Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.763774147Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763774982Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:37.763775881Z     response = await call_next(request)
2025-07-16T13:08:37.763776701Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763777512Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.763778424Z     raise app_exc
2025-07-16T13:08:37.763779193Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.763780092Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.763780935Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:37.763781837Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.763782641Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:37.763783546Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.763784365Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:37.763785281Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:37.763786913Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.763787885Z     raise exc
2025-07-16T13:08:37.763788675Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.763789597Z     await app(scope, receive, sender)
2025-07-16T13:08:37.763790425Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:37.763791324Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:37.763792160Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:37.763793062Z     await route.handle(scope, receive, send)
2025-07-16T13:08:37.763793900Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:37.763794874Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.763795706Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:37.763796596Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:37.763797572Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.763798500Z     raise exc
2025-07-16T13:08:37.763799320Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.763800235Z     await app(scope, receive, sender)
2025-07-16T13:08:37.763801069Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:37.763801943Z     response = await f(request)
2025-07-16T13:08:37.763802777Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763803587Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:37.763804479Z     raw_response = await run_endpoint_function(
2025-07-16T13:08:37.763805313Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763806162Z     ...<3 lines>...
2025-07-16T13:08:37.763807030Z     )
2025-07-16T13:08:37.763807849Z     ^
2025-07-16T13:08:37.763808606Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:37.763809566Z     return await dependant.call(**values)
2025-07-16T13:08:37.763810377Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763811184Z   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:08:37.763812074Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:08:37.763813015Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:08:37.763814659Z         streamer.id,
2025-07-16T13:08:37.763815543Z         ^^^^^^^^^^^^
2025-07-16T13:08:37.763816323Z         streamer.profile_image_url
2025-07-16T13:08:37.763817153Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763817966Z     ),
2025-07-16T13:08:37.763818762Z     ^
2025-07-16T13:08:37.763819534Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:37.763820436Z 
2025-07-16T13:08:37.763821192Z During handling of the above exception, another exception occurred:
2025-07-16T13:08:37.763822054Z 
2025-07-16T13:08:37.763822802Z Traceback (most recent call last):
2025-07-16T13:08:37.763823619Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
2025-07-16T13:08:37.763824541Z     await self.app(scope, receive, _send)
2025-07-16T13:08:37.763825356Z   File "/app/app/middleware/auth.py", line 70, in __call__
2025-07-16T13:08:37.763826222Z     return await self.app(scope, receive, send)
2025-07-16T13:08:37.763827042Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763827859Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.763828793Z     with collapse_excgroups():
2025-07-16T13:08:37.763829590Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.763830414Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.763831306Z     self.gen.throw(value)
2025-07-16T13:08:37.763832096Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.763832894Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.763833829Z     raise exc
2025-07-16T13:08:37.763834673Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.763835608Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.763836434Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763837281Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:37.763838127Z     response = await call_next(request)
2025-07-16T13:08:37.763838923Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763839746Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.763840662Z     raise app_exc
2025-07-16T13:08:37.763841449Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.763842352Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.763844014Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.763845020Z     with collapse_excgroups():
2025-07-16T13:08:37.763845850Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.763846674Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.763847555Z     self.gen.throw(value)
2025-07-16T13:08:37.763848341Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.763849131Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.763850081Z     raise exc
2025-07-16T13:08:37.763850890Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.763852327Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.763853190Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763854048Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:37.763854901Z     response = await call_next(request)
2025-07-16T13:08:37.763855701Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763856521Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.763857446Z     raise app_exc
2025-07-16T13:08:37.763858230Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.763859178Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.763860018Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.763860936Z     with collapse_excgroups():
2025-07-16T13:08:37.763861751Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.763862567Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.763863440Z     self.gen.throw(value)
2025-07-16T13:08:37.763864239Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.763865121Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.763866071Z     raise exc
2025-07-16T13:08:37.763866839Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.763867759Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.763868587Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763869422Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:37.763870283Z     response = await call_next(request)
2025-07-16T13:08:37.763871091Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763872837Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.763873855Z     raise app_exc
2025-07-16T13:08:37.763874636Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.763875526Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.763876379Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.763877284Z     with collapse_excgroups():
2025-07-16T13:08:37.763878102Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.763878921Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.763879798Z     self.gen.throw(value)
2025-07-16T13:08:37.763880602Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.763881390Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.763882350Z     raise exc
2025-07-16T13:08:37.763883130Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.763884055Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.763884898Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763885745Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:37.763886622Z     response = await call_next(request)
2025-07-16T13:08:37.763887496Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763888314Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.763889218Z     raise app_exc
2025-07-16T13:08:37.763889990Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.763890895Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.763891735Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:37.763892645Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.763893449Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:37.763894366Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.763895323Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:37.763896271Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:37.763897113Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.763898025Z     raise exc
2025-07-16T13:08:37.763898811Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.763900985Z     await app(scope, receive, sender)
2025-07-16T13:08:37.763901830Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:37.763902753Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:37.763903580Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:37.763904484Z     await route.handle(scope, receive, send)
2025-07-16T13:08:37.763905313Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:37.763906191Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.763907006Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:37.763907884Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:37.763908733Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.763909676Z     raise exc
2025-07-16T13:08:37.763910458Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.763911366Z     await app(scope, receive, sender)
2025-07-16T13:08:37.763912181Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:37.763913060Z     response = await f(request)
2025-07-16T13:08:37.763913895Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763914703Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:37.763915594Z     raw_response = await run_endpoint_function(
2025-07-16T13:08:37.763916432Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763917248Z     ...<3 lines>...
2025-07-16T13:08:37.763918083Z     )
2025-07-16T13:08:37.763918910Z     ^
2025-07-16T13:08:37.763919682Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:37.763920634Z     return await dependant.call(**values)
2025-07-16T13:08:37.763921445Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763922259Z   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:08:37.763923154Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:08:37.763924037Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:08:37.763924886Z         streamer.id,
2025-07-16T13:08:37.763925814Z         ^^^^^^^^^^^^
2025-07-16T13:08:37.763926621Z         streamer.profile_image_url
2025-07-16T13:08:37.763927432Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.763929194Z     ),
2025-07-16T13:08:37.763929983Z     ^
2025-07-16T13:08:37.763930773Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:37.763931691Z INFO:     172.23.0.1:56202 - "GET /api/streamers HTTP/1.1" 500 Internal Server Error
2025-07-16T13:08:37.772118298Z ERROR:    Exception in ASGI application
2025-07-16T13:08:37.772120354Z   + Exception Group Traceback (most recent call last):
2025-07-16T13:08:37.772121218Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
2025-07-16T13:08:37.772122233Z   |     yield
2025-07-16T13:08:37.772123014Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 186, in __call__
2025-07-16T13:08:37.772123946Z   |     async with anyio.create_task_group() as task_group:
2025-07-16T13:08:37.772124810Z   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.772125635Z   |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
2025-07-16T13:08:37.772126588Z   |     raise BaseExceptionGroup(
2025-07-16T13:08:37.772127442Z   |         "unhandled errors in a TaskGroup", self._exceptions
2025-07-16T13:08:37.772128361Z   |     ) from None
2025-07-16T13:08:37.772129157Z   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
2025-07-16T13:08:37.772130021Z   +-+---------------- 1 ----------------
2025-07-16T13:08:37.772130850Z     | Traceback (most recent call last):
2025-07-16T13:08:37.772131676Z     |   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:08:37.772132566Z     |     return await self.app(scope, receive, send)
2025-07-16T13:08:37.772133409Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772134268Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.772135191Z     |     with collapse_excgroups():
2025-07-16T13:08:37.772135986Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.772136818Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.772137729Z     |     self.gen.throw(value)
2025-07-16T13:08:37.772138572Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.772139390Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.772140770Z     |     raise exc
2025-07-16T13:08:37.772141592Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.772142506Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.772143353Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772145443Z     |   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:37.772146366Z     |     response = await call_next(request)
2025-07-16T13:08:37.772147185Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772147999Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.772148928Z     |     raise app_exc
2025-07-16T13:08:37.772149890Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.772150825Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.772151687Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.772152608Z     |     with collapse_excgroups():
2025-07-16T13:08:37.772153433Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.772154240Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.772155167Z     |     self.gen.throw(value)
2025-07-16T13:08:37.772155972Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.772156797Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.772157775Z     |     raise exc
2025-07-16T13:08:37.772158568Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.772159480Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.772160346Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772161189Z     |   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:37.772162058Z     |     response = await call_next(request)
2025-07-16T13:08:37.772162888Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772163715Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.772164627Z     |     raise app_exc
2025-07-16T13:08:37.772165443Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.772166357Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.772167216Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.772168131Z     |     with collapse_excgroups():
2025-07-16T13:08:37.772168952Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.772169760Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.772170714Z     |     self.gen.throw(value)
2025-07-16T13:08:37.772173219Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.772174040Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.772174976Z     |     raise exc
2025-07-16T13:08:37.772175755Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.772176706Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.772177548Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772178383Z     |   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:37.772179299Z     |     response = await call_next(request)
2025-07-16T13:08:37.772180207Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772181046Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.772181960Z     |     raise app_exc
2025-07-16T13:08:37.772182770Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.772183682Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.772184550Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.772185463Z     |     with collapse_excgroups():
2025-07-16T13:08:37.772186305Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.772187121Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.772187996Z     |     self.gen.throw(value)
2025-07-16T13:08:37.772188794Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.772189591Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.772190503Z     |     raise exc
2025-07-16T13:08:37.772191298Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.772192192Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.772193068Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772193940Z     |   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:37.772194861Z     |     response = await call_next(request)
2025-07-16T13:08:37.772195700Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772196539Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.772197447Z     |     raise app_exc
2025-07-16T13:08:37.772198277Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.772204408Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.772205472Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:37.772206414Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:37.772207264Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:37.772208195Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:37.772209036Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:37.772209939Z     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:37.772210924Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.772211878Z     |     raise exc
2025-07-16T13:08:37.772212672Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.772213579Z     |     await app(scope, receive, sender)
2025-07-16T13:08:37.772214394Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:37.772215312Z     |     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:37.772216151Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:37.772217056Z     |     await route.handle(scope, receive, send)
2025-07-16T13:08:37.772217865Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:37.772218772Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:37.772219629Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:37.772220532Z     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:37.772221390Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.772222326Z     |     raise exc
2025-07-16T13:08:37.772223113Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.772224025Z     |     await app(scope, receive, sender)
2025-07-16T13:08:37.772224841Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:37.772225762Z     |     response = await f(request)
2025-07-16T13:08:37.772226617Z     |                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772227432Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:37.772228332Z     |     raw_response = await run_endpoint_function(
2025-07-16T13:08:37.772229164Z     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772230813Z     |     ...<3 lines>...
2025-07-16T13:08:37.772231711Z     |     )
2025-07-16T13:08:37.772232507Z     |     ^
2025-07-16T13:08:37.772233292Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:37.772234252Z     |     return await dependant.call(**values)
2025-07-16T13:08:37.772235075Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772235893Z     |   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:08:37.772236798Z     |     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:08:37.772237724Z     |                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:08:37.772238595Z     |         streamer.id,
2025-07-16T13:08:37.772239467Z     |         ^^^^^^^^^^^^
2025-07-16T13:08:37.772240278Z     |         streamer.profile_image_url
2025-07-16T13:08:37.772241114Z     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772241945Z     |     ),
2025-07-16T13:08:37.772242735Z     |     ^
2025-07-16T13:08:37.772243513Z     | TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:37.772244403Z     +------------------------------------
2025-07-16T13:08:37.772245221Z 
2025-07-16T13:08:37.772245989Z During handling of the above exception, another exception occurred:
2025-07-16T13:08:37.772246833Z 
2025-07-16T13:08:37.772247620Z Traceback (most recent call last):
2025-07-16T13:08:37.772248437Z   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:08:37.772249332Z     return await self.app(scope, receive, send)
2025-07-16T13:08:37.772250154Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772250987Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.772251911Z     with collapse_excgroups():
2025-07-16T13:08:37.772252716Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.772253513Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.772254421Z     self.gen.throw(value)
2025-07-16T13:08:37.772255222Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.772256013Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.772256934Z     raise exc
2025-07-16T13:08:37.772257712Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.772258628Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.772260164Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772261027Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:37.772261938Z     response = await call_next(request)
2025-07-16T13:08:37.772262755Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772263578Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.772264495Z     raise app_exc
2025-07-16T13:08:37.772265321Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.772266742Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.772267608Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.772268555Z     with collapse_excgroups():
2025-07-16T13:08:37.772269502Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.772270292Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.772271212Z     self.gen.throw(value)
2025-07-16T13:08:37.772272018Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.772272798Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.772273720Z     raise exc
2025-07-16T13:08:37.772274648Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.772275595Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.772276446Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772277290Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:37.772278147Z     response = await call_next(request)
2025-07-16T13:08:37.772278957Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772279758Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.772280662Z     raise app_exc
2025-07-16T13:08:37.772281426Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.772282326Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.772283204Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.772284107Z     with collapse_excgroups():
2025-07-16T13:08:37.772284916Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.772285740Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.772286632Z     self.gen.throw(value)
2025-07-16T13:08:37.772287420Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.772288910Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.772289881Z     raise exc
2025-07-16T13:08:37.772290702Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.772291610Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.772292450Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772293286Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:37.772294136Z     response = await call_next(request)
2025-07-16T13:08:37.772294956Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772295767Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.772296677Z     raise app_exc
2025-07-16T13:08:37.772297467Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.772298361Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.772299208Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.772300116Z     with collapse_excgroups():
2025-07-16T13:08:37.772300916Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.772301726Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.772302612Z     self.gen.throw(value)
2025-07-16T13:08:37.772303406Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.772304195Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.772305119Z     raise exc
2025-07-16T13:08:37.772305959Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.772306876Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.772307708Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772308577Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:37.772309431Z     response = await call_next(request)
2025-07-16T13:08:37.772310236Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772311060Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.772311958Z     raise app_exc
2025-07-16T13:08:37.772312751Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.772313640Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.772314479Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:37.772316057Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.772316912Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:37.772317818Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.772318645Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:37.772319570Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:37.772320439Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.772321396Z     raise exc
2025-07-16T13:08:37.772322597Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.772323487Z     await app(scope, receive, sender)
2025-07-16T13:08:37.772324308Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:37.772325195Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:37.772326044Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:37.772326937Z     await route.handle(scope, receive, send)
2025-07-16T13:08:37.772327756Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:37.772328647Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.772329473Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:37.772330362Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:37.772331227Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.772332134Z     raise exc
2025-07-16T13:08:37.772333069Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.772334018Z     await app(scope, receive, sender)
2025-07-16T13:08:37.772334860Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:37.772335748Z     response = await f(request)
2025-07-16T13:08:37.772336537Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772337333Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:37.772338213Z     raw_response = await run_endpoint_function(
2025-07-16T13:08:37.772339029Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772339874Z     ...<3 lines>...
2025-07-16T13:08:37.772340707Z     )
2025-07-16T13:08:37.772341518Z     ^
2025-07-16T13:08:37.772342305Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:37.772344000Z     return await dependant.call(**values)
2025-07-16T13:08:37.772344881Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772345725Z   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:08:37.772346602Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:08:37.772347494Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:08:37.772348352Z         streamer.id,
2025-07-16T13:08:37.772349165Z         ^^^^^^^^^^^^
2025-07-16T13:08:37.772349964Z         streamer.profile_image_url
2025-07-16T13:08:37.772350778Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772351616Z     ),
2025-07-16T13:08:37.772352389Z     ^
2025-07-16T13:08:37.772353141Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:37.772354081Z 
2025-07-16T13:08:37.772354836Z During handling of the above exception, another exception occurred:
2025-07-16T13:08:37.772355700Z 
2025-07-16T13:08:37.772356464Z Traceback (most recent call last):
2025-07-16T13:08:37.772357256Z   File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
2025-07-16T13:08:37.772358196Z     result = await app(  # type: ignore[func-returns-value]
2025-07-16T13:08:37.772359034Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772359870Z         self.scope, self.receive, self.send
2025-07-16T13:08:37.772360737Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772361553Z     )
2025-07-16T13:08:37.772362315Z     ^
2025-07-16T13:08:37.772363068Z   File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2025-07-16T13:08:37.772363994Z     return await self.app(scope, receive, send)
2025-07-16T13:08:37.772364797Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772365614Z   File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
2025-07-16T13:08:37.772366506Z     await super().__call__(scope, receive, send)
2025-07-16T13:08:37.772367328Z   File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
2025-07-16T13:08:37.772368308Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:37.772369154Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
2025-07-16T13:08:37.772370089Z     raise exc
2025-07-16T13:08:37.772370845Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
2025-07-16T13:08:37.772371755Z     await self.app(scope, receive, _send)
2025-07-16T13:08:37.772373312Z   File "/app/app/middleware/auth.py", line 70, in __call__
2025-07-16T13:08:37.772374217Z     return await self.app(scope, receive, send)
2025-07-16T13:08:37.772375066Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772375893Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.772376801Z     with collapse_excgroups():
2025-07-16T13:08:37.772377605Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.772378418Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.772379300Z     self.gen.throw(value)
2025-07-16T13:08:37.772380114Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.772380906Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.772381844Z     raise exc
2025-07-16T13:08:37.772382621Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.772383535Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.772384377Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772385201Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:37.772386061Z     response = await call_next(request)
2025-07-16T13:08:37.772386875Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772387693Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.772388631Z     raise app_exc
2025-07-16T13:08:37.772389414Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.772390302Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.772391145Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.772392036Z     with collapse_excgroups():
2025-07-16T13:08:37.772392849Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.772393653Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.772394530Z     self.gen.throw(value)
2025-07-16T13:08:37.772395351Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.772396136Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.772397067Z     raise exc
2025-07-16T13:08:37.772397821Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.772398724Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.772399641Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772401293Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:37.772402188Z     response = await call_next(request)
2025-07-16T13:08:37.772403063Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772403861Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.772404762Z     raise app_exc
2025-07-16T13:08:37.772405528Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.772406421Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.772407280Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.772408537Z     with collapse_excgroups():
2025-07-16T13:08:37.772409357Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.772410180Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.772411088Z     self.gen.throw(value)
2025-07-16T13:08:37.772411883Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.772412685Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.772413607Z     raise exc
2025-07-16T13:08:37.772414382Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.772415366Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.772416221Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772417081Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:37.772417958Z     response = await call_next(request)
2025-07-16T13:08:37.772418780Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772419605Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.772420523Z     raise app_exc
2025-07-16T13:08:37.772421312Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.772422225Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.772423049Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.772423975Z     with collapse_excgroups():
2025-07-16T13:08:37.772424772Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.772425576Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.772426515Z     self.gen.throw(value)
2025-07-16T13:08:37.772427303Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.772428078Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.772429667Z     raise exc
2025-07-16T13:08:37.772430456Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.772431474Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.772432337Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772433182Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:37.772434071Z     response = await call_next(request)
2025-07-16T13:08:37.772434879Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772435691Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.772436681Z     raise app_exc
2025-07-16T13:08:37.772437453Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.772438387Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.772439251Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:37.772440174Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.772440999Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:37.772441903Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.772442706Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:37.772443620Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:37.772444485Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.772445421Z     raise exc
2025-07-16T13:08:37.772446187Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.772447091Z     await app(scope, receive, sender)
2025-07-16T13:08:37.772447910Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:37.772448814Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:37.772449639Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:37.772450519Z     await route.handle(scope, receive, send)
2025-07-16T13:08:37.772451356Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:37.772452269Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.772453092Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:37.772453990Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:37.772455599Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.772456557Z     raise exc
2025-07-16T13:08:37.772457338Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.772458388Z     await app(scope, receive, sender)
2025-07-16T13:08:37.772459226Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:37.772460142Z     response = await f(request)
2025-07-16T13:08:37.772460962Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772461764Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:37.772462684Z     raw_response = await run_endpoint_function(
2025-07-16T13:08:37.772463531Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772464360Z     ...<3 lines>...
2025-07-16T13:08:37.772465191Z     )
2025-07-16T13:08:37.772465962Z     ^
2025-07-16T13:08:37.772466745Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:37.772467697Z     return await dependant.call(**values)
2025-07-16T13:08:37.772468514Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772469338Z   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:08:37.772470200Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:08:37.772471066Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:08:37.772471913Z         streamer.id,
2025-07-16T13:08:37.772472700Z         ^^^^^^^^^^^^
2025-07-16T13:08:37.772473531Z         streamer.profile_image_url
2025-07-16T13:08:37.772474331Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.772475138Z     ),
2025-07-16T13:08:37.772475910Z     ^
2025-07-16T13:08:37.772476676Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:37.780519733Z 2025-07-16 15:08:37,772 - streamvault - ERROR - Error processing request: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:37.780522019Z   + Exception Group Traceback (most recent call last):
2025-07-16T13:08:37.780522922Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
2025-07-16T13:08:37.780523872Z   |     yield
2025-07-16T13:08:37.780524649Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 186, in __call__
2025-07-16T13:08:37.780525637Z   |     async with anyio.create_task_group() as task_group:
2025-07-16T13:08:37.780526500Z   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.780528580Z   |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
2025-07-16T13:08:37.780529586Z   |     raise BaseExceptionGroup(
2025-07-16T13:08:37.780530402Z   |         "unhandled errors in a TaskGroup", self._exceptions
2025-07-16T13:08:37.780531299Z   |     ) from None
2025-07-16T13:08:37.780532087Z   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
2025-07-16T13:08:37.780532936Z   +-+---------------- 1 ----------------
2025-07-16T13:08:37.780533770Z     | Traceback (most recent call last):
2025-07-16T13:08:37.780534599Z     |   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:08:37.780535465Z     |     return await self.app(scope, receive, send)
2025-07-16T13:08:37.780536283Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780537101Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.780538004Z     |     with collapse_excgroups():
2025-07-16T13:08:37.780538826Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.780539643Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.780540560Z     |     self.gen.throw(value)
2025-07-16T13:08:37.780541362Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.780542136Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.780543074Z     |     raise exc
2025-07-16T13:08:37.780543844Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.780544755Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.780545592Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780546430Z     |   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:37.780547349Z     |     response = await call_next(request)
2025-07-16T13:08:37.780548159Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780549133Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.780550065Z     |     raise app_exc
2025-07-16T13:08:37.780550845Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.780551802Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.780552645Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.780553562Z     |     with collapse_excgroups():
2025-07-16T13:08:37.780554372Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.780555923Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.780556853Z     |     self.gen.throw(value)
2025-07-16T13:08:37.780557673Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.780558462Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.780559385Z     |     raise exc
2025-07-16T13:08:37.780560157Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.780561076Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.780561962Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780562833Z     |   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:37.780563683Z     |     response = await call_next(request)
2025-07-16T13:08:37.780564502Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780565318Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.780566229Z     |     raise app_exc
2025-07-16T13:08:37.780567013Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.780567918Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.780568784Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.780569693Z     |     with collapse_excgroups():
2025-07-16T13:08:37.780570507Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.780571327Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.780572219Z     |     self.gen.throw(value)
2025-07-16T13:08:37.780573021Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.780573810Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.780574724Z     |     raise exc
2025-07-16T13:08:37.780575542Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.780576444Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.780577290Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780578233Z     |   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:37.780579132Z     |     response = await call_next(request)
2025-07-16T13:08:37.780579963Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780580770Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.780581691Z     |     raise app_exc
2025-07-16T13:08:37.780583382Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.780584326Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.780585178Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.780586096Z     |     with collapse_excgroups():
2025-07-16T13:08:37.780586913Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.780587741Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.780588627Z     |     self.gen.throw(value)
2025-07-16T13:08:37.780589428Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.780590235Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.780591203Z     |     raise exc
2025-07-16T13:08:37.780592002Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.780592907Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.780593746Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780594594Z     |   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:37.780595515Z     |     response = await call_next(request)
2025-07-16T13:08:37.780596344Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780597177Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.780598079Z     |     raise app_exc
2025-07-16T13:08:37.780598865Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.780599773Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.780600618Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:37.780601556Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:37.780602373Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:37.780603294Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:37.780604193Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:37.780605224Z     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:37.780606083Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.780606995Z     |     raise exc
2025-07-16T13:08:37.780607793Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.780609472Z     |     await app(scope, receive, sender)
2025-07-16T13:08:37.780610312Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:37.780611232Z     |     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:37.780612088Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:37.780612985Z     |     await route.handle(scope, receive, send)
2025-07-16T13:08:37.780613808Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:37.780614721Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:37.780615542Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:37.780616437Z     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:37.780617286Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.780618196Z     |     raise exc
2025-07-16T13:08:37.780619010Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.780619952Z     |     await app(scope, receive, sender)
2025-07-16T13:08:37.780621224Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:37.780622182Z     |     response = await f(request)
2025-07-16T13:08:37.780623034Z     |                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780623873Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:37.780624773Z     |     raw_response = await run_endpoint_function(
2025-07-16T13:08:37.780625604Z     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780626457Z     |     ...<3 lines>...
2025-07-16T13:08:37.780627308Z     |     )
2025-07-16T13:08:37.780628096Z     |     ^
2025-07-16T13:08:37.780628852Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:37.780629804Z     |     return await dependant.call(**values)
2025-07-16T13:08:37.780630637Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780631481Z     |   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:08:37.780632379Z     |     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:08:37.780633374Z     |                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:08:37.780634256Z     |         streamer.id,
2025-07-16T13:08:37.780635063Z     |         ^^^^^^^^^^^^
2025-07-16T13:08:37.780635864Z     |         streamer.profile_image_url
2025-07-16T13:08:37.780637411Z     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780638263Z     |     ),
2025-07-16T13:08:37.780639061Z     |     ^
2025-07-16T13:08:37.780639827Z     | TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:37.780640783Z     +------------------------------------
2025-07-16T13:08:37.780641604Z 
2025-07-16T13:08:37.780642360Z During handling of the above exception, another exception occurred:
2025-07-16T13:08:37.780643238Z 
2025-07-16T13:08:37.780644010Z Traceback (most recent call last):
2025-07-16T13:08:37.780644822Z   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:08:37.780645729Z     return await self.app(scope, receive, send)
2025-07-16T13:08:37.780646553Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780647443Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.780648353Z     with collapse_excgroups():
2025-07-16T13:08:37.780649147Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.780649959Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.780650957Z     self.gen.throw(value)
2025-07-16T13:08:37.780651877Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.780652662Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.780653579Z     raise exc
2025-07-16T13:08:37.780654379Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.780655277Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.780656103Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780656926Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:37.780657781Z     response = await call_next(request)
2025-07-16T13:08:37.780658603Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780659414Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.780660326Z     raise app_exc
2025-07-16T13:08:37.780661112Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.780661996Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.780662855Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.780663754Z     with collapse_excgroups():
2025-07-16T13:08:37.780664609Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.780667304Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.780668269Z     self.gen.throw(value)
2025-07-16T13:08:37.780669105Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.780670154Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.780671119Z     raise exc
2025-07-16T13:08:37.780671898Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.780672815Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.780673641Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780674465Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:37.780675325Z     response = await call_next(request)
2025-07-16T13:08:37.780676130Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780676959Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.780677869Z     raise app_exc
2025-07-16T13:08:37.780678664Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.780679558Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.780680408Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.780681309Z     with collapse_excgroups():
2025-07-16T13:08:37.780682115Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.780682937Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.780683837Z     self.gen.throw(value)
2025-07-16T13:08:37.780684638Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.780685422Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.780686362Z     raise exc
2025-07-16T13:08:37.780687124Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.780688035Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.780688885Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780689723Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:37.780690607Z     response = await call_next(request)
2025-07-16T13:08:37.780691430Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780692278Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.780693187Z     raise app_exc
2025-07-16T13:08:37.780693963Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.780695844Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.780696727Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.780697641Z     with collapse_excgroups():
2025-07-16T13:08:37.780698471Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.780699276Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.780700162Z     self.gen.throw(value)
2025-07-16T13:08:37.780700953Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.780701832Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.780702777Z     raise exc
2025-07-16T13:08:37.780703550Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.780704469Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.780705356Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780706195Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:37.780707059Z     response = await call_next(request)
2025-07-16T13:08:37.780707890Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780708698Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.780709582Z     raise app_exc
2025-07-16T13:08:37.780710351Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.780711235Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.780712092Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:37.780712982Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.780713783Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:37.780714678Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.780715478Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:37.780716390Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:37.780717231Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.780718141Z     raise exc
2025-07-16T13:08:37.780718915Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.780719839Z     await app(scope, receive, sender)
2025-07-16T13:08:37.780720662Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:37.780722405Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:37.780723276Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:37.780724173Z     await route.handle(scope, receive, send)
2025-07-16T13:08:37.780725005Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:37.780725914Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.780726757Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:37.780727637Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:37.780728614Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.780729564Z     raise exc
2025-07-16T13:08:37.780730323Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.780731231Z     await app(scope, receive, sender)
2025-07-16T13:08:37.780732051Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:37.780732947Z     response = await f(request)
2025-07-16T13:08:37.780733765Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780734556Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:37.780735433Z     raw_response = await run_endpoint_function(
2025-07-16T13:08:37.780736252Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780737080Z     ...<3 lines>...
2025-07-16T13:08:37.780737939Z     )
2025-07-16T13:08:37.780738700Z     ^
2025-07-16T13:08:37.780739458Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:37.780740430Z     return await dependant.call(**values)
2025-07-16T13:08:37.780741266Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780742078Z   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:08:37.780742940Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:08:37.780743819Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:08:37.780744675Z         streamer.id,
2025-07-16T13:08:37.780745477Z         ^^^^^^^^^^^^
2025-07-16T13:08:37.780746262Z         streamer.profile_image_url
2025-07-16T13:08:37.780747078Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780747894Z     ),
2025-07-16T13:08:37.780748662Z     ^
2025-07-16T13:08:37.780749407Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:37.780750312Z 
2025-07-16T13:08:37.780751843Z During handling of the above exception, another exception occurred:
2025-07-16T13:08:37.780752724Z 
2025-07-16T13:08:37.780753471Z Traceback (most recent call last):
2025-07-16T13:08:37.780754311Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
2025-07-16T13:08:37.780755230Z     await self.app(scope, receive, _send)
2025-07-16T13:08:37.780756052Z   File "/app/app/middleware/auth.py", line 70, in __call__
2025-07-16T13:08:37.780756931Z     return await self.app(scope, receive, send)
2025-07-16T13:08:37.780757738Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780758584Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.780759511Z     with collapse_excgroups():
2025-07-16T13:08:37.780760315Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.780761132Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.780762008Z     self.gen.throw(value)
2025-07-16T13:08:37.780762796Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.780763626Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.780764564Z     raise exc
2025-07-16T13:08:37.780765412Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.780766334Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.780767169Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780768044Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:37.780768899Z     response = await call_next(request)
2025-07-16T13:08:37.780769701Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780770508Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.780771411Z     raise app_exc
2025-07-16T13:08:37.780772205Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.780773089Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.780773933Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.780774856Z     with collapse_excgroups():
2025-07-16T13:08:37.780775650Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.780776483Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.780777342Z     self.gen.throw(value)
2025-07-16T13:08:37.780778135Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.780778919Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.780780772Z     raise exc
2025-07-16T13:08:37.780781563Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.780782524Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.780783358Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780784190Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:37.780785040Z     response = await call_next(request)
2025-07-16T13:08:37.780785849Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780786671Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.780787577Z     raise app_exc
2025-07-16T13:08:37.780788353Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.780789279Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.780790117Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.780791049Z     with collapse_excgroups():
2025-07-16T13:08:37.780791834Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.780792629Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.780793516Z     self.gen.throw(value)
2025-07-16T13:08:37.780794682Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.780795561Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.780796539Z     raise exc
2025-07-16T13:08:37.780797311Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.780798223Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.780799067Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780799893Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:37.780800745Z     response = await call_next(request)
2025-07-16T13:08:37.780801548Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780802389Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.780803327Z     raise app_exc
2025-07-16T13:08:37.780804113Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.780805002Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.780805842Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.780806740Z     with collapse_excgroups():
2025-07-16T13:08:37.780808375Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.780809215Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.780810088Z     self.gen.throw(value)
2025-07-16T13:08:37.780810968Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.780811746Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.780812673Z     raise exc
2025-07-16T13:08:37.780813433Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.780814345Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.780815177Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780816025Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:37.780816893Z     response = await call_next(request)
2025-07-16T13:08:37.780817737Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780818545Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.780819457Z     raise app_exc
2025-07-16T13:08:37.780820248Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.780821144Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.780821989Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:37.780822887Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.780823722Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:37.780824658Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.780825543Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:37.780826479Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:37.780827327Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.780828242Z     raise exc
2025-07-16T13:08:37.780829008Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.780829911Z     await app(scope, receive, sender)
2025-07-16T13:08:37.780830751Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:37.780831655Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:37.780832486Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:37.780833375Z     await route.handle(scope, receive, send)
2025-07-16T13:08:37.780834948Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:37.780835886Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.780836729Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:37.780837647Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:37.780838511Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.780839447Z     raise exc
2025-07-16T13:08:37.780840227Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.780841145Z     await app(scope, receive, sender)
2025-07-16T13:08:37.780841967Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:37.780842844Z     response = await f(request)
2025-07-16T13:08:37.780843669Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780844482Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:37.780845365Z     raw_response = await run_endpoint_function(
2025-07-16T13:08:37.780846200Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780847033Z     ...<3 lines>...
2025-07-16T13:08:37.780847847Z     )
2025-07-16T13:08:37.780848633Z     ^
2025-07-16T13:08:37.780849377Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:37.780850307Z     return await dependant.call(**values)
2025-07-16T13:08:37.780851127Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780851940Z   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:08:37.780852844Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:08:37.780853701Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:08:37.780854550Z         streamer.id,
2025-07-16T13:08:37.780855438Z         ^^^^^^^^^^^^
2025-07-16T13:08:37.780856219Z         streamer.profile_image_url
2025-07-16T13:08:37.780857026Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.780857841Z     ),
2025-07-16T13:08:37.780858609Z     ^
2025-07-16T13:08:37.780859403Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:37.780860295Z INFO:     172.23.0.1:56196 - "GET /api/streamers HTTP/1.1" 500 Internal Server Error
2025-07-16T13:08:37.789022117Z ERROR:    Exception in ASGI application
2025-07-16T13:08:37.789023755Z   + Exception Group Traceback (most recent call last):
2025-07-16T13:08:37.789024728Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
2025-07-16T13:08:37.789026663Z   |     yield
2025-07-16T13:08:37.789027461Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 186, in __call__
2025-07-16T13:08:37.789028411Z   |     async with anyio.create_task_group() as task_group:
2025-07-16T13:08:37.789029263Z   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.789030076Z   |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
2025-07-16T13:08:37.789031006Z   |     raise BaseExceptionGroup(
2025-07-16T13:08:37.789031817Z   |         "unhandled errors in a TaskGroup", self._exceptions
2025-07-16T13:08:37.789032721Z   |     ) from None
2025-07-16T13:08:37.789033530Z   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
2025-07-16T13:08:37.789034409Z   +-+---------------- 1 ----------------
2025-07-16T13:08:37.789035229Z     | Traceback (most recent call last):
2025-07-16T13:08:37.789036065Z     |   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:08:37.789036940Z     |     return await self.app(scope, receive, send)
2025-07-16T13:08:37.789037782Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789038630Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.789039577Z     |     with collapse_excgroups():
2025-07-16T13:08:37.789040380Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.789041217Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.789042115Z     |     self.gen.throw(value)
2025-07-16T13:08:37.789042940Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.789043736Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.789044671Z     |     raise exc
2025-07-16T13:08:37.789045438Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.789046373Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.789047224Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789048076Z     |   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:37.789048965Z     |     response = await call_next(request)
2025-07-16T13:08:37.789049787Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789050587Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.789051512Z     |     raise app_exc
2025-07-16T13:08:37.789052453Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.789054272Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.789055184Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.789056109Z     |     with collapse_excgroups():
2025-07-16T13:08:37.789056928Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.789057752Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.789058670Z     |     self.gen.throw(value)
2025-07-16T13:08:37.789059466Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.789060289Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.789061298Z     |     raise exc
2025-07-16T13:08:37.789062164Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.789063079Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.789063929Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789064776Z     |   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:37.789065650Z     |     response = await call_next(request)
2025-07-16T13:08:37.789066481Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789067295Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.789068226Z     |     raise app_exc
2025-07-16T13:08:37.789069003Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.789069930Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.789070781Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.789071696Z     |     with collapse_excgroups():
2025-07-16T13:08:37.789072514Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.789073341Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.789074257Z     |     self.gen.throw(value)
2025-07-16T13:08:37.789075069Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.789075923Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.789076843Z     |     raise exc
2025-07-16T13:08:37.789077617Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.789078539Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.789079491Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789081213Z     |   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:37.789082145Z     |     response = await call_next(request)
2025-07-16T13:08:37.789083107Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789083947Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.789084870Z     |     raise app_exc
2025-07-16T13:08:37.789085727Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.789086643Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.789087487Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.789088397Z     |     with collapse_excgroups():
2025-07-16T13:08:37.789089217Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.789090073Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.789090964Z     |     self.gen.throw(value)
2025-07-16T13:08:37.789091766Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.789092551Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.789093557Z     |     raise exc
2025-07-16T13:08:37.789094911Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.789095906Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.789097019Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789097923Z     |   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:37.789098821Z     |     response = await call_next(request)
2025-07-16T13:08:37.789099648Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789100461Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.789101405Z     |     raise app_exc
2025-07-16T13:08:37.789102280Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.789103202Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.789104041Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:37.789104969Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:37.789105778Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:37.789106731Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:37.789107556Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:37.789109277Z     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:37.789110319Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.789111278Z     |     raise exc
2025-07-16T13:08:37.789112072Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.789113015Z     |     await app(scope, receive, sender)
2025-07-16T13:08:37.789113837Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:37.789114763Z     |     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:37.789115586Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:37.789116499Z     |     await route.handle(scope, receive, send)
2025-07-16T13:08:37.789117315Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:37.789118225Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:37.789119047Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:37.789119961Z     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:37.789120826Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.789121743Z     |     raise exc
2025-07-16T13:08:37.789122526Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.789123438Z     |     await app(scope, receive, sender)
2025-07-16T13:08:37.789124266Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:37.789125189Z     |     response = await f(request)
2025-07-16T13:08:37.789126002Z     |                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789126849Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:37.789127745Z     |     raw_response = await run_endpoint_function(
2025-07-16T13:08:37.789128569Z     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789129412Z     |     ...<3 lines>...
2025-07-16T13:08:37.789130246Z     |     )
2025-07-16T13:08:37.789131031Z     |     ^
2025-07-16T13:08:37.789131806Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:37.789132750Z     |     return await dependant.call(**values)
2025-07-16T13:08:37.789133634Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789134463Z     |   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:08:37.789136191Z     |     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:08:37.789137129Z     |                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:08:37.789138015Z     |         streamer.id,
2025-07-16T13:08:37.789138893Z     |         ^^^^^^^^^^^^
2025-07-16T13:08:37.789139697Z     |         streamer.profile_image_url
2025-07-16T13:08:37.789140552Z     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789141399Z     |     ),
2025-07-16T13:08:37.789142187Z     |     ^
2025-07-16T13:08:37.789142969Z     | TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:37.789143872Z     +------------------------------------
2025-07-16T13:08:37.789144707Z 
2025-07-16T13:08:37.789145455Z During handling of the above exception, another exception occurred:
2025-07-16T13:08:37.789146306Z 
2025-07-16T13:08:37.789147054Z Traceback (most recent call last):
2025-07-16T13:08:37.789147886Z   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:08:37.789148780Z     return await self.app(scope, receive, send)
2025-07-16T13:08:37.789149645Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789150489Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.789151398Z     with collapse_excgroups():
2025-07-16T13:08:37.789152203Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.789153010Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.789153908Z     self.gen.throw(value)
2025-07-16T13:08:37.789154717Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.789155514Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.789156448Z     raise exc
2025-07-16T13:08:37.789157217Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.789158142Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.789158991Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789159842Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:37.789160713Z     response = await call_next(request)
2025-07-16T13:08:37.789161544Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789162370Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.789163338Z     raise app_exc
2025-07-16T13:08:37.789164118Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.789165792Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.789166653Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.789167672Z     with collapse_excgroups():
2025-07-16T13:08:37.789168499Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.789169355Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.789170253Z     self.gen.throw(value)
2025-07-16T13:08:37.789171052Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.789171862Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.789172822Z     raise exc
2025-07-16T13:08:37.789173718Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.789174643Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.789175484Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789176349Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:37.789177647Z     response = await call_next(request)
2025-07-16T13:08:37.789178464Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789179271Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.789180181Z     raise app_exc
2025-07-16T13:08:37.789180961Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.789181874Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.789182700Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.789183657Z     with collapse_excgroups():
2025-07-16T13:08:37.789184481Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.789185285Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.789186196Z     self.gen.throw(value)
2025-07-16T13:08:37.789186989Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.789187784Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.789188721Z     raise exc
2025-07-16T13:08:37.789189485Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.789190433Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.789191280Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789192133Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:37.789193821Z     response = await call_next(request)
2025-07-16T13:08:37.789194684Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789195506Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.789196428Z     raise app_exc
2025-07-16T13:08:37.789197208Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.789198145Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.789199000Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.789199947Z     with collapse_excgroups():
2025-07-16T13:08:37.789200750Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.789201586Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.789202481Z     self.gen.throw(value)
2025-07-16T13:08:37.789203283Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.789204066Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.789205019Z     raise exc
2025-07-16T13:08:37.789205951Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.789206873Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.789207718Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789208560Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:37.789209450Z     response = await call_next(request)
2025-07-16T13:08:37.789210274Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789211070Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.789212037Z     raise app_exc
2025-07-16T13:08:37.789212816Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.789213727Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.789214572Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:37.789215464Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.789216304Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:37.789217214Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.789218029Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:37.789218965Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:37.789219818Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.789221812Z     raise exc
2025-07-16T13:08:37.789222601Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.789223521Z     await app(scope, receive, sender)
2025-07-16T13:08:37.789224334Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:37.789225241Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:37.789226102Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:37.789227030Z     await route.handle(scope, receive, send)
2025-07-16T13:08:37.789227856Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:37.789228744Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.789229559Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:37.789230449Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:37.789231309Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.789232241Z     raise exc
2025-07-16T13:08:37.789233157Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.789234102Z     await app(scope, receive, sender)
2025-07-16T13:08:37.789234934Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:37.789235819Z     response = await f(request)
2025-07-16T13:08:37.789236636Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789237431Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:37.789238336Z     raw_response = await run_endpoint_function(
2025-07-16T13:08:37.789239161Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789239990Z     ...<3 lines>...
2025-07-16T13:08:37.789240871Z     )
2025-07-16T13:08:37.789241639Z     ^
2025-07-16T13:08:37.789242392Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:37.789243322Z     return await dependant.call(**values)
2025-07-16T13:08:37.789244129Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789244939Z   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:08:37.789245806Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:08:37.789246677Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:08:37.789247556Z         streamer.id,
2025-07-16T13:08:37.789248353Z         ^^^^^^^^^^^^
2025-07-16T13:08:37.789250119Z         streamer.profile_image_url
2025-07-16T13:08:37.789250956Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789251789Z     ),
2025-07-16T13:08:37.789252591Z     ^
2025-07-16T13:08:37.789253398Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:37.789254304Z 
2025-07-16T13:08:37.789255095Z During handling of the above exception, another exception occurred:
2025-07-16T13:08:37.789255951Z 
2025-07-16T13:08:37.789256710Z Traceback (most recent call last):
2025-07-16T13:08:37.789257531Z   File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
2025-07-16T13:08:37.789258479Z     result = await app(  # type: ignore[func-returns-value]
2025-07-16T13:08:37.789259329Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789260167Z         self.scope, self.receive, self.send
2025-07-16T13:08:37.789261054Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789261903Z     )
2025-07-16T13:08:37.789262681Z     ^
2025-07-16T13:08:37.789263449Z   File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2025-07-16T13:08:37.789264357Z     return await self.app(scope, receive, send)
2025-07-16T13:08:37.789265842Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789267523Z   File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
2025-07-16T13:08:37.789268477Z     await super().__call__(scope, receive, send)
2025-07-16T13:08:37.789269317Z   File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
2025-07-16T13:08:37.789270337Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:37.789271182Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
2025-07-16T13:08:37.789272132Z     raise exc
2025-07-16T13:08:37.789272912Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
2025-07-16T13:08:37.789273838Z     await self.app(scope, receive, _send)
2025-07-16T13:08:37.789274636Z   File "/app/app/middleware/auth.py", line 70, in __call__
2025-07-16T13:08:37.789275504Z     return await self.app(scope, receive, send)
2025-07-16T13:08:37.789276299Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789277150Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.789278078Z     with collapse_excgroups():
2025-07-16T13:08:37.789278870Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.789279693Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.789283577Z     self.gen.throw(value)
2025-07-16T13:08:37.789284463Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.789285269Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.789286198Z     raise exc
2025-07-16T13:08:37.789287016Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.789287926Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.789288789Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789289622Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:37.789290485Z     response = await call_next(request)
2025-07-16T13:08:37.789291303Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789292126Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.789293057Z     raise app_exc
2025-07-16T13:08:37.789293863Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.789294771Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.789295618Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.789296537Z     with collapse_excgroups():
2025-07-16T13:08:37.789297345Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.789298157Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.789299035Z     self.gen.throw(value)
2025-07-16T13:08:37.789299840Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.789300671Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.789301595Z     raise exc
2025-07-16T13:08:37.789302381Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.789303289Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.789304217Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789305079Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:37.789305935Z     response = await call_next(request)
2025-07-16T13:08:37.789306751Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789307575Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.789308484Z     raise app_exc
2025-07-16T13:08:37.789309292Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.789311464Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.789312453Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.789313368Z     with collapse_excgroups():
2025-07-16T13:08:37.789314172Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.789315022Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.789315942Z     self.gen.throw(value)
2025-07-16T13:08:37.789316790Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.789317579Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.789318507Z     raise exc
2025-07-16T13:08:37.789319271Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.789320190Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.789321060Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789321912Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:37.789322810Z     response = await call_next(request)
2025-07-16T13:08:37.789323661Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789324495Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.789325407Z     raise app_exc
2025-07-16T13:08:37.789326185Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.789327081Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.789327926Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:37.789328829Z     with collapse_excgroups():
2025-07-16T13:08:37.789329652Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:37.789330465Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:37.789331340Z     self.gen.throw(value)
2025-07-16T13:08:37.789332154Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:37.789332943Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:37.789333864Z     raise exc
2025-07-16T13:08:37.789334639Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:37.789335630Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:37.789336531Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789337396Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:37.789338271Z     response = await call_next(request)
2025-07-16T13:08:37.789339919Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789340750Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:37.789341673Z     raise app_exc
2025-07-16T13:08:37.789342469Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:37.789343369Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:37.789344227Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:37.789345146Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.789345974Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:37.789346924Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.789347760Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:37.789348693Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:37.789349555Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.789350487Z     raise exc
2025-07-16T13:08:37.789351295Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.789352219Z     await app(scope, receive, sender)
2025-07-16T13:08:37.789353035Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:37.789353934Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:37.789354780Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:37.789355695Z     await route.handle(scope, receive, send)
2025-07-16T13:08:37.789356533Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:37.789357441Z     await self.app(scope, receive, send)
2025-07-16T13:08:37.789358285Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:37.789359195Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:37.789360062Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:37.789360999Z     raise exc
2025-07-16T13:08:37.789361765Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:37.789362773Z     await app(scope, receive, sender)
2025-07-16T13:08:37.789363620Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:37.789364537Z     response = await f(request)
2025-07-16T13:08:37.789365404Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789367007Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:37.789368233Z     raw_response = await run_endpoint_function(
2025-07-16T13:08:37.789369108Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789369951Z     ...<3 lines>...
2025-07-16T13:08:37.789370791Z     )
2025-07-16T13:08:37.789371572Z     ^
2025-07-16T13:08:37.789372348Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:37.789373309Z     return await dependant.call(**values)
2025-07-16T13:08:37.789374139Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789374969Z   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:08:37.789375857Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:08:37.789376717Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:08:37.789377586Z         streamer.id,
2025-07-16T13:08:37.789378391Z         ^^^^^^^^^^^^
2025-07-16T13:08:37.789379192Z         streamer.profile_image_url
2025-07-16T13:08:37.789380027Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:37.789380849Z     ),
2025-07-16T13:08:37.789381640Z     ^
2025-07-16T13:08:37.789382419Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:37.801514486Z 2025-07-16 15:08:37,801 - streamvault - INFO - Request 87ea557c-79a5-49a8-b6d0-be86c378d484: GET /api/recording/active
2025-07-16T13:08:37.801563232Z 2025-07-16 15:08:37,801 - streamvault - DEBUG - Incoming request: GET /api/recording/active
2025-07-16T13:08:37.801823678Z 2025-07-16 15:08:37,801 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:37.801999385Z INFO:     172.23.0.1:56198 - "GET /api/recording/active HTTP/1.1" 200 OK
2025-07-16T13:08:38.241744344Z 2025-07-16 15:08:38,241 - streamvault - INFO - Request fa92bc59-1163-4610-bee7-00615c68004e: GET /sw.js
2025-07-16T13:08:38.242389346Z 2025-07-16 15:08:38,242 - streamvault - DEBUG - Incoming request: GET /sw.js
2025-07-16T13:08:38.244477862Z 2025-07-16 15:08:38,244 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:38.245520837Z INFO:     172.23.0.1:56198 - "GET /sw.js HTTP/1.1" 200 OK
2025-07-16T13:08:38.396105962Z 2025-07-16 15:08:38,395 - streamvault - INFO - Request a140b321-4fe0-4d3d-9f37-74bc00256544: GET /images/categories/default-category.svg
2025-07-16T13:08:38.396930516Z 2025-07-16 15:08:38,396 - streamvault - DEBUG - Incoming request: GET /images/categories/default-category.svg
2025-07-16T13:08:38.398722923Z 2025-07-16 15:08:38,398 - streamvault - DEBUG - Response status: 404
2025-07-16T13:08:38.399810160Z INFO:     172.23.0.1:56198 - "GET /images/categories/default-category.svg HTTP/1.1" 404 Not Found
2025-07-16T13:08:41.624126354Z 2025-07-16 15:08:41,623 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:08:41.623947'}
2025-07-16T13:08:41.624237843Z 2025-07-16 15:08:41,624 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:08:41.624293274Z 2025-07-16 15:08:41,624 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:08:41.624310200Z 2025-07-16 15:08:41,624 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:08:51.629521543Z 2025-07-16 15:08:51,628 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:08:51.628816'}
2025-07-16T13:08:51.630148721Z 2025-07-16 15:08:51,629 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:08:51.630200816Z 2025-07-16 15:08:51,630 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:08:51.630362754Z 2025-07-16 15:08:51,630 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:08:54.606102689Z 2025-07-16 15:08:54,605 - streamvault - INFO - Request eaa44688-1410-4b40-bc1e-8ce8ebeb551d: GET /auth/setup
2025-07-16T13:08:54.606836720Z 2025-07-16 15:08:54,606 - streamvault - DEBUG - Incoming request: GET /auth/setup
2025-07-16T13:08:54.615286190Z 2025-07-16 15:08:54,614 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:54.616549334Z INFO:     172.23.0.1:57996 - "GET /auth/setup HTTP/1.1" 200 OK
2025-07-16T13:08:54.648874157Z 2025-07-16 15:08:54,648 - streamvault - INFO - Request 59892bec-af6f-4906-b781-6e66647b43e0: GET /auth/check
2025-07-16T13:08:54.649685377Z 2025-07-16 15:08:54,649 - streamvault - DEBUG - Incoming request: GET /auth/check
2025-07-16T13:08:54.658794790Z 2025-07-16 15:08:54,658 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:54.659774733Z INFO:     172.23.0.1:57996 - "GET /auth/check HTTP/1.1" 200 OK
2025-07-16T13:08:54.701052523Z 2025-07-16 15:08:54,700 - streamvault - INFO - Request 2b7271bd-2c5d-460d-a972-b1ebbd382c94: GET /assets/SettingsView-Btdi8z8H.css
2025-07-16T13:08:54.702226036Z 2025-07-16 15:08:54,701 - streamvault - DEBUG - Incoming request: GET /assets/SettingsView-Btdi8z8H.css
2025-07-16T13:08:54.703857222Z 2025-07-16 15:08:54,703 - streamvault - INFO - Request 4450257d-077c-471a-8761-36a88cf2e434: GET /assets/SettingsView-CKSGqRq_.js
2025-07-16T13:08:54.704687074Z 2025-07-16 15:08:54,704 - streamvault - DEBUG - Incoming request: GET /assets/SettingsView-CKSGqRq_.js
2025-07-16T13:08:54.707695884Z 2025-07-16 15:08:54,707 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:54.708935485Z INFO:     172.23.0.1:57996 - "GET /assets/SettingsView-Btdi8z8H.css HTTP/1.1" 200 OK
2025-07-16T13:08:54.711017987Z 2025-07-16 15:08:54,710 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:54.712182318Z INFO:     172.23.0.1:58004 - "GET /assets/SettingsView-CKSGqRq_.js HTTP/1.1" 200 OK
2025-07-16T13:08:55.199472553Z 2025-07-16 15:08:55,199 - streamvault - INFO - Request 5910bb24-88e2-4b3a-b4b9-71dd1d0574a1: GET /api/settings
2025-07-16T13:08:55.199591155Z 2025-07-16 15:08:55,199 - streamvault - DEBUG - Incoming request: GET /api/settings
2025-07-16T13:08:55.200939797Z 2025-07-16 15:08:55,200 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:55.201191380Z INFO:     172.23.0.1:58004 - "GET /api/settings HTTP/1.1" 200 OK
2025-07-16T13:08:55.240131698Z 2025-07-16 15:08:55,239 - streamvault - INFO - Request 089f6614-2cfd-4b81-9d63-7f4650c21d82: GET /api/settings/streamer
2025-07-16T13:08:55.240540670Z 2025-07-16 15:08:55,240 - streamvault - DEBUG - Incoming request: GET /api/settings/streamer
2025-07-16T13:08:55.251992973Z 2025-07-16 15:08:55,251 - streamvault - ERROR - Error processing request: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:55.252219308Z 2025-07-16 15:08:55,252 - streamvault - DEBUG - Response status: 500
2025-07-16T13:08:55.252531929Z INFO:     172.23.0.1:58004 - "GET /api/settings/streamer HTTP/1.1" 500 Internal Server Error
2025-07-16T13:08:55.286241662Z 2025-07-16 15:08:55,286 - streamvault - INFO - Request 55afe672-e122-4e70-8c16-62761290a757: GET /api/recording/settings
2025-07-16T13:08:55.286756952Z 2025-07-16 15:08:55,286 - streamvault - DEBUG - Incoming request: GET /api/recording/settings
2025-07-16T13:08:55.290711002Z 2025-07-16 15:08:55,290 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:55.291266854Z INFO:     172.23.0.1:58004 - "GET /api/recording/settings HTTP/1.1" 200 OK
2025-07-16T13:08:55.326101630Z 2025-07-16 15:08:55,325 - streamvault - INFO - Request 27eb15c7-7ebc-4e50-89f9-65712199757e: GET /api/recording/streamers
2025-07-16T13:08:55.326721621Z 2025-07-16 15:08:55,326 - streamvault - DEBUG - Incoming request: GET /api/recording/streamers
2025-07-16T13:08:55.333737199Z 2025-07-16 15:08:55,332 - streamvault - ERROR - Error fetching streamer recording settings: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:55.333754048Z Traceback (most recent call last):
2025-07-16T13:08:55.333757589Z   File "/app/app/routes/recording.py", line 185, in get_all_streamer_recording_settings
2025-07-16T13:08:55.333760839Z     profile_image_url=unified_image_service.get_profile_image_url(
2025-07-16T13:08:55.333763555Z                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:08:55.333766327Z         streamer.id,
2025-07-16T13:08:55.333768957Z         ^^^^^^^^^^^^
2025-07-16T13:08:55.333771615Z         streamer.profile_image_url
2025-07-16T13:08:55.333774938Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.333778213Z     ),
2025-07-16T13:08:55.333780759Z     ^
2025-07-16T13:08:55.333783345Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:55.334426184Z 2025-07-16 15:08:55,334 - streamvault - ERROR - Auth middleware error for /api/recording/streamers: unsupported operand type(s) for @: 'HTTPException' and 'function'
2025-07-16T13:08:55.334827232Z 2025-07-16 15:08:55,334 - streamvault - INFO - Request 815bdb30-c58a-4c14-aaa8-636b2210f2cb: GET /api/recording/streamers
2025-07-16T13:08:55.335081878Z 2025-07-16 15:08:55,335 - streamvault - DEBUG - Incoming request: GET /api/recording/streamers
2025-07-16T13:08:55.337966008Z 2025-07-16 15:08:55,337 - streamvault - ERROR - Error fetching streamer recording settings: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:55.337971166Z Traceback (most recent call last):
2025-07-16T13:08:55.337973157Z   File "/app/app/routes/recording.py", line 185, in get_all_streamer_recording_settings
2025-07-16T13:08:55.337975206Z     profile_image_url=unified_image_service.get_profile_image_url(
2025-07-16T13:08:55.337977000Z                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:08:55.337979159Z         streamer.id,
2025-07-16T13:08:55.337980997Z         ^^^^^^^^^^^^
2025-07-16T13:08:55.337982637Z         streamer.profile_image_url
2025-07-16T13:08:55.337984378Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.337986159Z     ),
2025-07-16T13:08:55.337987871Z     ^
2025-07-16T13:08:55.337989474Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:08:55.346811568Z 2025-07-16 15:08:55,338 - streamvault - ERROR - Error processing request: unsupported operand type(s) for @: 'HTTPException' and 'function'
2025-07-16T13:08:55.346817199Z   + Exception Group Traceback (most recent call last):
2025-07-16T13:08:55.346818265Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
2025-07-16T13:08:55.346819325Z   |     yield
2025-07-16T13:08:55.346820175Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 186, in __call__
2025-07-16T13:08:55.346821148Z   |     async with anyio.create_task_group() as task_group:
2025-07-16T13:08:55.346822005Z   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.346822816Z   |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
2025-07-16T13:08:55.346823790Z   |     raise BaseExceptionGroup(
2025-07-16T13:08:55.346824688Z   |         "unhandled errors in a TaskGroup", self._exceptions
2025-07-16T13:08:55.346825644Z   |     ) from None
2025-07-16T13:08:55.346826472Z   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
2025-07-16T13:08:55.346827357Z   +-+---------------- 1 ----------------
2025-07-16T13:08:55.346828167Z     | Traceback (most recent call last):
2025-07-16T13:08:55.346828985Z     |   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:08:55.346833880Z     |     return await self.app(scope, receive, send)
2025-07-16T13:08:55.346834831Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346835663Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.346836614Z     |     with collapse_excgroups():
2025-07-16T13:08:55.346837428Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.346838278Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.346839224Z     |     self.gen.throw(value)
2025-07-16T13:08:55.346840048Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.346840875Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.346841837Z     |     raise exc
2025-07-16T13:08:55.346842761Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.346843717Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.346844606Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346845461Z     |   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:55.346846375Z     |     response = await call_next(request)
2025-07-16T13:08:55.346847224Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346848080Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.346849346Z     |     raise app_exc
2025-07-16T13:08:55.346850168Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.346851092Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.346851942Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.346852869Z     |     with collapse_excgroups():
2025-07-16T13:08:55.346853686Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.346854521Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.346855443Z     |     self.gen.throw(value)
2025-07-16T13:08:55.346856269Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.346857051Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.346857971Z     |     raise exc
2025-07-16T13:08:55.346858751Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.346859683Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.346860552Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346862211Z     |   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:55.346863116Z     |     response = await call_next(request)
2025-07-16T13:08:55.346864036Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346864862Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.346865800Z     |     raise app_exc
2025-07-16T13:08:55.346866606Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.346867522Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.346868375Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.346869310Z     |     with collapse_excgroups():
2025-07-16T13:08:55.346870151Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.346870999Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.346871896Z     |     self.gen.throw(value)
2025-07-16T13:08:55.346872703Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.346873494Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.346874424Z     |     raise exc
2025-07-16T13:08:55.346875194Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.346876125Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.346876988Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346878045Z     |   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:55.346878956Z     |     response = await call_next(request)
2025-07-16T13:08:55.346879804Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346880628Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.346881577Z     |     raise app_exc
2025-07-16T13:08:55.346882376Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.346883375Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.346884371Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.346885399Z     |     with collapse_excgroups():
2025-07-16T13:08:55.346886225Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.346887058Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.346887957Z     |     self.gen.throw(value)
2025-07-16T13:08:55.346889492Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.346890314Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.346891250Z     |     raise exc
2025-07-16T13:08:55.346892063Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.346893010Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.346893933Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346894793Z     |   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:55.346895697Z     |     response = await call_next(request)
2025-07-16T13:08:55.346896529Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346897351Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.346898276Z     |     raise app_exc
2025-07-16T13:08:55.346899063Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.346899979Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.346900823Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:55.346901748Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:55.346902561Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:55.346903480Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:55.346904308Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:55.346905471Z     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:55.346906354Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:55.346907292Z     |     raise exc
2025-07-16T13:08:55.346908072Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:55.346908988Z     |     await app(scope, receive, sender)
2025-07-16T13:08:55.346909800Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:55.346910738Z     |     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:55.346911581Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:55.346912496Z     |     await route.handle(scope, receive, send)
2025-07-16T13:08:55.346913324Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:55.346915023Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:55.346915899Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:55.346916820Z     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:55.346917683Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:55.346918602Z     |     raise exc
2025-07-16T13:08:55.346919390Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:55.346920324Z     |     await app(scope, receive, sender)
2025-07-16T13:08:55.346921143Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:55.346922077Z     |     response = await f(request)
2025-07-16T13:08:55.346922897Z     |                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346923717Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:55.346924641Z     |     raw_response = await run_endpoint_function(
2025-07-16T13:08:55.346925475Z     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346926311Z     |     ...<3 lines>...
2025-07-16T13:08:55.346927290Z     |     )
2025-07-16T13:08:55.346928106Z     |     ^
2025-07-16T13:08:55.346928890Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:55.346929865Z     |     return await dependant.call(**values)
2025-07-16T13:08:55.346930699Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346931549Z     |   File "/app/app/routes/recording.py", line 200, in get_all_streamer_recording_settings
2025-07-16T13:08:55.346932597Z     |     raise HTTPException(status_code=500, detail=str(e))@router.post("/streamers/{streamer_id}", response_model=StreamerRecordingSettingsSchema)
2025-07-16T13:08:55.346933634Z     |           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
2025-07-16T13:08:55.346934573Z     | TypeError: unsupported operand type(s) for @: 'HTTPException' and 'function'
2025-07-16T13:08:55.346935453Z     +------------------------------------
2025-07-16T13:08:55.346936345Z 
2025-07-16T13:08:55.346937119Z During handling of the above exception, another exception occurred:
2025-07-16T13:08:55.346937989Z 
2025-07-16T13:08:55.346938732Z Traceback (most recent call last):
2025-07-16T13:08:55.346939544Z   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:08:55.346940467Z     return await self.app(scope, receive, send)
2025-07-16T13:08:55.346941276Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346946064Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.346947621Z     with collapse_excgroups():
2025-07-16T13:08:55.346948461Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.346949292Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.346950210Z     self.gen.throw(value)
2025-07-16T13:08:55.346951019Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.346951836Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.346952775Z     raise exc
2025-07-16T13:08:55.346953563Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.346954500Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.346955375Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346956224Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:55.346957127Z     response = await call_next(request)
2025-07-16T13:08:55.346957946Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346958758Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.346959692Z     raise app_exc
2025-07-16T13:08:55.346960464Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.346961410Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.346962257Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.346963174Z     with collapse_excgroups():
2025-07-16T13:08:55.346963976Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.346964797Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.346965696Z     self.gen.throw(value)
2025-07-16T13:08:55.346966502Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.346967293Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.346968371Z     raise exc
2025-07-16T13:08:55.346969169Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.346970096Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.346970940Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346971810Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:55.346972693Z     response = await call_next(request)
2025-07-16T13:08:55.346973489Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346974306Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.346976378Z     raise app_exc
2025-07-16T13:08:55.346977183Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.346978109Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.346978963Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.346979878Z     with collapse_excgroups():
2025-07-16T13:08:55.346980719Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.346981528Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.346982426Z     self.gen.throw(value)
2025-07-16T13:08:55.346983220Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.346984026Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.346984957Z     raise exc
2025-07-16T13:08:55.346985756Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.346986664Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.346987495Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346988325Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:55.346989204Z     response = await call_next(request)
2025-07-16T13:08:55.346990078Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.346990888Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.346991809Z     raise app_exc
2025-07-16T13:08:55.346992592Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.346993493Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.346994349Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.346995247Z     with collapse_excgroups():
2025-07-16T13:08:55.346996057Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.346996896Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.346997788Z     self.gen.throw(value)
2025-07-16T13:08:55.346998597Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.346999537Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.347000469Z     raise exc
2025-07-16T13:08:55.347001256Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.347002192Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.347003833Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347004718Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:55.347005621Z     response = await call_next(request)
2025-07-16T13:08:55.347006458Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347007278Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.347008255Z     raise app_exc
2025-07-16T13:08:55.347009044Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.347009959Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.347010813Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:55.347011749Z     await self.app(scope, receive, send)
2025-07-16T13:08:55.347012563Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:55.347013491Z     await self.app(scope, receive, send)
2025-07-16T13:08:55.347014301Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:55.347015214Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:55.347016083Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:55.347017006Z     raise exc
2025-07-16T13:08:55.347017780Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:55.347018725Z     await app(scope, receive, sender)
2025-07-16T13:08:55.347019539Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:55.347020464Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:55.347021316Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:55.347022204Z     await route.handle(scope, receive, send)
2025-07-16T13:08:55.347023026Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:55.347023926Z     await self.app(scope, receive, send)
2025-07-16T13:08:55.347024769Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:55.347025678Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:55.347026712Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:55.347027661Z     raise exc
2025-07-16T13:08:55.347028430Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:55.347030043Z     await app(scope, receive, sender)
2025-07-16T13:08:55.347030887Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:55.347031805Z     response = await f(request)
2025-07-16T13:08:55.347032634Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347033474Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:55.347034404Z     raw_response = await run_endpoint_function(
2025-07-16T13:08:55.347035240Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347036085Z     ...<3 lines>...
2025-07-16T13:08:55.347037003Z     )
2025-07-16T13:08:55.347037797Z     ^
2025-07-16T13:08:55.347038561Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:55.347039511Z     return await dependant.call(**values)
2025-07-16T13:08:55.347040357Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347041166Z   File "/app/app/routes/recording.py", line 200, in get_all_streamer_recording_settings
2025-07-16T13:08:55.347042096Z     raise HTTPException(status_code=500, detail=str(e))@router.post("/streamers/{streamer_id}", response_model=StreamerRecordingSettingsSchema)
2025-07-16T13:08:55.347043096Z           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
2025-07-16T13:08:55.347044041Z TypeError: unsupported operand type(s) for @: 'HTTPException' and 'function'
2025-07-16T13:08:55.347044917Z 
2025-07-16T13:08:55.347045657Z During handling of the above exception, another exception occurred:
2025-07-16T13:08:55.347046521Z 
2025-07-16T13:08:55.347047319Z Traceback (most recent call last):
2025-07-16T13:08:55.347048125Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
2025-07-16T13:08:55.347049043Z     await self.app(scope, receive, _send)
2025-07-16T13:08:55.347049848Z   File "/app/app/middleware/auth.py", line 70, in __call__
2025-07-16T13:08:55.347050727Z     return await self.app(scope, receive, send)
2025-07-16T13:08:55.347051564Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347052391Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.347053308Z     with collapse_excgroups():
2025-07-16T13:08:55.347054151Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.347054940Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.347055859Z     self.gen.throw(value)
2025-07-16T13:08:55.347056649Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.347057433Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.347059060Z     raise exc
2025-07-16T13:08:55.347059941Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.347060888Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.347061772Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347062626Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:55.347063490Z     response = await call_next(request)
2025-07-16T13:08:55.347064328Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347065137Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.347066042Z     raise app_exc
2025-07-16T13:08:55.347066818Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.347067718Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.347068617Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.347069519Z     with collapse_excgroups():
2025-07-16T13:08:55.347070316Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.347071113Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.347072001Z     self.gen.throw(value)
2025-07-16T13:08:55.347072817Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.347073599Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.347074527Z     raise exc
2025-07-16T13:08:55.347075327Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.347076236Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.347077094Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347077935Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:55.347078785Z     response = await call_next(request)
2025-07-16T13:08:55.347079651Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347080469Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.347081385Z     raise app_exc
2025-07-16T13:08:55.347082183Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.347083086Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.347083937Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.347084840Z     with collapse_excgroups():
2025-07-16T13:08:55.347086300Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.347087153Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.347088039Z     self.gen.throw(value)
2025-07-16T13:08:55.347088842Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.347089654Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.347090687Z     raise exc
2025-07-16T13:08:55.347091492Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.347092415Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.347093241Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347094058Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:55.347094927Z     response = await call_next(request)
2025-07-16T13:08:55.347095730Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347096563Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.347097457Z     raise app_exc
2025-07-16T13:08:55.347098239Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.347099143Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.347099982Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.347100882Z     with collapse_excgroups():
2025-07-16T13:08:55.347101685Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.347102494Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.347103395Z     self.gen.throw(value)
2025-07-16T13:08:55.347104189Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.347104975Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.347105895Z     raise exc
2025-07-16T13:08:55.347106661Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.347107544Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.347108364Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347109205Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:55.347110150Z     response = await call_next(request)
2025-07-16T13:08:55.347111304Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347112128Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.347113037Z     raise app_exc
2025-07-16T13:08:55.347113846Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.347115460Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.347116356Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:55.347117269Z     await self.app(scope, receive, send)
2025-07-16T13:08:55.347118101Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:55.347119018Z     await self.app(scope, receive, send)
2025-07-16T13:08:55.347119904Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:55.347120840Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:55.347121712Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:55.347122633Z     raise exc
2025-07-16T13:08:55.347123414Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:55.347124320Z     await app(scope, receive, sender)
2025-07-16T13:08:55.347125169Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:55.347126067Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:55.347126906Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:55.347127797Z     await route.handle(scope, receive, send)
2025-07-16T13:08:55.347128617Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:55.347129504Z     await self.app(scope, receive, send)
2025-07-16T13:08:55.347130316Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:55.347131216Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:55.347132081Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:55.347132997Z     raise exc
2025-07-16T13:08:55.347133767Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:55.347134667Z     await app(scope, receive, sender)
2025-07-16T13:08:55.347135493Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:55.347136369Z     response = await f(request)
2025-07-16T13:08:55.347137178Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347137992Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:55.347138899Z     raw_response = await run_endpoint_function(
2025-07-16T13:08:55.347139726Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347141222Z     ...<3 lines>...
2025-07-16T13:08:55.347142079Z     )
2025-07-16T13:08:55.347142868Z     ^
2025-07-16T13:08:55.347143645Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:55.347144579Z     return await dependant.call(**values)
2025-07-16T13:08:55.347145407Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.347146252Z   File "/app/app/routes/recording.py", line 200, in get_all_streamer_recording_settings
2025-07-16T13:08:55.347147168Z     raise HTTPException(status_code=500, detail=str(e))@router.post("/streamers/{streamer_id}", response_model=StreamerRecordingSettingsSchema)
2025-07-16T13:08:55.347148283Z           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
2025-07-16T13:08:55.347149244Z TypeError: unsupported operand type(s) for @: 'HTTPException' and 'function'
2025-07-16T13:08:55.347150123Z INFO:     172.23.0.1:58004 - "GET /api/recording/streamers HTTP/1.1" 500 Internal Server Error
2025-07-16T13:08:55.354410000Z ERROR:    Exception in ASGI application
2025-07-16T13:08:55.354412182Z   + Exception Group Traceback (most recent call last):
2025-07-16T13:08:55.354413094Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
2025-07-16T13:08:55.354414134Z   |     yield
2025-07-16T13:08:55.354414948Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 186, in __call__
2025-07-16T13:08:55.354415889Z   |     async with anyio.create_task_group() as task_group:
2025-07-16T13:08:55.354416787Z   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.354417609Z   |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
2025-07-16T13:08:55.354418582Z   |     raise BaseExceptionGroup(
2025-07-16T13:08:55.354419423Z   |         "unhandled errors in a TaskGroup", self._exceptions
2025-07-16T13:08:55.354420340Z   |     ) from None
2025-07-16T13:08:55.354421168Z   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
2025-07-16T13:08:55.354422034Z   +-+---------------- 1 ----------------
2025-07-16T13:08:55.354422873Z     | Traceback (most recent call last):
2025-07-16T13:08:55.354423703Z     |   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:08:55.354424594Z     |     return await self.app(scope, receive, send)
2025-07-16T13:08:55.354425411Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354426259Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.354427160Z     |     with collapse_excgroups():
2025-07-16T13:08:55.354429071Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.354429916Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.354430829Z     |     self.gen.throw(value)
2025-07-16T13:08:55.354431638Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.354432431Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.354433385Z     |     raise exc
2025-07-16T13:08:55.354434168Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.354435101Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.354435988Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354436854Z     |   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:55.354437733Z     |     response = await call_next(request)
2025-07-16T13:08:55.354438560Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354439399Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.354440323Z     |     raise app_exc
2025-07-16T13:08:55.354441285Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.354442244Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.354443137Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.354444101Z     |     with collapse_excgroups():
2025-07-16T13:08:55.354444928Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.354445754Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.354446681Z     |     self.gen.throw(value)
2025-07-16T13:08:55.354447493Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.354448299Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.354449246Z     |     raise exc
2025-07-16T13:08:55.354450048Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.354450983Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.354451824Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354452678Z     |   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:55.354453568Z     |     response = await call_next(request)
2025-07-16T13:08:55.354454403Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354455270Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.354457044Z     |     raise app_exc
2025-07-16T13:08:55.354457891Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.354458818Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.354459675Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.354460584Z     |     with collapse_excgroups():
2025-07-16T13:08:55.354461426Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.354462237Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.354463128Z     |     self.gen.throw(value)
2025-07-16T13:08:55.354463937Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.354464742Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.354465695Z     |     raise exc
2025-07-16T13:08:55.354466495Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.354467436Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.354468290Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354469151Z     |   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:55.354470044Z     |     response = await call_next(request)
2025-07-16T13:08:55.354471000Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354471877Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.354472818Z     |     raise app_exc
2025-07-16T13:08:55.354473618Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.354474535Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.354475384Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.354476308Z     |     with collapse_excgroups():
2025-07-16T13:08:55.354477144Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.354477996Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.354478976Z     |     self.gen.throw(value)
2025-07-16T13:08:55.354479785Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.354480593Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.354481528Z     |     raise exc
2025-07-16T13:08:55.354488420Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.354489735Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.354506420Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354510278Z     |   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:55.354511910Z     |     response = await call_next(request)
2025-07-16T13:08:55.354512893Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354513800Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.354514777Z     |     raise app_exc
2025-07-16T13:08:55.354515629Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.354516580Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.354517494Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:55.354518425Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:55.354519332Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:55.354520256Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:55.354521081Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:55.354522004Z     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:55.354524052Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:55.354525025Z     |     raise exc
2025-07-16T13:08:55.354525807Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:55.354526726Z     |     await app(scope, receive, sender)
2025-07-16T13:08:55.354527570Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:55.354528508Z     |     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:55.354529355Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:55.354530294Z     |     await route.handle(scope, receive, send)
2025-07-16T13:08:55.354531117Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:55.354532013Z     |     await self.app(scope, receive, send)
2025-07-16T13:08:55.354532844Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:55.354533746Z     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:55.354534617Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:55.354536525Z     |     raise exc
2025-07-16T13:08:55.354537337Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:55.354538339Z     |     await app(scope, receive, sender)
2025-07-16T13:08:55.354539195Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:55.354540099Z     |     response = await f(request)
2025-07-16T13:08:55.354540926Z     |                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354541756Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:55.354542695Z     |     raw_response = await run_endpoint_function(
2025-07-16T13:08:55.354543543Z     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354544385Z     |     ...<3 lines>...
2025-07-16T13:08:55.354545335Z     |     )
2025-07-16T13:08:55.354546163Z     |     ^
2025-07-16T13:08:55.354546938Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:55.354547898Z     |     return await dependant.call(**values)
2025-07-16T13:08:55.354548753Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354549593Z     |   File "/app/app/routes/recording.py", line 200, in get_all_streamer_recording_settings
2025-07-16T13:08:55.354550615Z     |     raise HTTPException(status_code=500, detail=str(e))@router.post("/streamers/{streamer_id}", response_model=StreamerRecordingSettingsSchema)
2025-07-16T13:08:55.354551898Z     |           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
2025-07-16T13:08:55.354552913Z     | TypeError: unsupported operand type(s) for @: 'HTTPException' and 'function'
2025-07-16T13:08:55.354553792Z     +------------------------------------
2025-07-16T13:08:55.354554634Z 
2025-07-16T13:08:55.354555392Z During handling of the above exception, another exception occurred:
2025-07-16T13:08:55.354556267Z 
2025-07-16T13:08:55.354557036Z Traceback (most recent call last):
2025-07-16T13:08:55.354557843Z   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:08:55.354558775Z     return await self.app(scope, receive, send)
2025-07-16T13:08:55.354559612Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354560424Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.354561372Z     with collapse_excgroups():
2025-07-16T13:08:55.354562186Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.354563007Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.354563943Z     self.gen.throw(value)
2025-07-16T13:08:55.354565465Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.354566273Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.354567221Z     raise exc
2025-07-16T13:08:55.354568027Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.354568953Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.354569808Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354570672Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:55.354571599Z     response = await call_next(request)
2025-07-16T13:08:55.354572424Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354573255Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.354574220Z     raise app_exc
2025-07-16T13:08:55.354575913Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.354576862Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.354577717Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.354578636Z     with collapse_excgroups():
2025-07-16T13:08:55.354579471Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.354580293Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.354581191Z     self.gen.throw(value)
2025-07-16T13:08:55.354582000Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.354582832Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.354583832Z     raise exc
2025-07-16T13:08:55.354584751Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.354585691Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.354586573Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354587407Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:55.354588285Z     response = await call_next(request)
2025-07-16T13:08:55.354589133Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354589948Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.354590884Z     raise app_exc
2025-07-16T13:08:55.354591669Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.354592596Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.354593483Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.354595185Z     with collapse_excgroups():
2025-07-16T13:08:55.354596052Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.354596869Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.354597771Z     self.gen.throw(value)
2025-07-16T13:08:55.354598574Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.354599350Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.354600306Z     raise exc
2025-07-16T13:08:55.354601108Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.354602023Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.354602867Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354603711Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:55.354604592Z     response = await call_next(request)
2025-07-16T13:08:55.354605417Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354606233Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.354607146Z     raise app_exc
2025-07-16T13:08:55.354607965Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.354608858Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.354609709Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.354610614Z     with collapse_excgroups():
2025-07-16T13:08:55.354611427Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.354612245Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.354613150Z     self.gen.throw(value)
2025-07-16T13:08:55.354613967Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.354614773Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.354615695Z     raise exc
2025-07-16T13:08:55.354616620Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.354617565Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.354618442Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354619290Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:55.354620191Z     response = await call_next(request)
2025-07-16T13:08:55.354621001Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354621841Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.354623611Z     raise app_exc
2025-07-16T13:08:55.354624419Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.354625324Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.354626179Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:55.354627078Z     await self.app(scope, receive, send)
2025-07-16T13:08:55.354627914Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:55.354628820Z     await self.app(scope, receive, send)
2025-07-16T13:08:55.354629655Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:55.354630575Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:55.354631459Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:55.354632391Z     raise exc
2025-07-16T13:08:55.354633174Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:55.354634074Z     await app(scope, receive, sender)
2025-07-16T13:08:55.354634906Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:55.354635819Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:55.354636683Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:55.354637561Z     await route.handle(scope, receive, send)
2025-07-16T13:08:55.354638408Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:55.354639300Z     await self.app(scope, receive, send)
2025-07-16T13:08:55.354640167Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:55.354641087Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:55.354641971Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:55.354642896Z     raise exc
2025-07-16T13:08:55.354644235Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:55.354645167Z     await app(scope, receive, sender)
2025-07-16T13:08:55.354646008Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:55.354646894Z     response = await f(request)
2025-07-16T13:08:55.354647720Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354648557Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:55.354650238Z     raw_response = await run_endpoint_function(
2025-07-16T13:08:55.354651148Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354652016Z     ...<3 lines>...
2025-07-16T13:08:55.354652897Z     )
2025-07-16T13:08:55.354653704Z     ^
2025-07-16T13:08:55.354654467Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:55.354655417Z     return await dependant.call(**values)
2025-07-16T13:08:55.354656255Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354657072Z   File "/app/app/routes/recording.py", line 200, in get_all_streamer_recording_settings
2025-07-16T13:08:55.354658014Z     raise HTTPException(status_code=500, detail=str(e))@router.post("/streamers/{streamer_id}", response_model=StreamerRecordingSettingsSchema)
2025-07-16T13:08:55.354659035Z           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
2025-07-16T13:08:55.354659995Z TypeError: unsupported operand type(s) for @: 'HTTPException' and 'function'
2025-07-16T13:08:55.354660875Z 
2025-07-16T13:08:55.354661674Z During handling of the above exception, another exception occurred:
2025-07-16T13:08:55.354662539Z 
2025-07-16T13:08:55.354663304Z Traceback (most recent call last):
2025-07-16T13:08:55.354664115Z   File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
2025-07-16T13:08:55.354665061Z     result = await app(  # type: ignore[func-returns-value]
2025-07-16T13:08:55.354665929Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354666780Z         self.scope, self.receive, self.send
2025-07-16T13:08:55.354667620Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354668469Z     )
2025-07-16T13:08:55.354669223Z     ^
2025-07-16T13:08:55.354669980Z   File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2025-07-16T13:08:55.354670928Z     return await self.app(scope, receive, send)
2025-07-16T13:08:55.354671759Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354672600Z   File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
2025-07-16T13:08:55.354673537Z     await super().__call__(scope, receive, send)
2025-07-16T13:08:55.354674395Z   File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
2025-07-16T13:08:55.354675472Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:55.354676320Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
2025-07-16T13:08:55.354677264Z     raise exc
2025-07-16T13:08:55.354678807Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
2025-07-16T13:08:55.354679749Z     await self.app(scope, receive, _send)
2025-07-16T13:08:55.354680590Z   File "/app/app/middleware/auth.py", line 70, in __call__
2025-07-16T13:08:55.354681470Z     return await self.app(scope, receive, send)
2025-07-16T13:08:55.354682293Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354683099Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.354684024Z     with collapse_excgroups():
2025-07-16T13:08:55.354684842Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.354685651Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.354686568Z     self.gen.throw(value)
2025-07-16T13:08:55.354687404Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.354688197Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.354689113Z     raise exc
2025-07-16T13:08:55.354689880Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.354690798Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.354691641Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354692494Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:08:55.354693397Z     response = await call_next(request)
2025-07-16T13:08:55.354694244Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354695135Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.354696075Z     raise app_exc
2025-07-16T13:08:55.354696853Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.354697754Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.354698586Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.354699502Z     with collapse_excgroups():
2025-07-16T13:08:55.354700310Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.354701167Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.354702072Z     self.gen.throw(value)
2025-07-16T13:08:55.354702882Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.354703671Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.354704615Z     raise exc
2025-07-16T13:08:55.354705392Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.354707053Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.354708038Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354708927Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:08:55.354709804Z     response = await call_next(request)
2025-07-16T13:08:55.354710639Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354711452Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.354712361Z     raise app_exc
2025-07-16T13:08:55.354713140Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.354714075Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.354715284Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.354716239Z     with collapse_excgroups():
2025-07-16T13:08:55.354717281Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.354718114Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.354719004Z     self.gen.throw(value)
2025-07-16T13:08:55.354719805Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.354720594Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.354721522Z     raise exc
2025-07-16T13:08:55.354722293Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.354723244Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.354724090Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354724961Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:08:55.354725835Z     response = await call_next(request)
2025-07-16T13:08:55.354726712Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354727556Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.354728465Z     raise app_exc
2025-07-16T13:08:55.354729245Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.354730172Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.354731010Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:08:55.354731936Z     with collapse_excgroups():
2025-07-16T13:08:55.354732746Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:08:55.354733551Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:08:55.354734430Z     self.gen.throw(value)
2025-07-16T13:08:55.354736010Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:08:55.354736838Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:08:55.354737789Z     raise exc
2025-07-16T13:08:55.354738559Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:08:55.354739592Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:08:55.354740467Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354741311Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:08:55.354742194Z     response = await call_next(request)
2025-07-16T13:08:55.354743014Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354743827Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:08:55.354744780Z     raise app_exc
2025-07-16T13:08:55.354745569Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:08:55.354746479Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:08:55.354747323Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:08:55.354748236Z     await self.app(scope, receive, send)
2025-07-16T13:08:55.354749055Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:08:55.354749977Z     await self.app(scope, receive, send)
2025-07-16T13:08:55.354750793Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:08:55.354751732Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:08:55.354752596Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:55.354753583Z     raise exc
2025-07-16T13:08:55.354754351Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:55.354755267Z     await app(scope, receive, sender)
2025-07-16T13:08:55.354756096Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:08:55.354757006Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:08:55.354757856Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:08:55.354758778Z     await route.handle(scope, receive, send)
2025-07-16T13:08:55.354759611Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:08:55.354760503Z     await self.app(scope, receive, send)
2025-07-16T13:08:55.354761320Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:08:55.354762967Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:08:55.354763870Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:08:55.354764818Z     raise exc
2025-07-16T13:08:55.354765787Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:08:55.354766749Z     await app(scope, receive, sender)
2025-07-16T13:08:55.354767622Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:08:55.354768518Z     response = await f(request)
2025-07-16T13:08:55.354769344Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354770196Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:08:55.354771107Z     raw_response = await run_endpoint_function(
2025-07-16T13:08:55.354771946Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354772779Z     ...<3 lines>...
2025-07-16T13:08:55.354773626Z     )
2025-07-16T13:08:55.354774396Z     ^
2025-07-16T13:08:55.354775177Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:08:55.354776112Z     return await dependant.call(**values)
2025-07-16T13:08:55.354776938Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:08:55.354777751Z   File "/app/app/routes/recording.py", line 200, in get_all_streamer_recording_settings
2025-07-16T13:08:55.354778671Z     raise HTTPException(status_code=500, detail=str(e))@router.post("/streamers/{streamer_id}", response_model=StreamerRecordingSettingsSchema)
2025-07-16T13:08:55.354779665Z           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
2025-07-16T13:08:55.354780663Z TypeError: unsupported operand type(s) for @: 'HTTPException' and 'function'
2025-07-16T13:08:55.384680877Z 2025-07-16 15:08:55,384 - streamvault - INFO - Request fb8b8de6-ae5c-4824-bcce-852c5bf645a6: GET /api/recording/active
2025-07-16T13:08:55.385170495Z 2025-07-16 15:08:55,385 - streamvault - DEBUG - Incoming request: GET /api/recording/active
2025-07-16T13:08:55.386267284Z 2025-07-16 15:08:55,386 - streamvault - DEBUG - Response status: 200
2025-07-16T13:08:55.387162506Z INFO:     172.23.0.1:57996 - "GET /api/recording/active HTTP/1.1" 200 OK
2025-07-16T13:09:01.635651510Z 2025-07-16 15:09:01,635 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:09:01.635091'}
2025-07-16T13:09:01.636350135Z 2025-07-16 15:09:01,635 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:09:01.636364718Z 2025-07-16 15:09:01,636 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:09:01.636393986Z 2025-07-16 15:09:01,636 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:09:06.356201853Z 2025-07-16 15:09:06,356 - streamvault - INFO - Request e121c11e-8a6d-4dca-97c8-fb5a9981247f: GET /api/settings
2025-07-16T13:09:06.358607699Z 2025-07-16 15:09:06,358 - streamvault - DEBUG - Incoming request: GET /api/settings
2025-07-16T13:09:06.358968124Z 2025-07-16 15:09:06,358 - streamvault - INFO - Request 35199f4b-b5b4-4eda-b2e6-c8c21d812c23: GET /api/recording/filename-presets
2025-07-16T13:09:06.361249119Z 2025-07-16 15:09:06,361 - streamvault - DEBUG - Incoming request: GET /api/recording/filename-presets
2025-07-16T13:09:06.361406677Z 2025-07-16 15:09:06,361 - streamvault - DEBUG - Response status: 200
2025-07-16T13:09:06.362757063Z 2025-07-16 15:09:06,362 - streamvault - DEBUG - Response status: 200
2025-07-16T13:09:06.363109969Z INFO:     172.23.0.1:49324 - "GET /api/settings HTTP/1.1" 200 OK
2025-07-16T13:09:06.363477752Z INFO:     172.23.0.1:49332 - "GET /api/recording/filename-presets HTTP/1.1" 200 OK
2025-07-16T13:09:11.641888258Z 2025-07-16 15:09:11,641 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:09:11.641370'}
2025-07-16T13:09:11.642744532Z 2025-07-16 15:09:11,642 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:09:11.642875253Z 2025-07-16 15:09:11,642 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:09:11.642959228Z 2025-07-16 15:09:11,642 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:09:12.424905895Z 2025-07-16 15:09:12,424 - streamvault - INFO - Request f6d8d1e9-380f-4b31-aca4-d7d7c87d2a10: GET /api/recording/settings
2025-07-16T13:09:12.425533796Z 2025-07-16 15:09:12,425 - streamvault - DEBUG - Incoming request: GET /api/recording/settings
2025-07-16T13:09:12.430272681Z 2025-07-16 15:09:12,430 - streamvault - DEBUG - Response status: 200
2025-07-16T13:09:12.431201836Z INFO:     172.23.0.1:52790 - "GET /api/recording/settings HTTP/1.1" 200 OK
2025-07-16T13:09:12.462905147Z 2025-07-16 15:09:12,462 - streamvault - INFO - Request a21dcef0-0134-449d-b486-9b1752364248: GET /api/categories
2025-07-16T13:09:12.463452645Z 2025-07-16 15:09:12,463 - streamvault - DEBUG - Incoming request: GET /api/categories
2025-07-16T13:09:12.473862740Z 2025-07-16 15:09:12,473 - streamvault - DEBUG - Found 1 categories in database
2025-07-16T13:09:12.474135670Z 2025-07-16 15:09:12,473 - streamvault - DEBUG - Category: Just Chatting, ID: 1, twitch_id: 509658
2025-07-16T13:09:12.478934360Z 2025-07-16 15:09:12,478 - streamvault - DEBUG - Response status: 200
2025-07-16T13:09:12.479517673Z INFO:     172.23.0.1:52790 - "GET /api/categories HTTP/1.1" 200 OK
2025-07-16T13:09:14.411785935Z 2025-07-16 15:09:14,411 - streamvault - INFO - Request 9e3f95e9-41d9-47e8-b404-c1b94172a223: GET /api/categories
2025-07-16T13:09:14.412548312Z 2025-07-16 15:09:14,412 - streamvault - DEBUG - Incoming request: GET /api/categories
2025-07-16T13:09:14.422134711Z 2025-07-16 15:09:14,421 - streamvault - DEBUG - Found 1 categories in database
2025-07-16T13:09:14.422387104Z 2025-07-16 15:09:14,422 - streamvault - DEBUG - Category: Just Chatting, ID: 1, twitch_id: 509658
2025-07-16T13:09:14.427434441Z 2025-07-16 15:09:14,427 - streamvault - DEBUG - Response status: 200
2025-07-16T13:09:14.428479972Z INFO:     172.23.0.1:52790 - "GET /api/categories HTTP/1.1" 200 OK
2025-07-16T13:09:14.463369838Z 2025-07-16 15:09:14,463 - streamvault - INFO - Request 0398aaad-8e06-41a0-ad78-ab565c05882b: POST /api/categories/preload-images
2025-07-16T13:09:14.470628499Z 2025-07-16 15:09:14,470 - streamvault - DEBUG - Incoming request: POST /api/categories/preload-images
2025-07-16T13:09:14.471162660Z 2025-07-16 15:09:14,470 - streamvault - INFO - Request a0a2c16b-a80e-417a-bee1-88a1bb565315: GET /api/categories/image/Just Chatting
2025-07-16T13:09:14.473005453Z 2025-07-16 15:09:14,472 - streamvault - DEBUG - Incoming request: GET /api/categories/image/Just Chatting
2025-07-16T13:09:14.474170986Z 2025-07-16 15:09:14,473 - streamvault - ERROR - Error getting category image for Just Chatting: 'UnifiedImageService' object has no attribute 'get_category_image_url'
2025-07-16T13:09:14.475150669Z 2025-07-16 15:09:14,474 - streamvault - DEBUG - Response status: 500
2025-07-16T13:09:14.477428635Z INFO:     172.23.0.1:52800 - "GET /api/categories/image/Just%20Chatting HTTP/1.1" 500 Internal Server Error
2025-07-16T13:09:14.478085602Z 2025-07-16 15:09:14,477 - streamvault - DEBUG - Response status: 200
2025-07-16T13:09:14.479755485Z INFO:     172.23.0.1:52790 - "POST /api/categories/preload-images HTTP/1.1" 200 OK
2025-07-16T13:09:14.482082621Z 2025-07-16 15:09:14,481 - streamvault - ERROR - Auth middleware error for /api/categories/preload-images: UnifiedImageService.download_category_image() missing 1 required positional argument: 'box_art_url'
2025-07-16T13:09:14.482769071Z 2025-07-16 15:09:14,482 - streamvault - INFO - Request 8cb6490c-9a17-4e0b-8d63-71f04fbeffe3: POST /api/categories/preload-images
2025-07-16T13:09:14.483374850Z 2025-07-16 15:09:14,483 - streamvault - DEBUG - Incoming request: POST /api/categories/preload-images
2025-07-16T13:09:21.649291662Z 2025-07-16 15:09:21,649 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:09:21.649056'}
2025-07-16T13:09:21.649555460Z 2025-07-16 15:09:21,649 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:09:21.649565338Z 2025-07-16 15:09:21,649 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:09:21.649566563Z 2025-07-16 15:09:21,649 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:09:31.653868780Z 2025-07-16 15:09:31,653 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:09:31.653736'}
2025-07-16T13:09:31.654070334Z 2025-07-16 15:09:31,653 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:09:31.654111278Z 2025-07-16 15:09:31,654 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:09:31.654119183Z 2025-07-16 15:09:31,654 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:09:41.657965541Z 2025-07-16 15:09:41,657 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:09:41.657426'}
2025-07-16T13:09:41.658595405Z 2025-07-16 15:09:41,658 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:09:41.658634349Z 2025-07-16 15:09:41,658 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:09:41.658724532Z 2025-07-16 15:09:41,658 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:09:51.664186393Z 2025-07-16 15:09:51,663 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:09:51.663667'}
2025-07-16T13:09:51.664869781Z 2025-07-16 15:09:51,664 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:09:51.664913605Z 2025-07-16 15:09:51,664 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:09:51.665012783Z 2025-07-16 15:09:51,664 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:10:01.667804689Z 2025-07-16 15:10:01,667 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:10:01.667557'}
2025-07-16T13:10:01.667962583Z 2025-07-16 15:10:01,667 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:10:01.668070073Z 2025-07-16 15:10:01,667 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:10:01.668204486Z 2025-07-16 15:10:01,668 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:10:11.674687559Z 2025-07-16 15:10:11,674 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:10:11.674056'}
2025-07-16T13:10:11.675334055Z 2025-07-16 15:10:11,674 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:10:11.675385223Z 2025-07-16 15:10:11,675 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:10:11.675540560Z 2025-07-16 15:10:11,675 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:10:21.681034699Z 2025-07-16 15:10:21,680 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:10:21.680318'}
2025-07-16T13:10:21.681700018Z 2025-07-16 15:10:21,681 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:10:21.681790724Z 2025-07-16 15:10:21,681 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:10:21.681807739Z 2025-07-16 15:10:21,681 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:10:30.813893070Z 2025-07-16 15:10:30,813 - streamvault - INFO - Request 188bde11-9580-4760-a019-93f81c14e1cc: GET /auth/setup
2025-07-16T13:10:30.814646715Z 2025-07-16 15:10:30,814 - streamvault - DEBUG - Incoming request: GET /auth/setup
2025-07-16T13:10:30.823636681Z 2025-07-16 15:10:30,823 - streamvault - DEBUG - Response status: 200
2025-07-16T13:10:30.824889895Z INFO:     172.23.0.1:46160 - "GET /auth/setup HTTP/1.1" 200 OK
2025-07-16T13:10:30.854393407Z 2025-07-16 15:10:30,853 - streamvault - INFO - Request 51183698-20e6-485a-acd9-4de37fe06733: GET /auth/check
2025-07-16T13:10:30.855083374Z 2025-07-16 15:10:30,854 - streamvault - DEBUG - Incoming request: GET /auth/check
2025-07-16T13:10:30.860829022Z 2025-07-16 15:10:30,860 - streamvault - DEBUG - Response status: 200
2025-07-16T13:10:30.861033004Z INFO:     172.23.0.1:46160 - "GET /auth/check HTTP/1.1" 200 OK
2025-07-16T13:10:30.892010342Z 2025-07-16 15:10:30,891 - streamvault - INFO - Request 80a6d9cc-30a3-455e-b77c-24eca56fb85d: GET /assets/AddStreamerView-B8PfZ1nP.js
2025-07-16T13:10:30.892820062Z 2025-07-16 15:10:30,892 - streamvault - DEBUG - Incoming request: GET /assets/AddStreamerView-B8PfZ1nP.js
2025-07-16T13:10:30.894857396Z 2025-07-16 15:10:30,894 - streamvault - INFO - Request 67b93773-b2bb-4da5-936a-6efcd3e7a2c5: GET /assets/AddStreamerView-CR9hQJ5C.css
2025-07-16T13:10:30.895473558Z 2025-07-16 15:10:30,895 - streamvault - DEBUG - Incoming request: GET /assets/AddStreamerView-CR9hQJ5C.css
2025-07-16T13:10:30.898602406Z 2025-07-16 15:10:30,898 - streamvault - DEBUG - Response status: 200
2025-07-16T13:10:30.899810613Z INFO:     172.23.0.1:46160 - "GET /assets/AddStreamerView-B8PfZ1nP.js HTTP/1.1" 200 OK
2025-07-16T13:10:30.902970109Z 2025-07-16 15:10:30,902 - streamvault - DEBUG - Response status: 200
2025-07-16T13:10:30.903717683Z INFO:     172.23.0.1:46172 - "GET /assets/AddStreamerView-CR9hQJ5C.css HTTP/1.1" 200 OK
2025-07-16T13:10:31.392691116Z 2025-07-16 15:10:31,392 - streamvault - INFO - Request 29ed3b82-3af4-46f5-9f7a-a46b80e1bb8b: GET /api/twitch/callback-url
2025-07-16T13:10:31.393480463Z 2025-07-16 15:10:31,393 - streamvault - DEBUG - Incoming request: GET /api/twitch/callback-url
2025-07-16T13:10:31.394841698Z 2025-07-16 15:10:31,394 - streamvault - DEBUG - Response status: 200
2025-07-16T13:10:31.395797554Z INFO:     172.23.0.1:46172 - "GET /api/twitch/callback-url HTTP/1.1" 200 OK
2025-07-16T13:10:31.687062106Z 2025-07-16 15:10:31,686 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:10:31.686533'}
2025-07-16T13:10:31.687674581Z 2025-07-16 15:10:31,687 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:10:31.687732165Z 2025-07-16 15:10:31,687 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:10:31.687855789Z 2025-07-16 15:10:31,687 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:10:36.616907990Z 2025-07-16 15:10:36,616 - streamvault - INFO - Request dd707eae-e0e3-487a-8400-2af16ad8ff55: GET /api/streamers/validate/gronkh
2025-07-16T13:10:36.617568848Z 2025-07-16 15:10:36,617 - streamvault - DEBUG - Incoming request: GET /api/streamers/validate/gronkh
2025-07-16T13:10:37.513676157Z 2025-07-16 15:10:37,513 - streamvault - DEBUG - Successfully obtained Twitch access token
2025-07-16T13:10:37.707579589Z 2025-07-16 15:10:37,707 - streamvault - DEBUG - Response status: 200
2025-07-16T13:10:37.708739333Z INFO:     172.23.0.1:46180 - "GET /api/streamers/validate/gronkh HTTP/1.1" 200 OK
2025-07-16T13:10:40.428103209Z 2025-07-16 15:10:40,427 - streamvault - INFO - Request 670cb31a-0c89-4f44-b926-ee33f80aaeeb: POST /api/streamers/gronkh
2025-07-16T13:10:40.428758309Z 2025-07-16 15:10:40,428 - streamvault - DEBUG - Incoming request: POST /api/streamers/gronkh
2025-07-16T13:10:40.431908745Z 2025-07-16 15:10:40,431 - streamvault - DEBUG - Adding streamer: gronkh
2025-07-16T13:10:40.619524676Z 2025-07-16 15:10:40,619 - streamvault - DEBUG - User data retrieved: {'id': '12875057', 'login': 'gronkh', 'display_name': 'GRONKH', 'type': '', 'broadcaster_type': 'partner', 'description': 'Zart im Schmelz und sÃ¼ffig im Abgang. Ungebremster Spieltrieb seit 1896.', 'profile_image_url': 'https://static-cdn.jtvnw.net/jtv_user_pictures/gronkh-profile_image-76b34139eaa46bb5-300x300.png', 'offline_image_url': 'https://static-cdn.jtvnw.net/jtv_user_pictures/0719ca63-861c-457d-ac84-70448359cf26-channel_offline_image-1920x1080.png', 'view_count': 0, 'created_at': '2010-05-31T13:45:53Z'}
2025-07-16T13:10:40.626738011Z 2025-07-16 15:10:40,626 - streamvault - INFO - Successfully cached profile image for streamer 12875057
2025-07-16T13:10:40.818451495Z 2025-07-16 15:10:40,817 - streamvault - DEBUG - Streamer gronkh is currently offline
2025-07-16T13:10:41.693808022Z 2025-07-16 15:10:41,693 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:10:41.693178'}
2025-07-16T13:10:41.694378731Z 2025-07-16 15:10:41,694 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:10:41.694417278Z 2025-07-16 15:10:41,694 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:10:41.694577729Z 2025-07-16 15:10:41,694 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:10:41.709881207Z 2025-07-16 15:10:41,709 - streamvault - DEBUG - Starting batch subscription process for twitch_id: 12875057
2025-07-16T13:10:41.944342093Z 2025-07-16 15:10:41,943 - streamvault - INFO - Subscribed to stream.online for twitch_id: 12875057
2025-07-16T13:10:42.206745534Z 2025-07-16 15:10:42,206 - streamvault - INFO - Subscribed to stream.offline for twitch_id: 12875057
2025-07-16T13:10:42.409137512Z 2025-07-16 15:10:42,408 - streamvault - INFO - Subscribed to channel.update for twitch_id: 12875057
2025-07-16T13:10:42.410125943Z 2025-07-16 15:10:42,409 - streamvault - INFO - Successfully subscribed to EventSub events for 12875057
2025-07-16T13:10:42.410232866Z 2025-07-16 15:10:42,410 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'success', 'message': 'Added streamer GRONKH'}
2025-07-16T13:10:42.410926980Z 2025-07-16 15:10:42,410 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:10:42.412333503Z 2025-07-16 15:10:42,410 - streamvault - ERROR - Error adding streamer: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:10:42.412387907Z Traceback (most recent call last):
2025-07-16T13:10:42.412399683Z   File "/app/app/routes/streamers.py", line 235, in add_streamer
2025-07-16T13:10:42.412408482Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:10:42.412416294Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:10:42.412423672Z         new_streamer.id,
2025-07-16T13:10:42.412430409Z         ^^^^^^^^^^^^^^^^
2025-07-16T13:10:42.412437661Z         new_streamer.profile_image_url
2025-07-16T13:10:42.412444466Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:10:42.412451074Z     ),
2025-07-16T13:10:42.412458136Z     ^
2025-07-16T13:10:42.412464977Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:10:42.415310998Z 2025-07-16 15:10:42,414 - streamvault - DEBUG - Response status: 500
2025-07-16T13:10:42.416463822Z INFO:     172.23.0.1:46180 - "POST /api/streamers/gronkh HTTP/1.1" 500 Internal Server Error
2025-07-16T13:10:43.366023343Z 2025-07-16 15:10:43,365 - streamvault - INFO - Request a7bbd02b-afd2-43fc-b0c0-4bd802d1cec8: POST /eventsub
2025-07-16T13:10:43.367258245Z 2025-07-16 15:10:43,367 - streamvault - DEBUG - Incoming request: POST /eventsub
2025-07-16T13:10:43.369101202Z 2025-07-16 15:10:43,368 - streamvault - DEBUG - Message ID: a505d0f4-ffd6-42d3-b22b-084203d64d5d
2025-07-16T13:10:43.369267420Z 2025-07-16 15:10:43,369 - streamvault - DEBUG - Timestamp: 2025-07-16T13:10:41.861871188Z
2025-07-16T13:10:43.369401102Z 2025-07-16 15:10:43,369 - streamvault - DEBUG - Received signature: sha256=b55eb2fcea49e7c57abc3dc349829f2dff9961f52b3eb1c8c42c908f81dadc6e
2025-07-16T13:10:43.369581735Z 2025-07-16 15:10:43,369 - streamvault - DEBUG - Raw body: {"subscription":{"id":"baf97437-aabf-46d2-8bcd-62b58a1128c3","status":"webhook_callback_verification_pending","type":"stream.online","version":"1","condition":{"broadcaster_user_id":"12875057"},"transport":{"method":"webhook","callback":"https://streamvault-develop.meberthosting.de/eventsub"},"created_at":"2025-07-16T13:10:41.856635406Z","cost":1},"challenge":"JurrTfKmAF3Sxhf8OxTOf21bqpG9mxE2ug-bTGpDgN0"}
2025-07-16T13:10:43.369776727Z 2025-07-16 15:10:43,369 - streamvault - DEBUG - HMAC message length: 474
2025-07-16T13:10:43.369903638Z 2025-07-16 15:10:43,369 - streamvault - DEBUG - Calculated signature: sha256=b55eb2fcea49e7c57abc3dc349829f2dff9961f52b3eb1c8c42c908f81dadc6e
2025-07-16T13:10:43.370039636Z 2025-07-16 15:10:43,369 - streamvault - DEBUG - Secret length: 32
2025-07-16T13:10:43.370251116Z 2025-07-16 15:10:43,370 - streamvault - INFO - Challenge request received and processed successfully.
2025-07-16T13:10:43.370331642Z 2025-07-16 15:10:43,370 - streamvault - DEBUG - Response status: 200
2025-07-16T13:10:43.370627876Z INFO:     172.23.0.1:46180 - "POST /eventsub HTTP/1.1" 200 OK
2025-07-16T13:10:43.543642834Z 2025-07-16 15:10:43,543 - streamvault - INFO - Request 9844df69-f97a-466f-b5f9-0c274f7c0d32: POST /eventsub
2025-07-16T13:10:43.544366676Z 2025-07-16 15:10:43,543 - streamvault - DEBUG - Incoming request: POST /eventsub
2025-07-16T13:10:43.546188509Z 2025-07-16 15:10:43,545 - streamvault - DEBUG - Message ID: 8449c786-b973-4067-9519-b521ac6df789
2025-07-16T13:10:43.546225196Z 2025-07-16 15:10:43,546 - streamvault - DEBUG - Timestamp: 2025-07-16T13:10:42.067699858Z
2025-07-16T13:10:43.546245545Z 2025-07-16 15:10:43,546 - streamvault - DEBUG - Received signature: sha256=85bea0e8ac938d4a83f41ae4d4a1adc5d187432477112c184cac2098f4f6d3b7
2025-07-16T13:10:43.546334891Z 2025-07-16 15:10:43,546 - streamvault - DEBUG - Raw body: {"subscription":{"id":"80f6634f-6675-46fc-a7a6-45e526c24c2e","status":"webhook_callback_verification_pending","type":"stream.offline","version":"1","condition":{"broadcaster_user_id":"12875057"},"transport":{"method":"webhook","callback":"https://streamvault-develop.meberthosting.de/eventsub"},"created_at":"2025-07-16T13:10:42.062496169Z","cost":1},"challenge":"Mgz8l1rofvN9zIIib_OmL8CEx9X8kWcc0SLwQ7ch12g"}
2025-07-16T13:10:43.546593901Z 2025-07-16 15:10:43,546 - streamvault - DEBUG - HMAC message length: 475
2025-07-16T13:10:43.546644361Z 2025-07-16 15:10:43,546 - streamvault - DEBUG - Calculated signature: sha256=85bea0e8ac938d4a83f41ae4d4a1adc5d187432477112c184cac2098f4f6d3b7
2025-07-16T13:10:43.546734085Z 2025-07-16 15:10:43,546 - streamvault - DEBUG - Secret length: 32
2025-07-16T13:10:43.546989546Z 2025-07-16 15:10:43,546 - streamvault - INFO - Challenge request received and processed successfully.
2025-07-16T13:10:43.547369724Z 2025-07-16 15:10:43,547 - streamvault - DEBUG - Response status: 200
2025-07-16T13:10:43.548161312Z INFO:     172.23.0.1:46180 - "POST /eventsub HTTP/1.1" 200 OK
2025-07-16T13:10:43.832377512Z 2025-07-16 15:10:43,832 - streamvault - INFO - Request 69683209-3835-4dd0-a992-af5013aa7704: POST /eventsub
2025-07-16T13:10:43.834250327Z 2025-07-16 15:10:43,833 - streamvault - DEBUG - Incoming request: POST /eventsub
2025-07-16T13:10:43.837417550Z 2025-07-16 15:10:43,837 - streamvault - DEBUG - Message ID: 4a0e8719-546d-4fe4-8ce1-778142f7c380
2025-07-16T13:10:43.837680749Z 2025-07-16 15:10:43,837 - streamvault - DEBUG - Timestamp: 2025-07-16T13:10:42.329604778Z
2025-07-16T13:10:43.837907877Z 2025-07-16 15:10:43,837 - streamvault - DEBUG - Received signature: sha256=263a4d1096b9f1a0a9f85cab615f7a80f353492da874ebd9ad5497819a5e17bf
2025-07-16T13:10:43.838137483Z 2025-07-16 15:10:43,837 - streamvault - DEBUG - Raw body: {"subscription":{"id":"1277f9dd-86fb-40ff-bfc1-56bc4966d1b7","status":"webhook_callback_verification_pending","type":"channel.update","version":"1","condition":{"broadcaster_user_id":"12875057"},"transport":{"method":"webhook","callback":"https://streamvault-develop.meberthosting.de/eventsub"},"created_at":"2025-07-16T13:10:42.320015333Z","cost":1},"challenge":"1KWGdw__YWYC-L8SpUHNS3b1ds8ChpDJzPEN8ynvK1c"}
2025-07-16T13:10:43.838450620Z 2025-07-16 15:10:43,838 - streamvault - DEBUG - HMAC message length: 475
2025-07-16T13:10:43.838707346Z 2025-07-16 15:10:43,838 - streamvault - DEBUG - Calculated signature: sha256=263a4d1096b9f1a0a9f85cab615f7a80f353492da874ebd9ad5497819a5e17bf
2025-07-16T13:10:43.838897725Z 2025-07-16 15:10:43,838 - streamvault - DEBUG - Secret length: 32
2025-07-16T13:10:43.838918039Z 2025-07-16 15:10:43,838 - streamvault - INFO - Challenge request received and processed successfully.
2025-07-16T13:10:43.839049140Z 2025-07-16 15:10:43,839 - streamvault - DEBUG - Response status: 200
2025-07-16T13:10:43.839420614Z INFO:     172.23.0.1:46180 - "POST /eventsub HTTP/1.1" 200 OK
2025-07-16T13:10:51.700260617Z 2025-07-16 15:10:51,699 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:10:51.699684'}
2025-07-16T13:10:51.701041468Z 2025-07-16 15:10:51,700 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:10:51.701076840Z 2025-07-16 15:10:51,700 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:10:51.701162415Z 2025-07-16 15:10:51,700 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:11:01.707539777Z 2025-07-16 15:11:01,707 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:11:01.706939'}
2025-07-16T13:11:01.708116746Z 2025-07-16 15:11:01,707 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:11:01.708147137Z 2025-07-16 15:11:01,707 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:11:01.708310005Z 2025-07-16 15:11:01,708 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:11:11.713661555Z 2025-07-16 15:11:11,713 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:11:11.713087'}
2025-07-16T13:11:11.714233055Z 2025-07-16 15:11:11,713 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:11:11.714369156Z 2025-07-16 15:11:11,714 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:11:11.714433933Z 2025-07-16 15:11:11,714 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:11:21.720677527Z 2025-07-16 15:11:21,720 - streamvault - DEBUG - WebSocketManager: Attempting to send notification: {'type': 'active_recordings_update', 'data': [], 'timestamp': '2025-07-16T13:11:21.720041'}
2025-07-16T13:11:21.721311168Z 2025-07-16 15:11:21,720 - streamvault - DEBUG - WebSocketManager: Notification sent to Address(host='172.23.0.1', port=56182)
2025-07-16T13:11:21.721414814Z 2025-07-16 15:11:21,721 - streamvault - DEBUG - WebSocketManager: Sent active recordings update to 1 clients
2025-07-16T13:11:21.721557423Z 2025-07-16 15:11:21,721 - streamvault - DEBUG - Broadcasted 0 active recordings to 1 clients
2025-07-16T13:11:22.960018455Z 2025-07-16 15:11:22,959 - streamvault - INFO - Request f337ecd8-48ad-42fe-8358-72f3af182be6: GET /auth/setup
2025-07-16T13:11:22.960730250Z 2025-07-16 15:11:22,960 - streamvault - DEBUG - Incoming request: GET /auth/setup
2025-07-16T13:11:22.968730669Z 2025-07-16 15:11:22,968 - streamvault - DEBUG - Response status: 200
2025-07-16T13:11:22.969729681Z INFO:     172.23.0.1:46040 - "GET /auth/setup HTTP/1.1" 200 OK
2025-07-16T13:11:22.998608525Z 2025-07-16 15:11:22,998 - streamvault - INFO - Request 31b2ffb0-8259-4554-a10e-effc6a579fd4: GET /auth/check
2025-07-16T13:11:22.999262255Z 2025-07-16 15:11:22,999 - streamvault - DEBUG - Incoming request: GET /auth/check
2025-07-16T13:11:23.011788720Z 2025-07-16 15:11:23,011 - streamvault - DEBUG - Response status: 200
2025-07-16T13:11:23.013355658Z INFO:     172.23.0.1:46040 - "GET /auth/check HTTP/1.1" 200 OK
2025-07-16T13:11:23.041359556Z 2025-07-16 15:11:23,040 - streamvault - INFO - Request 6a055c38-6122-4929-b32e-ec0f169bc98c: GET /assets/SubscriptionsView-C6SbsmWu.js
2025-07-16T13:11:23.042723902Z 2025-07-16 15:11:23,042 - streamvault - DEBUG - Incoming request: GET /assets/SubscriptionsView-C6SbsmWu.js
2025-07-16T13:11:23.044959270Z 2025-07-16 15:11:23,044 - streamvault - DEBUG - Response status: 200
2025-07-16T13:11:23.046036136Z INFO:     172.23.0.1:46040 - "GET /assets/SubscriptionsView-C6SbsmWu.js HTTP/1.1" 200 OK
2025-07-16T13:11:23.514827918Z 2025-07-16 15:11:23,514 - streamvault - INFO - Request beb079b1-a501-4694-a900-6d1ed7e73561: GET /api/streamers/subscriptions
2025-07-16T13:11:23.515568132Z 2025-07-16 15:11:23,515 - streamvault - DEBUG - Incoming request: GET /api/streamers/subscriptions
2025-07-16T13:11:23.516434345Z 2025-07-16 15:11:23,516 - streamvault - DEBUG - Entering list_subscriptions()
2025-07-16T13:11:23.516600208Z 2025-07-16 15:11:23,516 - streamvault - DEBUG - Using access_token: 4xli4t... (truncated)
2025-07-16T13:11:23.516882974Z 2025-07-16 15:11:23,516 - streamvault - DEBUG - Requesting Twitch subscriptions https://api.twitch.tv/helix/eventsub/subscriptions with headers={'Client-ID': 'fx4xg7kx7fwksmm7qxgi3cux496lp3', 'Authorization': 'Bearer 4xli4tzn1l7k8jq52a02ifah26yw9n'}
2025-07-16T13:11:23.720321252Z 2025-07-16 15:11:23,719 - streamvault - DEBUG - Received subscription data: {'total': 6, 'data': [{'id': '321e3387-4a18-4937-9879-0b6bc51f6588', 'status': 'enabled', 'type': 'stream.online', 'version': '1', 'condition': {'broadcaster_user_id': '48670768'}, 'created_at': '2025-05-25T12:49:20.08571828Z', 'transport': {'method': 'webhook', 'callback': 'https://streamvault-develop.meberthosting.de/eventsub'}, 'cost': 0}, {'id': 'b41e53c8-23a2-452f-b4de-8580d7056490', 'status': 'enabled', 'type': 'stream.offline', 'version': '1', 'condition': {'broadcaster_user_id': '48670768'}, 'created_at': '2025-05-25T12:49:20.288992885Z', 'transport': {'method': 'webhook', 'callback': 'https://streamvault-develop.meberthosting.de/eventsub'}, 'cost': 0}, {'id': '73a66c73-ff19-43de-8ac9-baa8e22db850', 'status': 'enabled', 'type': 'channel.update', 'version': '1', 'condition': {'broadcaster_user_id': '48670768'}, 'created_at': '2025-05-25T12:49:20.491527916Z', 'transport': {'method': 'webhook', 'callback': 'https://streamvault-develop.meberthosting.de/eventsub'}, 'cost': 0}, {'id': 'baf97437-aabf-46d2-8bcd-62b58a1128c3', 'status': 'enabled', 'type': 'stream.online', 'version': '1', 'condition': {'broadcaster_user_id': '12875057'}, 'created_at': '2025-07-16T13:10:41.856635406Z', 'transport': {'method': 'webhook', 'callback': 'https://streamvault-develop.meberthosting.de/eventsub'}, 'cost': 1}, {'id': '80f6634f-6675-46fc-a7a6-45e526c24c2e', 'status': 'enabled', 'type': 'stream.offline', 'version': '1', 'condition': {'broadcaster_user_id': '12875057'}, 'created_at': '2025-07-16T13:10:42.062496169Z', 'transport': {'method': 'webhook', 'callback': 'https://streamvault-develop.meberthosting.de/eventsub'}, 'cost': 1}, {'id': '1277f9dd-86fb-40ff-bfc1-56bc4966d1b7', 'status': 'enabled', 'type': 'channel.update', 'version': '1', 'condition': {'broadcaster_user_id': '12875057'}, 'created_at': '2025-07-16T13:10:42.320015333Z', 'transport': {'method': 'webhook', 'callback': 'https://streamvault-develop.meberthosting.de/eventsub'}, 'cost': 1}], 'max_total_cost': 10000, 'total_cost': 3, 'pagination': {}}
2025-07-16T13:11:23.722129448Z 2025-07-16 15:11:23,721 - streamvault - DEBUG - Response status: 200
2025-07-16T13:11:23.723125171Z INFO:     172.23.0.1:46040 - "GET /api/streamers/subscriptions HTTP/1.1" 200 OK
2025-07-16T13:11:23.756455705Z 2025-07-16 15:11:23,756 - streamvault - INFO - Request 4d6d5de3-ded0-4715-9746-854959f00b49: GET /api/streamers
2025-07-16T13:11:23.757106032Z 2025-07-16 15:11:23,756 - streamvault - DEBUG - Incoming request: GET /api/streamers
2025-07-16T13:11:23.771434018Z 2025-07-16 15:11:23,771 - streamvault - ERROR - Auth middleware error for /api/streamers: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:11:23.771959250Z 2025-07-16 15:11:23,771 - streamvault - INFO - Request 512a2199-4cec-47ac-a988-51f99c4de9a3: GET /api/streamers
2025-07-16T13:11:23.772354248Z 2025-07-16 15:11:23,772 - streamvault - DEBUG - Incoming request: GET /api/streamers
2025-07-16T13:11:23.787763057Z 2025-07-16 15:11:23,778 - streamvault - ERROR - Error processing request: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:11:23.787768848Z   + Exception Group Traceback (most recent call last):
2025-07-16T13:11:23.787770011Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
2025-07-16T13:11:23.787771227Z   |     yield
2025-07-16T13:11:23.787772136Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 186, in __call__
2025-07-16T13:11:23.787773133Z   |     async with anyio.create_task_group() as task_group:
2025-07-16T13:11:23.787774004Z   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.787774827Z   |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
2025-07-16T13:11:23.787775767Z   |     raise BaseExceptionGroup(
2025-07-16T13:11:23.787776615Z   |         "unhandled errors in a TaskGroup", self._exceptions
2025-07-16T13:11:23.787777683Z   |     ) from None
2025-07-16T13:11:23.787783593Z   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
2025-07-16T13:11:23.787784531Z   +-+---------------- 1 ----------------
2025-07-16T13:11:23.787785343Z     | Traceback (most recent call last):
2025-07-16T13:11:23.787786193Z     |   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:11:23.787787120Z     |     return await self.app(scope, receive, send)
2025-07-16T13:11:23.787788026Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787788911Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.787789847Z     |     with collapse_excgroups():
2025-07-16T13:11:23.787790677Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.787791497Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.787792400Z     |     self.gen.throw(value)
2025-07-16T13:11:23.787793260Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.787794110Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.787795064Z     |     raise exc
2025-07-16T13:11:23.787795832Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.787796760Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.787797684Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787798534Z     |   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:11:23.787799431Z     |     response = await call_next(request)
2025-07-16T13:11:23.787800252Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787801361Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.787802335Z     |     raise app_exc
2025-07-16T13:11:23.787803114Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.787804016Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.787804909Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.787805831Z     |     with collapse_excgroups():
2025-07-16T13:11:23.787806641Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.787807453Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.787808364Z     |     self.gen.throw(value)
2025-07-16T13:11:23.787809157Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.787810045Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.787812058Z     |     raise exc
2025-07-16T13:11:23.787812877Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.787813809Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.787814657Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787815501Z     |   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:11:23.787816380Z     |     response = await call_next(request)
2025-07-16T13:11:23.787817223Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787818054Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.787818962Z     |     raise app_exc
2025-07-16T13:11:23.787819760Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.787820672Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.787821512Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.787822417Z     |     with collapse_excgroups():
2025-07-16T13:11:23.787823234Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.787824033Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.787824911Z     |     self.gen.throw(value)
2025-07-16T13:11:23.787825693Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.787826484Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.787827420Z     |     raise exc
2025-07-16T13:11:23.787828193Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.787829111Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.787829986Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787831023Z     |   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:11:23.787831927Z     |     response = await call_next(request)
2025-07-16T13:11:23.787832764Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787833606Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.787834530Z     |     raise app_exc
2025-07-16T13:11:23.787835322Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.787836225Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.787837085Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.787838950Z     |     with collapse_excgroups():
2025-07-16T13:11:23.787839823Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.787840646Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.787841607Z     |     self.gen.throw(value)
2025-07-16T13:11:23.787842404Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.787843192Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.787844184Z     |     raise exc
2025-07-16T13:11:23.787844988Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.787845895Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.787846732Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787847569Z     |   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:11:23.787848488Z     |     response = await call_next(request)
2025-07-16T13:11:23.787849308Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787850110Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.787851034Z     |     raise app_exc
2025-07-16T13:11:23.787851816Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.787852710Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.787853582Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:11:23.787854475Z     |     await self.app(scope, receive, send)
2025-07-16T13:11:23.787855365Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:11:23.787856276Z     |     await self.app(scope, receive, send)
2025-07-16T13:11:23.787857110Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:11:23.787858294Z     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:11:23.787859209Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:23.787860128Z     |     raise exc
2025-07-16T13:11:23.787860897Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:23.787861822Z     |     await app(scope, receive, sender)
2025-07-16T13:11:23.787862663Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:11:23.787863568Z     |     await self.middleware_stack(scope, receive, send)
2025-07-16T13:11:23.787865169Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:11:23.787866098Z     |     await route.handle(scope, receive, send)
2025-07-16T13:11:23.787866934Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:11:23.787867847Z     |     await self.app(scope, receive, send)
2025-07-16T13:11:23.787868691Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:11:23.787869602Z     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:11:23.787870471Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:23.787871385Z     |     raise exc
2025-07-16T13:11:23.787872168Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:23.787873079Z     |     await app(scope, receive, sender)
2025-07-16T13:11:23.787873898Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:11:23.787874791Z     |     response = await f(request)
2025-07-16T13:11:23.787875606Z     |                ^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787876447Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:11:23.787877371Z     |     raw_response = await run_endpoint_function(
2025-07-16T13:11:23.787878194Z     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787879024Z     |     ...<3 lines>...
2025-07-16T13:11:23.787880002Z     |     )
2025-07-16T13:11:23.787880825Z     |     ^
2025-07-16T13:11:23.787881594Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:11:23.787882539Z     |     return await dependant.call(**values)
2025-07-16T13:11:23.787883378Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787884208Z     |   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:11:23.787885094Z     |     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:11:23.787886083Z     |                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:11:23.787886973Z     |         streamer.id,
2025-07-16T13:11:23.787887781Z     |         ^^^^^^^^^^^^
2025-07-16T13:11:23.787888582Z     |         streamer.profile_image_url
2025-07-16T13:11:23.787889385Z     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787890189Z     |     ),
2025-07-16T13:11:23.787891032Z     |     ^
2025-07-16T13:11:23.787891794Z     | TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:11:23.787893413Z     +------------------------------------
2025-07-16T13:11:23.787894252Z 
2025-07-16T13:11:23.787895057Z During handling of the above exception, another exception occurred:
2025-07-16T13:11:23.787895951Z 
2025-07-16T13:11:23.787896722Z Traceback (most recent call last):
2025-07-16T13:11:23.787897519Z   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:11:23.787898462Z     return await self.app(scope, receive, send)
2025-07-16T13:11:23.787899273Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787900079Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.787901017Z     with collapse_excgroups():
2025-07-16T13:11:23.787901836Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.787902658Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.787903565Z     self.gen.throw(value)
2025-07-16T13:11:23.787904362Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.787905149Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.787906053Z     raise exc
2025-07-16T13:11:23.787906852Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.787907778Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.787908665Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787909491Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:11:23.787910357Z     response = await call_next(request)
2025-07-16T13:11:23.787911160Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787911976Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.787912910Z     raise app_exc
2025-07-16T13:11:23.787913706Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.787914591Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.787915441Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.787916337Z     with collapse_excgroups():
2025-07-16T13:11:23.787917157Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.787917962Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.787918865Z     self.gen.throw(value)
2025-07-16T13:11:23.787919654Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.787920527Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.787922213Z     raise exc
2025-07-16T13:11:23.787923007Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.787923922Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.787924794Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787926398Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:11:23.787927317Z     response = await call_next(request)
2025-07-16T13:11:23.787928116Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787928958Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.787929895Z     raise app_exc
2025-07-16T13:11:23.787930678Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.787931577Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.787932415Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.787933313Z     with collapse_excgroups():
2025-07-16T13:11:23.787934147Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.787934967Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.787935839Z     self.gen.throw(value)
2025-07-16T13:11:23.787936630Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.787937417Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.787938336Z     raise exc
2025-07-16T13:11:23.787939099Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.787939999Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.787940867Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787941702Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:11:23.787942569Z     response = await call_next(request)
2025-07-16T13:11:23.787943391Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787944206Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.787945108Z     raise app_exc
2025-07-16T13:11:23.787945876Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.787946770Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.787947628Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.787948541Z     with collapse_excgroups():
2025-07-16T13:11:23.787949355Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.787950944Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.787951869Z     self.gen.throw(value)
2025-07-16T13:11:23.787952684Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.787953631Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.787954602Z     raise exc
2025-07-16T13:11:23.787955388Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.787956304Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.787957128Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787957962Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:11:23.787958841Z     response = await call_next(request)
2025-07-16T13:11:23.787959642Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787960465Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.787961383Z     raise app_exc
2025-07-16T13:11:23.787962175Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.787963064Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.787963899Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:11:23.787964795Z     await self.app(scope, receive, send)
2025-07-16T13:11:23.787965608Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:11:23.787966511Z     await self.app(scope, receive, send)
2025-07-16T13:11:23.787967330Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:11:23.787968250Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:11:23.787969146Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:23.787970078Z     raise exc
2025-07-16T13:11:23.787970856Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:23.787971760Z     await app(scope, receive, sender)
2025-07-16T13:11:23.787972586Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:11:23.787973457Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:11:23.787974291Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:11:23.787975180Z     await route.handle(scope, receive, send)
2025-07-16T13:11:23.787976017Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:11:23.787978522Z     await self.app(scope, receive, send)
2025-07-16T13:11:23.787979390Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:11:23.787980310Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:11:23.787981405Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:23.787982325Z     raise exc
2025-07-16T13:11:23.787983093Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:23.787983996Z     await app(scope, receive, sender)
2025-07-16T13:11:23.787984837Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:11:23.787985720Z     response = await f(request)
2025-07-16T13:11:23.787986574Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787987390Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:11:23.787988281Z     raw_response = await run_endpoint_function(
2025-07-16T13:11:23.787989098Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787989915Z     ...<3 lines>...
2025-07-16T13:11:23.787990811Z     )
2025-07-16T13:11:23.787991659Z     ^
2025-07-16T13:11:23.787992402Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:11:23.787993340Z     return await dependant.call(**values)
2025-07-16T13:11:23.787994182Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.787995005Z   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:11:23.787995892Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:11:23.787996821Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:11:23.787997731Z         streamer.id,
2025-07-16T13:11:23.787998562Z         ^^^^^^^^^^^^
2025-07-16T13:11:23.787999340Z         streamer.profile_image_url
2025-07-16T13:11:23.788000158Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.788000959Z     ),
2025-07-16T13:11:23.788001783Z     ^
2025-07-16T13:11:23.788002536Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:11:23.788003461Z 
2025-07-16T13:11:23.788004219Z During handling of the above exception, another exception occurred:
2025-07-16T13:11:23.788005092Z 
2025-07-16T13:11:23.788005839Z Traceback (most recent call last):
2025-07-16T13:11:23.788006641Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
2025-07-16T13:11:23.788008345Z     await self.app(scope, receive, _send)
2025-07-16T13:11:23.788009215Z   File "/app/app/middleware/auth.py", line 70, in __call__
2025-07-16T13:11:23.788010096Z     return await self.app(scope, receive, send)
2025-07-16T13:11:23.788010931Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.788011745Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.788012682Z     with collapse_excgroups():
2025-07-16T13:11:23.788013526Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.788014325Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.788015222Z     self.gen.throw(value)
2025-07-16T13:11:23.788016031Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.788016810Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.788017772Z     raise exc
2025-07-16T13:11:23.788018687Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.788019624Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.788020488Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.788021347Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:11:23.788022234Z     response = await call_next(request)
2025-07-16T13:11:23.788023049Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.788023860Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.788024776Z     raise app_exc
2025-07-16T13:11:23.788025548Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.788026480Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.788027320Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.788028228Z     with collapse_excgroups():
2025-07-16T13:11:23.788029024Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.788029824Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.788030727Z     self.gen.throw(value)
2025-07-16T13:11:23.788031515Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.788032289Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.788033235Z     raise exc
2025-07-16T13:11:23.788033987Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.788034894Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.788036865Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.788037745Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:11:23.788038598Z     response = await call_next(request)
2025-07-16T13:11:23.788039421Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.788040235Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.788041161Z     raise app_exc
2025-07-16T13:11:23.788041948Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.788042842Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.788043681Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.788044605Z     with collapse_excgroups():
2025-07-16T13:11:23.788045391Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.788046209Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.788047092Z     self.gen.throw(value)
2025-07-16T13:11:23.788047889Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.788048730Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.788049668Z     raise exc
2025-07-16T13:11:23.788050443Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.788051383Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.788052227Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.788053066Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:11:23.788053945Z     response = await call_next(request)
2025-07-16T13:11:23.788054782Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.788055592Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.788056497Z     raise app_exc
2025-07-16T13:11:23.788057264Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.788058174Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.788059030Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.788059935Z     with collapse_excgroups():
2025-07-16T13:11:23.788060748Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.788061586Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.788062472Z     self.gen.throw(value)
2025-07-16T13:11:23.788063279Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.788064939Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.788065885Z     raise exc
2025-07-16T13:11:23.788066649Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.788067554Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.788068409Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.788069285Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:11:23.788070162Z     response = await call_next(request)
2025-07-16T13:11:23.788070981Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.788071800Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.788072736Z     raise app_exc
2025-07-16T13:11:23.788073508Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.788074437Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.788075263Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:11:23.788076163Z     await self.app(scope, receive, send)
2025-07-16T13:11:23.788076974Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:11:23.788077879Z     await self.app(scope, receive, send)
2025-07-16T13:11:23.788078782Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:11:23.788079694Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:11:23.788080567Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:23.788081480Z     raise exc
2025-07-16T13:11:23.788082252Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:23.788083184Z     await app(scope, receive, sender)
2025-07-16T13:11:23.788084002Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:11:23.788084903Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:11:23.788085735Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:11:23.788086622Z     await route.handle(scope, receive, send)
2025-07-16T13:11:23.788087465Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:11:23.788088359Z     await self.app(scope, receive, send)
2025-07-16T13:11:23.788089169Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:11:23.788090121Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:11:23.788096985Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:23.788097954Z     raise exc
2025-07-16T13:11:23.788098724Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:23.788099650Z     await app(scope, receive, sender)
2025-07-16T13:11:23.788100474Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:11:23.788101357Z     response = await f(request)
2025-07-16T13:11:23.788102178Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.788103013Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:11:23.788103927Z     raw_response = await run_endpoint_function(
2025-07-16T13:11:23.788104771Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.788105585Z     ...<3 lines>...
2025-07-16T13:11:23.788106415Z     )
2025-07-16T13:11:23.788107169Z     ^
2025-07-16T13:11:23.788107908Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:11:23.788108831Z     return await dependant.call(**values)
2025-07-16T13:11:23.788109648Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.788110484Z   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:11:23.788111359Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:11:23.788112236Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:11:23.788113111Z         streamer.id,
2025-07-16T13:11:23.788113991Z         ^^^^^^^^^^^^
2025-07-16T13:11:23.788114804Z         streamer.profile_image_url
2025-07-16T13:11:23.788115612Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.788116452Z     ),
2025-07-16T13:11:23.788117221Z     ^
2025-07-16T13:11:23.788117978Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:11:23.788118867Z INFO:     172.23.0.1:46040 - "GET /api/streamers HTTP/1.1" 500 Internal Server Error
2025-07-16T13:11:23.795798661Z ERROR:    Exception in ASGI application
2025-07-16T13:11:23.795807009Z   + Exception Group Traceback (most recent call last):
2025-07-16T13:11:23.795808829Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
2025-07-16T13:11:23.795810731Z   |     yield
2025-07-16T13:11:23.795811906Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 186, in __call__
2025-07-16T13:11:23.795813376Z   |     async with anyio.create_task_group() as task_group:
2025-07-16T13:11:23.795820331Z   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.795821762Z   |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
2025-07-16T13:11:23.795823208Z   |     raise BaseExceptionGroup(
2025-07-16T13:11:23.795824522Z   |         "unhandled errors in a TaskGroup", self._exceptions
2025-07-16T13:11:23.795826096Z   |     ) from None
2025-07-16T13:11:23.795827396Z   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
2025-07-16T13:11:23.795828553Z   +-+---------------- 1 ----------------
2025-07-16T13:11:23.795829656Z     | Traceback (most recent call last):
2025-07-16T13:11:23.795830867Z     |   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:11:23.795832270Z     |     return await self.app(scope, receive, send)
2025-07-16T13:11:23.795833631Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795834907Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.795836341Z     |     with collapse_excgroups():
2025-07-16T13:11:23.795837669Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.795838931Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.795840278Z     |     self.gen.throw(value)
2025-07-16T13:11:23.795841522Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.795842742Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.795844281Z     |     raise exc
2025-07-16T13:11:23.795845545Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.795847026Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.795848474Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795849885Z     |   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:11:23.795851273Z     |     response = await call_next(request)
2025-07-16T13:11:23.795852572Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795853958Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.795854955Z     |     raise app_exc
2025-07-16T13:11:23.795856342Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.795857326Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.795858253Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.795859204Z     |     with collapse_excgroups():
2025-07-16T13:11:23.795861575Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.795862441Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.795863408Z     |     self.gen.throw(value)
2025-07-16T13:11:23.795865484Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.795866305Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.795867247Z     |     raise exc
2025-07-16T13:11:23.795868030Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.795869005Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.795869893Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795870768Z     |   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:11:23.795871657Z     |     response = await call_next(request)
2025-07-16T13:11:23.795872490Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795873311Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.795874231Z     |     raise app_exc
2025-07-16T13:11:23.795875037Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.795875957Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.795876833Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.795877765Z     |     with collapse_excgroups():
2025-07-16T13:11:23.795878587Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.795879408Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.795880315Z     |     self.gen.throw(value)
2025-07-16T13:11:23.795881139Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.795881920Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.795882840Z     |     raise exc
2025-07-16T13:11:23.795883633Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.795884589Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.795885461Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795886314Z     |   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:11:23.795887198Z     |     response = await call_next(request)
2025-07-16T13:11:23.795888201Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795889047Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.795891029Z     |     raise app_exc
2025-07-16T13:11:23.795891846Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.795892788Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.795893636Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.795894548Z     |     with collapse_excgroups():
2025-07-16T13:11:23.795895427Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.795896274Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.795897188Z     |     self.gen.throw(value)
2025-07-16T13:11:23.795897990Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.795898788Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.795899819Z     |     raise exc
2025-07-16T13:11:23.795900610Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.795901541Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.795902390Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795903237Z     |   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:11:23.795904148Z     |     response = await call_next(request)
2025-07-16T13:11:23.795904986Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795905799Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.795906743Z     |     raise app_exc
2025-07-16T13:11:23.795907530Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.795908456Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.795909308Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:11:23.795910221Z     |     await self.app(scope, receive, send)
2025-07-16T13:11:23.795911038Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:11:23.795911959Z     |     await self.app(scope, receive, send)
2025-07-16T13:11:23.795912787Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:11:23.795913727Z     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:11:23.795914745Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:23.795915694Z     |     raise exc
2025-07-16T13:11:23.795917549Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:23.795918509Z     |     await app(scope, receive, sender)
2025-07-16T13:11:23.795919340Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:11:23.795920283Z     |     await self.middleware_stack(scope, receive, send)
2025-07-16T13:11:23.795921126Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:11:23.795922054Z     |     await route.handle(scope, receive, send)
2025-07-16T13:11:23.795922885Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:11:23.795923803Z     |     await self.app(scope, receive, send)
2025-07-16T13:11:23.795924644Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:11:23.795925560Z     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:11:23.795926440Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:23.795927383Z     |     raise exc
2025-07-16T13:11:23.795928164Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:23.795929107Z     |     await app(scope, receive, sender)
2025-07-16T13:11:23.795929941Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:11:23.795930850Z     |     response = await f(request)
2025-07-16T13:11:23.795931700Z     |                ^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795932541Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:11:23.795933463Z     |     raw_response = await run_endpoint_function(
2025-07-16T13:11:23.795934307Z     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795935143Z     |     ...<3 lines>...
2025-07-16T13:11:23.795936157Z     |     )
2025-07-16T13:11:23.795936940Z     |     ^
2025-07-16T13:11:23.795937714Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:11:23.795938692Z     |     return await dependant.call(**values)
2025-07-16T13:11:23.795939509Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795940351Z     |   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:11:23.795941255Z     |     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:11:23.795942166Z     |                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:11:23.795943071Z     |         streamer.id,
2025-07-16T13:11:23.795944898Z     |         ^^^^^^^^^^^^
2025-07-16T13:11:23.795945750Z     |         streamer.profile_image_url
2025-07-16T13:11:23.795946583Z     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795947402Z     |     ),
2025-07-16T13:11:23.795948187Z     |     ^
2025-07-16T13:11:23.795948953Z     | TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:11:23.795949859Z     +------------------------------------
2025-07-16T13:11:23.795950699Z 
2025-07-16T13:11:23.795951478Z During handling of the above exception, another exception occurred:
2025-07-16T13:11:23.795952346Z 
2025-07-16T13:11:23.795953097Z Traceback (most recent call last):
2025-07-16T13:11:23.795953902Z   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:11:23.795954806Z     return await self.app(scope, receive, send)
2025-07-16T13:11:23.795955632Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795956461Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.795957398Z     with collapse_excgroups():
2025-07-16T13:11:23.795958215Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.795959003Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.795959892Z     self.gen.throw(value)
2025-07-16T13:11:23.795960682Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.795961486Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.795962405Z     raise exc
2025-07-16T13:11:23.795963188Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.795964134Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.795964999Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795965850Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:11:23.795966755Z     response = await call_next(request)
2025-07-16T13:11:23.795967572Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795968386Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.795969384Z     raise app_exc
2025-07-16T13:11:23.795970170Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.795971151Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.795972006Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.795972916Z     with collapse_excgroups():
2025-07-16T13:11:23.795974526Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.795975381Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.795976272Z     self.gen.throw(value)
2025-07-16T13:11:23.795977078Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.795977847Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.795978796Z     raise exc
2025-07-16T13:11:23.795979679Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.795980596Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.795981451Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795982282Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:11:23.795983152Z     response = await call_next(request)
2025-07-16T13:11:23.795983963Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795984765Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.795985690Z     raise app_exc
2025-07-16T13:11:23.795986495Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.795987385Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.795988224Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.795989116Z     with collapse_excgroups():
2025-07-16T13:11:23.795989917Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.795990763Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.795991652Z     self.gen.throw(value)
2025-07-16T13:11:23.795992464Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.795993245Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.795994162Z     raise exc
2025-07-16T13:11:23.795994929Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.795995827Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.795996682Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.795997512Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:11:23.795998341Z     response = await call_next(request)
2025-07-16T13:11:23.795999193Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796000010Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.796000917Z     raise app_exc
2025-07-16T13:11:23.796002469Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.796003414Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.796004266Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.796005174Z     with collapse_excgroups():
2025-07-16T13:11:23.796005999Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.796006845Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.796007730Z     self.gen.throw(value)
2025-07-16T13:11:23.796008539Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.796009344Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.796010287Z     raise exc
2025-07-16T13:11:23.796011171Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.796012088Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.796012912Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796013766Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:11:23.796014657Z     response = await call_next(request)
2025-07-16T13:11:23.796015472Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796016312Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.796017220Z     raise app_exc
2025-07-16T13:11:23.796018013Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.796018890Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.796019759Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:11:23.796020694Z     await self.app(scope, receive, send)
2025-07-16T13:11:23.796021523Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:11:23.796022413Z     await self.app(scope, receive, send)
2025-07-16T13:11:23.796023230Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:11:23.796024171Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:11:23.796025031Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:23.796025950Z     raise exc
2025-07-16T13:11:23.796026719Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:23.796027649Z     await app(scope, receive, sender)
2025-07-16T13:11:23.796028472Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:11:23.796030157Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:11:23.796031037Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:11:23.796031945Z     await route.handle(scope, receive, send)
2025-07-16T13:11:23.796032798Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:11:23.796033704Z     await self.app(scope, receive, send)
2025-07-16T13:11:23.796034521Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:11:23.796035433Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:11:23.796036291Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:23.796037246Z     raise exc
2025-07-16T13:11:23.796038211Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:23.796039150Z     await app(scope, receive, sender)
2025-07-16T13:11:23.796039975Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:11:23.796040874Z     response = await f(request)
2025-07-16T13:11:23.796041692Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796042552Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:11:23.796043480Z     raw_response = await run_endpoint_function(
2025-07-16T13:11:23.796044319Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796045183Z     ...<3 lines>...
2025-07-16T13:11:23.796046046Z     )
2025-07-16T13:11:23.796046842Z     ^
2025-07-16T13:11:23.796047593Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:11:23.796048545Z     return await dependant.call(**values)
2025-07-16T13:11:23.796049397Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796050220Z   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:11:23.796051111Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:11:23.796052041Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:11:23.796052911Z         streamer.id,
2025-07-16T13:11:23.796053724Z         ^^^^^^^^^^^^
2025-07-16T13:11:23.796054495Z         streamer.profile_image_url
2025-07-16T13:11:23.796055302Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796056113Z     ),
2025-07-16T13:11:23.796056903Z     ^
2025-07-16T13:11:23.796057661Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:11:23.796059362Z 
2025-07-16T13:11:23.796060134Z During handling of the above exception, another exception occurred:
2025-07-16T13:11:23.796061007Z 
2025-07-16T13:11:23.796061759Z Traceback (most recent call last):
2025-07-16T13:11:23.796062561Z   File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
2025-07-16T13:11:23.796063510Z     result = await app(  # type: ignore[func-returns-value]
2025-07-16T13:11:23.796064367Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796065200Z         self.scope, self.receive, self.send
2025-07-16T13:11:23.796066041Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796066875Z     )
2025-07-16T13:11:23.796067638Z     ^
2025-07-16T13:11:23.796068397Z   File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2025-07-16T13:11:23.796069325Z     return await self.app(scope, receive, send)
2025-07-16T13:11:23.796070159Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796071010Z   File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
2025-07-16T13:11:23.796072356Z     await super().__call__(scope, receive, send)
2025-07-16T13:11:23.796073254Z   File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
2025-07-16T13:11:23.796074289Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:11:23.796075130Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
2025-07-16T13:11:23.796076081Z     raise exc
2025-07-16T13:11:23.796076834Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
2025-07-16T13:11:23.796077748Z     await self.app(scope, receive, _send)
2025-07-16T13:11:23.796078570Z   File "/app/app/middleware/auth.py", line 70, in __call__
2025-07-16T13:11:23.796079471Z     return await self.app(scope, receive, send)
2025-07-16T13:11:23.796080292Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796081089Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.796082010Z     with collapse_excgroups():
2025-07-16T13:11:23.796082837Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.796083630Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.796084555Z     self.gen.throw(value)
2025-07-16T13:11:23.796085348Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.796086127Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.796088078Z     raise exc
2025-07-16T13:11:23.796088855Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.796089809Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.796090648Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796091492Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:11:23.796092400Z     response = await call_next(request)
2025-07-16T13:11:23.796093243Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796094054Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.796094962Z     raise app_exc
2025-07-16T13:11:23.796095726Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.796096636Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.796097502Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.796098394Z     with collapse_excgroups():
2025-07-16T13:11:23.796099214Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.796100019Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.796100898Z     self.gen.throw(value)
2025-07-16T13:11:23.796101718Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.796102497Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.796103435Z     raise exc
2025-07-16T13:11:23.796104188Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.796105085Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.796106036Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796106886Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:11:23.796107742Z     response = await call_next(request)
2025-07-16T13:11:23.796108559Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796109367Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.796110283Z     raise app_exc
2025-07-16T13:11:23.796111060Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.796111981Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.796112860Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.796113772Z     with collapse_excgroups():
2025-07-16T13:11:23.796114564Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.796116185Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.796117083Z     self.gen.throw(value)
2025-07-16T13:11:23.796117896Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.796118705Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.796119626Z     raise exc
2025-07-16T13:11:23.796120446Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.796121364Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.796122203Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796123045Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:11:23.796123926Z     response = await call_next(request)
2025-07-16T13:11:23.796124736Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796125569Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.796126764Z     raise app_exc
2025-07-16T13:11:23.796127582Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.796128485Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.796129325Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:23.796130258Z     with collapse_excgroups():
2025-07-16T13:11:23.796131078Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:23.796131886Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:23.796132809Z     self.gen.throw(value)
2025-07-16T13:11:23.796133626Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:23.796134918Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:23.796135847Z     raise exc
2025-07-16T13:11:23.796136632Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:23.796137598Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:23.796138439Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796139305Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:11:23.796140182Z     response = await call_next(request)
2025-07-16T13:11:23.796141008Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796141836Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:23.796142740Z     raise app_exc
2025-07-16T13:11:23.796143529Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:23.796145322Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:23.796146204Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:11:23.796147122Z     await self.app(scope, receive, send)
2025-07-16T13:11:23.796147926Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:11:23.796148844Z     await self.app(scope, receive, send)
2025-07-16T13:11:23.796149684Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:11:23.796150615Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:11:23.796151471Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:23.796152385Z     raise exc
2025-07-16T13:11:23.796153160Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:23.796154080Z     await app(scope, receive, sender)
2025-07-16T13:11:23.796154906Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:11:23.796155832Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:11:23.796156688Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:11:23.796157572Z     await route.handle(scope, receive, send)
2025-07-16T13:11:23.796158406Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:11:23.796159303Z     await self.app(scope, receive, send)
2025-07-16T13:11:23.796160124Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:11:23.796161002Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:11:23.796161850Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:23.796162792Z     raise exc
2025-07-16T13:11:23.796163591Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:23.796164732Z     await app(scope, receive, sender)
2025-07-16T13:11:23.796165562Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:11:23.796166475Z     response = await f(request)
2025-07-16T13:11:23.796167299Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796168096Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:11:23.796168990Z     raw_response = await run_endpoint_function(
2025-07-16T13:11:23.796169817Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796171442Z     ...<3 lines>...
2025-07-16T13:11:23.796172289Z     )
2025-07-16T13:11:23.796173048Z     ^
2025-07-16T13:11:23.796173803Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:11:23.796174744Z     return await dependant.call(**values)
2025-07-16T13:11:23.796175575Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796176376Z   File "/app/app/routes/streamers.py", line 105, in get_streamers
2025-07-16T13:11:23.796177242Z     "profile_image_url": unified_image_service.get_profile_image_url(
2025-07-16T13:11:23.796178134Z                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:11:23.796178995Z         streamer.id,
2025-07-16T13:11:23.796179792Z         ^^^^^^^^^^^^
2025-07-16T13:11:23.796180570Z         streamer.profile_image_url
2025-07-16T13:11:23.796181389Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:23.796182207Z     ),
2025-07-16T13:11:23.796182985Z     ^
2025-07-16T13:11:23.796183751Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:11:26.243336013Z 2025-07-16 15:11:26,242 - streamvault - INFO - Request e05853fc-1900-4e42-aef6-8747f5b644a5: GET /auth/setup
2025-07-16T13:11:26.246124099Z 2025-07-16 15:11:26,243 - streamvault - DEBUG - Incoming request: GET /auth/setup
2025-07-16T13:11:26.254421536Z 2025-07-16 15:11:26,253 - streamvault - DEBUG - Response status: 200
2025-07-16T13:11:26.255642739Z INFO:     172.23.0.1:46054 - "GET /auth/setup HTTP/1.1" 200 OK
2025-07-16T13:11:26.286076328Z 2025-07-16 15:11:26,285 - streamvault - INFO - Request cc837dd9-8333-4476-927f-435041ece873: GET /auth/check
2025-07-16T13:11:26.287465971Z 2025-07-16 15:11:26,286 - streamvault - DEBUG - Incoming request: GET /auth/check
2025-07-16T13:11:26.298723249Z 2025-07-16 15:11:26,298 - streamvault - DEBUG - Response status: 200
2025-07-16T13:11:26.299666063Z INFO:     172.23.0.1:46054 - "GET /auth/check HTTP/1.1" 200 OK
2025-07-16T13:11:26.797271497Z 2025-07-16 15:11:26,796 - streamvault - INFO - Request fd5e1b26-98c1-4c93-9e15-3b9afd688775: GET /api/settings
2025-07-16T13:11:26.797957976Z 2025-07-16 15:11:26,797 - streamvault - DEBUG - Incoming request: GET /api/settings
2025-07-16T13:11:26.803165845Z 2025-07-16 15:11:26,802 - streamvault - DEBUG - Response status: 200
2025-07-16T13:11:26.804151765Z INFO:     172.23.0.1:46054 - "GET /api/settings HTTP/1.1" 200 OK
2025-07-16T13:11:26.842507066Z 2025-07-16 15:11:26,842 - streamvault - INFO - Request 0b54b71b-9e7c-4f49-a322-1eade5d4921b: GET /api/settings/streamer
2025-07-16T13:11:26.843251243Z 2025-07-16 15:11:26,843 - streamvault - DEBUG - Incoming request: GET /api/settings/streamer
2025-07-16T13:11:26.851961674Z 2025-07-16 15:11:26,851 - streamvault - ERROR - Error processing request: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:11:26.852454644Z 2025-07-16 15:11:26,852 - streamvault - DEBUG - Response status: 500
2025-07-16T13:11:26.853333523Z INFO:     172.23.0.1:46054 - "GET /api/settings/streamer HTTP/1.1" 500 Internal Server Error
2025-07-16T13:11:26.886736439Z 2025-07-16 15:11:26,886 - streamvault - INFO - Request 221c6a56-2feb-4471-b4c6-88cb4b90354f: GET /api/recording/settings
2025-07-16T13:11:26.887059316Z 2025-07-16 15:11:26,886 - streamvault - DEBUG - Incoming request: GET /api/recording/settings
2025-07-16T13:11:26.889001520Z 2025-07-16 15:11:26,888 - streamvault - DEBUG - Response status: 200
2025-07-16T13:11:26.889365484Z INFO:     172.23.0.1:46054 - "GET /api/recording/settings HTTP/1.1" 200 OK
2025-07-16T13:11:26.919470526Z 2025-07-16 15:11:26,919 - streamvault - INFO - Request 98936f30-19e4-4532-84d0-f54a8a8e2656: GET /api/recording/streamers
2025-07-16T13:11:26.920112528Z 2025-07-16 15:11:26,919 - streamvault - DEBUG - Incoming request: GET /api/recording/streamers
2025-07-16T13:11:26.925796574Z 2025-07-16 15:11:26,924 - streamvault - ERROR - Error fetching streamer recording settings: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:11:26.925817692Z Traceback (most recent call last):
2025-07-16T13:11:26.925826125Z   File "/app/app/routes/recording.py", line 185, in get_all_streamer_recording_settings
2025-07-16T13:11:26.925833450Z     profile_image_url=unified_image_service.get_profile_image_url(
2025-07-16T13:11:26.925840390Z                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:11:26.925847122Z         streamer.id,
2025-07-16T13:11:26.925853249Z         ^^^^^^^^^^^^
2025-07-16T13:11:26.925859092Z         streamer.profile_image_url
2025-07-16T13:11:26.925865177Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.925871026Z     ),
2025-07-16T13:11:26.925876978Z     ^
2025-07-16T13:11:26.925882652Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:11:26.927078203Z 2025-07-16 15:11:26,926 - streamvault - ERROR - Auth middleware error for /api/recording/streamers: unsupported operand type(s) for @: 'HTTPException' and 'function'
2025-07-16T13:11:26.927722625Z 2025-07-16 15:11:26,927 - streamvault - INFO - Request 6b09a0f2-c0eb-4eaf-aac1-98381893f478: GET /api/recording/streamers
2025-07-16T13:11:26.928213714Z 2025-07-16 15:11:26,927 - streamvault - DEBUG - Incoming request: GET /api/recording/streamers
2025-07-16T13:11:26.932751900Z 2025-07-16 15:11:26,931 - streamvault - ERROR - Error fetching streamer recording settings: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:11:26.932766663Z Traceback (most recent call last):
2025-07-16T13:11:26.932773924Z   File "/app/app/routes/recording.py", line 185, in get_all_streamer_recording_settings
2025-07-16T13:11:26.932780244Z     profile_image_url=unified_image_service.get_profile_image_url(
2025-07-16T13:11:26.932811365Z                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
2025-07-16T13:11:26.932819125Z         streamer.id,
2025-07-16T13:11:26.932824738Z         ^^^^^^^^^^^^
2025-07-16T13:11:26.932830011Z         streamer.profile_image_url
2025-07-16T13:11:26.932835465Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.932840743Z     ),
2025-07-16T13:11:26.932845940Z     ^
2025-07-16T13:11:26.932851565Z TypeError: UnifiedImageService.get_profile_image_url() takes 2 positional arguments but 3 were given
2025-07-16T13:11:26.951671769Z 2025-07-16 15:11:26,933 - streamvault - ERROR - Error processing request: unsupported operand type(s) for @: 'HTTPException' and 'function'
2025-07-16T13:11:26.951684894Z   + Exception Group Traceback (most recent call last):
2025-07-16T13:11:26.951689321Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
2025-07-16T13:11:26.951693207Z   |     yield
2025-07-16T13:11:26.951696324Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 186, in __call__
2025-07-16T13:11:26.951700271Z   |     async with anyio.create_task_group() as task_group:
2025-07-16T13:11:26.951703536Z   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.951706808Z   |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
2025-07-16T13:11:26.951710425Z   |     raise BaseExceptionGroup(
2025-07-16T13:11:26.951713628Z   |         "unhandled errors in a TaskGroup", self._exceptions
2025-07-16T13:11:26.951717001Z   |     ) from None
2025-07-16T13:11:26.951720144Z   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
2025-07-16T13:11:26.951723366Z   +-+---------------- 1 ----------------
2025-07-16T13:11:26.951726769Z     | Traceback (most recent call last):
2025-07-16T13:11:26.951729966Z     |   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:11:26.951733468Z     |     return await self.app(scope, receive, send)
2025-07-16T13:11:26.951736619Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.951739871Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.951743303Z     |     with collapse_excgroups():
2025-07-16T13:11:26.951746347Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.951749312Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.951752824Z     |     self.gen.throw(value)
2025-07-16T13:11:26.951755916Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.951759059Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.951771262Z     |     raise exc
2025-07-16T13:11:26.951775213Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.951778808Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.951781965Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.951785255Z     |   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:11:26.951788602Z     |     response = await call_next(request)
2025-07-16T13:11:26.951791814Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.951795337Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.951799897Z     |     raise app_exc
2025-07-16T13:11:26.951803399Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.951806723Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.951810062Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.951813453Z     |     with collapse_excgroups():
2025-07-16T13:11:26.951816657Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.951819905Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.951823260Z     |     self.gen.throw(value)
2025-07-16T13:11:26.951826219Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.951829284Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.951832663Z     |     raise exc
2025-07-16T13:11:26.951835740Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.951839105Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.951842496Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.951845695Z     |   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:11:26.951849070Z     |     response = await call_next(request)
2025-07-16T13:11:26.951852268Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.951855511Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.951858887Z     |     raise app_exc
2025-07-16T13:11:26.951861931Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.951865262Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.951868586Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.951876247Z     |     with collapse_excgroups():
2025-07-16T13:11:26.951879811Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.951882998Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.951886222Z     |     self.gen.throw(value)
2025-07-16T13:11:26.951889302Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.951892273Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.951895610Z     |     raise exc
2025-07-16T13:11:26.951898686Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.951901871Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.951904642Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.951908137Z     |   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:11:26.951911216Z     |     response = await call_next(request)
2025-07-16T13:11:26.951914057Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.951916731Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.951919710Z     |     raise app_exc
2025-07-16T13:11:26.951922458Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.951925475Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.951928215Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.951931215Z     |     with collapse_excgroups():
2025-07-16T13:11:26.951933900Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.951936744Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.951939558Z     |     self.gen.throw(value)
2025-07-16T13:11:26.951942249Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.951944977Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.951948024Z     |     raise exc
2025-07-16T13:11:26.951950600Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.951953564Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.951956364Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.951959138Z     |   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:11:26.951962048Z     |     response = await call_next(request)
2025-07-16T13:11:26.951964775Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.951970632Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.951974082Z     |     raise app_exc
2025-07-16T13:11:26.951976741Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.951979770Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.951982656Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:11:26.951985667Z     |     await self.app(scope, receive, send)
2025-07-16T13:11:26.951988402Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:11:26.951991455Z     |     await self.app(scope, receive, send)
2025-07-16T13:11:26.951994303Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:11:26.951998052Z     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:11:26.952001275Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:26.952006450Z     |     raise exc
2025-07-16T13:11:26.952009257Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:26.952012310Z     |     await app(scope, receive, sender)
2025-07-16T13:11:26.952015075Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:11:26.952018054Z     |     await self.middleware_stack(scope, receive, send)
2025-07-16T13:11:26.952020904Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:11:26.952023810Z     |     await route.handle(scope, receive, send)
2025-07-16T13:11:26.952026591Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:11:26.952029451Z     |     await self.app(scope, receive, send)
2025-07-16T13:11:26.952032207Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:11:26.952035129Z     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:11:26.952037985Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:26.952040904Z     |     raise exc
2025-07-16T13:11:26.952043598Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:26.952046544Z     |     await app(scope, receive, sender)
2025-07-16T13:11:26.952049279Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:11:26.952052117Z     |     response = await f(request)
2025-07-16T13:11:26.952058204Z     |                ^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952061425Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:11:26.952064370Z     |     raw_response = await run_endpoint_function(
2025-07-16T13:11:26.952067142Z     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952070045Z     |     ...<3 lines>...
2025-07-16T13:11:26.952073132Z     |     )
2025-07-16T13:11:26.952075877Z     |     ^
2025-07-16T13:11:26.952078424Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:11:26.952081409Z     |     return await dependant.call(**values)
2025-07-16T13:11:26.952084095Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952086934Z     |   File "/app/app/routes/recording.py", line 200, in get_all_streamer_recording_settings
2025-07-16T13:11:26.952090479Z     |     raise HTTPException(status_code=500, detail=str(e))@router.post("/streamers/{streamer_id}", response_model=StreamerRecordingSettingsSchema)
2025-07-16T13:11:26.952094010Z     |           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
2025-07-16T13:11:26.952097175Z     | TypeError: unsupported operand type(s) for @: 'HTTPException' and 'function'
2025-07-16T13:11:26.952100088Z     +------------------------------------
2025-07-16T13:11:26.952102747Z 
2025-07-16T13:11:26.952105375Z During handling of the above exception, another exception occurred:
2025-07-16T13:11:26.952108154Z 
2025-07-16T13:11:26.952110675Z Traceback (most recent call last):
2025-07-16T13:11:26.952113317Z   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:11:26.952116273Z     return await self.app(scope, receive, send)
2025-07-16T13:11:26.952118909Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952121599Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.952124548Z     with collapse_excgroups():
2025-07-16T13:11:26.952127252Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.952129923Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.952132933Z     self.gen.throw(value)
2025-07-16T13:11:26.952135576Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.952138235Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.952141229Z     raise exc
2025-07-16T13:11:26.952143839Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.952146842Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.952152702Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952156160Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:11:26.952159159Z     response = await call_next(request)
2025-07-16T13:11:26.952161850Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952164650Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.952167583Z     raise app_exc
2025-07-16T13:11:26.952170234Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.952173072Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.952175918Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.952178763Z     with collapse_excgroups():
2025-07-16T13:11:26.952181400Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.952184051Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.952186974Z     self.gen.throw(value)
2025-07-16T13:11:26.952189567Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.952192248Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.952195766Z     raise exc
2025-07-16T13:11:26.952198677Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.952201608Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.952204388Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952207049Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:11:26.952209895Z     response = await call_next(request)
2025-07-16T13:11:26.952212570Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952215336Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.952218276Z     raise app_exc
2025-07-16T13:11:26.952220888Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.952223807Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.952226622Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.952229502Z     with collapse_excgroups():
2025-07-16T13:11:26.952232255Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.952234873Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.952237708Z     self.gen.throw(value)
2025-07-16T13:11:26.952240223Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.952245800Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.952249270Z     raise exc
2025-07-16T13:11:26.952251910Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.952254868Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.952257769Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952260512Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:11:26.952263431Z     response = await call_next(request)
2025-07-16T13:11:26.952266076Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952268770Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.952271612Z     raise app_exc
2025-07-16T13:11:26.952274192Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.952277050Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.952279868Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.952282743Z     with collapse_excgroups():
2025-07-16T13:11:26.952285425Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.952288011Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.952290848Z     self.gen.throw(value)
2025-07-16T13:11:26.952293439Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.952296548Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.952299659Z     raise exc
2025-07-16T13:11:26.952302384Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.952305308Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.952308064Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952310659Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:11:26.952313623Z     response = await call_next(request)
2025-07-16T13:11:26.952316201Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952318865Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.952321817Z     raise app_exc
2025-07-16T13:11:26.952324440Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.952327258Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.952330013Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:11:26.952335777Z     await self.app(scope, receive, send)
2025-07-16T13:11:26.952338897Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:11:26.952342013Z     await self.app(scope, receive, send)
2025-07-16T13:11:26.952344713Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:11:26.952347720Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:11:26.952350666Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:26.952353672Z     raise exc
2025-07-16T13:11:26.952356266Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:26.952359196Z     await app(scope, receive, sender)
2025-07-16T13:11:26.952361782Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:11:26.952364742Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:11:26.952367442Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:11:26.952370330Z     await route.handle(scope, receive, send)
2025-07-16T13:11:26.952373168Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:11:26.952376189Z     await self.app(scope, receive, send)
2025-07-16T13:11:26.952378851Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:11:26.952381759Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:11:26.952385082Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:26.952388355Z     raise exc
2025-07-16T13:11:26.952391107Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:26.952394001Z     await app(scope, receive, sender)
2025-07-16T13:11:26.952396706Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:11:26.952399545Z     response = await f(request)
2025-07-16T13:11:26.952402193Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952404771Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:11:26.952407648Z     raw_response = await run_endpoint_function(
2025-07-16T13:11:26.952410348Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952413084Z     ...<3 lines>...
2025-07-16T13:11:26.952415833Z     )
2025-07-16T13:11:26.952418555Z     ^
2025-07-16T13:11:26.952421101Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:11:26.952427003Z     return await dependant.call(**values)
2025-07-16T13:11:26.952430067Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952432762Z   File "/app/app/routes/recording.py", line 200, in get_all_streamer_recording_settings
2025-07-16T13:11:26.952435714Z     raise HTTPException(status_code=500, detail=str(e))@router.post("/streamers/{streamer_id}", response_model=StreamerRecordingSettingsSchema)
2025-07-16T13:11:26.952438991Z           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
2025-07-16T13:11:26.952442078Z TypeError: unsupported operand type(s) for @: 'HTTPException' and 'function'
2025-07-16T13:11:26.952445094Z 
2025-07-16T13:11:26.952447633Z During handling of the above exception, another exception occurred:
2025-07-16T13:11:26.952450431Z 
2025-07-16T13:11:26.952452947Z Traceback (most recent call last):
2025-07-16T13:11:26.952455630Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
2025-07-16T13:11:26.952458633Z     await self.app(scope, receive, _send)
2025-07-16T13:11:26.952461319Z   File "/app/app/middleware/auth.py", line 70, in __call__
2025-07-16T13:11:26.952464125Z     return await self.app(scope, receive, send)
2025-07-16T13:11:26.952466983Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952469697Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.952472741Z     with collapse_excgroups():
2025-07-16T13:11:26.952475374Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.952478110Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.952480913Z     self.gen.throw(value)
2025-07-16T13:11:26.952498429Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.952502187Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.952505536Z     raise exc
2025-07-16T13:11:26.952508808Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.952512053Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.952514911Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952517756Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:11:26.952520642Z     response = await call_next(request)
2025-07-16T13:11:26.952523278Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952526146Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.952529282Z     raise app_exc
2025-07-16T13:11:26.952532022Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.952538347Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.952541685Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.952544710Z     with collapse_excgroups():
2025-07-16T13:11:26.952547441Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.952550191Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.952553047Z     self.gen.throw(value)
2025-07-16T13:11:26.952555863Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.952558564Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.952561630Z     raise exc
2025-07-16T13:11:26.952564245Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.952567202Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.952570009Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952572839Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:11:26.952575690Z     response = await call_next(request)
2025-07-16T13:11:26.952578531Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952581340Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.952584316Z     raise app_exc
2025-07-16T13:11:26.952586996Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.952589946Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.952592794Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.952595816Z     with collapse_excgroups():
2025-07-16T13:11:26.952598505Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.952601339Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.952604230Z     self.gen.throw(value)
2025-07-16T13:11:26.952606993Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.952609753Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.952613138Z     raise exc
2025-07-16T13:11:26.952615903Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.952618990Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.952621780Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952624630Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:11:26.952630454Z     response = await call_next(request)
2025-07-16T13:11:26.952633618Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952636404Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.952639388Z     raise app_exc
2025-07-16T13:11:26.952642083Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.952644982Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.952647848Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.952650905Z     with collapse_excgroups():
2025-07-16T13:11:26.952653614Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.952656266Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.952659145Z     self.gen.throw(value)
2025-07-16T13:11:26.952661827Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.952664511Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.952667483Z     raise exc
2025-07-16T13:11:26.952670104Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.952673068Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.952675849Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952678628Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:11:26.952681485Z     response = await call_next(request)
2025-07-16T13:11:26.952684219Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952686938Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.952689823Z     raise app_exc
2025-07-16T13:11:26.952692455Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.952695576Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.952698451Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:11:26.952701381Z     await self.app(scope, receive, send)
2025-07-16T13:11:26.952704153Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:11:26.952707205Z     await self.app(scope, receive, send)
2025-07-16T13:11:26.952710294Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:11:26.952713528Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:11:26.952716649Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:26.952723558Z     raise exc
2025-07-16T13:11:26.952726693Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:26.952729764Z     await app(scope, receive, sender)
2025-07-16T13:11:26.952732518Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:11:26.952735499Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:11:26.952738680Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:11:26.952741506Z     await route.handle(scope, receive, send)
2025-07-16T13:11:26.952744060Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:11:26.952747021Z     await self.app(scope, receive, send)
2025-07-16T13:11:26.952749603Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:11:26.952752433Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:11:26.952755220Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:26.952758175Z     raise exc
2025-07-16T13:11:26.952760574Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:26.952763378Z     await app(scope, receive, sender)
2025-07-16T13:11:26.952765901Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:11:26.952768838Z     response = await f(request)
2025-07-16T13:11:26.952771492Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952774061Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:11:26.952776839Z     raw_response = await run_endpoint_function(
2025-07-16T13:11:26.952779489Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952782133Z     ...<3 lines>...
2025-07-16T13:11:26.952784847Z     )
2025-07-16T13:11:26.952787337Z     ^
2025-07-16T13:11:26.952789915Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:11:26.952792772Z     return await dependant.call(**values)
2025-07-16T13:11:26.952795391Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.952797941Z   File "/app/app/routes/recording.py", line 200, in get_all_streamer_recording_settings
2025-07-16T13:11:26.952800769Z     raise HTTPException(status_code=500, detail=str(e))@router.post("/streamers/{streamer_id}", response_model=StreamerRecordingSettingsSchema)
2025-07-16T13:11:26.952804295Z           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
2025-07-16T13:11:26.952810088Z TypeError: unsupported operand type(s) for @: 'HTTPException' and 'function'
2025-07-16T13:11:26.952813411Z INFO:     172.23.0.1:46054 - "GET /api/recording/streamers HTTP/1.1" 500 Internal Server Error
2025-07-16T13:11:26.961413035Z ERROR:    Exception in ASGI application
2025-07-16T13:11:26.961423411Z   + Exception Group Traceback (most recent call last):
2025-07-16T13:11:26.961425794Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
2025-07-16T13:11:26.961427638Z   |     yield
2025-07-16T13:11:26.961429073Z   |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 186, in __call__
2025-07-16T13:11:26.961430641Z   |     async with anyio.create_task_group() as task_group:
2025-07-16T13:11:26.961432082Z   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.961433615Z   |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
2025-07-16T13:11:26.961435268Z   |     raise BaseExceptionGroup(
2025-07-16T13:11:26.961436624Z   |         "unhandled errors in a TaskGroup", self._exceptions
2025-07-16T13:11:26.961438157Z   |     ) from None
2025-07-16T13:11:26.961439538Z   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
2025-07-16T13:11:26.961441003Z   +-+---------------- 1 ----------------
2025-07-16T13:11:26.961442392Z     | Traceback (most recent call last):
2025-07-16T13:11:26.961443805Z     |   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:11:26.961445356Z     |     return await self.app(scope, receive, send)
2025-07-16T13:11:26.961446763Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961448243Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.961449848Z     |     with collapse_excgroups():
2025-07-16T13:11:26.961451186Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.961452600Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.961454185Z     |     self.gen.throw(value)
2025-07-16T13:11:26.961455566Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.961457050Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.961458635Z     |     raise exc
2025-07-16T13:11:26.961460036Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.961461636Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.961463098Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961464565Z     |   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:11:26.961470295Z     |     response = await call_next(request)
2025-07-16T13:11:26.961472228Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961473773Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.961475328Z     |     raise app_exc
2025-07-16T13:11:26.961477322Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.961478956Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.961480481Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.961489515Z     |     with collapse_excgroups():
2025-07-16T13:11:26.961569642Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.961571088Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.961572252Z     |     self.gen.throw(value)
2025-07-16T13:11:26.961573169Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.961573982Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.961574931Z     |     raise exc
2025-07-16T13:11:26.961575746Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.961576667Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.961577532Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961578375Z     |   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:11:26.961579288Z     |     response = await call_next(request)
2025-07-16T13:11:26.961580127Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961580923Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.961581833Z     |     raise app_exc
2025-07-16T13:11:26.961582613Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.961583503Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.961584351Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.961585726Z     |     with collapse_excgroups():
2025-07-16T13:11:26.961587032Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.961588260Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.961589667Z     |     self.gen.throw(value)
2025-07-16T13:11:26.961590927Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.961592056Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.961599070Z     |     raise exc
2025-07-16T13:11:26.961601440Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.961602821Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.961604188Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961605489Z     |   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:11:26.961606870Z     |     response = await call_next(request)
2025-07-16T13:11:26.961609119Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961610411Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.961611841Z     |     raise app_exc
2025-07-16T13:11:26.961612945Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.961614363Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.961615680Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.961617151Z     |     with collapse_excgroups():
2025-07-16T13:11:26.961618424Z     |          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.961619782Z     |   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.961621166Z     |     self.gen.throw(value)
2025-07-16T13:11:26.961622461Z     |     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.961623742Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.961625253Z     |     raise exc
2025-07-16T13:11:26.961626546Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.961628012Z     |     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.961629241Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961630887Z     |   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:11:26.961631823Z     |     response = await call_next(request)
2025-07-16T13:11:26.961632665Z     |                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961633515Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.961634460Z     |     raise app_exc
2025-07-16T13:11:26.961635303Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.961636238Z     |     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.961637126Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:11:26.961639474Z     |     await self.app(scope, receive, send)
2025-07-16T13:11:26.961640396Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:11:26.961641315Z     |     await self.app(scope, receive, send)
2025-07-16T13:11:26.961642166Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:11:26.961643097Z     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:11:26.961644773Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:26.961645736Z     |     raise exc
2025-07-16T13:11:26.961646530Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:26.961647466Z     |     await app(scope, receive, sender)
2025-07-16T13:11:26.961648292Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:11:26.961649221Z     |     await self.middleware_stack(scope, receive, send)
2025-07-16T13:11:26.961650071Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:11:26.961651010Z     |     await route.handle(scope, receive, send)
2025-07-16T13:11:26.961651872Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:11:26.961652814Z     |     await self.app(scope, receive, send)
2025-07-16T13:11:26.961653670Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:11:26.961654613Z     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:11:26.961655498Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:26.961656427Z     |     raise exc
2025-07-16T13:11:26.961657231Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:26.961658184Z     |     await app(scope, receive, sender)
2025-07-16T13:11:26.961659043Z     |   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:11:26.961659962Z     |     response = await f(request)
2025-07-16T13:11:26.961660789Z     |                ^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961661625Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:11:26.961662559Z     |     raw_response = await run_endpoint_function(
2025-07-16T13:11:26.961663404Z     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961664242Z     |     ...<3 lines>...
2025-07-16T13:11:26.961666069Z     |     )
2025-07-16T13:11:26.961666995Z     |     ^
2025-07-16T13:11:26.961667786Z     |   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:11:26.961668769Z     |     return await dependant.call(**values)
2025-07-16T13:11:26.961669630Z     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961670498Z     |   File "/app/app/routes/recording.py", line 200, in get_all_streamer_recording_settings
2025-07-16T13:11:26.961671474Z     |     raise HTTPException(status_code=500, detail=str(e))@router.post("/streamers/{streamer_id}", response_model=StreamerRecordingSettingsSchema)
2025-07-16T13:11:26.961672641Z     |           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
2025-07-16T13:11:26.961673603Z     | TypeError: unsupported operand type(s) for @: 'HTTPException' and 'function'
2025-07-16T13:11:26.961674555Z     +------------------------------------
2025-07-16T13:11:26.961675400Z 
2025-07-16T13:11:26.961676223Z During handling of the above exception, another exception occurred:
2025-07-16T13:11:26.961677115Z 
2025-07-16T13:11:26.961677879Z Traceback (most recent call last):
2025-07-16T13:11:26.961678699Z   File "/app/app/middleware/auth.py", line 67, in __call__
2025-07-16T13:11:26.961679644Z     return await self.app(scope, receive, send)
2025-07-16T13:11:26.961680483Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961681321Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.961682259Z     with collapse_excgroups():
2025-07-16T13:11:26.961683098Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.961685043Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.961685916Z     self.gen.throw(value)
2025-07-16T13:11:26.961686684Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.961687481Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.961688368Z     raise exc
2025-07-16T13:11:26.961689160Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.961690076Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.961690912Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961691717Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:11:26.961692617Z     response = await call_next(request)
2025-07-16T13:11:26.961693406Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961694220Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.961695875Z     raise app_exc
2025-07-16T13:11:26.961696673Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.961697554Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.961698398Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.961699273Z     with collapse_excgroups():
2025-07-16T13:11:26.961700053Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.961700841Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.961701718Z     self.gen.throw(value)
2025-07-16T13:11:26.961702480Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.961703256Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.961704163Z     raise exc
2025-07-16T13:11:26.961705055Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.961705981Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.961706806Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961707621Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:11:26.961708436Z     response = await call_next(request)
2025-07-16T13:11:26.961709221Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961710011Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.961710921Z     raise app_exc
2025-07-16T13:11:26.961711689Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.961712554Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.961713380Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.961714267Z     with collapse_excgroups():
2025-07-16T13:11:26.961715052Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.961715854Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.961716739Z     self.gen.throw(value)
2025-07-16T13:11:26.961717504Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.961718270Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.961719173Z     raise exc
2025-07-16T13:11:26.961719923Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.961720807Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.961721663Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961723287Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:11:26.961725415Z     response = await call_next(request)
2025-07-16T13:11:26.961726229Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961727024Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.961727909Z     raise app_exc
2025-07-16T13:11:26.961728669Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.961729544Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.961730364Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.961731239Z     with collapse_excgroups():
2025-07-16T13:11:26.961732032Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.961732805Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.961733669Z     self.gen.throw(value)
2025-07-16T13:11:26.961734418Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.961735180Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.961736108Z     raise exc
2025-07-16T13:11:26.961736992Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.961737870Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.961738719Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961739539Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:11:26.961740383Z     response = await call_next(request)
2025-07-16T13:11:26.961741161Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961741943Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.961742825Z     raise app_exc
2025-07-16T13:11:26.961743608Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.961744469Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.961745377Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:11:26.961746243Z     await self.app(scope, receive, send)
2025-07-16T13:11:26.961747048Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:11:26.961747914Z     await self.app(scope, receive, send)
2025-07-16T13:11:26.961748729Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:11:26.961749623Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:11:26.961751187Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:26.961752104Z     raise exc
2025-07-16T13:11:26.961752886Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:26.961753784Z     await app(scope, receive, sender)
2025-07-16T13:11:26.961754597Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:11:26.961755489Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:11:26.961756302Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:11:26.961757198Z     await route.handle(scope, receive, send)
2025-07-16T13:11:26.961758008Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:11:26.961758887Z     await self.app(scope, receive, send)
2025-07-16T13:11:26.961759701Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:11:26.961760586Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:11:26.961761461Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:26.961762385Z     raise exc
2025-07-16T13:11:26.961763387Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:26.961764322Z     await app(scope, receive, sender)
2025-07-16T13:11:26.961765115Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:11:26.961766052Z     response = await f(request)
2025-07-16T13:11:26.961766866Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961767657Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:11:26.961768511Z     raw_response = await run_endpoint_function(
2025-07-16T13:11:26.961769322Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961770117Z     ...<3 lines>...
2025-07-16T13:11:26.961770970Z     )
2025-07-16T13:11:26.961771736Z     ^
2025-07-16T13:11:26.961772465Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:11:26.961773410Z     return await dependant.call(**values)
2025-07-16T13:11:26.961774216Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961775008Z   File "/app/app/routes/recording.py", line 200, in get_all_streamer_recording_settings
2025-07-16T13:11:26.961775901Z     raise HTTPException(status_code=500, detail=str(e))@router.post("/streamers/{streamer_id}", response_model=StreamerRecordingSettingsSchema)
2025-07-16T13:11:26.961777485Z           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
2025-07-16T13:11:26.961778423Z TypeError: unsupported operand type(s) for @: 'HTTPException' and 'function'
2025-07-16T13:11:26.961779308Z 
2025-07-16T13:11:26.961780040Z During handling of the above exception, another exception occurred:
2025-07-16T13:11:26.961780907Z 
2025-07-16T13:11:26.961781642Z Traceback (most recent call last):
2025-07-16T13:11:26.961782433Z   File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
2025-07-16T13:11:26.961783375Z     result = await app(  # type: ignore[func-returns-value]
2025-07-16T13:11:26.961784213Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961785035Z         self.scope, self.receive, self.send
2025-07-16T13:11:26.961785839Z         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961786646Z     )
2025-07-16T13:11:26.961787397Z     ^
2025-07-16T13:11:26.961788116Z   File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2025-07-16T13:11:26.961789015Z     return await self.app(scope, receive, send)
2025-07-16T13:11:26.961789806Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961790598Z   File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
2025-07-16T13:11:26.961791490Z     await super().__call__(scope, receive, send)
2025-07-16T13:11:26.961792298Z   File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
2025-07-16T13:11:26.961793377Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:11:26.961794206Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
2025-07-16T13:11:26.961795102Z     raise exc
2025-07-16T13:11:26.961795839Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
2025-07-16T13:11:26.961796722Z     await self.app(scope, receive, _send)
2025-07-16T13:11:26.961797515Z   File "/app/app/middleware/auth.py", line 70, in __call__
2025-07-16T13:11:26.961798377Z     return await self.app(scope, receive, send)
2025-07-16T13:11:26.961799159Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961799956Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.961800859Z     with collapse_excgroups():
2025-07-16T13:11:26.961801633Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.961802414Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.961803309Z     self.gen.throw(value)
2025-07-16T13:11:26.961804800Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.961805603Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.961806501Z     raise exc
2025-07-16T13:11:26.961807250Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.961808387Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.961809206Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961810026Z   File "/app/app/main.py", line 416, in rate_limit_middleware
2025-07-16T13:11:26.961810876Z     response = await call_next(request)
2025-07-16T13:11:26.961811659Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961812446Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.961813340Z     raise app_exc
2025-07-16T13:11:26.961814127Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.961815025Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.961815843Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.961816754Z     with collapse_excgroups():
2025-07-16T13:11:26.961817535Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.961818327Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.961819198Z     self.gen.throw(value)
2025-07-16T13:11:26.961819974Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.961820723Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.961821646Z     raise exc
2025-07-16T13:11:26.961822385Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.961823278Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.961824212Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961825037Z   File "/app/app/main.py", line 357, in add_request_id
2025-07-16T13:11:26.961825865Z     response = await call_next(request)
2025-07-16T13:11:26.961826653Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961827461Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.961828390Z     raise app_exc
2025-07-16T13:11:26.961829158Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.961830031Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.961830858Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.961832381Z     with collapse_excgroups():
2025-07-16T13:11:26.961833190Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.961833965Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.961834812Z     self.gen.throw(value)
2025-07-16T13:11:26.961835594Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.961836350Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.961837264Z     raise exc
2025-07-16T13:11:26.961838002Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.961838913Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.961839738Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961840553Z   File "/app/app/main.py", line 267, in add_security_headers
2025-07-16T13:11:26.961841394Z     response = await call_next(request)
2025-07-16T13:11:26.961842211Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961842999Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.961843878Z     raise app_exc
2025-07-16T13:11:26.961844638Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.961845515Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.961846328Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 185, in __call__
2025-07-16T13:11:26.961847202Z     with collapse_excgroups():
2025-07-16T13:11:26.961847974Z          ~~~~~~~~~~~~~~~~~~^^
2025-07-16T13:11:26.961848780Z   File "/usr/local/lib/python3.13/contextlib.py", line 162, in __exit__
2025-07-16T13:11:26.961849642Z     self.gen.throw(value)
2025-07-16T13:11:26.961850416Z     ~~~~~~~~~~~~~~^^^^^^^
2025-07-16T13:11:26.961851184Z   File "/usr/local/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
2025-07-16T13:11:26.961852083Z     raise exc
2025-07-16T13:11:26.961852827Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 187, in __call__
2025-07-16T13:11:26.961853843Z     response = await self.dispatch_func(request, call_next)
2025-07-16T13:11:26.961854668Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961855492Z   File "/app/app/middleware/logging.py", line 8, in logging_middleware
2025-07-16T13:11:26.961856335Z     response = await call_next(request)
2025-07-16T13:11:26.961857132Z                ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961857918Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 163, in call_next
2025-07-16T13:11:26.961859453Z     raise app_exc
2025-07-16T13:11:26.961860237Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/base.py", line 149, in coro
2025-07-16T13:11:26.961861145Z     await self.app(scope, receive_or_disconnect, send_no_error)
2025-07-16T13:11:26.961861962Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
2025-07-16T13:11:26.961862861Z     await self.app(scope, receive, send)
2025-07-16T13:11:26.961863650Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
2025-07-16T13:11:26.961864538Z     await self.app(scope, receive, send)
2025-07-16T13:11:26.961865345Z   File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
2025-07-16T13:11:26.961866225Z     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-07-16T13:11:26.961867058Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:26.961867966Z     raise exc
2025-07-16T13:11:26.961868707Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:26.961869604Z     await app(scope, receive, sender)
2025-07-16T13:11:26.961870398Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
2025-07-16T13:11:26.961871290Z     await self.middleware_stack(scope, receive, send)
2025-07-16T13:11:26.961872107Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
2025-07-16T13:11:26.961872962Z     await route.handle(scope, receive, send)
2025-07-16T13:11:26.961873763Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
2025-07-16T13:11:26.961874637Z     await self.app(scope, receive, send)
2025-07-16T13:11:26.961875434Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
2025-07-16T13:11:26.961876323Z     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-07-16T13:11:26.961877159Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-07-16T13:11:26.961878051Z     raise exc
2025-07-16T13:11:26.961878962Z   File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2025-07-16T13:11:26.961879865Z     await app(scope, receive, sender)
2025-07-16T13:11:26.961880672Z   File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
2025-07-16T13:11:26.961881538Z     response = await f(request)
2025-07-16T13:11:26.961882327Z                ^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961883164Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
2025-07-16T13:11:26.961884674Z     raw_response = await run_endpoint_function(
2025-07-16T13:11:26.961885519Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961886309Z     ...<3 lines>...
2025-07-16T13:11:26.961887108Z     )
2025-07-16T13:11:26.961887855Z     ^
2025-07-16T13:11:26.961888578Z   File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-07-16T13:11:26.961889491Z     return await dependant.call(**values)
2025-07-16T13:11:26.961890319Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-16T13:11:26.961891110Z   File "/app/app/routes/recording.py", line 200, in get_all_streamer_recording_settings
2025-07-16T13:11:26.961891991Z     raise HTTPException(status_code=500, detail=str(e))@router.post("/streamers/{streamer_id}", response_model=StreamerRecordingSettingsSchema)
2025-07-16T13:11:26.961892933Z           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
2025-07-16T13:11:26.961893850Z TypeError: unsupported operand type(s) for @: 'HTTPException' and 'function'
2025-07-16T13:11:26.991315425Z 2025-07-16 15:11:26,990 - streamvault - INFO - Request 6dc93f08-a368-46cb-a57e-9a8ea809f881: GET /api/recording/active
2025-07-16T13:11:26.991559622Z 2025-07-16 15:11:26,991 - streamvault - DEBUG - Incoming request: GET /api/recording/active
2025-07-16T13:11:26.992250750Z 2025-07-16 15:11:26,992 - streamvault - DEBUG - Response status: 200
2025-07-16T13:11:26.992647307Z INFO:     172.23.0.1:40162 - "GET /api/recording/active HTTP/1.1" 200 OK