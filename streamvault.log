2025-07-16 08:17:01,697 - streamvault - INFO - Starting application initialization...
2025-07-16 08:17:01,756 - streamvault - INFO - Updating migrations table schema
2025-07-16 08:17:01,758 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:01,782 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 08:17:01,784 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 08:17:01,784 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 08:17:01,829 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 08:17:01,836 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:01,838 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 08:17:01,919 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 08:17:01,922 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:01,924 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 08:17:02,350 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 08:17:02,351 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:02,351 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:02,352 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 08:17:02,352 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:02,353 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 08:17:02,398 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 08:17:02,400 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:02,402 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 08:17:02,480 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 08:17:02,480 - streamvault - INFO - Starting system_config table migration...
2025-07-16 08:17:02,480 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 08:17:02,480 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 08:17:02,481 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:02,483 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 08:17:02,532 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 08:17:02,533 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 08:17:02,533 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:02,535 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 08:17:02,588 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 08:17:02,589 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 08:17:02,592 - streamvault - INFO - No existing categories found in database
2025-07-16 08:17:02,592 - streamvault - INFO - Category images migration completed successfully
2025-07-16 08:17:02,592 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 08:17:02,593 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:02,595 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 08:17:02,664 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 08:17:02,854 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 08:17:02,855 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 08:17:02,855 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 08:17:02,855 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 08:17:02,855 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 08:17:02,856 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:02,858 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 08:17:02,920 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 08:17:03,023 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 08:17:03,023 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 08:17:03,023 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 08:17:03,023 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 08:17:03,023 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 08:17:03,024 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:03,025 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 08:17:03,155 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 08:17:03,156 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 08:17:03,156 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 08:17:03,157 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:03,159 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 08:17:03,264 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 08:17:03,265 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:03,266 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:03,267 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 08:17:03,267 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:03,270 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 08:17:03,419 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 08:17:03,420 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:03,421 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:03,421 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 08:17:03,422 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:03,423 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 08:17:03,534 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 08:17:03,536 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 08:17:03,543 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 08:17:03,549 - streamvault - INFO - EventSub initialized successfully
2025-07-16 08:17:03,549 - streamvault - INFO - EventSub initialized successfully
2025-07-16 08:17:03,549 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 08:17:03,551 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 08:17:03,552 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 08:17:03,553 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 08:17:03,553 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 08:17:03,553 - streamvault - INFO - Log cleanup completed
2025-07-16 08:17:03,553 - streamvault - INFO - Log cleanup service started
2025-07-16 08:17:03,553 - streamvault - INFO - Recording cleanup service started
2025-07-16 08:17:03,553 - streamvault - INFO - Image sync worker started
2025-07-16 08:17:03,553 - streamvault - INFO - Image sync service started
2025-07-16 08:17:03,558 - streamvault - INFO - Initializing background services...
2025-07-16 08:17:03,558 - streamvault - INFO - Initializing background queue service...
2025-07-16 08:17:03,558 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 08:17:03,558 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 08:17:03,559 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 08:17:03,559 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 08:17:03,559 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 08:17:03,633 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 08:17:03,633 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 08:17:03,634 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 08:17:03,634 - streamvault - INFO - Background services initialized successfully
2025-07-16 08:17:03,634 - streamvault - INFO - Background queue service started
2025-07-16 08:17:03,634 - streamvault - INFO - Application startup complete
2025-07-16 08:17:03,634 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 08:17:03,636 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 08:17:03,637 - streamvault - INFO - Worker worker-0 started
2025-07-16 08:17:03,637 - streamvault - INFO - Worker worker-1 started
2025-07-16 08:17:03,637 - streamvault - INFO - Worker worker-2 started
2025-07-16 08:17:03,637 - streamvault - INFO - Dependency worker started
2025-07-16 08:17:33,641 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 08:17:33,642 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 08:17:33,643 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 08:17:33,643 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 08:21:58,606 - streamvault - INFO - No active processes to shutdown
2025-07-16 08:21:58,625 - streamvault - INFO - Dependency worker cancelled
2025-07-16 08:21:58,625 - streamvault - INFO - Dependency worker stopped
2025-07-16 08:21:58,625 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 08:21:58,625 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 08:21:58,625 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 08:21:58,625 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 08:21:58,625 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 08:21:58,625 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 08:21:58,626 - streamvault - INFO - Task dependency manager shut down
2025-07-16 08:21:58,626 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 08:21:58,639 - streamvault - INFO - Image sync worker stopped
2025-07-16 09:46:52,665 - streamvault - INFO - Starting application initialization...
2025-07-16 09:46:52,706 - streamvault - INFO - Updating migrations table schema
2025-07-16 09:46:52,707 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:52,732 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 09:46:52,733 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 09:46:52,733 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 09:46:52,748 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 09:46:52,752 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:52,754 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 09:46:52,766 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 09:46:52,768 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:52,769 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 09:46:52,983 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 09:46:52,983 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:52,984 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:52,984 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 09:46:52,984 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:52,986 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 09:46:53,000 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 09:46:53,002 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:53,003 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 09:46:53,015 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 09:46:53,015 - streamvault - INFO - Starting system_config table migration...
2025-07-16 09:46:53,016 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 09:46:53,016 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 09:46:53,016 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:53,018 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 09:46:53,036 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 09:46:53,037 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 09:46:53,038 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:53,039 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 09:46:53,052 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 09:46:53,052 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 09:46:53,056 - streamvault - INFO - No existing categories found in database
2025-07-16 09:46:53,056 - streamvault - INFO - Category images migration completed successfully
2025-07-16 09:46:53,057 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 09:46:53,057 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:53,059 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 09:46:53,079 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 09:46:53,092 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 09:46:53,092 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 09:46:53,092 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 09:46:53,092 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 09:46:53,092 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 09:46:53,092 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:53,093 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 09:46:53,106 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 09:46:53,122 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 09:46:53,122 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 09:46:53,123 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 09:46:53,123 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 09:46:53,123 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 09:46:53,123 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:53,124 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 09:46:53,135 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 09:46:53,136 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 09:46:53,136 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 09:46:53,137 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:53,139 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 09:46:53,150 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 09:46:53,151 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:53,152 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:53,152 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 09:46:53,152 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:53,154 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 09:46:53,165 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 09:46:53,165 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:53,166 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:53,166 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 09:46:53,166 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:53,167 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 09:46:53,179 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 09:46:53,181 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 09:46:53,187 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 09:46:53,193 - streamvault - INFO - EventSub initialized successfully
2025-07-16 09:46:53,193 - streamvault - INFO - EventSub initialized successfully
2025-07-16 09:46:53,193 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 09:46:53,195 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 09:46:53,195 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 09:46:53,195 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 09:46:53,195 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 09:46:53,195 - streamvault - INFO - Log cleanup completed
2025-07-16 09:46:53,195 - streamvault - INFO - Log cleanup service started
2025-07-16 09:46:53,195 - streamvault - INFO - Recording cleanup service started
2025-07-16 09:46:53,195 - streamvault - INFO - Image sync worker started
2025-07-16 09:46:53,195 - streamvault - INFO - Image sync service started
2025-07-16 09:46:53,198 - streamvault - INFO - Initializing background services...
2025-07-16 09:46:53,198 - streamvault - INFO - Initializing background queue service...
2025-07-16 09:46:53,198 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 09:46:53,198 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 09:46:53,198 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 09:46:53,198 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 09:46:53,198 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 09:46:53,198 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 09:46:53,199 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 09:46:53,199 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 09:46:53,199 - streamvault - INFO - Background services initialized successfully
2025-07-16 09:46:53,199 - streamvault - INFO - Background queue service started
2025-07-16 09:46:53,199 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 09:46:53,199 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 09:46:53,199 - streamvault - INFO - Application startup complete
2025-07-16 09:46:53,199 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 09:46:53,201 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 09:46:53,201 - streamvault - INFO - Worker worker-0 started
2025-07-16 09:46:53,201 - streamvault - INFO - Worker worker-1 started
2025-07-16 09:46:53,201 - streamvault - INFO - Worker worker-2 started
2025-07-16 09:46:53,201 - streamvault - INFO - Dependency worker started
2025-07-16 09:46:53,201 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:47:03,208 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:47:13,224 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:47:23,220 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 09:47:23,221 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 09:47:23,224 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 09:47:23,224 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 09:47:23,224 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:47:33,250 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:47:43,268 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:47:53,272 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:48:03,286 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:48:13,286 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:48:23,276 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:48:33,274 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:48:43,297 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:48:53,308 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:49:03,327 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:49:13,334 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:49:23,354 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:49:33,338 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:49:43,349 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:49:53,344 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:50:03,350 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:50:13,344 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:50:23,348 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:50:33,337 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:50:43,364 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:50:53,377 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:51:03,382 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:51:13,407 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:51:23,400 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:51:33,393 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:51:43,383 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:51:53,407 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:52:03,396 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:52:13,384 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:52:23,407 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:52:33,404 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:52:43,420 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:52:53,428 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:53:03,430 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:53:13,431 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:53:23,423 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:53:33,439 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:53:43,434 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:53:53,441 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:54:03,442 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:54:13,436 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:54:23,444 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:54:33,460 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:54:43,475 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:54:53,477 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:55:03,463 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:55:13,489 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:55:23,486 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:55:33,467 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:55:43,465 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:55:53,462 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:56:03,464 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:56:13,468 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:56:23,463 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:56:33,462 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:56:43,482 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:56:53,489 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:57:03,480 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:57:13,489 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:57:23,484 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:57:33,485 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:57:43,491 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:57:53,507 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:58:03,498 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:58:13,505 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:58:23,498 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:58:33,515 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:58:43,529 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:58:53,523 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:59:03,527 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:59:13,529 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:59:23,540 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:59:33,540 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:59:43,546 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 09:59:53,550 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:00:03,546 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:00:13,558 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:00:23,557 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:00:33,569 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:00:43,562 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:00:53,562 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:01:03,567 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:01:13,560 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:01:23,546 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:01:33,571 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:01:43,550 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:01:53,555 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:02:03,557 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:02:13,563 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:02:23,557 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:02:33,568 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:02:43,572 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:02:53,578 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:03:03,583 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:03:13,575 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:03:23,579 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:03:33,591 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:03:43,597 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:03:53,612 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:04:03,620 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:04:13,637 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:04:23,651 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:04:33,671 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:04:43,672 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:04:53,680 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:05:03,669 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:05:13,693 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:05:23,699 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:05:33,698 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:05:43,698 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:05:53,708 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:06:03,725 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:06:13,729 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:06:23,744 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:06:33,756 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:06:43,746 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:06:53,755 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:07:03,770 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:07:13,761 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:07:23,764 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:07:33,777 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:07:43,786 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:07:53,786 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:08:03,782 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:08:13,785 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:08:23,785 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:08:33,777 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:08:43,791 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:08:53,803 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:09:03,802 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:09:13,795 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:09:23,793 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:09:33,799 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:09:43,803 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:09:53,803 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:10:03,805 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:10:13,801 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:10:23,806 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:10:33,794 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:10:43,813 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:10:53,832 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:11:03,834 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:11:13,826 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:11:23,842 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:11:33,838 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:11:43,842 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:11:53,844 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:12:03,858 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:12:13,855 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:12:23,865 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:12:33,852 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:12:43,843 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:12:53,856 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:13:03,854 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:13:13,866 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:13:23,872 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:13:33,884 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:13:43,886 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:13:53,913 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:14:03,910 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:14:13,907 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:14:23,913 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:14:33,907 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:14:43,926 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:14:53,932 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:15:03,944 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:15:13,938 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:15:23,947 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:15:33,961 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:15:43,954 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:15:53,952 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:16:03,970 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:16:13,975 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:16:23,978 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:16:33,977 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:16:43,975 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:16:53,988 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:17:04,002 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:17:14,003 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:17:23,997 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:17:33,998 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:17:44,008 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:17:54,006 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:18:04,000 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:18:14,009 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:18:23,999 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:18:34,020 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:18:44,014 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:18:54,037 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:19:04,033 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:19:14,024 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:19:24,034 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:19:34,033 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:19:44,023 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:19:54,012 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:20:04,033 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:20:14,034 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:20:24,046 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:20:34,068 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:20:44,050 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:20:54,053 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:21:04,066 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:21:14,067 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:21:24,047 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:21:34,050 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:21:44,051 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:21:54,061 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:22:04,055 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:22:14,044 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:22:24,055 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:22:34,054 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:22:44,055 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:22:54,065 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:23:04,072 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:23:14,098 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:23:24,095 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:23:34,117 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:23:44,113 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:23:54,106 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:24:04,122 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:24:14,148 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:24:24,144 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:24:34,151 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:24:44,160 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:24:54,157 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:25:04,159 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:25:14,156 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:25:24,165 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:25:34,139 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:25:44,156 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:25:54,159 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:26:04,163 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:26:14,164 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:26:24,151 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:26:34,154 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:26:44,159 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:26:54,154 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:27:04,165 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:27:14,168 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:27:24,169 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:27:34,173 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:27:44,171 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:27:54,181 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:28:04,180 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:28:14,194 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:28:24,184 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:28:34,194 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:28:44,182 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:28:54,188 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:29:04,189 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:29:14,196 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:29:24,193 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:29:34,193 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:29:44,173 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:29:54,182 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:30:04,186 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:30:14,193 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:30:24,186 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:30:34,201 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:30:44,216 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:30:54,242 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:31:04,233 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:31:14,236 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:31:24,240 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:31:34,221 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:31:44,241 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:31:54,244 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:32:04,245 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:32:14,267 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:32:24,276 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:32:34,301 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:32:44,314 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:32:54,336 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:33:04,343 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:33:14,345 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:33:24,343 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:33:34,346 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:33:44,363 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:33:54,363 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:34:04,356 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:34:14,340 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:34:24,355 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:34:34,346 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:34:44,361 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:34:54,372 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:35:04,374 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:35:14,394 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:35:24,405 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:35:34,413 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:35:44,410 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:35:54,415 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:36:04,406 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:36:14,416 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:36:24,417 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:36:34,441 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:36:44,439 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:36:54,442 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:37:04,416 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:37:14,444 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:37:24,440 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:37:34,442 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:37:44,421 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:37:54,430 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:38:04,426 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:38:14,441 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:38:24,427 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:38:34,428 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:38:44,430 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:38:54,417 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:39:04,440 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:39:14,444 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:39:24,443 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:39:34,446 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:39:44,436 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:39:54,438 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:40:04,445 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:40:14,429 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:40:24,426 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:40:34,426 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:40:44,428 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:40:54,443 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:41:04,435 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:41:14,429 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:41:24,422 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:41:34,442 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:41:44,440 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:41:54,435 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:42:04,442 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:42:14,461 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:42:24,472 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:42:34,465 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:42:44,474 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:42:54,467 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:43:04,490 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:43:14,484 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:43:24,469 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:43:34,470 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:43:44,476 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:43:54,492 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:44:04,468 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:44:14,488 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:44:24,494 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:44:34,485 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:44:44,488 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:44:54,481 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:45:04,482 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:45:14,491 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:45:24,473 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:45:34,467 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:45:44,475 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:45:54,492 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:46:04,482 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:46:14,479 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:46:24,474 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:46:34,467 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:46:44,489 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:46:54,483 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:47:04,480 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:47:14,499 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:47:24,518 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:47:34,518 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:47:44,529 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:47:54,549 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:48:04,558 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:48:14,545 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:48:24,546 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:48:34,554 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:48:44,551 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:48:54,557 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:49:04,549 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:49:14,567 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:49:24,573 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:49:34,587 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:49:44,581 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:49:54,595 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:50:04,595 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:50:14,608 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:50:24,610 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:50:34,627 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:50:44,649 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:50:54,635 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:51:04,656 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:51:14,662 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:51:24,650 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:51:34,653 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:51:44,665 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:51:54,675 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:52:04,687 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:52:14,694 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:52:24,696 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:52:34,697 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:52:44,685 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:52:54,692 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:53:04,691 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:53:14,682 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:53:24,686 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:53:34,690 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:53:44,674 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:53:54,692 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:54:04,696 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:54:14,669 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:54:24,669 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:54:34,669 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:54:44,672 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:54:54,689 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:55:04,680 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:55:14,680 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:55:24,678 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:55:34,680 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:55:44,697 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:55:54,706 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:56:04,714 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:56:14,717 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:56:24,727 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:56:34,741 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:56:44,745 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:56:54,753 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:57:04,750 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:57:14,757 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:57:24,761 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:57:34,783 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:57:44,786 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:57:54,793 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:58:04,813 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:58:14,817 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:58:24,808 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:58:34,822 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:58:44,822 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:58:54,795 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:59:04,811 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:59:14,820 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:59:24,797 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:59:34,808 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:59:44,811 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 10:59:54,821 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:00:04,812 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:00:14,811 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:00:24,822 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:00:34,816 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:00:44,815 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:00:54,810 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:01:04,813 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:01:14,819 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:01:24,809 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:01:34,816 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:01:44,809 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:01:54,823 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:02:04,843 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:02:14,844 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:02:24,844 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:02:34,867 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:02:44,862 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:02:54,865 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:03:04,859 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:03:14,867 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:03:24,858 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:03:34,859 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:03:44,850 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:03:54,858 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:04:04,869 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:04:14,863 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:04:24,858 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:04:34,867 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:04:44,857 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:04:54,857 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:05:04,857 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:05:14,859 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:05:24,875 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:05:34,891 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:05:44,914 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:05:54,913 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:06:04,910 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:06:14,907 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:06:24,903 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:06:34,926 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:06:44,935 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:06:54,935 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:07:04,944 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:07:14,925 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:07:24,927 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:07:34,918 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:07:44,943 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:07:54,936 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:08:04,936 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:08:14,923 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:08:24,929 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:08:34,926 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:08:44,942 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:08:54,943 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:09:04,947 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:09:14,944 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:09:24,956 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:09:34,958 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:09:44,951 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:09:54,953 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:10:04,966 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:10:14,985 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:10:24,980 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:10:34,999 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:10:44,996 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:10:55,010 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:11:04,999 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:11:14,998 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:11:25,018 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:11:35,028 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:11:45,040 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:11:55,028 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:12:05,035 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:12:15,021 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:12:25,033 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:12:35,031 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:12:45,034 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:12:55,035 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:13:05,030 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:13:15,042 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:13:25,046 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:13:35,056 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:13:45,045 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:13:55,055 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:14:05,048 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:14:15,045 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:14:25,046 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:14:35,048 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:14:45,048 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:14:55,057 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:15:05,057 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:15:15,068 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:15:25,060 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:15:35,065 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:15:45,065 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:15:55,075 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:16:05,084 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:16:15,077 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:16:25,080 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:16:35,089 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:16:45,097 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:16:55,098 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:17:05,120 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:17:15,119 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:17:25,114 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:17:35,110 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:17:45,118 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:17:55,112 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:18:05,105 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:18:15,123 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:18:25,136 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:18:35,154 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:18:45,172 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:18:55,170 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:19:05,190 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:19:15,190 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:19:25,168 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:19:35,182 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:19:45,185 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:19:55,179 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:20:05,194 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:20:15,195 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:20:25,184 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:20:35,180 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:20:45,196 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:20:55,185 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:21:05,179 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:21:15,168 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:21:25,190 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:21:35,207 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:21:45,203 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:21:55,226 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:22:05,226 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:22:15,222 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:22:25,236 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:22:35,255 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:22:45,249 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:22:55,275 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:23:05,287 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:23:15,272 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:23:25,282 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:23:35,279 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:23:45,264 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:23:55,283 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:24:05,297 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:24:15,300 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:24:25,302 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:24:35,318 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:24:45,319 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:24:55,334 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:25:05,351 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:25:15,348 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:25:25,370 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:25:35,387 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:25:45,401 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:25:55,408 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:26:05,417 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:26:15,414 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:26:25,412 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:26:35,389 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:26:45,401 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:26:55,414 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:27:05,417 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:27:15,411 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:27:25,394 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:27:35,409 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:27:45,408 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:27:55,406 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:28:05,390 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:28:15,412 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:28:25,417 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:28:35,407 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:28:45,388 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:28:55,405 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:29:05,428 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:29:15,433 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:29:25,444 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:29:35,443 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:29:45,435 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:29:55,444 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:30:05,425 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:30:15,434 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:30:25,448 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:30:35,433 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:30:45,436 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:30:55,440 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:31:05,445 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:31:15,439 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:31:25,448 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:31:35,423 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:31:45,444 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:31:55,450 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:32:05,454 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:32:15,479 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:32:25,480 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:32:35,494 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:32:45,493 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:32:55,470 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:33:05,466 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:33:15,466 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:33:25,473 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:33:35,494 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:33:45,465 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:33:55,476 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:34:05,481 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:34:15,485 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:34:25,497 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:34:35,522 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:34:45,527 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:34:55,538 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:35:05,534 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:35:15,531 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:35:25,540 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:35:35,531 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:35:45,520 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:35:55,521 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:36:05,527 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:36:15,525 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:36:25,520 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:36:35,517 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:36:45,534 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:36:55,540 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:37:05,535 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:37:15,532 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:37:25,540 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:37:35,529 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:37:45,516 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:37:55,517 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:38:05,513 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:38:15,534 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:38:25,545 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:38:35,558 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:38:45,567 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:38:55,566 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:39:05,588 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:39:15,603 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:39:25,616 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:39:35,613 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:39:45,611 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:39:55,611 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:40:05,609 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:40:15,603 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:40:25,601 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:40:35,603 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:40:45,611 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:40:55,629 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:41:05,622 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:41:15,642 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:41:25,659 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:41:35,681 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:41:45,670 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:41:55,693 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:42:05,712 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:42:15,725 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:42:25,722 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:42:35,743 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:42:45,740 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:42:55,734 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:43:05,740 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:43:15,733 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:43:25,717 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:43:35,725 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:43:45,728 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:43:55,745 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:44:05,732 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:44:15,731 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:44:25,744 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:44:35,743 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:44:45,740 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:44:55,738 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:45:05,726 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:45:15,727 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:45:25,720 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:45:35,745 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:45:45,735 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:45:55,735 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:46:05,715 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:46:15,730 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:46:25,716 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:46:35,726 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:46:45,718 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:46:55,740 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:47:05,736 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:47:15,732 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:47:25,736 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:47:35,746 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:47:45,763 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:47:55,771 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:48:05,785 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:48:15,787 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:48:25,791 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:48:35,783 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:48:45,796 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:48:55,794 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:49:05,797 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:49:15,812 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:49:25,821 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:49:35,825 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:49:45,838 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:49:55,834 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:50:05,825 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:50:15,833 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:50:25,852 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:50:35,853 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:50:45,845 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:50:55,847 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:51:05,860 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:51:15,872 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:51:25,885 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:51:35,874 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:51:45,881 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:51:55,874 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:52:05,877 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:52:15,887 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:52:25,910 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:52:35,902 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:52:45,909 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:52:55,911 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:53:05,916 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:53:15,895 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:53:25,899 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:53:35,896 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:53:45,905 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:53:55,912 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:54:05,919 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:54:15,927 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:54:25,926 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:54:35,948 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:54:45,936 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:54:55,945 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:55:05,949 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:55:15,948 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:55:25,938 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:55:35,935 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:55:45,942 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:55:55,937 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:56:05,928 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:56:15,925 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:56:25,933 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:56:35,933 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:56:45,926 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:56:55,925 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:57:05,928 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:57:15,920 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:57:25,923 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:57:35,937 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:57:45,950 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:57:55,965 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:58:05,950 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:58:15,975 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:58:25,967 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:58:35,995 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:58:45,987 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:58:55,995 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:59:05,978 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:59:15,983 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:59:25,978 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:59:35,987 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:59:45,990 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 11:59:55,985 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:00:06,001 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:00:16,020 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:00:26,034 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:00:36,048 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:00:46,050 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:00:56,047 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:01:06,060 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:01:16,080 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:01:26,086 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:01:36,082 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:01:46,078 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:01:56,096 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:02:06,107 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:02:16,124 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:02:26,152 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:02:36,154 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:02:46,179 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:02:56,174 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:03:06,191 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:03:16,191 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:03:26,187 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:03:36,191 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:03:46,176 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:03:56,172 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:04:06,186 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:04:16,212 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:04:26,215 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:04:36,208 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:04:46,217 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:04:56,224 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:05:06,232 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:05:16,234 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:05:26,240 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:05:36,243 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:05:46,260 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:05:56,254 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:06:06,251 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:06:16,276 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:06:26,271 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:06:36,278 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:06:46,272 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:06:56,280 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:07:06,265 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:07:16,290 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:07:26,289 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:07:36,284 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:07:46,279 - streamvault - ERROR - Error broadcasting active recordings: type object 'Recording' has no attribute 'is_live'
2025-07-16 12:07:47,057 - streamvault - INFO - No active processes to shutdown
2025-07-16 12:07:47,084 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 12:07:47,085 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 12:07:47,095 - streamvault - INFO - Dependency worker cancelled
2025-07-16 12:07:47,096 - streamvault - INFO - Dependency worker stopped
2025-07-16 12:07:47,097 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 12:07:47,098 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 12:07:47,098 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 12:07:47,098 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 12:07:47,098 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 12:07:47,098 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 12:07:47,099 - streamvault - INFO - Task dependency manager shut down
2025-07-16 12:07:47,100 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 12:07:47,135 - streamvault - INFO - Image sync worker stopped
2025-07-16 12:07:50,071 - streamvault - INFO - Starting application initialization...
2025-07-16 12:07:50,115 - streamvault - INFO - Updating migrations table schema
2025-07-16 12:07:50,116 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,132 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 12:07:50,133 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 12:07:50,133 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 12:07:50,145 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:07:50,151 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,153 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 12:07:50,164 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:07:50,166 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,167 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 12:07:50,451 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 12:07:50,451 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,452 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,452 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 12:07:50,452 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,453 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 12:07:50,471 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 12:07:50,473 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,474 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 12:07:50,489 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 12:07:50,489 - streamvault - INFO - Starting system_config table migration...
2025-07-16 12:07:50,489 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 12:07:50,490 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 12:07:50,490 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,491 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 12:07:50,506 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 12:07:50,508 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 12:07:50,509 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,510 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 12:07:50,530 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 12:07:50,530 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 12:07:50,532 - streamvault - INFO - No existing categories found in database
2025-07-16 12:07:50,532 - streamvault - INFO - Category images migration completed successfully
2025-07-16 12:07:50,532 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 12:07:50,533 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,535 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 12:07:50,556 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 12:07:50,570 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 12:07:50,570 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 12:07:50,570 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 12:07:50,570 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 12:07:50,570 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 12:07:50,571 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,571 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 12:07:50,583 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 12:07:50,594 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 12:07:50,594 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 12:07:50,594 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 12:07:50,594 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 12:07:50,594 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 12:07:50,595 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,596 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:07:50,611 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:07:50,611 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 12:07:50,611 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:07:50,612 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,613 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 12:07:50,625 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 12:07:50,626 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,627 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,627 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 12:07:50,628 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,629 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 12:07:50,650 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 12:07:50,650 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,651 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,651 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 12:07:50,651 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,653 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 12:07:50,666 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:07:50,668 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:50,677 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 12:07:50,681 - streamvault - INFO - EventSub initialized successfully
2025-07-16 12:07:50,683 - streamvault - INFO - EventSub initialized successfully
2025-07-16 12:07:50,683 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 12:07:50,684 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 12:07:50,685 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 12:07:50,685 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 12:07:50,685 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 12:07:50,685 - streamvault - INFO - Log cleanup completed
2025-07-16 12:07:50,685 - streamvault - INFO - Log cleanup service started
2025-07-16 12:07:50,685 - streamvault - INFO - Recording cleanup service started
2025-07-16 12:07:50,685 - streamvault - INFO - Image sync worker started
2025-07-16 12:07:50,685 - streamvault - INFO - Image sync service started
2025-07-16 12:07:50,687 - streamvault - INFO - Initializing background services...
2025-07-16 12:07:50,687 - streamvault - INFO - Initializing background queue service...
2025-07-16 12:07:50,687 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 12:07:50,687 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 12:07:50,688 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 12:07:50,688 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 12:07:50,688 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 12:07:50,688 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 12:07:50,688 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 12:07:50,688 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 12:07:50,688 - streamvault - INFO - Background services initialized successfully
2025-07-16 12:07:50,688 - streamvault - INFO - Background queue service started
2025-07-16 12:07:50,688 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 12:07:50,688 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 12:07:50,688 - streamvault - INFO - Application startup complete
2025-07-16 12:07:50,688 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 12:07:50,690 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 12:07:50,690 - streamvault - INFO - Worker worker-0 started
2025-07-16 12:07:50,691 - streamvault - INFO - Worker worker-1 started
2025-07-16 12:07:50,691 - streamvault - INFO - Worker worker-2 started
2025-07-16 12:07:50,691 - streamvault - INFO - Dependency worker started
2025-07-16 12:07:50,696 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 12:07:50,696 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 12:07:50,696 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 12:07:50,696 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 12:07:50,696 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 12:07:50,696 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 12:07:50,696 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 12:07:50,696 - streamvault - INFO - Dependency worker cancelled
2025-07-16 12:07:50,696 - streamvault - INFO - Dependency worker stopped
2025-07-16 12:07:52,824 - streamvault - INFO - Starting application initialization...
2025-07-16 12:07:52,856 - streamvault - INFO - Updating migrations table schema
2025-07-16 12:07:52,857 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:52,876 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 12:07:52,877 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 12:07:52,877 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 12:07:52,890 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:07:52,893 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:52,894 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 12:07:52,905 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:07:52,907 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:52,908 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 12:07:53,086 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 12:07:53,087 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,088 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,088 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 12:07:53,088 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,090 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 12:07:53,107 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 12:07:53,110 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,111 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 12:07:53,129 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 12:07:53,129 - streamvault - INFO - Starting system_config table migration...
2025-07-16 12:07:53,129 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 12:07:53,129 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 12:07:53,130 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,131 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 12:07:53,148 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 12:07:53,149 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 12:07:53,150 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,153 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 12:07:53,166 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 12:07:53,166 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 12:07:53,168 - streamvault - INFO - No existing categories found in database
2025-07-16 12:07:53,168 - streamvault - INFO - Category images migration completed successfully
2025-07-16 12:07:53,168 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 12:07:53,169 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,170 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 12:07:53,185 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 12:07:53,196 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 12:07:53,196 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 12:07:53,196 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 12:07:53,196 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 12:07:53,196 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 12:07:53,196 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,198 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 12:07:53,216 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 12:07:53,225 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 12:07:53,225 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 12:07:53,225 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 12:07:53,225 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 12:07:53,225 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 12:07:53,226 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,227 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:07:53,238 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:07:53,238 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 12:07:53,239 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:07:53,239 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,240 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 12:07:53,256 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 12:07:53,257 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,258 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,258 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 12:07:53,259 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,261 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 12:07:53,273 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 12:07:53,274 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,274 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,274 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 12:07:53,274 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,275 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 12:07:53,286 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:07:53,287 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:07:53,293 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 12:07:53,299 - streamvault - INFO - EventSub initialized successfully
2025-07-16 12:07:53,299 - streamvault - INFO - EventSub initialized successfully
2025-07-16 12:07:53,299 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 12:07:53,300 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 12:07:53,300 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 12:07:53,301 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 12:07:53,301 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 12:07:53,301 - streamvault - INFO - Log cleanup completed
2025-07-16 12:07:53,301 - streamvault - INFO - Log cleanup service started
2025-07-16 12:07:53,301 - streamvault - INFO - Recording cleanup service started
2025-07-16 12:07:53,301 - streamvault - INFO - Image sync worker started
2025-07-16 12:07:53,301 - streamvault - INFO - Image sync service started
2025-07-16 12:07:53,301 - streamvault - INFO - Initializing background services...
2025-07-16 12:07:53,302 - streamvault - INFO - Initializing background queue service...
2025-07-16 12:07:53,302 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 12:07:53,302 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 12:07:53,302 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 12:07:53,302 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 12:07:53,302 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 12:07:53,302 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 12:07:53,302 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 12:07:53,302 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 12:07:53,302 - streamvault - INFO - Background services initialized successfully
2025-07-16 12:07:53,302 - streamvault - INFO - Background queue service started
2025-07-16 12:07:53,302 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 12:07:53,302 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 12:07:53,302 - streamvault - INFO - Application startup complete
2025-07-16 12:07:53,302 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 12:07:53,303 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 12:07:53,304 - streamvault - INFO - Worker worker-0 started
2025-07-16 12:07:53,304 - streamvault - INFO - Worker worker-1 started
2025-07-16 12:07:53,304 - streamvault - INFO - Worker worker-2 started
2025-07-16 12:07:53,304 - streamvault - INFO - Dependency worker started
2025-07-16 12:08:23,308 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 12:08:23,309 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 12:08:23,311 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 12:08:23,311 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 12:37:47,458 - streamvault - INFO - No active processes to shutdown
2025-07-16 12:37:47,477 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 12:37:47,477 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 12:37:47,486 - streamvault - INFO - Dependency worker cancelled
2025-07-16 12:37:47,486 - streamvault - INFO - Dependency worker stopped
2025-07-16 12:37:47,486 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 12:37:47,487 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 12:37:47,487 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 12:37:47,487 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 12:37:47,487 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 12:37:47,487 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 12:37:47,489 - streamvault - INFO - Task dependency manager shut down
2025-07-16 12:37:47,489 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 12:37:47,520 - streamvault - INFO - Image sync worker stopped
2025-07-16 12:37:50,631 - streamvault - INFO - Starting application initialization...
2025-07-16 12:37:50,667 - streamvault - INFO - Updating migrations table schema
2025-07-16 12:37:50,668 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:50,685 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 12:37:50,686 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 12:37:50,686 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 12:37:50,704 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:37:50,707 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:50,708 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 12:37:50,722 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:37:50,723 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:50,724 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 12:37:51,020 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 12:37:51,021 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,022 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,022 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 12:37:51,022 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,023 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 12:37:51,036 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 12:37:51,037 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,038 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 12:37:51,050 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 12:37:51,050 - streamvault - INFO - Starting system_config table migration...
2025-07-16 12:37:51,050 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 12:37:51,050 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 12:37:51,050 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,051 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 12:37:51,066 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 12:37:51,066 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 12:37:51,067 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,068 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 12:37:51,084 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 12:37:51,085 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 12:37:51,087 - streamvault - INFO - No existing categories found in database
2025-07-16 12:37:51,088 - streamvault - INFO - Category images migration completed successfully
2025-07-16 12:37:51,088 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 12:37:51,088 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,090 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 12:37:51,103 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 12:37:51,115 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 12:37:51,116 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 12:37:51,116 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 12:37:51,116 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 12:37:51,116 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 12:37:51,116 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,117 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 12:37:51,145 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 12:37:51,162 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 12:37:51,163 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 12:37:51,163 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 12:37:51,163 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 12:37:51,163 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 12:37:51,163 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,164 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:37:51,183 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:37:51,184 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 12:37:51,185 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:37:51,185 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,187 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 12:37:51,209 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 12:37:51,211 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,213 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,213 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 12:37:51,215 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,217 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 12:37:51,236 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 12:37:51,237 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,237 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,237 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 12:37:51,238 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,239 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 12:37:51,259 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:37:51,262 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:37:51,271 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 12:37:51,277 - streamvault - INFO - EventSub initialized successfully
2025-07-16 12:37:51,277 - streamvault - INFO - EventSub initialized successfully
2025-07-16 12:37:51,277 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 12:37:51,278 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 12:37:51,279 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 12:37:51,279 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 12:37:51,279 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 12:37:51,279 - streamvault - INFO - Log cleanup completed
2025-07-16 12:37:51,279 - streamvault - INFO - Log cleanup service started
2025-07-16 12:37:51,279 - streamvault - INFO - Recording cleanup service started
2025-07-16 12:37:51,279 - streamvault - INFO - Image sync worker started
2025-07-16 12:37:51,279 - streamvault - INFO - Image sync service started
2025-07-16 12:37:51,281 - streamvault - INFO - Initializing background services...
2025-07-16 12:37:51,282 - streamvault - INFO - Initializing background queue service...
2025-07-16 12:37:51,282 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 12:37:51,282 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 12:37:51,282 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 12:37:51,282 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 12:37:51,282 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 12:37:51,282 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 12:37:51,282 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 12:37:51,283 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 12:37:51,283 - streamvault - INFO - Background services initialized successfully
2025-07-16 12:37:51,283 - streamvault - INFO - Background queue service started
2025-07-16 12:37:51,283 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 12:37:51,283 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 12:37:51,283 - streamvault - INFO - Application startup complete
2025-07-16 12:37:51,283 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 12:37:51,287 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 12:37:51,287 - streamvault - INFO - Worker worker-0 started
2025-07-16 12:37:51,288 - streamvault - INFO - Worker worker-1 started
2025-07-16 12:37:51,288 - streamvault - INFO - Worker worker-2 started
2025-07-16 12:37:51,288 - streamvault - INFO - Dependency worker started
2025-07-16 12:38:21,265 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 12:38:21,266 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 12:38:21,268 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 12:38:21,268 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 12:42:48,966 - streamvault - INFO - No active processes to shutdown
2025-07-16 12:42:48,977 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 12:42:48,977 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 12:42:48,982 - streamvault - INFO - Dependency worker cancelled
2025-07-16 12:42:48,982 - streamvault - INFO - Dependency worker stopped
2025-07-16 12:42:48,982 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 12:42:48,982 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 12:42:48,982 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 12:42:48,982 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 12:42:48,982 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 12:42:48,982 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 12:42:48,982 - streamvault - INFO - Task dependency manager shut down
2025-07-16 12:42:48,983 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 12:42:48,993 - streamvault - INFO - Image sync worker stopped
2025-07-16 12:42:50,953 - streamvault - INFO - Starting application initialization...
2025-07-16 12:42:50,978 - streamvault - INFO - Updating migrations table schema
2025-07-16 12:42:50,978 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:50,995 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 12:42:50,996 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 12:42:50,996 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 12:42:51,008 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:42:51,011 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,012 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 12:42:51,026 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:42:51,027 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,029 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 12:42:51,183 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 12:42:51,183 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,184 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,184 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 12:42:51,185 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,187 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 12:42:51,203 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 12:42:51,206 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,207 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 12:42:51,215 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 12:42:51,215 - streamvault - INFO - Starting system_config table migration...
2025-07-16 12:42:51,215 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 12:42:51,215 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 12:42:51,216 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,217 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 12:42:51,227 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 12:42:51,228 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 12:42:51,229 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,230 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 12:42:51,243 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 12:42:51,243 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 12:42:51,245 - streamvault - INFO - No existing categories found in database
2025-07-16 12:42:51,245 - streamvault - INFO - Category images migration completed successfully
2025-07-16 12:42:51,245 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 12:42:51,245 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,245 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 12:42:51,253 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 12:42:51,262 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 12:42:51,262 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 12:42:51,262 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 12:42:51,263 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 12:42:51,263 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 12:42:51,263 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,265 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 12:42:51,287 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 12:42:51,297 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 12:42:51,297 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 12:42:51,297 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 12:42:51,297 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 12:42:51,297 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 12:42:51,297 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,298 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:42:51,307 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:42:51,308 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 12:42:51,308 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:42:51,308 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,309 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 12:42:51,317 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 12:42:51,318 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,318 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,318 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 12:42:51,319 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,320 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 12:42:51,333 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 12:42:51,335 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,335 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,335 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 12:42:51,336 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,337 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 12:42:51,346 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:42:51,347 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:42:51,355 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 12:42:51,361 - streamvault - INFO - EventSub initialized successfully
2025-07-16 12:42:51,362 - streamvault - INFO - EventSub initialized successfully
2025-07-16 12:42:51,362 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 12:42:51,364 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 12:42:51,364 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 12:42:51,365 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 12:42:51,365 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 12:42:51,365 - streamvault - INFO - Log cleanup completed
2025-07-16 12:42:51,365 - streamvault - INFO - Log cleanup service started
2025-07-16 12:42:51,365 - streamvault - INFO - Recording cleanup service started
2025-07-16 12:42:51,365 - streamvault - INFO - Image sync worker started
2025-07-16 12:42:51,365 - streamvault - INFO - Image sync service started
2025-07-16 12:42:51,366 - streamvault - INFO - Initializing background services...
2025-07-16 12:42:51,366 - streamvault - INFO - Initializing background queue service...
2025-07-16 12:42:51,366 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 12:42:51,366 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 12:42:51,366 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 12:42:51,366 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 12:42:51,366 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 12:42:51,367 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 12:42:51,367 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 12:42:51,367 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 12:42:51,367 - streamvault - INFO - Background services initialized successfully
2025-07-16 12:42:51,367 - streamvault - INFO - Background queue service started
2025-07-16 12:42:51,367 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 12:42:51,367 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 12:42:51,367 - streamvault - INFO - Application startup complete
2025-07-16 12:42:51,367 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 12:42:51,369 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 12:42:51,369 - streamvault - INFO - Worker worker-0 started
2025-07-16 12:42:51,369 - streamvault - INFO - Worker worker-1 started
2025-07-16 12:42:51,369 - streamvault - INFO - Worker worker-2 started
2025-07-16 12:42:51,369 - streamvault - INFO - Dependency worker started
2025-07-16 12:43:21,382 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 12:43:21,383 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 12:43:21,385 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 12:43:21,385 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 12:47:49,552 - streamvault - INFO - No active processes to shutdown
2025-07-16 12:47:49,567 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 12:47:49,567 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 12:47:49,573 - streamvault - INFO - Dependency worker cancelled
2025-07-16 12:47:49,573 - streamvault - INFO - Dependency worker stopped
2025-07-16 12:47:49,573 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 12:47:49,574 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 12:47:49,574 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 12:47:49,574 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 12:47:49,574 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 12:47:49,574 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 12:47:49,574 - streamvault - INFO - Task dependency manager shut down
2025-07-16 12:47:49,574 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 12:47:49,591 - streamvault - INFO - Image sync worker stopped
2025-07-16 12:47:51,059 - streamvault - INFO - Starting application initialization...
2025-07-16 12:47:51,082 - streamvault - INFO - Updating migrations table schema
2025-07-16 12:47:51,082 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,092 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 12:47:51,093 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 12:47:51,093 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 12:47:51,099 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:47:51,100 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,101 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 12:47:51,107 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:47:51,108 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,109 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 12:47:51,225 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 12:47:51,226 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,227 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,227 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 12:47:51,228 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,229 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 12:47:51,238 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 12:47:51,239 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,240 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 12:47:51,250 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 12:47:51,250 - streamvault - INFO - Starting system_config table migration...
2025-07-16 12:47:51,250 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 12:47:51,250 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 12:47:51,251 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,252 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 12:47:51,264 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 12:47:51,264 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 12:47:51,266 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,266 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 12:47:51,277 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 12:47:51,277 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 12:47:51,279 - streamvault - INFO - No existing categories found in database
2025-07-16 12:47:51,279 - streamvault - INFO - Category images migration completed successfully
2025-07-16 12:47:51,279 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 12:47:51,279 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,280 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 12:47:51,291 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 12:47:51,303 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 12:47:51,303 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 12:47:51,303 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 12:47:51,303 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 12:47:51,303 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 12:47:51,304 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,305 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 12:47:51,319 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 12:47:51,327 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 12:47:51,327 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 12:47:51,327 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 12:47:51,327 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 12:47:51,328 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 12:47:51,328 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,329 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:47:51,335 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:47:51,335 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 12:47:51,336 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:47:51,336 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,336 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 12:47:51,343 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 12:47:51,344 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,344 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,344 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 12:47:51,344 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,345 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 12:47:51,352 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 12:47:51,352 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,352 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,352 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 12:47:51,352 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,353 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 12:47:51,359 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:47:51,360 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:47:51,364 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 12:47:51,366 - streamvault - INFO - EventSub initialized successfully
2025-07-16 12:47:51,366 - streamvault - INFO - EventSub initialized successfully
2025-07-16 12:47:51,366 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 12:47:51,367 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 12:47:51,367 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 12:47:51,367 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 12:47:51,367 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 12:47:51,367 - streamvault - INFO - Log cleanup completed
2025-07-16 12:47:51,367 - streamvault - INFO - Log cleanup service started
2025-07-16 12:47:51,368 - streamvault - INFO - Recording cleanup service started
2025-07-16 12:47:51,368 - streamvault - INFO - Image sync worker started
2025-07-16 12:47:51,368 - streamvault - INFO - Image sync service started
2025-07-16 12:47:51,368 - streamvault - INFO - Initializing background services...
2025-07-16 12:47:51,368 - streamvault - INFO - Initializing background queue service...
2025-07-16 12:47:51,368 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 12:47:51,368 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 12:47:51,368 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 12:47:51,368 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 12:47:51,368 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 12:47:51,368 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 12:47:51,368 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 12:47:51,368 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 12:47:51,368 - streamvault - INFO - Background services initialized successfully
2025-07-16 12:47:51,368 - streamvault - INFO - Background queue service started
2025-07-16 12:47:51,368 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 12:47:51,368 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 12:47:51,368 - streamvault - INFO - Application startup complete
2025-07-16 12:47:51,369 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 12:47:51,370 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 12:47:51,370 - streamvault - INFO - Worker worker-0 started
2025-07-16 12:47:51,370 - streamvault - INFO - Worker worker-1 started
2025-07-16 12:47:51,370 - streamvault - INFO - Worker worker-2 started
2025-07-16 12:47:51,370 - streamvault - INFO - Dependency worker started
2025-07-16 12:48:21,369 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 12:48:21,370 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 12:48:21,372 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 12:48:21,372 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 12:57:50,105 - streamvault - INFO - No active processes to shutdown
2025-07-16 12:57:50,116 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 12:57:50,116 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 12:57:50,120 - streamvault - INFO - Dependency worker cancelled
2025-07-16 12:57:50,120 - streamvault - INFO - Dependency worker stopped
2025-07-16 12:57:50,120 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 12:57:50,120 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 12:57:50,120 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 12:57:50,120 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 12:57:50,121 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 12:57:50,121 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 12:57:50,121 - streamvault - INFO - Task dependency manager shut down
2025-07-16 12:57:50,121 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 12:57:50,136 - streamvault - INFO - Image sync worker stopped
2025-07-16 12:57:51,983 - streamvault - INFO - Starting application initialization...
2025-07-16 12:57:52,022 - streamvault - INFO - Updating migrations table schema
2025-07-16 12:57:52,023 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,048 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 12:57:52,049 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 12:57:52,049 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 12:57:52,062 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:57:52,067 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,068 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 12:57:52,085 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:57:52,088 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,089 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 12:57:52,351 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 12:57:52,352 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,354 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,354 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 12:57:52,355 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,357 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 12:57:52,376 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 12:57:52,378 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,379 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 12:57:52,389 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 12:57:52,389 - streamvault - INFO - Starting system_config table migration...
2025-07-16 12:57:52,390 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 12:57:52,390 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 12:57:52,391 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,392 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 12:57:52,411 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 12:57:52,412 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 12:57:52,412 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,413 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 12:57:52,423 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 12:57:52,423 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 12:57:52,426 - streamvault - INFO - No existing categories found in database
2025-07-16 12:57:52,426 - streamvault - INFO - Category images migration completed successfully
2025-07-16 12:57:52,426 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 12:57:52,426 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,427 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 12:57:52,440 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 12:57:52,452 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 12:57:52,452 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 12:57:52,452 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 12:57:52,452 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 12:57:52,452 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 12:57:52,453 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,454 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 12:57:52,466 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 12:57:52,483 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 12:57:52,483 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 12:57:52,483 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 12:57:52,483 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 12:57:52,484 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 12:57:52,484 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,486 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:57:52,501 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:57:52,502 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 12:57:52,502 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 12:57:52,502 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,503 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 12:57:52,514 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 12:57:52,514 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,514 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,514 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 12:57:52,515 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,516 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 12:57:52,532 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 12:57:52,532 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,533 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,533 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 12:57:52,533 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,535 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 12:57:52,552 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 12:57:52,553 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 12:57:52,558 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 12:57:52,564 - streamvault - INFO - EventSub initialized successfully
2025-07-16 12:57:52,565 - streamvault - INFO - EventSub initialized successfully
2025-07-16 12:57:52,565 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 12:57:52,567 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 12:57:52,568 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 12:57:52,568 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 12:57:52,568 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 12:57:52,569 - streamvault - INFO - Log cleanup completed
2025-07-16 12:57:52,569 - streamvault - INFO - Log cleanup service started
2025-07-16 12:57:52,569 - streamvault - INFO - Recording cleanup service started
2025-07-16 12:57:52,569 - streamvault - INFO - Image sync worker started
2025-07-16 12:57:52,569 - streamvault - INFO - Image sync service started
2025-07-16 12:57:52,570 - streamvault - INFO - Initializing background services...
2025-07-16 12:57:52,571 - streamvault - INFO - Initializing background queue service...
2025-07-16 12:57:52,571 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 12:57:52,571 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 12:57:52,571 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 12:57:52,571 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 12:57:52,571 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 12:57:52,571 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 12:57:52,571 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 12:57:52,571 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 12:57:52,571 - streamvault - INFO - Background services initialized successfully
2025-07-16 12:57:52,572 - streamvault - INFO - Background queue service started
2025-07-16 12:57:52,572 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 12:57:52,572 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 12:57:52,572 - streamvault - INFO - Application startup complete
2025-07-16 12:57:52,572 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 12:57:52,574 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 12:57:52,574 - streamvault - INFO - Worker worker-0 started
2025-07-16 12:57:52,576 - streamvault - INFO - Worker worker-1 started
2025-07-16 12:57:52,576 - streamvault - INFO - Worker worker-2 started
2025-07-16 12:57:52,576 - streamvault - INFO - Dependency worker started
2025-07-16 12:58:22,570 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 12:58:22,571 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 12:58:22,573 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 12:58:22,573 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 13:02:50,728 - streamvault - INFO - No active processes to shutdown
2025-07-16 13:02:50,748 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:02:50,748 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 13:02:50,759 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:02:50,759 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:02:50,759 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:02:50,760 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:02:50,760 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:02:50,760 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:02:50,760 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:02:50,761 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:02:50,761 - streamvault - INFO - Task dependency manager shut down
2025-07-16 13:02:50,762 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 13:02:50,785 - streamvault - INFO - Image sync worker stopped
2025-07-16 13:02:53,654 - streamvault - INFO - Starting application initialization...
2025-07-16 13:02:53,699 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:02:53,701 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:53,775 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:02:53,777 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:02:53,777 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:02:53,822 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:02:53,826 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:53,829 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:02:53,849 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:02:53,851 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:53,853 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:02:54,128 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:02:54,129 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,131 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,131 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:02:54,132 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,133 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:02:54,147 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:02:54,148 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,150 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:02:54,179 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:02:54,179 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:02:54,179 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:02:54,180 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:02:54,180 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,182 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:02:54,208 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:02:54,209 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:02:54,209 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,212 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:02:54,269 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:02:54,270 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:02:54,272 - streamvault - INFO - No existing categories found in database
2025-07-16 13:02:54,273 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:02:54,273 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:02:54,274 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,276 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:02:54,298 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:02:54,310 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:02:54,310 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:02:54,310 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:02:54,310 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:02:54,310 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:02:54,311 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,313 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:02:54,338 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:02:54,368 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:02:54,369 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:02:54,369 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:02:54,371 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:02:54,371 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:02:54,374 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,377 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:02:54,482 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:02:54,484 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:02:54,484 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:02:54,485 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,487 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:02:54,512 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:02:54,513 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,513 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,514 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:02:54,518 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,521 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:02:54,541 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:02:54,542 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,543 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,543 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:02:54,544 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,546 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:02:54,568 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:02:54,569 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:54,577 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:02:54,586 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:02:54,587 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:02:54,587 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:02:54,590 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:02:54,591 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:02:54,591 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:02:54,592 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:02:54,592 - streamvault - INFO - Log cleanup completed
2025-07-16 13:02:54,592 - streamvault - INFO - Log cleanup service started
2025-07-16 13:02:54,593 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:02:54,593 - streamvault - INFO - Image sync worker started
2025-07-16 13:02:54,593 - streamvault - INFO - Image sync service started
2025-07-16 13:02:54,595 - streamvault - INFO - Initializing background services...
2025-07-16 13:02:54,595 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:02:54,595 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:02:54,595 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:02:54,595 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:02:54,596 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:02:54,596 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:02:54,596 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:02:54,596 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:02:54,596 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:02:54,596 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:02:54,596 - streamvault - INFO - Background queue service started
2025-07-16 13:02:54,597 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:02:54,597 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:02:54,597 - streamvault - INFO - Application startup complete
2025-07-16 13:02:54,597 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:02:54,601 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:02:54,601 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:02:54,602 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:02:54,602 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:02:54,602 - streamvault - INFO - Dependency worker started
2025-07-16 13:02:54,607 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:02:54,607 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:02:54,608 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:02:54,608 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:02:54,608 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:02:54,608 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:02:54,609 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:02:54,612 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:02:54,612 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:02:58,374 - streamvault - INFO - Starting application initialization...
2025-07-16 13:02:58,416 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:02:58,418 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:58,454 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:02:58,455 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:02:58,456 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:02:58,482 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:02:58,486 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:58,488 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:02:58,507 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:02:58,509 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:58,511 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:02:58,782 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:02:58,784 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:58,785 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:58,785 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:02:58,785 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:58,787 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:02:58,809 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:02:58,814 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:58,816 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:02:58,839 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:02:58,839 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:02:58,839 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:02:58,839 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:02:58,840 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:58,842 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:02:58,863 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:02:58,864 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:02:58,865 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:58,867 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:02:58,884 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:02:58,885 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:02:58,887 - streamvault - INFO - No existing categories found in database
2025-07-16 13:02:58,887 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:02:58,887 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:02:58,888 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:58,889 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:02:58,905 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:02:58,917 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:02:58,917 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:02:58,917 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:02:58,917 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:02:58,917 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:02:58,918 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:58,920 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:02:58,939 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:02:58,958 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:02:58,958 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:02:58,958 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:02:58,958 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:02:58,958 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:02:58,960 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:58,962 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:02:58,976 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:02:58,977 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:02:58,977 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:02:58,978 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:58,979 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:02:58,995 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:02:58,997 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:58,997 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:58,998 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:02:58,999 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:59,001 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:02:59,022 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:02:59,023 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:59,023 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:59,023 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:02:59,024 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:59,026 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:02:59,046 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:02:59,048 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:02:59,055 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:02:59,064 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:02:59,064 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:02:59,064 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:02:59,066 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:02:59,067 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:02:59,067 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:02:59,068 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:02:59,068 - streamvault - INFO - Log cleanup completed
2025-07-16 13:02:59,068 - streamvault - INFO - Log cleanup service started
2025-07-16 13:02:59,068 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:02:59,068 - streamvault - INFO - Image sync worker started
2025-07-16 13:02:59,068 - streamvault - INFO - Image sync service started
2025-07-16 13:02:59,069 - streamvault - INFO - Initializing background services...
2025-07-16 13:02:59,069 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:02:59,069 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:02:59,069 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:02:59,069 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:02:59,069 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:02:59,069 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:02:59,069 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:02:59,069 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:02:59,069 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:02:59,069 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:02:59,069 - streamvault - INFO - Background queue service started
2025-07-16 13:02:59,069 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:02:59,069 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:02:59,069 - streamvault - INFO - Application startup complete
2025-07-16 13:02:59,069 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:02:59,072 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:02:59,072 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:02:59,072 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:02:59,072 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:02:59,072 - streamvault - INFO - Dependency worker started
2025-07-16 13:03:29,061 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 13:03:29,062 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 13:03:29,063 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 13:03:29,063 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 13:07:55,335 - streamvault - INFO - No active processes to shutdown
2025-07-16 13:07:55,353 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:07:55,354 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 13:07:55,361 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:07:55,361 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:07:55,361 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:07:55,361 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:07:55,361 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:07:55,361 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:07:55,361 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:07:55,362 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:07:55,362 - streamvault - INFO - Task dependency manager shut down
2025-07-16 13:07:55,362 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 13:07:55,378 - streamvault - INFO - Image sync worker stopped
2025-07-16 13:07:58,088 - streamvault - INFO - Starting application initialization...
2025-07-16 13:07:58,119 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:07:58,120 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,139 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:07:58,140 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:07:58,141 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:07:58,154 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:07:58,157 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,158 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:07:58,178 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:07:58,179 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,181 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:07:58,399 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:07:58,401 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,401 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,402 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:07:58,402 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,403 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:07:58,428 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:07:58,430 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,432 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:07:58,477 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:07:58,478 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:07:58,478 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:07:58,478 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:07:58,479 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,481 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:07:58,511 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:07:58,511 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:07:58,512 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,515 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:07:58,543 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:07:58,544 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:07:58,549 - streamvault - INFO - No existing categories found in database
2025-07-16 13:07:58,549 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:07:58,549 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:07:58,550 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,552 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:07:58,575 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:07:58,595 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:07:58,595 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:07:58,595 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:07:58,595 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:07:58,596 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:07:58,596 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,599 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:07:58,627 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:07:58,645 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:07:58,645 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:07:58,645 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:07:58,645 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:07:58,645 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:07:58,646 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,647 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:07:58,669 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:07:58,670 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:07:58,670 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:07:58,671 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,672 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:07:58,692 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:07:58,693 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,693 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,693 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:07:58,696 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,698 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:07:58,722 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:07:58,723 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,724 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,724 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:07:58,725 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,730 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:07:58,761 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:07:58,764 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:07:58,775 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:07:58,787 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:07:58,787 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:07:58,788 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:07:58,790 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:07:58,790 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:07:58,791 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:07:58,791 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:07:58,791 - streamvault - INFO - Log cleanup completed
2025-07-16 13:07:58,791 - streamvault - INFO - Log cleanup service started
2025-07-16 13:07:58,791 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:07:58,791 - streamvault - INFO - Image sync worker started
2025-07-16 13:07:58,792 - streamvault - INFO - Image sync service started
2025-07-16 13:07:58,793 - streamvault - INFO - Initializing background services...
2025-07-16 13:07:58,793 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:07:58,793 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:07:58,793 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:07:58,794 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:07:58,795 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:07:58,795 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:07:58,795 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:07:58,795 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:07:58,795 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:07:58,796 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:07:58,797 - streamvault - INFO - Background queue service started
2025-07-16 13:07:58,797 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:07:58,797 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:07:58,797 - streamvault - INFO - Application startup complete
2025-07-16 13:07:58,798 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:07:58,802 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:07:58,802 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:07:58,803 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:07:58,803 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:07:58,803 - streamvault - INFO - Dependency worker started
2025-07-16 13:07:58,808 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:07:58,808 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:07:58,814 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:07:58,814 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:07:58,814 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:07:58,815 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:07:58,815 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:07:58,815 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:07:58,815 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:08:00,988 - streamvault - INFO - Starting application initialization...
2025-07-16 13:08:01,012 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:08:01,013 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,028 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:08:01,029 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:08:01,029 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:08:01,039 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:08:01,040 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,042 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:08:01,054 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:08:01,055 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,056 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:08:01,210 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:08:01,211 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,212 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,212 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:08:01,212 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,214 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:08:01,230 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:08:01,231 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,232 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:08:01,245 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:08:01,246 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:08:01,246 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:08:01,246 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:08:01,246 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,247 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:08:01,259 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:08:01,260 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:08:01,261 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,262 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:08:01,275 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:08:01,276 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:08:01,278 - streamvault - INFO - No existing categories found in database
2025-07-16 13:08:01,278 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:08:01,279 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:08:01,279 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,281 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:08:01,297 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:08:01,306 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:08:01,306 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:08:01,306 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:08:01,306 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:08:01,306 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:08:01,307 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,309 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:08:01,321 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:08:01,329 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:08:01,329 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:08:01,329 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:08:01,329 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:08:01,329 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:08:01,329 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,331 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:08:01,342 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:08:01,343 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:08:01,343 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:08:01,343 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,345 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:08:01,355 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:08:01,356 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,356 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,356 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:08:01,356 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,357 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:08:01,367 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:08:01,367 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,367 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,367 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:08:01,368 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,369 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:08:01,378 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:08:01,379 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:08:01,385 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:08:01,389 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:08:01,389 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:08:01,390 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:08:01,391 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:08:01,391 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:08:01,391 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:08:01,391 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:08:01,391 - streamvault - INFO - Log cleanup completed
2025-07-16 13:08:01,391 - streamvault - INFO - Log cleanup service started
2025-07-16 13:08:01,391 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:08:01,391 - streamvault - INFO - Image sync worker started
2025-07-16 13:08:01,391 - streamvault - INFO - Image sync service started
2025-07-16 13:08:01,392 - streamvault - INFO - Initializing background services...
2025-07-16 13:08:01,392 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:08:01,392 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:08:01,392 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:08:01,392 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:08:01,392 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:08:01,392 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:08:01,392 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:08:01,392 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:08:01,392 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:08:01,393 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:08:01,393 - streamvault - INFO - Background queue service started
2025-07-16 13:08:01,393 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:08:01,393 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:08:01,393 - streamvault - INFO - Application startup complete
2025-07-16 13:08:01,393 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:08:01,396 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:08:01,396 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:08:01,396 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:08:01,397 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:08:01,397 - streamvault - INFO - Dependency worker started
2025-07-16 13:08:31,415 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 13:08:31,416 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 13:08:31,417 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 13:08:31,417 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 13:17:59,394 - streamvault - INFO - No active processes to shutdown
2025-07-16 13:17:59,406 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:17:59,406 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 13:17:59,411 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:17:59,411 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:17:59,412 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:17:59,412 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:17:59,412 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:17:59,412 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:17:59,412 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:17:59,412 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:17:59,412 - streamvault - INFO - Task dependency manager shut down
2025-07-16 13:17:59,412 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 13:17:59,427 - streamvault - INFO - Image sync worker stopped
2025-07-16 13:18:01,184 - streamvault - INFO - Starting application initialization...
2025-07-16 13:18:01,205 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:18:01,206 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,225 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:18:01,226 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:18:01,226 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:18:01,236 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:18:01,237 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,238 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:18:01,253 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:18:01,255 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,257 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:18:01,407 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:18:01,408 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,408 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,408 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:18:01,409 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,410 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:18:01,419 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:18:01,420 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,421 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:18:01,428 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:18:01,429 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:18:01,429 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:18:01,429 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:18:01,429 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,432 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:18:01,442 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:18:01,443 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:18:01,443 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,444 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:18:01,454 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:18:01,454 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:18:01,456 - streamvault - INFO - No existing categories found in database
2025-07-16 13:18:01,456 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:18:01,456 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:18:01,456 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,457 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:18:01,468 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:18:01,475 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:18:01,475 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:18:01,475 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:18:01,475 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:18:01,475 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:18:01,475 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,476 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:18:01,487 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:18:01,495 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:18:01,495 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:18:01,495 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:18:01,495 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:18:01,495 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:18:01,496 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,497 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:18:01,508 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:18:01,509 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:18:01,509 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:18:01,509 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,510 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:18:01,524 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:18:01,525 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,526 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,526 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:18:01,527 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,529 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:18:01,541 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:18:01,541 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,541 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,541 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:18:01,541 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,542 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:18:01,551 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:18:01,552 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:01,558 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:18:01,561 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:18:01,561 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:18:01,561 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:18:01,562 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:18:01,562 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:18:01,563 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:18:01,563 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:18:01,563 - streamvault - INFO - Log cleanup completed
2025-07-16 13:18:01,563 - streamvault - INFO - Log cleanup service started
2025-07-16 13:18:01,563 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:18:01,563 - streamvault - INFO - Image sync worker started
2025-07-16 13:18:01,563 - streamvault - INFO - Image sync service started
2025-07-16 13:18:01,564 - streamvault - INFO - Initializing background services...
2025-07-16 13:18:01,564 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:18:01,564 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:18:01,564 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:18:01,564 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:18:01,564 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:18:01,564 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:18:01,564 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:18:01,564 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:18:01,564 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:18:01,564 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:18:01,564 - streamvault - INFO - Background queue service started
2025-07-16 13:18:01,564 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:18:01,564 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:18:01,564 - streamvault - INFO - Application startup complete
2025-07-16 13:18:01,564 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:18:01,566 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:18:01,566 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:18:01,567 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:18:01,567 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:18:01,567 - streamvault - INFO - Dependency worker started
2025-07-16 13:18:01,569 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:18:01,569 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:18:01,569 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:18:01,569 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:18:01,571 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:18:01,571 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:18:01,571 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:18:01,571 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:18:01,571 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:18:03,197 - streamvault - INFO - Starting application initialization...
2025-07-16 13:18:03,226 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:18:03,228 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,242 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:18:03,243 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:18:03,243 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:18:03,253 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:18:03,255 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,256 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:18:03,267 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:18:03,269 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,271 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:18:03,416 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:18:03,416 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,416 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,416 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:18:03,417 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,418 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:18:03,429 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:18:03,431 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,432 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:18:03,441 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:18:03,441 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:18:03,441 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:18:03,441 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:18:03,442 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,443 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:18:03,455 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:18:03,456 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:18:03,457 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,458 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:18:03,472 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:18:03,472 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:18:03,474 - streamvault - INFO - No existing categories found in database
2025-07-16 13:18:03,474 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:18:03,475 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:18:03,475 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,476 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:18:03,486 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:18:03,494 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:18:03,494 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:18:03,494 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:18:03,494 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:18:03,495 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:18:03,495 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,497 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:18:03,511 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:18:03,521 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:18:03,521 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:18:03,521 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:18:03,521 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:18:03,521 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:18:03,522 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,523 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:18:03,532 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:18:03,533 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:18:03,533 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:18:03,533 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,535 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:18:03,546 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:18:03,547 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,547 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,548 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:18:03,548 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,551 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:18:03,564 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:18:03,565 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,565 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,565 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:18:03,566 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,568 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:18:03,584 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:18:03,586 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:18:03,594 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:18:03,600 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:18:03,601 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:18:03,601 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:18:03,603 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:18:03,603 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:18:03,605 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:18:03,605 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:18:03,605 - streamvault - INFO - Log cleanup completed
2025-07-16 13:18:03,605 - streamvault - INFO - Log cleanup service started
2025-07-16 13:18:03,605 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:18:03,605 - streamvault - INFO - Image sync worker started
2025-07-16 13:18:03,605 - streamvault - INFO - Image sync service started
2025-07-16 13:18:03,606 - streamvault - INFO - Initializing background services...
2025-07-16 13:18:03,606 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:18:03,606 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:18:03,606 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:18:03,606 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:18:03,607 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:18:03,607 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:18:03,607 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:18:03,607 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:18:03,607 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:18:03,607 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:18:03,607 - streamvault - INFO - Background queue service started
2025-07-16 13:18:03,607 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:18:03,607 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:18:03,607 - streamvault - INFO - Application startup complete
2025-07-16 13:18:03,608 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:18:03,611 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:18:03,611 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:18:03,611 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:18:03,611 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:18:03,611 - streamvault - INFO - Dependency worker started
2025-07-16 13:18:33,612 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 13:18:33,613 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 13:18:33,615 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 13:18:33,615 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 13:23:02,040 - streamvault - INFO - No active processes to shutdown
2025-07-16 13:23:02,054 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:23:02,055 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 13:23:02,060 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:23:02,061 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:23:02,061 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:23:02,061 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:23:02,061 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:23:02,061 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:23:02,062 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:23:02,062 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:23:02,062 - streamvault - INFO - Task dependency manager shut down
2025-07-16 13:23:02,062 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 13:23:02,080 - streamvault - INFO - Image sync worker stopped
2025-07-16 13:23:06,158 - streamvault - INFO - Starting application initialization...
2025-07-16 13:23:06,213 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:23:06,214 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:06,252 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:23:06,255 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:23:06,255 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:23:06,280 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:23:06,287 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:06,289 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:23:06,358 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:23:06,360 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:06,362 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:23:06,769 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:23:06,770 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:06,771 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:06,772 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:23:06,773 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:06,774 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:23:06,793 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:23:06,796 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:06,798 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:23:06,822 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:23:06,824 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:23:06,824 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:23:06,824 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:23:06,825 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:06,828 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:23:06,852 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:23:06,853 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:23:06,854 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:06,855 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:23:06,879 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:23:06,879 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:23:06,882 - streamvault - INFO - No existing categories found in database
2025-07-16 13:23:06,882 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:23:06,882 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:23:06,882 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:06,885 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:23:06,900 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:23:06,911 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:23:06,912 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:23:06,912 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:23:06,912 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:23:06,912 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:23:06,913 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:06,915 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:23:06,939 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:23:06,956 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:23:06,956 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:23:06,956 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:23:06,956 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:23:06,956 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:23:06,957 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:06,961 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:23:07,027 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:23:07,028 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:23:07,029 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:23:07,029 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:07,032 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:23:07,057 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:23:07,058 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:07,058 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:07,059 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:23:07,061 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:07,065 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:23:07,091 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:23:07,092 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:07,093 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:07,093 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:23:07,094 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:07,097 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:23:07,127 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:23:07,132 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:07,152 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:23:07,171 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:23:07,171 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:23:07,171 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:23:07,174 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:23:07,175 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:23:07,175 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:23:07,176 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:23:07,176 - streamvault - INFO - Log cleanup completed
2025-07-16 13:23:07,176 - streamvault - INFO - Log cleanup service started
2025-07-16 13:23:07,176 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:23:07,176 - streamvault - INFO - Image sync worker started
2025-07-16 13:23:07,177 - streamvault - INFO - Image sync service started
2025-07-16 13:23:07,179 - streamvault - INFO - Initializing background services...
2025-07-16 13:23:07,180 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:23:07,180 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:23:07,180 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:23:07,180 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:23:07,180 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:23:07,180 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:23:07,181 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:23:07,181 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:23:07,181 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:23:07,181 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:23:07,181 - streamvault - INFO - Background queue service started
2025-07-16 13:23:07,181 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:23:07,181 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:23:07,182 - streamvault - INFO - Application startup complete
2025-07-16 13:23:07,182 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:23:07,189 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:23:07,189 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:23:07,190 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:23:07,190 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:23:07,190 - streamvault - INFO - Dependency worker started
2025-07-16 13:23:07,197 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:23:07,197 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:23:07,197 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:23:07,197 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:23:07,197 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:23:07,198 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:23:07,201 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:23:07,201 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:23:07,201 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:23:09,525 - streamvault - INFO - Starting application initialization...
2025-07-16 13:23:09,553 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:23:09,553 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,577 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:23:09,581 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:23:09,581 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:23:09,598 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:23:09,600 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,601 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:23:09,614 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:23:09,616 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,617 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:23:09,768 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:23:09,768 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,769 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,769 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:23:09,769 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,770 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:23:09,785 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:23:09,787 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,789 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:23:09,804 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:23:09,804 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:23:09,804 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:23:09,804 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:23:09,805 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,806 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:23:09,821 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:23:09,822 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:23:09,823 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,824 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:23:09,838 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:23:09,839 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:23:09,840 - streamvault - INFO - No existing categories found in database
2025-07-16 13:23:09,841 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:23:09,841 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:23:09,841 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,842 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:23:09,856 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:23:09,864 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:23:09,864 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:23:09,864 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:23:09,864 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:23:09,865 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:23:09,865 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,866 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:23:09,880 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:23:09,894 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:23:09,894 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:23:09,894 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:23:09,895 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:23:09,895 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:23:09,895 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,897 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:23:09,912 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:23:09,914 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:23:09,914 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:23:09,914 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,916 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:23:09,929 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:23:09,930 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,931 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,931 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:23:09,932 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,935 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:23:09,952 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:23:09,952 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,952 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,953 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:23:09,953 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,954 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:23:09,971 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:23:09,973 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:09,984 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:23:09,988 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:23:09,988 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:23:09,988 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:23:09,989 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:23:09,989 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:23:09,990 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:23:09,990 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:23:09,990 - streamvault - INFO - Log cleanup completed
2025-07-16 13:23:09,990 - streamvault - INFO - Log cleanup service started
2025-07-16 13:23:09,990 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:23:09,990 - streamvault - INFO - Image sync worker started
2025-07-16 13:23:09,990 - streamvault - INFO - Image sync service started
2025-07-16 13:23:09,991 - streamvault - INFO - Initializing background services...
2025-07-16 13:23:09,991 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:23:09,991 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:23:09,991 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:23:09,991 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:23:09,991 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:23:09,991 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:23:09,991 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:23:09,991 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:23:09,991 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:23:09,991 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:23:09,991 - streamvault - INFO - Background queue service started
2025-07-16 13:23:09,991 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:23:09,991 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:23:09,991 - streamvault - INFO - Application startup complete
2025-07-16 13:23:09,991 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:23:09,994 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:23:09,994 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:23:09,995 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:23:09,995 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:23:09,996 - streamvault - INFO - Dependency worker started
2025-07-16 13:23:10,001 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:23:10,001 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:23:10,001 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:23:10,001 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:23:10,003 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:23:10,003 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:23:10,003 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:23:10,003 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:23:10,003 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:23:12,119 - streamvault - INFO - Starting application initialization...
2025-07-16 13:23:12,156 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:23:12,157 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,180 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:23:12,181 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:23:12,182 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:23:12,200 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:23:12,204 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,206 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:23:12,222 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:23:12,224 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,225 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:23:12,397 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:23:12,398 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,399 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,399 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:23:12,400 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,401 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:23:12,417 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:23:12,418 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,419 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:23:12,431 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:23:12,432 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:23:12,432 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:23:12,432 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:23:12,432 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,435 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:23:12,454 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:23:12,455 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:23:12,456 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,458 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:23:12,470 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:23:12,471 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:23:12,473 - streamvault - INFO - No existing categories found in database
2025-07-16 13:23:12,473 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:23:12,473 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:23:12,473 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,474 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:23:12,489 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:23:12,502 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:23:12,502 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:23:12,502 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:23:12,502 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:23:12,502 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:23:12,502 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,505 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:23:12,518 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:23:12,527 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:23:12,527 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:23:12,528 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:23:12,528 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:23:12,528 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:23:12,529 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,530 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:23:12,541 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:23:12,541 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:23:12,541 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:23:12,542 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,543 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:23:12,556 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:23:12,556 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,557 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,557 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:23:12,557 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,558 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:23:12,573 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:23:12,573 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,574 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,574 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:23:12,574 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,576 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:23:12,588 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:23:12,588 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:23:12,594 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:23:12,600 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:23:12,600 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:23:12,600 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:23:12,601 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:23:12,601 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:23:12,601 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:23:12,602 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:23:12,602 - streamvault - INFO - Log cleanup completed
2025-07-16 13:23:12,602 - streamvault - INFO - Log cleanup service started
2025-07-16 13:23:12,602 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:23:12,602 - streamvault - INFO - Image sync worker started
2025-07-16 13:23:12,602 - streamvault - INFO - Image sync service started
2025-07-16 13:23:12,603 - streamvault - INFO - Initializing background services...
2025-07-16 13:23:12,603 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:23:12,603 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:23:12,603 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:23:12,603 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:23:12,603 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:23:12,603 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:23:12,603 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:23:12,603 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:23:12,603 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:23:12,603 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:23:12,603 - streamvault - INFO - Background queue service started
2025-07-16 13:23:12,603 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:23:12,603 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:23:12,603 - streamvault - INFO - Application startup complete
2025-07-16 13:23:12,603 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:23:12,604 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:23:12,604 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:23:12,605 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:23:12,605 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:23:12,605 - streamvault - INFO - Dependency worker started
2025-07-16 13:23:42,599 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 13:23:42,600 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 13:23:42,602 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 13:23:42,602 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 13:28:10,487 - streamvault - INFO - No active processes to shutdown
2025-07-16 13:28:10,496 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:28:10,496 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 13:28:10,499 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:28:10,499 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:28:10,499 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:28:10,499 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:28:10,499 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:28:10,499 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:28:10,499 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:28:10,499 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:28:10,499 - streamvault - INFO - Task dependency manager shut down
2025-07-16 13:28:10,499 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 13:28:10,507 - streamvault - INFO - Image sync worker stopped
2025-07-16 13:28:11,938 - streamvault - INFO - Starting application initialization...
2025-07-16 13:28:11,957 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:28:11,958 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:11,972 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:28:11,972 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:28:11,972 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:28:11,980 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:28:11,981 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:11,982 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:28:11,988 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:28:11,989 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:11,990 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:28:12,091 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:28:12,092 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,092 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,092 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:28:12,092 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,094 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:28:12,102 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:28:12,103 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,104 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:28:12,115 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:28:12,115 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:28:12,115 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:28:12,115 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:28:12,116 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,117 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:28:12,129 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:28:12,129 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:28:12,130 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,131 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:28:12,139 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:28:12,139 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:28:12,141 - streamvault - INFO - No existing categories found in database
2025-07-16 13:28:12,141 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:28:12,141 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:28:12,141 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,142 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:28:12,153 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:28:12,164 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:28:12,164 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:28:12,164 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:28:12,164 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:28:12,166 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:28:12,166 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,168 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:28:12,180 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:28:12,189 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:28:12,190 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:28:12,190 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:28:12,190 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:28:12,190 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:28:12,190 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,191 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:28:12,200 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:28:12,201 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:28:12,201 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:28:12,201 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,202 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:28:12,209 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:28:12,209 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,209 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,209 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:28:12,210 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,210 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:28:12,223 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:28:12,223 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,224 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,224 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:28:12,225 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,226 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:28:12,239 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:28:12,240 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:12,248 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:28:12,254 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:28:12,254 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:28:12,254 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:28:12,256 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:28:12,257 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:28:12,257 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:28:12,257 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:28:12,257 - streamvault - INFO - Log cleanup completed
2025-07-16 13:28:12,257 - streamvault - INFO - Log cleanup service started
2025-07-16 13:28:12,258 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:28:12,258 - streamvault - INFO - Image sync worker started
2025-07-16 13:28:12,258 - streamvault - INFO - Image sync service started
2025-07-16 13:28:12,258 - streamvault - INFO - Initializing background services...
2025-07-16 13:28:12,258 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:28:12,259 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:28:12,259 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:28:12,259 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:28:12,259 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:28:12,259 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:28:12,259 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:28:12,259 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:28:12,259 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:28:12,259 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:28:12,259 - streamvault - INFO - Background queue service started
2025-07-16 13:28:12,259 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:28:12,259 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:28:12,259 - streamvault - INFO - Application startup complete
2025-07-16 13:28:12,260 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:28:12,262 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:28:12,263 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:28:12,263 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:28:12,263 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:28:12,263 - streamvault - INFO - Dependency worker started
2025-07-16 13:28:12,266 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:28:12,266 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:28:12,268 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:28:12,268 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:28:12,268 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:28:12,268 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:28:12,268 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:28:12,268 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:28:12,268 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:28:13,693 - streamvault - INFO - Starting application initialization...
2025-07-16 13:28:13,715 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:28:13,717 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,732 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:28:13,733 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:28:13,733 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:28:13,744 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:28:13,745 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,746 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:28:13,754 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:28:13,755 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,755 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:28:13,877 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:28:13,878 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,879 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,879 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:28:13,879 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,880 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:28:13,887 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:28:13,888 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,889 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:28:13,896 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:28:13,896 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:28:13,896 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:28:13,896 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:28:13,896 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,897 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:28:13,909 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:28:13,909 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:28:13,910 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,911 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:28:13,920 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:28:13,920 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:28:13,922 - streamvault - INFO - No existing categories found in database
2025-07-16 13:28:13,922 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:28:13,922 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:28:13,923 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,924 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:28:13,935 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:28:13,943 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:28:13,943 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:28:13,944 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:28:13,944 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:28:13,944 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:28:13,944 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,945 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:28:13,956 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:28:13,967 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:28:13,967 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:28:13,968 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:28:13,968 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:28:13,968 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:28:13,968 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,969 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:28:13,975 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:28:13,976 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:28:13,976 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:28:13,976 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,977 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:28:13,986 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:28:13,987 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,987 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,987 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:28:13,987 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,988 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:28:13,995 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:28:13,996 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,996 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,996 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:28:13,996 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:13,998 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:28:14,006 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:28:14,006 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:28:14,010 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:28:14,014 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:28:14,014 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:28:14,014 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:28:14,015 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:28:14,015 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:28:14,015 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:28:14,016 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:28:14,016 - streamvault - INFO - Log cleanup completed
2025-07-16 13:28:14,016 - streamvault - INFO - Log cleanup service started
2025-07-16 13:28:14,016 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:28:14,016 - streamvault - INFO - Image sync worker started
2025-07-16 13:28:14,016 - streamvault - INFO - Image sync service started
2025-07-16 13:28:14,016 - streamvault - INFO - Initializing background services...
2025-07-16 13:28:14,016 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:28:14,016 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:28:14,016 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:28:14,016 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:28:14,016 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:28:14,017 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:28:14,017 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:28:14,017 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:28:14,017 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:28:14,017 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:28:14,017 - streamvault - INFO - Background queue service started
2025-07-16 13:28:14,017 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:28:14,017 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:28:14,017 - streamvault - INFO - Application startup complete
2025-07-16 13:28:14,017 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:28:14,018 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:28:14,018 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:28:14,018 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:28:14,018 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:28:14,018 - streamvault - INFO - Dependency worker started
2025-07-16 13:28:44,031 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 13:28:44,032 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 13:28:44,033 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 13:28:44,033 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 13:38:12,693 - streamvault - INFO - No active processes to shutdown
2025-07-16 13:38:12,707 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:38:12,708 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 13:38:12,715 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:38:12,716 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:38:12,716 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:38:12,716 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:38:12,716 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:38:12,716 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:38:12,716 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:38:12,716 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:38:12,717 - streamvault - INFO - Task dependency manager shut down
2025-07-16 13:38:12,717 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 13:38:12,732 - streamvault - INFO - Image sync worker stopped
2025-07-16 13:38:15,297 - streamvault - INFO - Starting application initialization...
2025-07-16 13:38:15,334 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:38:15,334 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,353 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:38:15,354 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:38:15,354 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:38:15,370 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:38:15,373 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,374 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:38:15,392 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:38:15,395 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,397 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:38:15,637 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:38:15,637 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,638 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,638 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:38:15,638 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,640 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:38:15,655 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:38:15,656 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,657 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:38:15,667 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:38:15,667 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:38:15,667 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:38:15,667 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:38:15,668 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,669 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:38:15,681 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:38:15,682 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:38:15,682 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,683 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:38:15,692 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:38:15,692 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:38:15,693 - streamvault - INFO - No existing categories found in database
2025-07-16 13:38:15,694 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:38:15,694 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:38:15,694 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,695 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:38:15,704 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:38:15,711 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:38:15,711 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:38:15,711 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:38:15,711 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:38:15,711 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:38:15,712 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,713 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:38:15,724 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:38:15,733 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:38:15,733 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:38:15,733 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:38:15,733 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:38:15,733 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:38:15,733 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,734 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:38:15,743 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:38:15,744 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:38:15,744 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:38:15,744 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,745 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:38:15,754 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:38:15,755 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,755 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,755 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:38:15,755 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,756 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:38:15,766 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:38:15,766 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,767 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,767 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:38:15,767 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,768 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:38:15,779 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:38:15,780 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:38:15,785 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:38:15,789 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:38:15,789 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:38:15,789 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:38:15,790 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:38:15,790 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:38:15,791 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:38:15,791 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:38:15,791 - streamvault - INFO - Log cleanup completed
2025-07-16 13:38:15,791 - streamvault - INFO - Log cleanup service started
2025-07-16 13:38:15,791 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:38:15,791 - streamvault - INFO - Image sync worker started
2025-07-16 13:38:15,791 - streamvault - INFO - Image sync service started
2025-07-16 13:38:15,792 - streamvault - INFO - Initializing background services...
2025-07-16 13:38:15,792 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:38:15,792 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:38:15,792 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:38:15,792 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:38:15,793 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:38:15,793 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:38:15,793 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:38:15,793 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:38:15,793 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:38:15,793 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:38:15,793 - streamvault - INFO - Background queue service started
2025-07-16 13:38:15,793 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:38:15,793 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:38:15,793 - streamvault - INFO - Application startup complete
2025-07-16 13:38:15,793 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:38:15,794 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:38:15,795 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:38:15,795 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:38:15,795 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:38:15,795 - streamvault - INFO - Dependency worker started
2025-07-16 13:38:45,783 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 13:38:45,784 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 13:38:45,786 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 13:38:45,786 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 13:48:13,503 - streamvault - INFO - No active processes to shutdown
2025-07-16 13:48:13,674 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:48:13,676 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 13:48:13,708 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:48:13,708 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:48:13,708 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:48:13,708 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:48:13,709 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:48:13,709 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:48:13,709 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:48:13,709 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:48:13,709 - streamvault - INFO - Task dependency manager shut down
2025-07-16 13:48:13,710 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 13:48:13,774 - streamvault - INFO - Image sync worker stopped
2025-07-16 13:48:20,253 - streamvault - INFO - Starting application initialization...
2025-07-16 13:48:20,331 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:48:20,333 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:20,398 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:48:20,399 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:48:20,401 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:48:20,436 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:48:20,440 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:20,444 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:48:20,475 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:48:20,477 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:20,482 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:48:20,858 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:48:20,885 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:20,889 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:20,890 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:48:20,920 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:20,922 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:48:20,963 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:48:20,968 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:20,970 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:48:20,991 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:48:20,991 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:48:20,991 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:48:20,991 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:48:20,992 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:20,996 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:48:21,021 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:48:21,022 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:48:21,023 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:21,027 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:48:21,053 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:48:21,054 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:48:21,056 - streamvault - INFO - No existing categories found in database
2025-07-16 13:48:21,056 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:48:21,057 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:48:21,057 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:21,062 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:48:21,152 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:48:21,201 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:48:21,204 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:48:21,204 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:48:21,204 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:48:21,205 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:48:21,206 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:21,209 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:48:21,255 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:48:21,284 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:48:21,284 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:48:21,284 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:48:21,285 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:48:21,285 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:48:21,286 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:21,288 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:48:21,335 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:48:21,336 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:48:21,336 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:48:21,337 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:21,340 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:48:21,399 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:48:21,401 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:21,402 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:21,403 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:48:21,404 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:21,411 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:48:21,460 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:48:21,462 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:21,462 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:21,465 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:48:21,466 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:21,470 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:48:21,514 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:48:21,520 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:21,544 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:48:21,564 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:48:21,565 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:48:21,566 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:48:21,570 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:48:21,570 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:48:21,571 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:48:21,571 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:48:21,572 - streamvault - INFO - Log cleanup completed
2025-07-16 13:48:21,572 - streamvault - INFO - Log cleanup service started
2025-07-16 13:48:21,572 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:48:21,572 - streamvault - INFO - Image sync worker started
2025-07-16 13:48:21,572 - streamvault - INFO - Image sync service started
2025-07-16 13:48:21,573 - streamvault - INFO - Initializing background services...
2025-07-16 13:48:21,573 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:48:21,573 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:48:21,573 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:48:21,573 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:48:21,574 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:48:21,574 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:48:21,574 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:48:21,574 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:48:21,574 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:48:21,574 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:48:21,575 - streamvault - INFO - Background queue service started
2025-07-16 13:48:21,575 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:48:21,575 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:48:21,576 - streamvault - INFO - Application startup complete
2025-07-16 13:48:21,576 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:48:21,585 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:48:21,586 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:48:21,587 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:48:21,587 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:48:21,587 - streamvault - INFO - Dependency worker started
2025-07-16 13:48:21,596 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:48:21,597 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:48:21,602 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:48:21,603 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:48:21,603 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:48:21,603 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:48:21,603 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:48:21,603 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:48:21,604 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:48:25,265 - streamvault - INFO - Starting application initialization...
2025-07-16 13:48:25,352 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:48:25,355 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:25,463 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:48:25,467 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:48:25,468 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:48:25,532 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:48:25,537 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:25,539 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:48:25,565 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:48:25,568 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:25,570 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:48:25,848 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:48:25,849 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:25,850 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:25,850 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:48:25,851 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:25,853 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:48:25,872 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:48:25,875 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:25,877 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:48:25,901 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:48:25,901 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:48:25,901 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:48:25,901 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:48:25,902 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:25,903 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:48:25,931 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:48:25,932 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:48:25,933 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:25,935 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:48:25,957 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:48:25,957 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:48:25,960 - streamvault - INFO - No existing categories found in database
2025-07-16 13:48:25,961 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:48:25,961 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:48:25,962 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:25,964 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:48:25,981 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:48:25,996 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:48:25,996 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:48:25,996 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:48:25,996 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:48:25,996 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:48:25,997 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:26,001 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:48:26,026 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:48:26,045 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:48:26,045 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:48:26,045 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:48:26,045 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:48:26,045 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:48:26,046 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:26,048 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:48:26,062 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:48:26,064 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:48:26,064 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:48:26,065 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:26,067 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:48:26,087 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:48:26,087 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:26,088 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:26,088 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:48:26,089 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:26,090 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:48:26,107 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:48:26,109 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:26,109 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:26,109 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:48:26,110 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:26,112 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:48:26,133 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:48:26,134 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:48:26,143 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:48:26,150 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:48:26,150 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:48:26,150 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:48:26,153 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:48:26,154 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:48:26,154 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:48:26,155 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:48:26,155 - streamvault - INFO - Log cleanup completed
2025-07-16 13:48:26,155 - streamvault - INFO - Log cleanup service started
2025-07-16 13:48:26,156 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:48:26,156 - streamvault - INFO - Image sync worker started
2025-07-16 13:48:26,156 - streamvault - INFO - Image sync service started
2025-07-16 13:48:26,157 - streamvault - INFO - Initializing background services...
2025-07-16 13:48:26,157 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:48:26,157 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:48:26,157 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:48:26,157 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:48:26,157 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:48:26,157 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:48:26,157 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:48:26,157 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:48:26,157 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:48:26,157 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:48:26,157 - streamvault - INFO - Background queue service started
2025-07-16 13:48:26,159 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:48:26,159 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:48:26,159 - streamvault - INFO - Application startup complete
2025-07-16 13:48:26,159 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:48:26,163 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:48:26,164 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:48:26,164 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:48:26,164 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:48:26,165 - streamvault - INFO - Dependency worker started
2025-07-16 13:48:56,184 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 13:48:56,185 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 13:48:56,188 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 13:48:56,188 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 13:53:22,470 - streamvault - INFO - No active processes to shutdown
2025-07-16 13:53:22,477 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:53:22,478 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 13:53:22,482 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:53:22,482 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:53:22,482 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:53:22,483 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:53:22,483 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:53:22,483 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:53:22,483 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:53:22,483 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:53:22,483 - streamvault - INFO - Task dependency manager shut down
2025-07-16 13:53:22,483 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 13:53:22,494 - streamvault - INFO - Image sync worker stopped
2025-07-16 13:53:23,924 - streamvault - INFO - Starting application initialization...
2025-07-16 13:53:23,940 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:53:23,941 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:23,950 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:53:23,951 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:53:23,951 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:53:23,958 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:53:23,959 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:23,960 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:53:23,967 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:53:23,968 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:23,969 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:53:24,083 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:53:24,084 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,084 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,084 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:53:24,085 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,085 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:53:24,093 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:53:24,095 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,096 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:53:24,108 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:53:24,108 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:53:24,108 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:53:24,108 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:53:24,109 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,111 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:53:24,125 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:53:24,125 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:53:24,126 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,127 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:53:24,139 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:53:24,139 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:53:24,141 - streamvault - INFO - No existing categories found in database
2025-07-16 13:53:24,141 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:53:24,141 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:53:24,142 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,143 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:53:24,153 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:53:24,168 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:53:24,168 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:53:24,169 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:53:24,169 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:53:24,169 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:53:24,169 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,170 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:53:24,183 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:53:24,197 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:53:24,198 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:53:24,198 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:53:24,198 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:53:24,198 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:53:24,199 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,200 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:53:24,213 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:53:24,214 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:53:24,214 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:53:24,214 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,215 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:53:24,226 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:53:24,226 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,227 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,227 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:53:24,227 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,229 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:53:24,242 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:53:24,242 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,242 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,242 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:53:24,243 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,244 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:53:24,257 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:53:24,258 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:24,266 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:53:24,271 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:53:24,271 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:53:24,271 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:53:24,273 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:53:24,274 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:53:24,274 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:53:24,274 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:53:24,274 - streamvault - INFO - Log cleanup completed
2025-07-16 13:53:24,274 - streamvault - INFO - Log cleanup service started
2025-07-16 13:53:24,274 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:53:24,275 - streamvault - INFO - Image sync worker started
2025-07-16 13:53:24,275 - streamvault - INFO - Image sync service started
2025-07-16 13:53:24,275 - streamvault - INFO - Initializing background services...
2025-07-16 13:53:24,275 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:53:24,275 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:53:24,275 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:53:24,275 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:53:24,276 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:53:24,276 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:53:24,276 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:53:24,276 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:53:24,276 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:53:24,276 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:53:24,276 - streamvault - INFO - Background queue service started
2025-07-16 13:53:24,276 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:53:24,276 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:53:24,276 - streamvault - INFO - Application startup complete
2025-07-16 13:53:24,276 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:53:24,279 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:53:24,279 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:53:24,279 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:53:24,279 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:53:24,279 - streamvault - INFO - Dependency worker started
2025-07-16 13:53:24,282 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:53:24,283 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:53:24,283 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:53:24,283 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:53:24,283 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:53:24,283 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:53:24,285 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:53:24,285 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:53:24,285 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:53:25,713 - streamvault - INFO - Starting application initialization...
2025-07-16 13:53:25,734 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:53:25,734 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:25,748 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:53:25,749 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:53:25,749 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:53:25,761 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:53:25,763 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:25,765 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:53:25,775 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:53:25,776 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:25,776 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:53:25,877 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:53:25,877 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:25,878 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:25,878 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:53:25,878 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:25,880 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:53:25,888 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:53:25,889 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:25,889 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:53:25,901 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:53:25,901 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:53:25,901 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:53:25,901 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:53:25,902 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:25,903 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:53:25,914 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:53:25,914 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:53:25,915 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:25,916 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:53:25,924 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:53:25,924 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:53:25,925 - streamvault - INFO - No existing categories found in database
2025-07-16 13:53:25,925 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:53:25,925 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:53:25,926 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:25,926 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:53:25,937 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:53:25,944 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:53:25,944 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:53:25,944 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:53:25,944 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:53:25,944 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:53:25,944 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:25,946 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:53:25,958 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:53:25,968 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:53:25,968 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:53:25,968 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:53:25,968 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:53:25,968 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:53:25,969 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:25,970 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:53:25,979 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:53:25,980 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:53:25,980 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:53:25,980 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:25,981 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:53:25,991 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:53:25,991 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:25,991 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:25,991 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:53:25,992 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:25,993 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:53:26,005 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:53:26,005 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:26,005 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:26,005 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:53:26,007 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:26,008 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:53:26,019 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:53:26,020 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:53:26,025 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:53:26,030 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:53:26,030 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:53:26,030 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:53:26,032 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:53:26,033 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:53:26,033 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:53:26,033 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:53:26,034 - streamvault - INFO - Log cleanup completed
2025-07-16 13:53:26,034 - streamvault - INFO - Log cleanup service started
2025-07-16 13:53:26,034 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:53:26,034 - streamvault - INFO - Image sync worker started
2025-07-16 13:53:26,034 - streamvault - INFO - Image sync service started
2025-07-16 13:53:26,034 - streamvault - INFO - Initializing background services...
2025-07-16 13:53:26,035 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:53:26,035 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:53:26,035 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:53:26,035 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:53:26,035 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:53:26,035 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:53:26,035 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:53:26,035 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:53:26,035 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:53:26,035 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:53:26,035 - streamvault - INFO - Background queue service started
2025-07-16 13:53:26,035 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:53:26,035 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:53:26,035 - streamvault - INFO - Application startup complete
2025-07-16 13:53:26,035 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:53:26,037 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:53:26,037 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:53:26,037 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:53:26,037 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:53:26,037 - streamvault - INFO - Dependency worker started
2025-07-16 13:53:56,029 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 13:53:56,030 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 13:53:56,031 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 13:53:56,031 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 13:58:24,745 - streamvault - INFO - No active processes to shutdown
2025-07-16 13:58:24,756 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:58:24,757 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 13:58:24,761 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:58:24,761 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:58:24,761 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:58:24,761 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:58:24,761 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:58:24,761 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:58:24,761 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:58:24,761 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:58:24,761 - streamvault - INFO - Task dependency manager shut down
2025-07-16 13:58:24,761 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 13:58:24,775 - streamvault - INFO - Image sync worker stopped
2025-07-16 13:58:26,355 - streamvault - INFO - Starting application initialization...
2025-07-16 13:58:26,381 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:58:26,383 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,401 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:58:26,402 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:58:26,402 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:58:26,417 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:58:26,420 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,422 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:58:26,434 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:58:26,435 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,435 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:58:26,567 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:58:26,568 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,569 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,569 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:58:26,569 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,570 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:58:26,578 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:58:26,579 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,580 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:58:26,587 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:58:26,587 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:58:26,587 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:58:26,587 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:58:26,588 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,588 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:58:26,597 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:58:26,598 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:58:26,598 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,599 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:58:26,606 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:58:26,606 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:58:26,607 - streamvault - INFO - No existing categories found in database
2025-07-16 13:58:26,607 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:58:26,607 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:58:26,608 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,608 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:58:26,616 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:58:26,623 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:58:26,624 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:58:26,624 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:58:26,624 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:58:26,624 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:58:26,624 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,626 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:58:26,640 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:58:26,650 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:58:26,650 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:58:26,650 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:58:26,650 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:58:26,650 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:58:26,651 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,651 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:58:26,658 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:58:26,659 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:58:26,659 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:58:26,659 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,660 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:58:26,671 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:58:26,672 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,672 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,672 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:58:26,672 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,673 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:58:26,680 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:58:26,680 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,680 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,680 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:58:26,681 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,682 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:58:26,694 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:58:26,695 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:26,702 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:58:26,705 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:58:26,705 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:58:26,705 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:58:26,706 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:58:26,706 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:58:26,707 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:58:26,707 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:58:26,707 - streamvault - INFO - Log cleanup completed
2025-07-16 13:58:26,707 - streamvault - INFO - Log cleanup service started
2025-07-16 13:58:26,707 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:58:26,707 - streamvault - INFO - Image sync worker started
2025-07-16 13:58:26,707 - streamvault - INFO - Image sync service started
2025-07-16 13:58:26,708 - streamvault - INFO - Initializing background services...
2025-07-16 13:58:26,708 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:58:26,709 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:58:26,709 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:58:26,709 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:58:26,709 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:58:26,709 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:58:26,709 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:58:26,709 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:58:26,709 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:58:26,709 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:58:26,709 - streamvault - INFO - Background queue service started
2025-07-16 13:58:26,709 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:58:26,709 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:58:26,709 - streamvault - INFO - Application startup complete
2025-07-16 13:58:26,710 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:58:26,712 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:58:26,712 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:58:26,712 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:58:26,713 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:58:26,713 - streamvault - INFO - Dependency worker started
2025-07-16 13:58:26,716 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 13:58:26,716 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 13:58:26,716 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 13:58:26,716 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 13:58:26,716 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 13:58:26,716 - streamvault - INFO - Dependency worker cancelled
2025-07-16 13:58:26,716 - streamvault - INFO - Dependency worker stopped
2025-07-16 13:58:26,716 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 13:58:26,716 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 13:58:28,170 - streamvault - INFO - Starting application initialization...
2025-07-16 13:58:28,192 - streamvault - INFO - Updating migrations table schema
2025-07-16 13:58:28,193 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,206 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 13:58:28,207 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 13:58:28,208 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 13:58:28,218 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:58:28,220 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,221 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 13:58:28,232 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:58:28,233 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,234 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 13:58:28,343 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 13:58:28,344 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,345 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,346 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 13:58:28,346 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,348 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 13:58:28,360 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 13:58:28,361 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,363 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 13:58:28,376 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 13:58:28,376 - streamvault - INFO - Starting system_config table migration...
2025-07-16 13:58:28,376 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 13:58:28,376 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 13:58:28,376 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,377 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 13:58:28,397 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 13:58:28,397 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 13:58:28,398 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,399 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 13:58:28,410 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 13:58:28,410 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 13:58:28,412 - streamvault - INFO - No existing categories found in database
2025-07-16 13:58:28,412 - streamvault - INFO - Category images migration completed successfully
2025-07-16 13:58:28,412 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 13:58:28,413 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,414 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 13:58:28,421 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 13:58:28,428 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 13:58:28,428 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 13:58:28,428 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 13:58:28,428 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 13:58:28,428 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 13:58:28,429 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,431 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 13:58:28,445 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 13:58:28,455 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 13:58:28,455 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 13:58:28,455 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 13:58:28,455 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 13:58:28,455 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 13:58:28,455 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,456 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:58:28,467 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:58:28,468 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 13:58:28,468 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 13:58:28,468 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,469 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 13:58:28,477 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 13:58:28,477 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,478 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,478 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 13:58:28,479 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,480 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 13:58:28,490 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 13:58:28,490 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,490 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,490 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 13:58:28,490 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,491 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 13:58:28,499 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 13:58:28,500 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 13:58:28,503 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 13:58:28,507 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:58:28,507 - streamvault - INFO - EventSub initialized successfully
2025-07-16 13:58:28,507 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 13:58:28,509 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 13:58:28,510 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 13:58:28,510 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 13:58:28,510 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 13:58:28,510 - streamvault - INFO - Log cleanup completed
2025-07-16 13:58:28,511 - streamvault - INFO - Log cleanup service started
2025-07-16 13:58:28,511 - streamvault - INFO - Recording cleanup service started
2025-07-16 13:58:28,511 - streamvault - INFO - Image sync worker started
2025-07-16 13:58:28,511 - streamvault - INFO - Image sync service started
2025-07-16 13:58:28,511 - streamvault - INFO - Initializing background services...
2025-07-16 13:58:28,512 - streamvault - INFO - Initializing background queue service...
2025-07-16 13:58:28,512 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 13:58:28,512 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 13:58:28,512 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 13:58:28,512 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 13:58:28,512 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 13:58:28,512 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 13:58:28,512 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 13:58:28,512 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 13:58:28,512 - streamvault - INFO - Background services initialized successfully
2025-07-16 13:58:28,512 - streamvault - INFO - Background queue service started
2025-07-16 13:58:28,513 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:58:28,513 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 13:58:28,513 - streamvault - INFO - Application startup complete
2025-07-16 13:58:28,513 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 13:58:28,515 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 13:58:28,516 - streamvault - INFO - Worker worker-0 started
2025-07-16 13:58:28,516 - streamvault - INFO - Worker worker-1 started
2025-07-16 13:58:28,516 - streamvault - INFO - Worker worker-2 started
2025-07-16 13:58:28,516 - streamvault - INFO - Dependency worker started
2025-07-16 13:58:58,516 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 13:58:58,517 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 13:58:58,519 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 13:58:58,519 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 14:03:27,175 - streamvault - INFO - No active processes to shutdown
2025-07-16 14:03:27,191 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 14:03:27,191 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 14:03:27,197 - streamvault - INFO - Dependency worker cancelled
2025-07-16 14:03:27,197 - streamvault - INFO - Dependency worker stopped
2025-07-16 14:03:27,199 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 14:03:27,199 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 14:03:27,199 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 14:03:27,199 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 14:03:27,199 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 14:03:27,199 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 14:03:27,199 - streamvault - INFO - Task dependency manager shut down
2025-07-16 14:03:27,199 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 14:03:27,221 - streamvault - INFO - Image sync worker stopped
2025-07-16 14:03:28,991 - streamvault - INFO - Starting application initialization...
2025-07-16 14:03:29,013 - streamvault - INFO - Updating migrations table schema
2025-07-16 14:03:29,013 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,025 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 14:03:29,025 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 14:03:29,026 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 14:03:29,035 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:03:29,036 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,037 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 14:03:29,050 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:03:29,051 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,053 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 14:03:29,223 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 14:03:29,223 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,225 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,225 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 14:03:29,225 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,226 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 14:03:29,241 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 14:03:29,244 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,245 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 14:03:29,260 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 14:03:29,261 - streamvault - INFO - Starting system_config table migration...
2025-07-16 14:03:29,261 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 14:03:29,261 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 14:03:29,262 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,263 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 14:03:29,282 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 14:03:29,283 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 14:03:29,283 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,285 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 14:03:29,299 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 14:03:29,300 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 14:03:29,302 - streamvault - INFO - No existing categories found in database
2025-07-16 14:03:29,303 - streamvault - INFO - Category images migration completed successfully
2025-07-16 14:03:29,303 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 14:03:29,303 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,305 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 14:03:29,320 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 14:03:29,329 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 14:03:29,329 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 14:03:29,329 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 14:03:29,329 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 14:03:29,329 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 14:03:29,330 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,331 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 14:03:29,341 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 14:03:29,349 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 14:03:29,349 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 14:03:29,349 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 14:03:29,349 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 14:03:29,349 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 14:03:29,350 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,352 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:03:29,362 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:03:29,363 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 14:03:29,363 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:03:29,363 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,364 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 14:03:29,373 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 14:03:29,374 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,374 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,374 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 14:03:29,376 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,377 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 14:03:29,385 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 14:03:29,386 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,387 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,387 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 14:03:29,387 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,389 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 14:03:29,403 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:03:29,404 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:29,408 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 14:03:29,411 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:03:29,411 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:03:29,411 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 14:03:29,412 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 14:03:29,413 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 14:03:29,413 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 14:03:29,413 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 14:03:29,414 - streamvault - INFO - Log cleanup completed
2025-07-16 14:03:29,414 - streamvault - INFO - Log cleanup service started
2025-07-16 14:03:29,414 - streamvault - INFO - Recording cleanup service started
2025-07-16 14:03:29,414 - streamvault - INFO - Image sync worker started
2025-07-16 14:03:29,414 - streamvault - INFO - Image sync service started
2025-07-16 14:03:29,415 - streamvault - INFO - Initializing background services...
2025-07-16 14:03:29,415 - streamvault - INFO - Initializing background queue service...
2025-07-16 14:03:29,415 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 14:03:29,415 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 14:03:29,415 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 14:03:29,415 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 14:03:29,415 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 14:03:29,415 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 14:03:29,416 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 14:03:29,416 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 14:03:29,416 - streamvault - INFO - Background services initialized successfully
2025-07-16 14:03:29,416 - streamvault - INFO - Background queue service started
2025-07-16 14:03:29,416 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:03:29,416 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:03:29,416 - streamvault - INFO - Application startup complete
2025-07-16 14:03:29,416 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 14:03:29,419 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 14:03:29,419 - streamvault - INFO - Worker worker-0 started
2025-07-16 14:03:29,419 - streamvault - INFO - Worker worker-1 started
2025-07-16 14:03:29,419 - streamvault - INFO - Worker worker-2 started
2025-07-16 14:03:29,420 - streamvault - INFO - Dependency worker started
2025-07-16 14:03:29,423 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 14:03:29,423 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 14:03:29,423 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 14:03:29,423 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 14:03:29,423 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 14:03:29,423 - streamvault - INFO - Dependency worker cancelled
2025-07-16 14:03:29,423 - streamvault - INFO - Dependency worker stopped
2025-07-16 14:03:29,424 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 14:03:29,424 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 14:03:31,107 - streamvault - INFO - Starting application initialization...
2025-07-16 14:03:31,137 - streamvault - INFO - Updating migrations table schema
2025-07-16 14:03:31,137 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,160 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 14:03:31,161 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 14:03:31,161 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 14:03:31,177 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:03:31,182 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,185 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 14:03:31,200 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:03:31,202 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,203 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 14:03:31,347 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 14:03:31,347 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,348 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,348 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 14:03:31,348 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,349 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 14:03:31,362 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 14:03:31,364 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,366 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 14:03:31,378 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 14:03:31,378 - streamvault - INFO - Starting system_config table migration...
2025-07-16 14:03:31,378 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 14:03:31,378 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 14:03:31,379 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,379 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 14:03:31,392 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 14:03:31,392 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 14:03:31,393 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,394 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 14:03:31,406 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 14:03:31,407 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 14:03:31,409 - streamvault - INFO - No existing categories found in database
2025-07-16 14:03:31,409 - streamvault - INFO - Category images migration completed successfully
2025-07-16 14:03:31,409 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 14:03:31,409 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,411 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 14:03:31,421 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 14:03:31,428 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 14:03:31,428 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 14:03:31,428 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 14:03:31,428 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 14:03:31,428 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 14:03:31,430 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,431 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 14:03:31,440 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 14:03:31,450 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 14:03:31,450 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 14:03:31,450 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 14:03:31,450 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 14:03:31,450 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 14:03:31,450 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,451 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:03:31,462 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:03:31,462 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 14:03:31,462 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:03:31,463 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,465 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 14:03:31,474 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 14:03:31,474 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,474 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,474 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 14:03:31,475 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,476 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 14:03:31,487 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 14:03:31,488 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,488 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,488 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 14:03:31,489 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,490 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 14:03:31,500 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:03:31,501 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:03:31,506 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 14:03:31,512 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:03:31,512 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:03:31,512 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 14:03:31,513 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 14:03:31,514 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 14:03:31,514 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 14:03:31,514 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 14:03:31,514 - streamvault - INFO - Log cleanup completed
2025-07-16 14:03:31,514 - streamvault - INFO - Log cleanup service started
2025-07-16 14:03:31,514 - streamvault - INFO - Recording cleanup service started
2025-07-16 14:03:31,514 - streamvault - INFO - Image sync worker started
2025-07-16 14:03:31,514 - streamvault - INFO - Image sync service started
2025-07-16 14:03:31,515 - streamvault - INFO - Initializing background services...
2025-07-16 14:03:31,515 - streamvault - INFO - Initializing background queue service...
2025-07-16 14:03:31,515 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 14:03:31,515 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 14:03:31,515 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 14:03:31,515 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 14:03:31,515 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 14:03:31,515 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 14:03:31,515 - streamvault - INFO - BackgroundQueueService started with 3 workers and dependency management
2025-07-16 14:03:31,515 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 14:03:31,515 - streamvault - INFO - Background services initialized successfully
2025-07-16 14:03:31,515 - streamvault - INFO - Background queue service started
2025-07-16 14:03:31,515 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:03:31,516 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:03:31,516 - streamvault - INFO - Application startup complete
2025-07-16 14:03:31,516 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 14:03:31,518 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 14:03:31,518 - streamvault - INFO - Worker worker-0 started
2025-07-16 14:03:31,518 - streamvault - INFO - Worker worker-1 started
2025-07-16 14:03:31,518 - streamvault - INFO - Worker worker-2 started
2025-07-16 14:03:31,518 - streamvault - INFO - Dependency worker started
2025-07-16 14:04:01,528 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 14:04:01,529 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 14:04:01,530 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 14:04:01,530 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 14:13:29,938 - streamvault - INFO - No active processes to shutdown
2025-07-16 14:13:29,954 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 14:13:29,954 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 14:13:29,959 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 14:13:29,959 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 14:13:29,960 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 14:13:29,960 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 14:13:29,960 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 14:13:29,960 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 14:13:29,960 - streamvault - INFO - Dependency worker cancelled
2025-07-16 14:13:29,960 - streamvault - INFO - Dependency worker stopped
2025-07-16 14:13:29,960 - streamvault - INFO - Task dependency manager shut down
2025-07-16 14:13:29,960 - streamvault - INFO - BackgroundQueueService stopped
2025-07-16 14:13:29,977 - streamvault - INFO - Image sync worker stopped
2025-07-16 14:13:32,054 - streamvault - INFO - Starting application initialization...
2025-07-16 14:13:32,091 - streamvault - INFO - Updating migrations table schema
2025-07-16 14:13:32,091 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,107 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 14:13:32,107 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 14:13:32,107 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 14:13:32,122 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:13:32,126 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,127 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 14:13:32,137 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:13:32,137 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,139 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 14:13:32,358 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 14:13:32,358 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,359 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,359 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 14:13:32,360 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,361 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 14:13:32,376 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 14:13:32,378 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,378 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 14:13:32,391 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 14:13:32,391 - streamvault - INFO - Starting system_config table migration...
2025-07-16 14:13:32,391 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 14:13:32,391 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 14:13:32,392 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,393 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 14:13:32,406 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 14:13:32,407 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 14:13:32,407 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,408 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 14:13:32,420 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 14:13:32,421 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 14:13:32,422 - streamvault - INFO - No existing categories found in database
2025-07-16 14:13:32,423 - streamvault - INFO - Category images migration completed successfully
2025-07-16 14:13:32,423 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 14:13:32,423 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,424 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 14:13:32,434 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 14:13:32,444 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 14:13:32,444 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 14:13:32,444 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 14:13:32,444 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 14:13:32,445 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 14:13:32,445 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,447 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 14:13:32,460 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 14:13:32,469 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 14:13:32,469 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 14:13:32,469 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 14:13:32,469 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 14:13:32,469 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 14:13:32,470 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,471 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:13:32,480 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:13:32,481 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 14:13:32,481 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:13:32,481 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,482 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 14:13:32,492 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 14:13:32,492 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,492 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,492 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 14:13:32,493 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,494 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 14:13:32,506 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 14:13:32,507 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,507 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,507 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 14:13:32,507 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,508 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 14:13:32,520 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:13:32,521 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:32,526 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 14:13:32,529 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:13:32,529 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:13:32,529 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 14:13:32,530 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 14:13:32,530 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 14:13:32,530 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 14:13:32,531 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 14:13:32,531 - streamvault - INFO - Log cleanup completed
2025-07-16 14:13:32,531 - streamvault - INFO - Log cleanup service started
2025-07-16 14:13:32,531 - streamvault - INFO - Recording cleanup service started
2025-07-16 14:13:32,531 - streamvault - INFO - Image sync worker started
2025-07-16 14:13:32,531 - streamvault - INFO - Image sync service started
2025-07-16 14:13:32,533 - streamvault - INFO - Initializing background services...
2025-07-16 14:13:32,533 - streamvault - INFO - Initializing background queue service...
2025-07-16 14:13:32,533 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 14:13:32,533 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 14:13:32,533 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 14:13:32,533 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 14:13:32,533 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 14:13:32,533 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 14:13:32,533 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16 14:13:32,534 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16 14:13:32,534 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 14:13:32,534 - streamvault - INFO - Background services initialized successfully
2025-07-16 14:13:32,534 - streamvault - INFO - Background queue service started
2025-07-16 14:13:32,534 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:13:32,534 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:13:32,534 - streamvault - INFO - Application startup complete
2025-07-16 14:13:32,534 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 14:13:32,536 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 14:13:32,536 - streamvault - INFO - Worker worker-0 started
2025-07-16 14:13:32,536 - streamvault - INFO - Worker worker-1 started
2025-07-16 14:13:32,536 - streamvault - INFO - Worker worker-2 started
2025-07-16 14:13:32,536 - streamvault - INFO - Dependency worker started
2025-07-16 14:13:32,539 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 14:13:32,539 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 14:13:32,539 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 14:13:32,539 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 14:13:32,539 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 14:13:32,541 - streamvault - INFO - Dependency worker cancelled
2025-07-16 14:13:32,541 - streamvault - INFO - Dependency worker stopped
2025-07-16 14:13:32,541 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 14:13:32,541 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 14:13:34,206 - streamvault - INFO - Starting application initialization...
2025-07-16 14:13:34,230 - streamvault - INFO - Updating migrations table schema
2025-07-16 14:13:34,231 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,246 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 14:13:34,247 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 14:13:34,247 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 14:13:34,260 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:13:34,262 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,264 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 14:13:34,278 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:13:34,279 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,280 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 14:13:34,426 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 14:13:34,426 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,426 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,427 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 14:13:34,427 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,428 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 14:13:34,443 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 14:13:34,444 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,446 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 14:13:34,460 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 14:13:34,460 - streamvault - INFO - Starting system_config table migration...
2025-07-16 14:13:34,460 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 14:13:34,460 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 14:13:34,460 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,461 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 14:13:34,472 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 14:13:34,472 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 14:13:34,473 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,474 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 14:13:34,483 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 14:13:34,483 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 14:13:34,485 - streamvault - INFO - No existing categories found in database
2025-07-16 14:13:34,485 - streamvault - INFO - Category images migration completed successfully
2025-07-16 14:13:34,485 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 14:13:34,485 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,486 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 14:13:34,495 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 14:13:34,501 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 14:13:34,502 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 14:13:34,502 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 14:13:34,502 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 14:13:34,502 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 14:13:34,502 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,503 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 14:13:34,515 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 14:13:34,527 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 14:13:34,527 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 14:13:34,527 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 14:13:34,527 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 14:13:34,527 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 14:13:34,528 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,529 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:13:34,537 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:13:34,537 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 14:13:34,537 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:13:34,537 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,539 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 14:13:34,557 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 14:13:34,558 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,558 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,558 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 14:13:34,559 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,560 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 14:13:34,572 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 14:13:34,572 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,573 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,573 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 14:13:34,573 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,575 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 14:13:34,587 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:13:34,589 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:13:34,597 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 14:13:34,602 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:13:34,602 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:13:34,602 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 14:13:34,606 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 14:13:34,606 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 14:13:34,607 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 14:13:34,607 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 14:13:34,607 - streamvault - INFO - Log cleanup completed
2025-07-16 14:13:34,607 - streamvault - INFO - Log cleanup service started
2025-07-16 14:13:34,608 - streamvault - INFO - Recording cleanup service started
2025-07-16 14:13:34,608 - streamvault - INFO - Image sync worker started
2025-07-16 14:13:34,608 - streamvault - INFO - Image sync service started
2025-07-16 14:13:34,609 - streamvault - INFO - Initializing background services...
2025-07-16 14:13:34,609 - streamvault - INFO - Initializing background queue service...
2025-07-16 14:13:34,609 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 14:13:34,609 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 14:13:34,609 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 14:13:34,609 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 14:13:34,609 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 14:13:34,609 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 14:13:34,609 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16 14:13:34,609 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16 14:13:34,609 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 14:13:34,609 - streamvault - INFO - Background services initialized successfully
2025-07-16 14:13:34,609 - streamvault - INFO - Background queue service started
2025-07-16 14:13:34,610 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:13:34,610 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:13:34,610 - streamvault - INFO - Application startup complete
2025-07-16 14:13:34,610 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 14:13:34,613 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 14:13:34,613 - streamvault - INFO - Worker worker-0 started
2025-07-16 14:13:34,613 - streamvault - INFO - Worker worker-1 started
2025-07-16 14:13:34,613 - streamvault - INFO - Worker worker-2 started
2025-07-16 14:13:34,613 - streamvault - INFO - Dependency worker started
2025-07-16 14:14:04,634 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 14:14:04,635 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 14:14:04,637 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 14:14:04,637 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 14:18:33,017 - streamvault - INFO - No active processes to shutdown
2025-07-16 14:18:33,037 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 14:18:33,037 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 14:18:33,045 - streamvault - INFO - Dependency worker cancelled
2025-07-16 14:18:33,045 - streamvault - INFO - Dependency worker stopped
2025-07-16 14:18:33,045 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 14:18:33,045 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 14:18:33,046 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 14:18:33,046 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 14:18:33,046 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 14:18:33,046 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 14:18:33,046 - streamvault - INFO - WorkerManager stopped
2025-07-16 14:18:33,047 - streamvault - INFO - Task dependency manager shut down
2025-07-16 14:18:33,047 - streamvault - INFO - TaskQueueManager stopped
2025-07-16 14:18:33,059 - streamvault - INFO - Image sync worker stopped
2025-07-16 14:18:35,532 - streamvault - INFO - Starting application initialization...
2025-07-16 14:18:35,569 - streamvault - INFO - Updating migrations table schema
2025-07-16 14:18:35,570 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:35,594 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 14:18:35,595 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 14:18:35,596 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 14:18:35,612 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:18:35,616 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:35,617 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 14:18:35,634 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:18:35,635 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:35,637 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 14:18:35,891 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 14:18:35,892 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:35,893 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:35,893 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 14:18:35,894 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:35,896 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 14:18:35,917 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 14:18:35,919 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:35,922 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 14:18:35,972 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 14:18:35,974 - streamvault - INFO - Starting system_config table migration...
2025-07-16 14:18:35,974 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 14:18:35,974 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 14:18:35,975 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:35,977 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 14:18:36,021 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 14:18:36,022 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 14:18:36,022 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:36,024 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 14:18:36,044 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 14:18:36,045 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 14:18:36,053 - streamvault - INFO - No existing categories found in database
2025-07-16 14:18:36,054 - streamvault - INFO - Category images migration completed successfully
2025-07-16 14:18:36,054 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 14:18:36,055 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:36,057 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 14:18:36,075 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 14:18:36,089 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 14:18:36,089 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 14:18:36,089 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 14:18:36,089 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 14:18:36,089 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 14:18:36,090 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:36,091 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 14:18:36,104 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 14:18:36,118 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 14:18:36,118 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 14:18:36,119 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 14:18:36,119 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 14:18:36,119 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 14:18:36,119 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:36,120 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:18:36,146 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:18:36,146 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 14:18:36,147 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:18:36,147 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:36,149 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 14:18:36,168 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 14:18:36,168 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:36,169 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:36,169 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 14:18:36,169 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:36,170 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 14:18:36,185 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 14:18:36,186 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:36,186 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:36,186 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 14:18:36,187 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:36,189 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 14:18:36,206 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:18:36,208 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:18:36,215 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 14:18:36,219 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:18:36,219 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:18:36,219 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 14:18:36,221 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 14:18:36,221 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 14:18:36,222 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 14:18:36,222 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 14:18:36,222 - streamvault - INFO - Log cleanup completed
2025-07-16 14:18:36,222 - streamvault - INFO - Log cleanup service started
2025-07-16 14:18:36,222 - streamvault - INFO - Recording cleanup service started
2025-07-16 14:18:36,222 - streamvault - INFO - Image sync worker started
2025-07-16 14:18:36,222 - streamvault - INFO - Image sync service started
2025-07-16 14:18:36,223 - streamvault - INFO - Initializing background services...
2025-07-16 14:18:36,223 - streamvault - INFO - Initializing background queue service...
2025-07-16 14:18:36,223 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 14:18:36,223 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 14:18:36,223 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 14:18:36,223 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 14:18:36,223 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 14:18:36,223 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 14:18:36,223 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16 14:18:36,223 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16 14:18:36,223 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 14:18:36,223 - streamvault - INFO - Background services initialized successfully
2025-07-16 14:18:36,223 - streamvault - INFO - Background queue service started
2025-07-16 14:18:36,223 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:18:36,223 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:18:36,223 - streamvault - INFO - Application startup complete
2025-07-16 14:18:36,224 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 14:18:36,226 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 14:18:36,226 - streamvault - INFO - Worker worker-0 started
2025-07-16 14:18:36,226 - streamvault - INFO - Worker worker-1 started
2025-07-16 14:18:36,226 - streamvault - INFO - Worker worker-2 started
2025-07-16 14:18:36,226 - streamvault - INFO - Dependency worker started
2025-07-16 14:19:06,242 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 14:19:06,242 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 14:19:06,244 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 14:19:06,244 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 14:23:33,689 - streamvault - INFO - No active processes to shutdown
2025-07-16 14:23:33,694 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 14:23:33,696 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 14:23:33,698 - streamvault - INFO - Dependency worker cancelled
2025-07-16 14:23:33,698 - streamvault - INFO - Dependency worker stopped
2025-07-16 14:23:33,698 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 14:23:33,698 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 14:23:33,698 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 14:23:33,698 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 14:23:33,698 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 14:23:33,698 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 14:23:33,699 - streamvault - INFO - WorkerManager stopped
2025-07-16 14:23:33,699 - streamvault - INFO - Task dependency manager shut down
2025-07-16 14:23:33,699 - streamvault - INFO - TaskQueueManager stopped
2025-07-16 14:23:33,708 - streamvault - INFO - Image sync worker stopped
2025-07-16 14:23:35,081 - streamvault - INFO - Starting application initialization...
2025-07-16 14:23:35,097 - streamvault - INFO - Updating migrations table schema
2025-07-16 14:23:35,097 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,108 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 14:23:35,108 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 14:23:35,108 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 14:23:35,116 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:23:35,117 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,118 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 14:23:35,125 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:23:35,126 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,127 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 14:23:35,246 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 14:23:35,247 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,247 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,247 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 14:23:35,248 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,249 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 14:23:35,256 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 14:23:35,256 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,257 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 14:23:35,264 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 14:23:35,264 - streamvault - INFO - Starting system_config table migration...
2025-07-16 14:23:35,264 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 14:23:35,264 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 14:23:35,264 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,265 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 14:23:35,274 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 14:23:35,274 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 14:23:35,274 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,275 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 14:23:35,282 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 14:23:35,282 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 14:23:35,283 - streamvault - INFO - No existing categories found in database
2025-07-16 14:23:35,283 - streamvault - INFO - Category images migration completed successfully
2025-07-16 14:23:35,283 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 14:23:35,283 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,284 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 14:23:35,291 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 14:23:35,297 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 14:23:35,297 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 14:23:35,297 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 14:23:35,297 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 14:23:35,297 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 14:23:35,297 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,298 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 14:23:35,306 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 14:23:35,320 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 14:23:35,320 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 14:23:35,320 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 14:23:35,320 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 14:23:35,320 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 14:23:35,321 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,322 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:23:35,329 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:23:35,329 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 14:23:35,329 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:23:35,329 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,330 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 14:23:35,337 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 14:23:35,337 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,337 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,337 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 14:23:35,337 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,338 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 14:23:35,344 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 14:23:35,345 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,345 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,345 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 14:23:35,345 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,346 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 14:23:35,352 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:23:35,353 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:35,356 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 14:23:35,359 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:23:35,359 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:23:35,359 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 14:23:35,360 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 14:23:35,360 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 14:23:35,360 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 14:23:35,360 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 14:23:35,360 - streamvault - INFO - Log cleanup completed
2025-07-16 14:23:35,360 - streamvault - INFO - Log cleanup service started
2025-07-16 14:23:35,360 - streamvault - INFO - Recording cleanup service started
2025-07-16 14:23:35,360 - streamvault - INFO - Image sync worker started
2025-07-16 14:23:35,360 - streamvault - INFO - Image sync service started
2025-07-16 14:23:35,361 - streamvault - INFO - Initializing background services...
2025-07-16 14:23:35,361 - streamvault - INFO - Initializing background queue service...
2025-07-16 14:23:35,361 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 14:23:35,361 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 14:23:35,361 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 14:23:35,361 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 14:23:35,361 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 14:23:35,361 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 14:23:35,361 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16 14:23:35,361 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16 14:23:35,361 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 14:23:35,361 - streamvault - INFO - Background services initialized successfully
2025-07-16 14:23:35,361 - streamvault - INFO - Background queue service started
2025-07-16 14:23:35,361 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:23:35,361 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:23:35,361 - streamvault - INFO - Application startup complete
2025-07-16 14:23:35,361 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 14:23:35,362 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 14:23:35,363 - streamvault - INFO - Worker worker-0 started
2025-07-16 14:23:35,363 - streamvault - INFO - Worker worker-1 started
2025-07-16 14:23:35,363 - streamvault - INFO - Worker worker-2 started
2025-07-16 14:23:35,363 - streamvault - INFO - Dependency worker started
2025-07-16 14:23:35,364 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 14:23:35,364 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 14:23:35,364 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 14:23:35,364 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 14:23:35,364 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 14:23:35,365 - streamvault - INFO - Dependency worker cancelled
2025-07-16 14:23:35,365 - streamvault - INFO - Dependency worker stopped
2025-07-16 14:23:35,365 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 14:23:35,365 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 14:23:36,645 - streamvault - INFO - Starting application initialization...
2025-07-16 14:23:36,670 - streamvault - INFO - Updating migrations table schema
2025-07-16 14:23:36,671 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,683 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 14:23:36,683 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 14:23:36,683 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 14:23:36,690 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:23:36,692 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,693 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 14:23:36,702 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:23:36,703 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,704 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 14:23:36,807 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 14:23:36,807 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,808 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,808 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 14:23:36,809 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,810 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 14:23:36,820 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 14:23:36,821 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,822 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 14:23:36,834 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 14:23:36,834 - streamvault - INFO - Starting system_config table migration...
2025-07-16 14:23:36,834 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 14:23:36,834 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 14:23:36,834 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,835 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 14:23:36,844 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 14:23:36,844 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 14:23:36,846 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,847 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 14:23:36,855 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 14:23:36,855 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 14:23:36,857 - streamvault - INFO - No existing categories found in database
2025-07-16 14:23:36,858 - streamvault - INFO - Category images migration completed successfully
2025-07-16 14:23:36,858 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 14:23:36,859 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,860 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 14:23:36,868 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 14:23:36,878 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 14:23:36,878 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 14:23:36,878 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 14:23:36,878 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 14:23:36,878 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 14:23:36,879 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,880 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 14:23:36,889 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 14:23:36,896 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 14:23:36,896 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 14:23:36,896 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 14:23:36,896 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 14:23:36,896 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 14:23:36,896 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,897 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:23:36,904 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:23:36,904 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 14:23:36,904 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:23:36,904 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,905 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 14:23:36,911 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 14:23:36,912 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,912 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,912 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 14:23:36,912 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,913 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 14:23:36,922 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 14:23:36,923 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,923 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,923 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 14:23:36,923 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,924 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 14:23:36,931 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:23:36,932 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:23:36,936 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 14:23:36,939 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:23:36,939 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:23:36,939 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 14:23:36,940 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 14:23:36,940 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 14:23:36,940 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 14:23:36,940 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 14:23:36,941 - streamvault - INFO - Log cleanup completed
2025-07-16 14:23:36,941 - streamvault - INFO - Log cleanup service started
2025-07-16 14:23:36,941 - streamvault - INFO - Recording cleanup service started
2025-07-16 14:23:36,941 - streamvault - INFO - Image sync worker started
2025-07-16 14:23:36,941 - streamvault - INFO - Image sync service started
2025-07-16 14:23:36,941 - streamvault - INFO - Initializing background services...
2025-07-16 14:23:36,941 - streamvault - INFO - Initializing background queue service...
2025-07-16 14:23:36,941 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 14:23:36,941 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 14:23:36,941 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 14:23:36,941 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 14:23:36,941 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 14:23:36,941 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 14:23:36,941 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16 14:23:36,941 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16 14:23:36,941 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 14:23:36,941 - streamvault - INFO - Background services initialized successfully
2025-07-16 14:23:36,941 - streamvault - INFO - Background queue service started
2025-07-16 14:23:36,941 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:23:36,942 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:23:36,942 - streamvault - INFO - Application startup complete
2025-07-16 14:23:36,942 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 14:23:36,943 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 14:23:36,943 - streamvault - INFO - Worker worker-0 started
2025-07-16 14:23:36,943 - streamvault - INFO - Worker worker-1 started
2025-07-16 14:23:36,943 - streamvault - INFO - Worker worker-2 started
2025-07-16 14:23:36,943 - streamvault - INFO - Dependency worker started
2025-07-16 14:24:06,944 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 14:24:06,945 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 14:24:06,946 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 14:24:06,946 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 14:28:35,715 - streamvault - INFO - No active processes to shutdown
2025-07-16 14:28:35,725 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 14:28:35,725 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 14:28:35,729 - streamvault - INFO - Dependency worker cancelled
2025-07-16 14:28:35,729 - streamvault - INFO - Dependency worker stopped
2025-07-16 14:28:35,729 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 14:28:35,729 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 14:28:35,729 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 14:28:35,729 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 14:28:35,730 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 14:28:35,730 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 14:28:35,730 - streamvault - INFO - WorkerManager stopped
2025-07-16 14:28:35,730 - streamvault - INFO - Task dependency manager shut down
2025-07-16 14:28:35,730 - streamvault - INFO - TaskQueueManager stopped
2025-07-16 14:28:35,738 - streamvault - INFO - Image sync worker stopped
2025-07-16 14:28:37,204 - streamvault - INFO - Starting application initialization...
2025-07-16 14:28:37,219 - streamvault - INFO - Updating migrations table schema
2025-07-16 14:28:37,220 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,228 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 14:28:37,229 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 14:28:37,229 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 14:28:37,237 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:28:37,240 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,241 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 14:28:37,250 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:28:37,251 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,252 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 14:28:37,369 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 14:28:37,369 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,370 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,370 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 14:28:37,370 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,371 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 14:28:37,382 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 14:28:37,383 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,384 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 14:28:37,391 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 14:28:37,391 - streamvault - INFO - Starting system_config table migration...
2025-07-16 14:28:37,391 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 14:28:37,391 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 14:28:37,391 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,392 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 14:28:37,401 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 14:28:37,401 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 14:28:37,402 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,402 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 14:28:37,409 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 14:28:37,409 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 14:28:37,411 - streamvault - INFO - No existing categories found in database
2025-07-16 14:28:37,411 - streamvault - INFO - Category images migration completed successfully
2025-07-16 14:28:37,411 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 14:28:37,411 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,412 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 14:28:37,418 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 14:28:37,423 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 14:28:37,423 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 14:28:37,423 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 14:28:37,424 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 14:28:37,424 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 14:28:37,424 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,425 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 14:28:37,433 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 14:28:37,440 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 14:28:37,440 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 14:28:37,440 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 14:28:37,440 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 14:28:37,440 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 14:28:37,440 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,441 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:28:37,449 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:28:37,450 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 14:28:37,450 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:28:37,450 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,451 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 14:28:37,464 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 14:28:37,465 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,465 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,465 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 14:28:37,465 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,466 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 14:28:37,475 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 14:28:37,475 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,475 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,475 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 14:28:37,476 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,476 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 14:28:37,489 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:28:37,489 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:37,493 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 14:28:37,497 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:28:37,497 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:28:37,497 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 14:28:37,500 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 14:28:37,501 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 14:28:37,501 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 14:28:37,502 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 14:28:37,502 - streamvault - INFO - Log cleanup completed
2025-07-16 14:28:37,502 - streamvault - INFO - Log cleanup service started
2025-07-16 14:28:37,502 - streamvault - INFO - Recording cleanup service started
2025-07-16 14:28:37,502 - streamvault - INFO - Image sync worker started
2025-07-16 14:28:37,502 - streamvault - INFO - Image sync service started
2025-07-16 14:28:37,503 - streamvault - INFO - Initializing background services...
2025-07-16 14:28:37,503 - streamvault - INFO - Initializing background queue service...
2025-07-16 14:28:37,503 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 14:28:37,503 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 14:28:37,503 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 14:28:37,503 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 14:28:37,503 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 14:28:37,504 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 14:28:37,504 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16 14:28:37,504 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16 14:28:37,504 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 14:28:37,504 - streamvault - INFO - Background services initialized successfully
2025-07-16 14:28:37,504 - streamvault - INFO - Background queue service started
2025-07-16 14:28:37,504 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:28:37,504 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:28:37,504 - streamvault - INFO - Application startup complete
2025-07-16 14:28:37,504 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 14:28:37,507 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 14:28:37,507 - streamvault - INFO - Worker worker-0 started
2025-07-16 14:28:37,507 - streamvault - INFO - Worker worker-1 started
2025-07-16 14:28:37,507 - streamvault - INFO - Worker worker-2 started
2025-07-16 14:28:37,508 - streamvault - INFO - Dependency worker started
2025-07-16 14:28:37,514 - streamvault - INFO - Dependency worker cancelled
2025-07-16 14:28:37,515 - streamvault - INFO - Dependency worker stopped
2025-07-16 14:28:37,515 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 14:28:37,515 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 14:28:37,515 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 14:28:37,517 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 14:28:37,518 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 14:28:37,518 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 14:28:37,518 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 14:28:39,020 - streamvault - INFO - Starting application initialization...
2025-07-16 14:28:39,038 - streamvault - INFO - Updating migrations table schema
2025-07-16 14:28:39,038 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,051 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 14:28:39,052 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 14:28:39,052 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 14:28:39,059 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:28:39,062 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,063 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 14:28:39,075 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:28:39,076 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,077 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 14:28:39,202 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 14:28:39,202 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,203 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,203 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 14:28:39,203 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,204 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 14:28:39,214 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 14:28:39,216 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,217 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 14:28:39,224 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 14:28:39,224 - streamvault - INFO - Starting system_config table migration...
2025-07-16 14:28:39,225 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 14:28:39,225 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 14:28:39,225 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,226 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 14:28:39,235 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 14:28:39,235 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 14:28:39,236 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,237 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 14:28:39,244 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 14:28:39,244 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 14:28:39,245 - streamvault - INFO - No existing categories found in database
2025-07-16 14:28:39,246 - streamvault - INFO - Category images migration completed successfully
2025-07-16 14:28:39,246 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 14:28:39,246 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,247 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 14:28:39,255 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 14:28:39,262 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 14:28:39,262 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 14:28:39,262 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 14:28:39,262 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 14:28:39,262 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 14:28:39,262 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,263 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 14:28:39,272 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 14:28:39,281 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 14:28:39,281 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 14:28:39,281 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 14:28:39,281 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 14:28:39,281 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 14:28:39,281 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,282 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:28:39,291 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:28:39,292 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 14:28:39,292 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:28:39,292 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,293 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 14:28:39,300 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 14:28:39,301 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,301 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,301 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 14:28:39,301 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,302 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 14:28:39,309 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 14:28:39,309 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,309 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,309 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 14:28:39,309 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,310 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 14:28:39,317 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:28:39,318 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:28:39,321 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 14:28:39,324 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:28:39,324 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:28:39,324 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 14:28:39,325 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 14:28:39,325 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 14:28:39,325 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 14:28:39,325 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 14:28:39,326 - streamvault - INFO - Log cleanup completed
2025-07-16 14:28:39,326 - streamvault - INFO - Log cleanup service started
2025-07-16 14:28:39,326 - streamvault - INFO - Recording cleanup service started
2025-07-16 14:28:39,326 - streamvault - INFO - Image sync worker started
2025-07-16 14:28:39,326 - streamvault - INFO - Image sync service started
2025-07-16 14:28:39,326 - streamvault - INFO - Initializing background services...
2025-07-16 14:28:39,326 - streamvault - INFO - Initializing background queue service...
2025-07-16 14:28:39,326 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 14:28:39,326 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 14:28:39,326 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 14:28:39,326 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 14:28:39,326 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 14:28:39,326 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 14:28:39,326 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16 14:28:39,326 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16 14:28:39,326 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 14:28:39,326 - streamvault - INFO - Background services initialized successfully
2025-07-16 14:28:39,326 - streamvault - INFO - Background queue service started
2025-07-16 14:28:39,327 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:28:39,327 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:28:39,327 - streamvault - INFO - Application startup complete
2025-07-16 14:28:39,327 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 14:28:39,328 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 14:28:39,328 - streamvault - INFO - Worker worker-0 started
2025-07-16 14:28:39,328 - streamvault - INFO - Worker worker-1 started
2025-07-16 14:28:39,328 - streamvault - INFO - Worker worker-2 started
2025-07-16 14:28:39,328 - streamvault - INFO - Dependency worker started
2025-07-16 14:29:09,331 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 14:29:09,332 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 14:29:09,333 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 14:29:09,333 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 14:33:37,990 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 14:33:37,990 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 14:33:37,994 - streamvault - INFO - Dependency worker cancelled
2025-07-16 14:33:37,994 - streamvault - INFO - Dependency worker stopped
2025-07-16 14:33:37,994 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 14:33:37,994 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 14:33:37,994 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 14:33:37,994 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 14:33:37,994 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 14:33:37,994 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 14:33:37,994 - streamvault - INFO - WorkerManager stopped
2025-07-16 14:33:37,994 - streamvault - INFO - Task dependency manager shut down
2025-07-16 14:33:37,994 - streamvault - INFO - TaskQueueManager stopped
2025-07-16 14:33:38,002 - streamvault - INFO - Image sync worker stopped
2025-07-16 14:41:25,480 - streamvault - INFO - Starting application initialization...
2025-07-16 14:41:25,502 - streamvault - INFO - Updating migrations table schema
2025-07-16 14:41:25,503 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,515 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 14:41:25,516 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 14:41:25,516 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 14:41:25,526 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:41:25,530 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,531 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 14:41:25,542 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:41:25,544 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,545 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 14:41:25,683 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 14:41:25,684 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,684 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,684 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 14:41:25,685 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,686 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 14:41:25,694 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 14:41:25,695 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,696 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 14:41:25,708 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 14:41:25,708 - streamvault - INFO - Starting system_config table migration...
2025-07-16 14:41:25,708 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 14:41:25,709 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 14:41:25,709 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,710 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 14:41:25,723 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 14:41:25,723 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 14:41:25,724 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,724 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 14:41:25,733 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 14:41:25,734 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 14:41:25,735 - streamvault - INFO - No existing categories found in database
2025-07-16 14:41:25,735 - streamvault - INFO - Category images migration completed successfully
2025-07-16 14:41:25,735 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 14:41:25,736 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,737 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 14:41:25,749 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 14:41:25,756 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 14:41:25,756 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 14:41:25,756 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 14:41:25,756 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 14:41:25,756 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 14:41:25,756 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,758 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 14:41:25,771 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 14:41:25,784 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 14:41:25,784 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 14:41:25,784 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 14:41:25,784 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 14:41:25,784 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 14:41:25,785 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,786 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:41:25,798 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:41:25,799 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 14:41:25,799 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:41:25,799 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,800 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 14:41:25,808 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 14:41:25,809 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,809 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,809 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 14:41:25,809 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,810 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 14:41:25,822 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 14:41:25,823 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,823 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,823 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 14:41:25,824 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,825 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 14:41:25,840 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:41:25,842 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:41:25,849 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 14:41:25,852 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:41:25,852 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:41:25,852 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 14:41:25,853 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 14:41:25,853 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 14:41:25,854 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 14:41:25,854 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 14:41:25,854 - streamvault - INFO - Log cleanup completed
2025-07-16 14:41:25,854 - streamvault - INFO - Log cleanup service started
2025-07-16 14:41:25,854 - streamvault - INFO - Recording cleanup service started
2025-07-16 14:41:25,854 - streamvault - INFO - Image sync worker started
2025-07-16 14:41:25,854 - streamvault - INFO - Image sync service started
2025-07-16 14:41:25,854 - streamvault - INFO - Initializing background services...
2025-07-16 14:41:25,855 - streamvault - INFO - Initializing background queue service...
2025-07-16 14:41:25,855 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 14:41:25,855 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 14:41:25,855 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 14:41:25,855 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 14:41:25,855 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 14:41:25,855 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 14:41:25,855 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16 14:41:25,855 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16 14:41:25,855 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 14:41:25,855 - streamvault - INFO - Background services initialized successfully
2025-07-16 14:41:25,855 - streamvault - INFO - Background queue service started
2025-07-16 14:41:25,855 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:41:25,855 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:41:25,855 - streamvault - INFO - Application startup complete
2025-07-16 14:41:25,855 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 14:41:25,856 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 14:41:25,856 - streamvault - INFO - Worker worker-0 started
2025-07-16 14:41:25,856 - streamvault - INFO - Worker worker-1 started
2025-07-16 14:41:25,857 - streamvault - INFO - Worker worker-2 started
2025-07-16 14:41:25,857 - streamvault - INFO - Dependency worker started
2025-07-16 14:41:55,865 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 14:41:55,866 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 14:41:55,869 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 14:41:55,869 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 14:46:24,342 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 14:46:24,342 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 14:46:24,344 - streamvault - INFO - Dependency worker cancelled
2025-07-16 14:46:24,344 - streamvault - INFO - Dependency worker stopped
2025-07-16 14:46:24,345 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 14:46:24,345 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 14:46:24,345 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 14:46:24,345 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 14:46:24,345 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 14:46:24,345 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 14:46:24,345 - streamvault - INFO - WorkerManager stopped
2025-07-16 14:46:24,345 - streamvault - INFO - Task dependency manager shut down
2025-07-16 14:46:24,345 - streamvault - INFO - TaskQueueManager stopped
2025-07-16 14:46:24,358 - streamvault - INFO - Image sync worker stopped
2025-07-16 14:46:25,900 - streamvault - INFO - Starting application initialization...
2025-07-16 14:46:25,921 - streamvault - INFO - Updating migrations table schema
2025-07-16 14:46:25,921 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:25,934 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 14:46:25,935 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 14:46:25,935 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 14:46:25,942 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:46:25,945 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:25,946 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 14:46:25,955 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:46:25,956 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:25,956 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 14:46:26,072 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 14:46:26,073 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,073 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,073 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 14:46:26,074 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,074 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 14:46:26,083 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 14:46:26,085 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,086 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 14:46:26,099 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 14:46:26,099 - streamvault - INFO - Starting system_config table migration...
2025-07-16 14:46:26,099 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 14:46:26,099 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 14:46:26,100 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,101 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 14:46:26,110 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 14:46:26,111 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 14:46:26,111 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,112 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 14:46:26,124 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 14:46:26,124 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 14:46:26,126 - streamvault - INFO - No existing categories found in database
2025-07-16 14:46:26,126 - streamvault - INFO - Category images migration completed successfully
2025-07-16 14:46:26,126 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 14:46:26,126 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,127 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 14:46:26,134 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 14:46:26,140 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 14:46:26,140 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 14:46:26,140 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 14:46:26,140 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 14:46:26,140 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 14:46:26,141 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,141 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 14:46:26,151 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 14:46:26,161 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 14:46:26,161 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 14:46:26,162 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 14:46:26,162 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 14:46:26,162 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 14:46:26,162 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,163 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:46:26,170 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:46:26,170 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 14:46:26,171 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:46:26,171 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,171 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 14:46:26,182 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 14:46:26,183 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,183 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,183 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 14:46:26,183 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,184 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 14:46:26,191 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 14:46:26,191 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,192 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,192 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 14:46:26,192 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,193 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 14:46:26,200 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:46:26,201 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:26,206 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 14:46:26,209 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:46:26,209 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:46:26,209 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 14:46:26,212 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 14:46:26,213 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 14:46:26,213 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 14:46:26,213 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 14:46:26,214 - streamvault - INFO - Log cleanup completed
2025-07-16 14:46:26,214 - streamvault - INFO - Log cleanup service started
2025-07-16 14:46:26,214 - streamvault - INFO - Recording cleanup service started
2025-07-16 14:46:26,214 - streamvault - INFO - Image sync worker started
2025-07-16 14:46:26,214 - streamvault - INFO - Image sync service started
2025-07-16 14:46:26,214 - streamvault - INFO - Initializing background services...
2025-07-16 14:46:26,214 - streamvault - INFO - Initializing background queue service...
2025-07-16 14:46:26,214 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 14:46:26,214 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 14:46:26,214 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 14:46:26,214 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 14:46:26,214 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 14:46:26,214 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 14:46:26,214 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16 14:46:26,215 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16 14:46:26,215 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 14:46:26,215 - streamvault - INFO - Background services initialized successfully
2025-07-16 14:46:26,215 - streamvault - INFO - Background queue service started
2025-07-16 14:46:26,215 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:46:26,215 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:46:26,215 - streamvault - INFO - Application startup complete
2025-07-16 14:46:26,215 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 14:46:26,216 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 14:46:26,217 - streamvault - INFO - Worker worker-0 started
2025-07-16 14:46:26,217 - streamvault - INFO - Worker worker-1 started
2025-07-16 14:46:26,217 - streamvault - INFO - Worker worker-2 started
2025-07-16 14:46:26,217 - streamvault - INFO - Dependency worker started
2025-07-16 14:46:26,220 - streamvault - INFO - Dependency worker cancelled
2025-07-16 14:46:26,220 - streamvault - INFO - Dependency worker stopped
2025-07-16 14:46:26,220 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 14:46:26,221 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 14:46:26,221 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 14:46:26,222 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 14:46:26,223 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 14:46:26,223 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 14:46:26,223 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 14:46:27,844 - streamvault - INFO - Starting application initialization...
2025-07-16 14:46:27,870 - streamvault - INFO - Updating migrations table schema
2025-07-16 14:46:27,871 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:27,884 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 14:46:27,885 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 14:46:27,885 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 14:46:27,901 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:46:27,906 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:27,907 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 14:46:27,922 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:46:27,923 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:27,924 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 14:46:28,087 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 14:46:28,088 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,089 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,089 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 14:46:28,090 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,091 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 14:46:28,104 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 14:46:28,105 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,106 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 14:46:28,124 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 14:46:28,124 - streamvault - INFO - Starting system_config table migration...
2025-07-16 14:46:28,124 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 14:46:28,125 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 14:46:28,125 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,127 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 14:46:28,148 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 14:46:28,149 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 14:46:28,150 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,151 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 14:46:28,171 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 14:46:28,172 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 14:46:28,174 - streamvault - INFO - No existing categories found in database
2025-07-16 14:46:28,175 - streamvault - INFO - Category images migration completed successfully
2025-07-16 14:46:28,175 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 14:46:28,175 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,177 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 14:46:28,191 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 14:46:28,206 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 14:46:28,206 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 14:46:28,206 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 14:46:28,206 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 14:46:28,206 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 14:46:28,207 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,209 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 14:46:28,227 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 14:46:28,238 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 14:46:28,238 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 14:46:28,238 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 14:46:28,238 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 14:46:28,239 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 14:46:28,239 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,242 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:46:28,257 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:46:28,258 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 14:46:28,258 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:46:28,259 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,261 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 14:46:28,279 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 14:46:28,281 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,282 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,282 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 14:46:28,282 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,285 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 14:46:28,299 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 14:46:28,299 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,299 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,299 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 14:46:28,300 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,301 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 14:46:28,315 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:46:28,317 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:46:28,327 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 14:46:28,331 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:46:28,331 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:46:28,331 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 14:46:28,332 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 14:46:28,332 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 14:46:28,332 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 14:46:28,332 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 14:46:28,332 - streamvault - INFO - Log cleanup completed
2025-07-16 14:46:28,332 - streamvault - INFO - Log cleanup service started
2025-07-16 14:46:28,332 - streamvault - INFO - Recording cleanup service started
2025-07-16 14:46:28,332 - streamvault - INFO - Image sync worker started
2025-07-16 14:46:28,332 - streamvault - INFO - Image sync service started
2025-07-16 14:46:28,334 - streamvault - INFO - Initializing background services...
2025-07-16 14:46:28,334 - streamvault - INFO - Initializing background queue service...
2025-07-16 14:46:28,334 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 14:46:28,334 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 14:46:28,334 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 14:46:28,334 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 14:46:28,334 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 14:46:28,334 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 14:46:28,334 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16 14:46:28,334 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16 14:46:28,334 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 14:46:28,334 - streamvault - INFO - Background services initialized successfully
2025-07-16 14:46:28,334 - streamvault - INFO - Background queue service started
2025-07-16 14:46:28,334 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:46:28,334 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:46:28,334 - streamvault - INFO - Application startup complete
2025-07-16 14:46:28,335 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 14:46:28,336 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 14:46:28,337 - streamvault - INFO - Worker worker-0 started
2025-07-16 14:46:28,337 - streamvault - INFO - Worker worker-1 started
2025-07-16 14:46:28,337 - streamvault - INFO - Worker worker-2 started
2025-07-16 14:46:28,338 - streamvault - INFO - Dependency worker started
2025-07-16 14:46:58,338 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 14:46:58,340 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 14:46:58,342 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 14:46:58,342 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 14:51:26,735 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 14:51:26,735 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 14:51:26,739 - streamvault - INFO - Dependency worker cancelled
2025-07-16 14:51:26,739 - streamvault - INFO - Dependency worker stopped
2025-07-16 14:51:26,740 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 14:51:26,740 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 14:51:26,740 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 14:51:26,740 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 14:51:26,740 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 14:51:26,740 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 14:51:26,741 - streamvault - INFO - WorkerManager stopped
2025-07-16 14:51:26,741 - streamvault - INFO - Task dependency manager shut down
2025-07-16 14:51:26,741 - streamvault - INFO - TaskQueueManager stopped
2025-07-16 14:51:26,754 - streamvault - INFO - Image sync worker stopped
2025-07-16 14:51:29,235 - streamvault - INFO - Starting application initialization...
2025-07-16 14:51:29,276 - streamvault - INFO - Updating migrations table schema
2025-07-16 14:51:29,277 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,298 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 14:51:29,299 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 14:51:29,299 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 14:51:29,319 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:51:29,326 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,328 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 14:51:29,349 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:51:29,351 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,352 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 14:51:29,628 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 14:51:29,629 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,630 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,631 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 14:51:29,632 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,633 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 14:51:29,649 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 14:51:29,652 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,653 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 14:51:29,664 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 14:51:29,664 - streamvault - INFO - Starting system_config table migration...
2025-07-16 14:51:29,664 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 14:51:29,664 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 14:51:29,664 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,665 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 14:51:29,678 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 14:51:29,678 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 14:51:29,679 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,679 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 14:51:29,692 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 14:51:29,692 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 14:51:29,693 - streamvault - INFO - No existing categories found in database
2025-07-16 14:51:29,693 - streamvault - INFO - Category images migration completed successfully
2025-07-16 14:51:29,693 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 14:51:29,694 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,695 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 14:51:29,706 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 14:51:29,715 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 14:51:29,715 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 14:51:29,715 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 14:51:29,715 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 14:51:29,715 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 14:51:29,716 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,717 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 14:51:29,731 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 14:51:29,739 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 14:51:29,739 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 14:51:29,739 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 14:51:29,739 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 14:51:29,739 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 14:51:29,741 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,742 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:51:29,759 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:51:29,759 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 14:51:29,759 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:51:29,760 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,761 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 14:51:29,775 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 14:51:29,776 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,776 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,776 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 14:51:29,776 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,777 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 14:51:29,791 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 14:51:29,791 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,791 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,791 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 14:51:29,792 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,793 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 14:51:29,806 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:51:29,808 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:51:29,812 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 14:51:29,815 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:51:29,815 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:51:29,815 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 14:51:29,817 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 14:51:29,817 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 14:51:29,817 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 14:51:29,817 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 14:51:29,817 - streamvault - INFO - Log cleanup completed
2025-07-16 14:51:29,817 - streamvault - INFO - Log cleanup service started
2025-07-16 14:51:29,817 - streamvault - INFO - Recording cleanup service started
2025-07-16 14:51:29,818 - streamvault - INFO - Image sync worker started
2025-07-16 14:51:29,818 - streamvault - INFO - Image sync service started
2025-07-16 14:51:29,819 - streamvault - INFO - Initializing background services...
2025-07-16 14:51:29,819 - streamvault - INFO - Initializing background queue service...
2025-07-16 14:51:29,819 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 14:51:29,819 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 14:51:29,819 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 14:51:29,819 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 14:51:29,819 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 14:51:29,819 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 14:51:29,819 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16 14:51:29,819 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16 14:51:29,819 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 14:51:29,819 - streamvault - INFO - Background services initialized successfully
2025-07-16 14:51:29,819 - streamvault - INFO - Background queue service started
2025-07-16 14:51:29,819 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:51:29,819 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:51:29,819 - streamvault - INFO - Application startup complete
2025-07-16 14:51:29,819 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 14:51:29,822 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 14:51:29,822 - streamvault - INFO - Worker worker-0 started
2025-07-16 14:51:29,822 - streamvault - INFO - Worker worker-1 started
2025-07-16 14:51:29,823 - streamvault - INFO - Worker worker-2 started
2025-07-16 14:51:29,823 - streamvault - INFO - Dependency worker started
2025-07-16 14:51:59,831 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 14:51:59,832 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 14:51:59,833 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 14:51:59,833 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 14:56:27,334 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 14:56:27,334 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 14:56:27,340 - streamvault - INFO - Dependency worker cancelled
2025-07-16 14:56:27,340 - streamvault - INFO - Dependency worker stopped
2025-07-16 14:56:27,340 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 14:56:27,340 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 14:56:27,340 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 14:56:27,341 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 14:56:27,341 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 14:56:27,341 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 14:56:27,341 - streamvault - INFO - WorkerManager stopped
2025-07-16 14:56:27,341 - streamvault - INFO - Task dependency manager shut down
2025-07-16 14:56:27,341 - streamvault - INFO - TaskQueueManager stopped
2025-07-16 14:56:27,361 - streamvault - INFO - Image sync worker stopped
2025-07-16 14:56:29,376 - streamvault - INFO - Starting application initialization...
2025-07-16 14:56:29,405 - streamvault - INFO - Updating migrations table schema
2025-07-16 14:56:29,406 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,421 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 14:56:29,422 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 14:56:29,422 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 14:56:29,432 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:56:29,434 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,435 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 14:56:29,445 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:56:29,446 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,447 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 14:56:29,634 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 14:56:29,635 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,636 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,636 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 14:56:29,638 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,639 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 14:56:29,648 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 14:56:29,650 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,651 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 14:56:29,661 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 14:56:29,661 - streamvault - INFO - Starting system_config table migration...
2025-07-16 14:56:29,661 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 14:56:29,662 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 14:56:29,662 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,663 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 14:56:29,674 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 14:56:29,674 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 14:56:29,675 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,676 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 14:56:29,686 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 14:56:29,686 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 14:56:29,688 - streamvault - INFO - No existing categories found in database
2025-07-16 14:56:29,688 - streamvault - INFO - Category images migration completed successfully
2025-07-16 14:56:29,688 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 14:56:29,689 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,690 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 14:56:29,706 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 14:56:29,718 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 14:56:29,718 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 14:56:29,718 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 14:56:29,718 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 14:56:29,718 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 14:56:29,719 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,720 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 14:56:29,730 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 14:56:29,746 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 14:56:29,746 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 14:56:29,746 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 14:56:29,746 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 14:56:29,746 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 14:56:29,747 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,749 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:56:29,764 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:56:29,765 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 14:56:29,765 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:56:29,766 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,768 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 14:56:29,780 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 14:56:29,781 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,781 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,781 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 14:56:29,782 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,783 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 14:56:29,792 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 14:56:29,793 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,793 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,793 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 14:56:29,793 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,795 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 14:56:29,805 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:56:29,806 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:29,812 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 14:56:29,815 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:56:29,815 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:56:29,815 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 14:56:29,816 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 14:56:29,816 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 14:56:29,816 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 14:56:29,816 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 14:56:29,816 - streamvault - INFO - Log cleanup completed
2025-07-16 14:56:29,816 - streamvault - INFO - Log cleanup service started
2025-07-16 14:56:29,816 - streamvault - INFO - Recording cleanup service started
2025-07-16 14:56:29,816 - streamvault - INFO - Image sync worker started
2025-07-16 14:56:29,816 - streamvault - INFO - Image sync service started
2025-07-16 14:56:29,818 - streamvault - INFO - Initializing background services...
2025-07-16 14:56:29,818 - streamvault - INFO - Initializing background queue service...
2025-07-16 14:56:29,818 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 14:56:29,818 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 14:56:29,818 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 14:56:29,818 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 14:56:29,818 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 14:56:29,818 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 14:56:29,818 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16 14:56:29,818 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16 14:56:29,818 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 14:56:29,818 - streamvault - INFO - Background services initialized successfully
2025-07-16 14:56:29,818 - streamvault - INFO - Background queue service started
2025-07-16 14:56:29,818 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:56:29,818 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:56:29,818 - streamvault - INFO - Application startup complete
2025-07-16 14:56:29,819 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 14:56:29,820 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 14:56:29,821 - streamvault - INFO - Worker worker-0 started
2025-07-16 14:56:29,821 - streamvault - INFO - Worker worker-1 started
2025-07-16 14:56:29,821 - streamvault - INFO - Worker worker-2 started
2025-07-16 14:56:29,821 - streamvault - INFO - Dependency worker started
2025-07-16 14:56:29,826 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 14:56:29,826 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 14:56:29,826 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 14:56:29,826 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 14:56:29,826 - streamvault - INFO - Dependency worker cancelled
2025-07-16 14:56:29,826 - streamvault - INFO - Dependency worker stopped
2025-07-16 14:56:29,827 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 14:56:29,827 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 14:56:29,827 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 14:56:31,763 - streamvault - INFO - Starting application initialization...
2025-07-16 14:56:31,791 - streamvault - INFO - Updating migrations table schema
2025-07-16 14:56:31,792 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:31,815 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 14:56:31,817 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 14:56:31,817 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 14:56:31,834 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:56:31,837 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:31,838 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 14:56:31,851 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:56:31,853 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:31,854 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 14:56:32,045 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 14:56:32,046 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,046 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,046 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 14:56:32,048 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,050 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 14:56:32,066 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 14:56:32,068 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,069 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 14:56:32,083 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 14:56:32,083 - streamvault - INFO - Starting system_config table migration...
2025-07-16 14:56:32,084 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 14:56:32,084 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 14:56:32,084 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,085 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 14:56:32,099 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 14:56:32,100 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 14:56:32,100 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,101 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 14:56:32,116 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 14:56:32,118 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 14:56:32,120 - streamvault - INFO - No existing categories found in database
2025-07-16 14:56:32,120 - streamvault - INFO - Category images migration completed successfully
2025-07-16 14:56:32,120 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 14:56:32,121 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,123 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 14:56:32,139 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 14:56:32,153 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 14:56:32,153 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 14:56:32,153 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 14:56:32,154 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 14:56:32,154 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 14:56:32,155 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,156 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 14:56:32,176 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 14:56:32,192 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 14:56:32,192 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 14:56:32,193 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 14:56:32,193 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 14:56:32,193 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 14:56:32,194 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,196 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:56:32,214 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:56:32,215 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 14:56:32,215 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 14:56:32,216 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,217 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 14:56:32,229 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 14:56:32,229 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,230 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,230 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 14:56:32,230 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,233 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 14:56:32,252 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 14:56:32,253 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,253 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,253 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 14:56:32,254 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,256 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 14:56:32,273 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 14:56:32,274 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 14:56:32,281 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 14:56:32,286 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:56:32,287 - streamvault - INFO - EventSub initialized successfully
2025-07-16 14:56:32,287 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 14:56:32,289 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 14:56:32,289 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 14:56:32,290 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 14:56:32,290 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 14:56:32,290 - streamvault - INFO - Log cleanup completed
2025-07-16 14:56:32,290 - streamvault - INFO - Log cleanup service started
2025-07-16 14:56:32,290 - streamvault - INFO - Recording cleanup service started
2025-07-16 14:56:32,290 - streamvault - INFO - Image sync worker started
2025-07-16 14:56:32,291 - streamvault - INFO - Image sync service started
2025-07-16 14:56:32,291 - streamvault - INFO - Initializing background services...
2025-07-16 14:56:32,291 - streamvault - INFO - Initializing background queue service...
2025-07-16 14:56:32,291 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 14:56:32,292 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 14:56:32,292 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 14:56:32,292 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 14:56:32,292 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 14:56:32,292 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 14:56:32,292 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16 14:56:32,292 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16 14:56:32,292 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 14:56:32,292 - streamvault - INFO - Background services initialized successfully
2025-07-16 14:56:32,292 - streamvault - INFO - Background queue service started
2025-07-16 14:56:32,293 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:56:32,293 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 14:56:32,293 - streamvault - INFO - Application startup complete
2025-07-16 14:56:32,293 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 14:56:32,295 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 14:56:32,296 - streamvault - INFO - Worker worker-0 started
2025-07-16 14:56:32,296 - streamvault - INFO - Worker worker-1 started
2025-07-16 14:56:32,296 - streamvault - INFO - Worker worker-2 started
2025-07-16 14:56:32,296 - streamvault - INFO - Dependency worker started
2025-07-16 14:57:02,276 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 14:57:02,277 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 14:57:02,278 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 14:57:02,278 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 15:01:30,387 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 15:01:30,388 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 15:01:30,392 - streamvault - INFO - Dependency worker cancelled
2025-07-16 15:01:30,392 - streamvault - INFO - Dependency worker stopped
2025-07-16 15:01:30,392 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 15:01:30,392 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 15:01:30,392 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 15:01:30,392 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 15:01:30,392 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 15:01:30,392 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 15:01:30,392 - streamvault - INFO - WorkerManager stopped
2025-07-16 15:01:30,392 - streamvault - INFO - Task dependency manager shut down
2025-07-16 15:01:30,393 - streamvault - INFO - TaskQueueManager stopped
2025-07-16 15:01:30,409 - streamvault - INFO - Image sync worker stopped
2025-07-16 15:01:32,776 - streamvault - INFO - Starting application initialization...
2025-07-16 15:01:32,808 - streamvault - INFO - Updating migrations table schema
2025-07-16 15:01:32,808 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:32,825 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 15:01:32,826 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 15:01:32,826 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 15:01:32,844 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250522_add_stream_indices.py", line 25, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 15:01:32,851 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:32,854 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 15:01:32,872 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 26, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 15:01:32,873 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:32,874 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 15:01:33,076 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 15:01:33,077 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,078 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,078 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 15:01:33,078 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,080 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 15:01:33,094 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: cannot access local variable 'session' where it is not associated with a value
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 28, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 91, in run_migration
    session.rollback()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 94, in run_migration
    session.close()
    ^^^^^^^
UnboundLocalError: cannot access local variable 'session' where it is not associated with a value
2025-07-16 15:01:33,096 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,097 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 15:01:33,108 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 15:01:33,108 - streamvault - INFO - Starting system_config table migration...
2025-07-16 15:01:33,108 - streamvault - ERROR - DATABASE_URL not found in environment
2025-07-16 15:01:33,108 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 15:01:33,109 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,110 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 15:01:33,126 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 15:01:33,126 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 15:01:33,126 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,129 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 15:01:33,145 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 15:01:33,145 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 15:01:33,147 - streamvault - INFO - No existing categories found in database
2025-07-16 15:01:33,147 - streamvault - INFO - Category images migration completed successfully
2025-07-16 15:01:33,147 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 15:01:33,148 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,148 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 15:01:33,158 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 15:01:33,174 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 15:01:33,174 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 15:01:33,174 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 15:01:33,174 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 15:01:33,175 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 15:01:33,175 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,178 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 15:01:33,196 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 15:01:33,210 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 15:01:33,210 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 15:01:33,210 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 15:01:33,210 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 15:01:33,210 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 15:01:33,210 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,212 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 15:01:33,226 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 15:01:33,226 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 15:01:33,226 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 15:01:33,227 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,228 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 15:01:33,241 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 15:01:33,242 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,242 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,242 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 15:01:33,242 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,243 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 15:01:33,262 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 15:01:33,263 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,263 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,263 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 15:01:33,264 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,266 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 15:01:33,284 - streamvault - ERROR - Error running migration c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py: Expected string or URL object, got None
Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "c:\Users\max.ebert\Documents\privat\StreamVault\migrations\add_max_streams.py", line 29, in run_migration
    engine = create_engine(settings.DATABASE_URL)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py", line 546, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\url.py", line 846, in make_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected string or URL object, got None
2025-07-16 15:01:33,286 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:01:33,294 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 15:01:33,300 - streamvault - INFO - EventSub initialized successfully
2025-07-16 15:01:33,300 - streamvault - INFO - EventSub initialized successfully
2025-07-16 15:01:33,300 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 15:01:33,303 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 15:01:33,304 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 15:01:33,304 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 15:01:33,305 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 15:01:33,305 - streamvault - INFO - Log cleanup completed
2025-07-16 15:01:33,305 - streamvault - INFO - Log cleanup service started
2025-07-16 15:01:33,305 - streamvault - INFO - Recording cleanup service started
2025-07-16 15:01:33,305 - streamvault - INFO - Image sync worker started
2025-07-16 15:01:33,305 - streamvault - INFO - Image sync service started
2025-07-16 15:01:33,306 - streamvault - INFO - Initializing background services...
2025-07-16 15:01:33,306 - streamvault - INFO - Initializing background queue service...
2025-07-16 15:01:33,306 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 15:01:33,306 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 15:01:33,306 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 15:01:33,306 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 15:01:33,306 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 15:01:33,306 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 15:01:33,308 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16 15:01:33,308 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16 15:01:33,308 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 15:01:33,308 - streamvault - INFO - Background services initialized successfully
2025-07-16 15:01:33,308 - streamvault - INFO - Background queue service started
2025-07-16 15:01:33,308 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 15:01:33,308 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 15:01:33,308 - streamvault - INFO - Application startup complete
2025-07-16 15:01:33,308 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 15:01:33,310 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 15:01:33,311 - streamvault - INFO - Worker worker-0 started
2025-07-16 15:01:33,311 - streamvault - INFO - Worker worker-1 started
2025-07-16 15:01:33,311 - streamvault - INFO - Worker worker-2 started
2025-07-16 15:01:33,311 - streamvault - INFO - Dependency worker started
2025-07-16 15:02:03,316 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 15:02:03,317 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 15:02:03,319 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 15:02:03,319 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 15:03:45,913 - streamvault - INFO - Starting application initialization...
2025-07-16 15:03:45,964 - streamvault - INFO - Updating migrations table schema
2025-07-16 15:03:45,966 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:45,993 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 15:03:45,994 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 15:03:45,994 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 15:03:46,045 - streamvault - INFO - Successfully ran migration: 20250522_add_stream_indices.py
2025-07-16 15:03:46,047 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,049 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 15:03:46,078 - streamvault - ERROR - Error running migration C:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
            SELECT COUNT(*) 
            FROM information_schema.columns 
            WHERE table_name = 'streams' 
            AND column_name = 'recording_path'
        ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: information_schema.columns

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "C:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 29, in run_migration
    result = session.execute(text("""
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
            SELECT COUNT(*) 
            FROM information_schema.columns 
            WHERE table_name = 'streams' 
            AND column_name = 'recording_path'
        ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,082 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,084 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 15:03:46,229 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 15:03:46,230 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,233 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,234 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 15:03:46,234 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,237 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 15:03:46,316 - streamvault - ERROR - Error running migration C:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: (sqlite3.OperationalError) near "OR": syntax error
[SQL: 
        CREATE OR REPLACE FUNCTION update_updated_at_column()
        RETURNS TRIGGER AS $$
        BEGIN
            NEW.updated_at = CURRENT_TIMESTAMP;
            RETURN NEW;
        END;
        $$ language 'plpgsql';
        
        DROP TRIGGER IF EXISTS update_push_subscriptions_updated_at ON push_subscriptions;
        
        CREATE TRIGGER update_push_subscriptions_updated_at
            BEFORE UPDATE ON push_subscriptions
            FOR EACH ROW
            EXECUTE FUNCTION update_updated_at_column();
        ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: near "OR": syntax error

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "C:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 83, in run_migration
    session.execute(text(trigger_sql))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) near "OR": syntax error
[SQL: 
        CREATE OR REPLACE FUNCTION update_updated_at_column()
        RETURNS TRIGGER AS $$
        BEGIN
            NEW.updated_at = CURRENT_TIMESTAMP;
            RETURN NEW;
        END;
        $$ language 'plpgsql';
        
        DROP TRIGGER IF EXISTS update_push_subscriptions_updated_at ON push_subscriptions;
        
        CREATE TRIGGER update_push_subscriptions_updated_at
            BEFORE UPDATE ON push_subscriptions
            FOR EACH ROW
            EXECUTE FUNCTION update_updated_at_column();
        ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,322 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,329 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 15:03:46,358 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 15:03:46,359 - streamvault - INFO - Starting system_config table migration...
2025-07-16 15:03:46,361 - streamvault - INFO - system_config table already exists, skipping migration
2025-07-16 15:03:46,362 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 15:03:46,363 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,365 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 15:03:46,394 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 15:03:46,396 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 15:03:46,397 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,399 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 15:03:46,425 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 15:03:46,426 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 15:03:46,428 - streamvault - INFO - No existing categories found in database
2025-07-16 15:03:46,429 - streamvault - INFO - Category images migration completed successfully
2025-07-16 15:03:46,429 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 15:03:46,430 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,432 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 15:03:46,460 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 15:03:46,469 - streamvault - DEBUG - Could not create unique constraint: (sqlite3.OperationalError) near "CONSTRAINT": syntax error
[SQL: 
                ALTER TABLE active_recordings_state 
                ADD CONSTRAINT active_recordings_state_stream_id_key UNIQUE (stream_id)
            ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,470 - streamvault - DEBUG - Could not check streams table: (sqlite3.OperationalError) no such table: information_schema.tables
[SQL: SELECT 1 FROM information_schema.tables WHERE table_name = 'streams']
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,470 - streamvault - DEBUG - Could not check recordings table: (sqlite3.OperationalError) no such table: information_schema.tables
[SQL: SELECT 1 FROM information_schema.tables WHERE table_name = 'recordings']
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,488 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 15:03:46,488 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 15:03:46,488 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 15:03:46,489 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 15:03:46,489 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 15:03:46,490 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,492 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 15:03:46,522 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 15:03:46,644 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 15:03:46,644 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 15:03:46,644 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 15:03:46,645 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 15:03:46,645 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 15:03:46,646 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,650 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 15:03:46,679 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 15:03:46,681 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 15:03:46,682 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 15:03:46,683 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,686 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 15:03:46,718 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 15:03:46,719 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,721 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,721 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 15:03:46,723 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,725 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 15:03:46,757 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 15:03:46,758 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,759 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,760 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 15:03:46,761 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,769 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 15:03:46,800 - streamvault - INFO - Successfully ran migration: add_max_streams.py
2025-07-16 15:03:46,801 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:03:46,821 - streamvault - DEBUG - Initializing event registry
2025-07-16 15:03:46,823 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 15:03:46,829 - streamvault - DEBUG - Notifications disabled
2025-07-16 15:03:46,830 - streamvault - DEBUG - Initializing EventSub with callback URL: http://localhost:8000/eventsub
2025-07-16 15:03:46,831 - streamvault - INFO - EventSub initialized successfully
2025-07-16 15:03:46,831 - streamvault - DEBUG - Event registry initialization complete
2025-07-16 15:03:46,832 - streamvault - DEBUG - EventSub already initialized, skipping...
2025-07-16 15:03:46,832 - streamvault - INFO - EventSub initialized successfully
2025-07-16 15:03:46,833 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 15:03:46,836 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 15:03:46,837 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 15:03:46,838 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 15:03:46,839 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 15:03:46,839 - streamvault - INFO - Log cleanup completed
2025-07-16 15:03:46,840 - streamvault - INFO - Log cleanup service started
2025-07-16 15:03:46,840 - streamvault - INFO - Recording cleanup service started
2025-07-16 15:03:46,840 - streamvault - INFO - Image sync worker started
2025-07-16 15:03:46,841 - streamvault - INFO - Image sync service started
2025-07-16 15:03:46,842 - streamvault - INFO - Initializing background services...
2025-07-16 15:03:46,842 - streamvault - INFO - Initializing background queue service...
2025-07-16 15:03:46,842 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 15:03:46,843 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 15:03:46,843 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 15:03:46,843 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 15:03:46,844 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 15:03:46,844 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 15:03:46,845 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16 15:03:46,845 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16 15:03:46,845 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 15:03:46,846 - streamvault - INFO - Background services initialized successfully
2025-07-16 15:03:46,846 - streamvault - INFO - Background queue service started
2025-07-16 15:03:46,846 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 15:03:46,846 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 15:03:46,848 - streamvault - INFO - Application startup complete
2025-07-16 15:03:46,848 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 15:03:46,852 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 15:03:46,852 - streamvault - INFO - Worker worker-0 started
2025-07-16 15:03:46,853 - streamvault - INFO - Worker worker-1 started
2025-07-16 15:03:46,853 - streamvault - INFO - Worker worker-2 started
2025-07-16 15:03:46,854 - streamvault - INFO - Dependency worker started
2025-07-16 15:04:16,878 - streamvault - INFO - Starting delayed initial image sync for all existing entities...
2025-07-16 15:04:16,879 - streamvault - INFO - Requested sync for 0 streamers
2025-07-16 15:04:16,881 - streamvault - INFO - Requested sync for 0 popular categories
2025-07-16 15:04:16,881 - streamvault - INFO - Delayed initial image sync completed
2025-07-16 15:04:51,015 - streamvault - INFO - Starting application initialization...
2025-07-16 15:04:51,052 - streamvault - INFO - Updating migrations table schema
2025-07-16 15:04:51,053 - streamvault - ERROR - Error creating migrations table: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 276, in initialize_migrations_table
    session.execute(text("SELECT script_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT script_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 294, in initialize_migrations_table
    session.execute(text("SELECT migration_name FROM migrations LIMIT 1"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: SELECT migration_name FROM migrations LIMIT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 301, in initialize_migrations_table
    session.execute(text("ALTER TABLE migrations ADD COLUMN script_name VARCHAR"))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: ALTER TABLE migrations ADD COLUMN script_name VARCHAR]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,073 - streamvault - INFO - Found 0 previously applied migrations
2025-07-16 15:04:51,074 - streamvault - INFO - Found 13 pending migrations to apply
2025-07-16 15:04:51,074 - streamvault - INFO - Running migration: 20250522_add_stream_indices.py
2025-07-16 15:04:51,094 - streamvault - INFO - Successfully ran migration: 20250522_add_stream_indices.py
2025-07-16 15:04:51,095 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250522_add_stream_indices.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,097 - streamvault - INFO - Running migration: 20250609160908_add_recording_path_to_streams.py
2025-07-16 15:04:51,121 - streamvault - ERROR - Error running migration C:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
            SELECT COUNT(*) 
            FROM information_schema.columns 
            WHERE table_name = 'streams' 
            AND column_name = 'recording_path'
        ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: information_schema.columns

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "C:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250609160908_add_recording_path_to_streams.py", line 29, in run_migration
    result = session.execute(text("""
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
            SELECT COUNT(*) 
            FROM information_schema.columns 
            WHERE table_name = 'streams' 
            AND column_name = 'recording_path'
        ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,123 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250609160908_add_recording_path_to_streams.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,124 - streamvault - INFO - Running migration: 20250617_add_proxy_settings.py
2025-07-16 15:04:51,274 - streamvault - INFO - Running simplified migration: 20250617_add_proxy_settings.py
2025-07-16 15:04:51,276 - streamvault - WARNING - Error adding column http_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'http_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,276 - streamvault - WARNING - Error adding column https_proxy to global_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'global_settings' AND column_name = 'https_proxy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,278 - streamvault - INFO - Successfully ran migration: 20250617_add_proxy_settings.py
2025-07-16 15:04:51,279 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250617_add_proxy_settings.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,281 - streamvault - INFO - Running migration: 20250620_add_push_subscriptions.py
2025-07-16 15:04:51,306 - streamvault - ERROR - Error running migration C:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py: (sqlite3.OperationalError) near "OR": syntax error
[SQL: 
        CREATE OR REPLACE FUNCTION update_updated_at_column()
        RETURNS TRIGGER AS $$
        BEGIN
            NEW.updated_at = CURRENT_TIMESTAMP;
            RETURN NEW;
        END;
        $$ language 'plpgsql';
        
        DROP TRIGGER IF EXISTS update_push_subscriptions_updated_at ON push_subscriptions;
        
        CREATE TRIGGER update_push_subscriptions_updated_at
            BEFORE UPDATE ON push_subscriptions
            FOR EACH ROW
            EXECUTE FUNCTION update_updated_at_column();
        ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: near "OR": syntax error

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 237, in run_migration_script
    migration_module.run_migration()
  File "C:\Users\max.ebert\Documents\privat\StreamVault\migrations\20250620_add_push_subscriptions.py", line 83, in run_migration
    session.execute(text(trigger_sql))
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) near "OR": syntax error
[SQL: 
        CREATE OR REPLACE FUNCTION update_updated_at_column()
        RETURNS TRIGGER AS $$
        BEGIN
            NEW.updated_at = CURRENT_TIMESTAMP;
            RETURN NEW;
        END;
        $$ language 'plpgsql';
        
        DROP TRIGGER IF EXISTS update_push_subscriptions_updated_at ON push_subscriptions;
        
        CREATE TRIGGER update_push_subscriptions_updated_at
            BEFORE UPDATE ON push_subscriptions
            FOR EACH ROW
            EXECUTE FUNCTION update_updated_at_column();
        ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,309 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_push_subscriptions.py', False)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,310 - streamvault - INFO - Running migration: 20250620_add_system_config.py
2025-07-16 15:04:51,328 - streamvault - INFO - Running simplified migration: 20250620_add_system_config.py
2025-07-16 15:04:51,328 - streamvault - INFO - Starting system_config table migration...
2025-07-16 15:04:51,332 - streamvault - INFO - system_config table already exists, skipping migration
2025-07-16 15:04:51,332 - streamvault - INFO - Successfully ran migration: 20250620_add_system_config.py
2025-07-16 15:04:51,333 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250620_add_system_config.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,335 - streamvault - INFO - Running migration: 20250625_add_recording_model.py
2025-07-16 15:04:51,357 - streamvault - INFO - Running simplified migration: 20250625_add_recording_model.py
2025-07-16 15:04:51,357 - streamvault - INFO - Successfully ran migration: 20250625_add_recording_model.py
2025-07-16 15:04:51,358 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250625_add_recording_model.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,359 - streamvault - INFO - Running migration: 20250702_setup_category_images.py
2025-07-16 15:04:51,378 - streamvault - INFO - Running simplified migration: 20250702_setup_category_images.py
2025-07-16 15:04:51,378 - streamvault - INFO - Created category images directory: app\frontend\public\images\categories
2025-07-16 15:04:51,381 - streamvault - INFO - No existing categories found in database
2025-07-16 15:04:51,381 - streamvault - INFO - Category images migration completed successfully
2025-07-16 15:04:51,382 - streamvault - INFO - Successfully ran migration: 20250702_setup_category_images.py
2025-07-16 15:04:51,383 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250702_setup_category_images.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,384 - streamvault - INFO - Running migration: 20250714_add_active_recordings_state.py
2025-07-16 15:04:51,399 - streamvault - INFO - Running simplified migration: 20250714_add_active_recordings_state.py
2025-07-16 15:04:51,406 - streamvault - DEBUG - Could not create unique constraint: (sqlite3.OperationalError) near "CONSTRAINT": syntax error
[SQL: 
                ALTER TABLE active_recordings_state 
                ADD CONSTRAINT active_recordings_state_stream_id_key UNIQUE (stream_id)
            ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,406 - streamvault - DEBUG - Could not check streams table: (sqlite3.OperationalError) no such table: information_schema.tables
[SQL: SELECT 1 FROM information_schema.tables WHERE table_name = 'streams']
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,406 - streamvault - DEBUG - Could not check recordings table: (sqlite3.OperationalError) no such table: information_schema.tables
[SQL: SELECT 1 FROM information_schema.tables WHERE table_name = 'recordings']
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,418 - streamvault - INFO -    • Persistent recording state across restarts
2025-07-16 15:04:51,419 - streamvault - INFO -    • Automatic recovery of interrupted recordings
2025-07-16 15:04:51,419 - streamvault - INFO -    • Heartbeat monitoring for stale process detection
2025-07-16 15:04:51,419 - streamvault - INFO -    • Production-ready container deployment support
2025-07-16 15:04:51,419 - streamvault - INFO - Successfully ran migration: 20250714_add_active_recordings_state.py
2025-07-16 15:04:51,420 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_active_recordings_state.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,422 - streamvault - INFO - Running migration: 20250714_add_database_indexes.py
2025-07-16 15:04:51,439 - streamvault - INFO - Running simplified migration: 20250714_add_database_indexes.py
2025-07-16 15:04:51,455 - streamvault - INFO -    • 90%+ reduction in active stream lookup time
2025-07-16 15:04:51,455 - streamvault - INFO -    • 70%+ reduction in recent streams query time
2025-07-16 15:04:51,455 - streamvault - INFO -    • 80%+ reduction in recording status check time
2025-07-16 15:04:51,455 - streamvault - INFO -    • 85%+ reduction in live streamer filtering time
2025-07-16 15:04:51,455 - streamvault - INFO - Successfully ran migration: 20250714_add_database_indexes.py
2025-07-16 15:04:51,456 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250714_add_database_indexes.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,457 - streamvault - INFO - Running migration: 20250715_add_episode_number_to_streams.py
2025-07-16 15:04:51,472 - streamvault - INFO - Running simplified migration: 20250715_add_episode_number_to_streams.py
2025-07-16 15:04:51,472 - streamvault - INFO - Column episode_number already exists in streams table
2025-07-16 15:04:51,473 - streamvault - INFO - Successfully ran migration: 20250715_add_episode_number_to_streams.py
2025-07-16 15:04:51,473 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('20250715_add_episode_number_to_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,474 - streamvault - INFO - Running migration: add_cleanup_policy.py
2025-07-16 15:04:51,486 - streamvault - INFO - Running simplified migration: add_cleanup_policy.py
2025-07-16 15:04:51,488 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,488 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,488 - streamvault - INFO - Successfully ran migration: add_cleanup_policy.py
2025-07-16 15:04:51,489 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,490 - streamvault - INFO - Running migration: add_cleanup_policy_v2.py
2025-07-16 15:04:51,504 - streamvault - INFO - Running simplified migration: add_cleanup_policy_v2.py
2025-07-16 15:04:51,505 - streamvault - WARNING - Error adding column cleanup_policy to recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,506 - streamvault - WARNING - Error adding column cleanup_policy to streamer_recording_settings: (sqlite3.OperationalError) no such table: information_schema.columns
[SQL: 
                                    SELECT column_name 
                                    FROM information_schema.columns 
                                    WHERE table_name = 'streamer_recording_settings' AND column_name = 'cleanup_policy'
                                ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,506 - streamvault - INFO - Successfully ran migration: add_cleanup_policy_v2.py
2025-07-16 15:04:51,507 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_cleanup_policy_v2.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,508 - streamvault - INFO - Running migration: add_max_streams.py
2025-07-16 15:04:51,524 - streamvault - INFO - Successfully ran migration: add_max_streams.py
2025-07-16 15:04:51,525 - streamvault - ERROR - Error recording migration: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: migrations

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\max.ebert\Documents\privat\StreamVault\app\services\migration_service.py", line 316, in record_migration
    session.execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\orm\session.py", line 2256, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\max.ebert\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: migrations
[SQL: 
                    INSERT INTO migrations (script_name, applied_at, success) 
                    VALUES (?, NOW(), ?)
                    ON CONFLICT (script_name) DO NOTHING
                    ]
[parameters: ('add_max_streams.py', True)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 15:04:51,534 - streamvault - DEBUG - Initializing event registry
2025-07-16 15:04:51,535 - streamvault - WARNING - psutil not available - process monitoring will be limited
2025-07-16 15:04:51,538 - streamvault - DEBUG - Notifications disabled
2025-07-16 15:04:51,538 - streamvault - DEBUG - Initializing EventSub with callback URL: http://localhost:8000/eventsub
2025-07-16 15:04:51,538 - streamvault - INFO - EventSub initialized successfully
2025-07-16 15:04:51,538 - streamvault - DEBUG - Event registry initialization complete
2025-07-16 15:04:51,539 - streamvault - DEBUG - EventSub already initialized, skipping...
2025-07-16 15:04:51,539 - streamvault - INFO - EventSub initialized successfully
2025-07-16 15:04:51,539 - streamvault - INFO - Recording service reference obtained for graceful shutdown
2025-07-16 15:04:51,540 - streamvault - INFO - Starting log cleanup. Retention: streamer logs=14 days, system logs=30 days
2025-07-16 15:04:51,540 - streamvault - INFO - Cleaned \app\logs\ffmpeg: deleted 0 log files, kept 2
2025-07-16 15:04:51,540 - streamvault - INFO - Cleaned \app\logs\streamlink: deleted 0 log files, kept 1
2025-07-16 15:04:51,541 - streamvault - INFO - Cleaned \app\logs\app: deleted 0 log files, kept 1
2025-07-16 15:04:51,541 - streamvault - INFO - Log cleanup completed
2025-07-16 15:04:51,541 - streamvault - INFO - Log cleanup service started
2025-07-16 15:04:51,541 - streamvault - INFO - Recording cleanup service started
2025-07-16 15:04:51,541 - streamvault - INFO - Image sync worker started
2025-07-16 15:04:51,541 - streamvault - INFO - Image sync service started
2025-07-16 15:04:51,542 - streamvault - INFO - Initializing background services...
2025-07-16 15:04:51,542 - streamvault - INFO - Initializing background queue service...
2025-07-16 15:04:51,542 - streamvault - INFO - Registered handler for task type: metadata_generation
2025-07-16 15:04:51,542 - streamvault - INFO - Registered handler for task type: chapters_generation
2025-07-16 15:04:51,542 - streamvault - INFO - Registered handler for task type: mp4_remux
2025-07-16 15:04:51,542 - streamvault - INFO - Registered handler for task type: mp4_validation
2025-07-16 15:04:51,542 - streamvault - INFO - Registered handler for task type: thumbnail_generation
2025-07-16 15:04:51,542 - streamvault - INFO - Registered handler for task type: cleanup
2025-07-16 15:04:51,543 - streamvault - INFO - WorkerManager started with 3 workers
2025-07-16 15:04:51,543 - streamvault - INFO - TaskQueueManager started with dependency management
2025-07-16 15:04:51,543 - streamvault - INFO - Background queue service initialized successfully
2025-07-16 15:04:51,543 - streamvault - INFO - Background services initialized successfully
2025-07-16 15:04:51,543 - streamvault - INFO - Background queue service started
2025-07-16 15:04:51,543 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 15:04:51,543 - streamvault - INFO - WebSocket broadcast task started
2025-07-16 15:04:51,543 - streamvault - INFO - Application startup complete
2025-07-16 15:04:51,544 - streamvault - INFO - Starting scheduled cleanup for all streamers
2025-07-16 15:04:51,545 - streamvault - INFO - Scheduled cleanup completed for 0/0 streamers. Deleted 0 recordings in total.
2025-07-16 15:04:51,545 - streamvault - INFO - Worker worker-0 started
2025-07-16 15:04:51,545 - streamvault - INFO - Worker worker-1 started
2025-07-16 15:04:51,545 - streamvault - INFO - Worker worker-2 started
2025-07-16 15:04:51,545 - streamvault - INFO - Dependency worker started
2025-07-16 15:06:14,156 - streamvault - INFO - WebSocket broadcast loop cancelled
2025-07-16 15:06:14,156 - streamvault - INFO - WebSocket broadcast task stopped
2025-07-16 15:06:14,170 - streamvault - INFO - Dependency worker cancelled
2025-07-16 15:06:14,170 - streamvault - INFO - Dependency worker stopped
2025-07-16 15:06:14,170 - streamvault - INFO - Worker worker-0 cancelled
2025-07-16 15:06:14,171 - streamvault - INFO - Worker worker-0 stopped
2025-07-16 15:06:14,171 - streamvault - INFO - Worker worker-1 cancelled
2025-07-16 15:06:14,171 - streamvault - INFO - Worker worker-1 stopped
2025-07-16 15:06:14,172 - streamvault - INFO - Worker worker-2 cancelled
2025-07-16 15:06:14,172 - streamvault - INFO - Worker worker-2 stopped
2025-07-16 15:06:14,172 - streamvault - INFO - WorkerManager stopped
2025-07-16 15:06:14,173 - streamvault - INFO - Task dependency manager shut down
2025-07-16 15:06:14,173 - streamvault - INFO - TaskQueueManager stopped
2025-07-16 15:06:14,203 - streamvault - INFO - Image sync worker stopped
