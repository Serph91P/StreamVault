(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();const hr="modulepreload",yr=function(e){return"/"+e},xo={},Fa=function(t,s,o){let a=Promise.resolve();if(s&&s.length>0){let r=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=r(s.map(d=>{if(d=yr(d),d in xo)return;xo[d]=!0;const u=d.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const _=document.createElement("link");if(_.rel=u?"stylesheet":hr,u||(_.as="script"),_.crossOrigin="",_.href=d,c&&_.setAttribute("nonce",c),document.head.appendChild(_),u)return new Promise((h,S)=>{_.addEventListener("load",h),_.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return a.then(r=>{for(const l of r||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function so(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const xe={},as=[],bt=()=>{},_r=()=>!1,dn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),no=e=>e.startsWith("onUpdate:"),Me=Object.assign,oo=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},br=Object.prototype.hasOwnProperty,Ce=(e,t)=>br.call(e,t),ue=Array.isArray,is=e=>Ms(e)==="[object Map]",vs=e=>Ms(e)==="[object Set]",To=e=>Ms(e)==="[object Date]",_e=e=>typeof e=="function",Le=e=>typeof e=="string",wt=e=>typeof e=="symbol",Te=e=>e!==null&&typeof e=="object",Oa=e=>(Te(e)||_e(e))&&_e(e.then)&&_e(e.catch),La=Object.prototype.toString,Ms=e=>La.call(e),wr=e=>Ms(e).slice(8,-1),Da=e=>Ms(e)==="[object Object]",ao=e=>Le(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ws=so(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fn=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Sr=/-(\w)/g,it=fn(e=>e.replace(Sr,(t,s)=>s?s.toUpperCase():"")),$r=/\B([A-Z])/g,ts=fn(e=>e.replace($r,"-$1").toLowerCase()),pn=fn(e=>e.charAt(0).toUpperCase()+e.slice(1)),xn=fn(e=>e?`on${pn(e)}`:""),Mt=(e,t)=>!Object.is(e,t),Ys=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Ma=(e,t,s,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:s})},tn=e=>{const t=parseFloat(e);return isNaN(t)?e:t},kr=e=>{const t=Le(e)?Number(e):NaN;return isNaN(t)?e:t};let Ao;const gn=()=>Ao||(Ao=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Us(e){if(ue(e)){const t={};for(let s=0;s<e.length;s++){const o=e[s],a=Le(o)?Tr(o):Us(o);if(a)for(const i in a)t[i]=a[i]}return t}else if(Le(e)||Te(e))return e}const Cr=/;(?![^(]*\))/g,Er=/:([^]+)/,xr=/\/\*[^]*?\*\//g;function Tr(e){const t={};return e.replace(xr,"").split(Cr).forEach(s=>{if(s){const o=s.split(Er);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function ce(e){let t="";if(Le(e))t=e;else if(ue(e))for(let s=0;s<e.length;s++){const o=ce(e[s]);o&&(t+=o+" ")}else if(Te(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const Ar="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Pr=so(Ar);function Ua(e){return!!e||e===""}function Rr(e,t){if(e.length!==t.length)return!1;let s=!0;for(let o=0;s&&o<e.length;o++)s=Vs(e[o],t[o]);return s}function Vs(e,t){if(e===t)return!0;let s=To(e),o=To(t);if(s||o)return s&&o?e.getTime()===t.getTime():!1;if(s=wt(e),o=wt(t),s||o)return e===t;if(s=ue(e),o=ue(t),s||o)return s&&o?Rr(e,t):!1;if(s=Te(e),o=Te(t),s||o){if(!s||!o)return!1;const a=Object.keys(e).length,i=Object.keys(t).length;if(a!==i)return!1;for(const r in e){const l=e.hasOwnProperty(r),c=t.hasOwnProperty(r);if(l&&!c||!l&&c||!Vs(e[r],t[r]))return!1}}return String(e)===String(t)}function io(e,t){return e.findIndex(s=>Vs(s,t))}const Va=e=>!!(e&&e.__v_isRef===!0),x=e=>Le(e)?e:e==null?"":ue(e)||Te(e)&&(e.toString===La||!_e(e.toString))?Va(e)?x(e.value):JSON.stringify(e,ja,2):String(e),ja=(e,t)=>Va(t)?ja(e,t.value):is(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[o,a],i)=>(s[Tn(o,i)+" =>"]=a,s),{})}:vs(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Tn(s))}:wt(t)?Tn(t):Te(t)&&!ue(t)&&!Da(t)?String(t):t,Tn=(e,t="")=>{var s;return wt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let st;class Ha{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=st,!t&&st&&(this.index=(st.scopes||(st.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=st;try{return st=this,t()}finally{st=s}}}on(){st=this}off(){st=this.parent}stop(t){if(this._active){this._active=!1;let s,o;for(s=0,o=this.effects.length;s<o;s++)this.effects[s].stop();for(this.effects.length=0,s=0,o=this.cleanups.length;s<o;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,o=this.scopes.length;s<o;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function Ir(e){return new Ha(e)}function Nr(){return st}let Pe;const An=new WeakSet;class Ba{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,st&&st.active&&st.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,An.has(this)&&(An.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||qa(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Po(this),Ga(this);const t=Pe,s=rt;Pe=this,rt=!0;try{return this.fn()}finally{Ka(this),Pe=t,rt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)co(t);this.deps=this.depsTail=void 0,Po(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?An.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){jn(this)&&this.run()}get dirty(){return jn(this)}}let Wa=0,Ss,$s;function qa(e,t=!1){if(e.flags|=8,t){e.next=$s,$s=e;return}e.next=Ss,Ss=e}function ro(){Wa++}function lo(){if(--Wa>0)return;if($s){let t=$s;for($s=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Ss;){let t=Ss;for(Ss=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=s}}if(e)throw e}function Ga(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ka(e){let t,s=e.depsTail,o=s;for(;o;){const a=o.prevDep;o.version===-1?(o===s&&(s=a),co(o),Fr(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=a}e.deps=t,e.depsTail=s}function jn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(za(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function za(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===As))return;e.globalVersion=As;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!jn(e)){e.flags&=-3;return}const s=Pe,o=rt;Pe=e,rt=!0;try{Ga(e);const a=e.fn(e._value);(t.version===0||Mt(a,e._value))&&(e._value=a,t.version++)}catch(a){throw t.version++,a}finally{Pe=s,rt=o,Ka(e),e.flags&=-3}}function co(e,t=!1){const{dep:s,prevSub:o,nextSub:a}=e;if(o&&(o.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=o,e.nextSub=void 0),s.subs===e&&(s.subs=o,!o&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)co(i,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function Fr(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let rt=!0;const Ja=[];function Ht(){Ja.push(rt),rt=!1}function Bt(){const e=Ja.pop();rt=e===void 0?!0:e}function Po(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Pe;Pe=void 0;try{t()}finally{Pe=s}}}let As=0;class Or{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class uo{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Pe||!rt||Pe===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Pe)s=this.activeLink=new Or(Pe,this),Pe.deps?(s.prevDep=Pe.depsTail,Pe.depsTail.nextDep=s,Pe.depsTail=s):Pe.deps=Pe.depsTail=s,Ya(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const o=s.nextDep;o.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=o),s.prevDep=Pe.depsTail,s.nextDep=void 0,Pe.depsTail.nextDep=s,Pe.depsTail=s,Pe.deps===s&&(Pe.deps=o)}return s}trigger(t){this.version++,As++,this.notify(t)}notify(t){ro();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{lo()}}}function Ya(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Ya(o)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Hn=new WeakMap,Zt=Symbol(""),Bn=Symbol(""),Ps=Symbol("");function He(e,t,s){if(rt&&Pe){let o=Hn.get(e);o||Hn.set(e,o=new Map);let a=o.get(s);a||(o.set(s,a=new uo),a.map=o,a.key=s),a.track()}}function Ct(e,t,s,o,a,i){const r=Hn.get(e);if(!r){As++;return}const l=c=>{c&&c.trigger()};if(ro(),t==="clear")r.forEach(l);else{const c=ue(e),d=c&&ao(s);if(c&&s==="length"){const u=Number(o);r.forEach((f,_)=>{(_==="length"||_===Ps||!wt(_)&&_>=u)&&l(f)})}else switch((s!==void 0||r.has(void 0))&&l(r.get(s)),d&&l(r.get(Ps)),t){case"add":c?d&&l(r.get("length")):(l(r.get(Zt)),is(e)&&l(r.get(Bn)));break;case"delete":c||(l(r.get(Zt)),is(e)&&l(r.get(Bn)));break;case"set":is(e)&&l(r.get(Zt));break}}lo()}function ss(e){const t=Se(e);return t===e?t:(He(t,"iterate",Ps),at(e)?t:t.map(Be))}function vn(e){return He(e=Se(e),"iterate",Ps),e}const Lr={__proto__:null,[Symbol.iterator](){return Pn(this,Symbol.iterator,Be)},concat(...e){return ss(this).concat(...e.map(t=>ue(t)?ss(t):t))},entries(){return Pn(this,"entries",e=>(e[1]=Be(e[1]),e))},every(e,t){return St(this,"every",e,t,void 0,arguments)},filter(e,t){return St(this,"filter",e,t,s=>s.map(Be),arguments)},find(e,t){return St(this,"find",e,t,Be,arguments)},findIndex(e,t){return St(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return St(this,"findLast",e,t,Be,arguments)},findLastIndex(e,t){return St(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return St(this,"forEach",e,t,void 0,arguments)},includes(...e){return Rn(this,"includes",e)},indexOf(...e){return Rn(this,"indexOf",e)},join(e){return ss(this).join(e)},lastIndexOf(...e){return Rn(this,"lastIndexOf",e)},map(e,t){return St(this,"map",e,t,void 0,arguments)},pop(){return hs(this,"pop")},push(...e){return hs(this,"push",e)},reduce(e,...t){return Ro(this,"reduce",e,t)},reduceRight(e,...t){return Ro(this,"reduceRight",e,t)},shift(){return hs(this,"shift")},some(e,t){return St(this,"some",e,t,void 0,arguments)},splice(...e){return hs(this,"splice",e)},toReversed(){return ss(this).toReversed()},toSorted(e){return ss(this).toSorted(e)},toSpliced(...e){return ss(this).toSpliced(...e)},unshift(...e){return hs(this,"unshift",e)},values(){return Pn(this,"values",Be)}};function Pn(e,t,s){const o=vn(e),a=o[t]();return o!==e&&!at(e)&&(a._next=a.next,a.next=()=>{const i=a._next();return i.value&&(i.value=s(i.value)),i}),a}const Dr=Array.prototype;function St(e,t,s,o,a,i){const r=vn(e),l=r!==e&&!at(e),c=r[t];if(c!==Dr[t]){const f=c.apply(e,i);return l?Be(f):f}let d=s;r!==e&&(l?d=function(f,_){return s.call(this,Be(f),_,e)}:s.length>2&&(d=function(f,_){return s.call(this,f,_,e)}));const u=c.call(r,d,o);return l&&a?a(u):u}function Ro(e,t,s,o){const a=vn(e);let i=s;return a!==e&&(at(e)?s.length>3&&(i=function(r,l,c){return s.call(this,r,l,c,e)}):i=function(r,l,c){return s.call(this,r,Be(l),c,e)}),a[t](i,...o)}function Rn(e,t,s){const o=Se(e);He(o,"iterate",Ps);const a=o[t](...s);return(a===-1||a===!1)&&go(s[0])?(s[0]=Se(s[0]),o[t](...s)):a}function hs(e,t,s=[]){Ht(),ro();const o=Se(e)[t].apply(e,s);return lo(),Bt(),o}const Mr=so("__proto__,__v_isRef,__isVue"),Qa=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(wt));function Ur(e){wt(e)||(e=String(e));const t=Se(this);return He(t,"has",e),t.hasOwnProperty(e)}class Za{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,o){if(s==="__v_skip")return t.__v_skip;const a=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!a;if(s==="__v_isReadonly")return a;if(s==="__v_isShallow")return i;if(s==="__v_raw")return o===(a?i?Jr:si:i?ti:ei).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const r=ue(t);if(!a){let c;if(r&&(c=Lr[s]))return c;if(s==="hasOwnProperty")return Ur}const l=Reflect.get(t,s,qe(t)?t:o);return(wt(s)?Qa.has(s):Mr(s))||(a||He(t,"get",s),i)?l:qe(l)?r&&ao(s)?l:l.value:Te(l)?a?oi(l):Vt(l):l}}class Xa extends Za{constructor(t=!1){super(!1,t)}set(t,s,o,a){let i=t[s];if(!this._isShallow){const c=Xt(i);if(!at(o)&&!Xt(o)&&(i=Se(i),o=Se(o)),!ue(t)&&qe(i)&&!qe(o))return c?!1:(i.value=o,!0)}const r=ue(t)&&ao(s)?Number(s)<t.length:Ce(t,s),l=Reflect.set(t,s,o,qe(t)?t:a);return t===Se(a)&&(r?Mt(o,i)&&Ct(t,"set",s,o):Ct(t,"add",s,o)),l}deleteProperty(t,s){const o=Ce(t,s);t[s];const a=Reflect.deleteProperty(t,s);return a&&o&&Ct(t,"delete",s,void 0),a}has(t,s){const o=Reflect.has(t,s);return(!wt(s)||!Qa.has(s))&&He(t,"has",s),o}ownKeys(t){return He(t,"iterate",ue(t)?"length":Zt),Reflect.ownKeys(t)}}class Vr extends Za{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const jr=new Xa,Hr=new Vr,Br=new Xa(!0);const Wn=e=>e,qs=e=>Reflect.getPrototypeOf(e);function Wr(e,t,s){return function(...o){const a=this.__v_raw,i=Se(a),r=is(i),l=e==="entries"||e===Symbol.iterator&&r,c=e==="keys"&&r,d=a[e](...o),u=s?Wn:t?qn:Be;return!t&&He(i,"iterate",c?Bn:Zt),{next(){const{value:f,done:_}=d.next();return _?{value:f,done:_}:{value:l?[u(f[0]),u(f[1])]:u(f),done:_}},[Symbol.iterator](){return this}}}}function Gs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function qr(e,t){const s={get(a){const i=this.__v_raw,r=Se(i),l=Se(a);e||(Mt(a,l)&&He(r,"get",a),He(r,"get",l));const{has:c}=qs(r),d=t?Wn:e?qn:Be;if(c.call(r,a))return d(i.get(a));if(c.call(r,l))return d(i.get(l));i!==r&&i.get(a)},get size(){const a=this.__v_raw;return!e&&He(Se(a),"iterate",Zt),Reflect.get(a,"size",a)},has(a){const i=this.__v_raw,r=Se(i),l=Se(a);return e||(Mt(a,l)&&He(r,"has",a),He(r,"has",l)),a===l?i.has(a):i.has(a)||i.has(l)},forEach(a,i){const r=this,l=r.__v_raw,c=Se(l),d=t?Wn:e?qn:Be;return!e&&He(c,"iterate",Zt),l.forEach((u,f)=>a.call(i,d(u),d(f),r))}};return Me(s,e?{add:Gs("add"),set:Gs("set"),delete:Gs("delete"),clear:Gs("clear")}:{add(a){!t&&!at(a)&&!Xt(a)&&(a=Se(a));const i=Se(this);return qs(i).has.call(i,a)||(i.add(a),Ct(i,"add",a,a)),this},set(a,i){!t&&!at(i)&&!Xt(i)&&(i=Se(i));const r=Se(this),{has:l,get:c}=qs(r);let d=l.call(r,a);d||(a=Se(a),d=l.call(r,a));const u=c.call(r,a);return r.set(a,i),d?Mt(i,u)&&Ct(r,"set",a,i):Ct(r,"add",a,i),this},delete(a){const i=Se(this),{has:r,get:l}=qs(i);let c=r.call(i,a);c||(a=Se(a),c=r.call(i,a)),l&&l.call(i,a);const d=i.delete(a);return c&&Ct(i,"delete",a,void 0),d},clear(){const a=Se(this),i=a.size!==0,r=a.clear();return i&&Ct(a,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(a=>{s[a]=Wr(a,e,t)}),s}function fo(e,t){const s=qr(e,t);return(o,a,i)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?o:Reflect.get(Ce(s,a)&&a in o?s:o,a,i)}const Gr={get:fo(!1,!1)},Kr={get:fo(!1,!0)},zr={get:fo(!0,!1)};const ei=new WeakMap,ti=new WeakMap,si=new WeakMap,Jr=new WeakMap;function Yr(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Qr(e){return e.__v_skip||!Object.isExtensible(e)?0:Yr(wr(e))}function Vt(e){return Xt(e)?e:po(e,!1,jr,Gr,ei)}function ni(e){return po(e,!1,Br,Kr,ti)}function oi(e){return po(e,!0,Hr,zr,si)}function po(e,t,s,o,a){if(!Te(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=a.get(e);if(i)return i;const r=Qr(e);if(r===0)return e;const l=new Proxy(e,r===2?o:s);return a.set(e,l),l}function rs(e){return Xt(e)?rs(e.__v_raw):!!(e&&e.__v_isReactive)}function Xt(e){return!!(e&&e.__v_isReadonly)}function at(e){return!!(e&&e.__v_isShallow)}function go(e){return e?!!e.__v_raw:!1}function Se(e){const t=e&&e.__v_raw;return t?Se(t):e}function ai(e){return!Ce(e,"__v_skip")&&Object.isExtensible(e)&&Ma(e,"__v_skip",!0),e}const Be=e=>Te(e)?Vt(e):e,qn=e=>Te(e)?oi(e):e;function qe(e){return e?e.__v_isRef===!0:!1}function F(e){return ii(e,!1)}function Zr(e){return ii(e,!0)}function ii(e,t){return qe(e)?e:new Xr(e,t)}class Xr{constructor(t,s){this.dep=new uo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:Se(t),this._value=s?t:Be(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,o=this.__v_isShallow||at(t)||Xt(t);t=o?t:Se(t),Mt(t,s)&&(this._rawValue=t,this._value=o?t:Be(t),this.dep.trigger())}}function le(e){return qe(e)?e.value:e}const el={get:(e,t,s)=>t==="__v_raw"?e:le(Reflect.get(e,t,s)),set:(e,t,s,o)=>{const a=e[t];return qe(a)&&!qe(s)?(a.value=s,!0):Reflect.set(e,t,s,o)}};function ri(e){return rs(e)?e:new Proxy(e,el)}class tl{constructor(t,s,o){this.fn=t,this.setter=s,this._value=void 0,this.dep=new uo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=As-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Pe!==this)return qa(this,!0),!0}get value(){const t=this.dep.track();return za(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function sl(e,t,s=!1){let o,a;return _e(e)?o=e:(o=e.get,a=e.set),new tl(o,a,s)}const Ks={},sn=new WeakMap;let Yt;function nl(e,t=!1,s=Yt){if(s){let o=sn.get(s);o||sn.set(s,o=[]),o.push(e)}}function ol(e,t,s=xe){const{immediate:o,deep:a,once:i,scheduler:r,augmentJob:l,call:c}=s,d=b=>a?b:at(b)||a===!1||a===0?Et(b,1):Et(b);let u,f,_,h,S=!1,k=!1;if(qe(e)?(f=()=>e.value,S=at(e)):rs(e)?(f=()=>d(e),S=!0):ue(e)?(k=!0,S=e.some(b=>rs(b)||at(b)),f=()=>e.map(b=>{if(qe(b))return b.value;if(rs(b))return d(b);if(_e(b))return c?c(b,2):b()})):_e(e)?t?f=c?()=>c(e,2):e:f=()=>{if(_){Ht();try{_()}finally{Bt()}}const b=Yt;Yt=u;try{return c?c(e,3,[h]):e(h)}finally{Yt=b}}:f=bt,t&&a){const b=f,p=a===!0?1/0:a;f=()=>Et(b(),p)}const N=Nr(),R=()=>{u.stop(),N&&N.active&&oo(N.effects,u)};if(i&&t){const b=t;t=(...p)=>{b(...p),R()}}let y=k?new Array(e.length).fill(Ks):Ks;const v=b=>{if(!(!(u.flags&1)||!u.dirty&&!b))if(t){const p=u.run();if(a||S||(k?p.some((P,T)=>Mt(P,y[T])):Mt(p,y))){_&&_();const P=Yt;Yt=u;try{const T=[p,y===Ks?void 0:k&&y[0]===Ks?[]:y,h];c?c(t,3,T):t(...T),y=p}finally{Yt=P}}}else u.run()};return l&&l(v),u=new Ba(f),u.scheduler=r?()=>r(v,!1):v,h=b=>nl(b,!1,u),_=u.onStop=()=>{const b=sn.get(u);if(b){if(c)c(b,4);else for(const p of b)p();sn.delete(u)}},t?o?v(!0):y=u.run():r?r(v.bind(null,!0),!0):u.run(),R.pause=u.pause.bind(u),R.resume=u.resume.bind(u),R.stop=R,R}function Et(e,t=1/0,s){if(t<=0||!Te(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,qe(e))Et(e.value,t,s);else if(ue(e))for(let o=0;o<e.length;o++)Et(e[o],t,s);else if(vs(e)||is(e))e.forEach(o=>{Et(o,t,s)});else if(Da(e)){for(const o in e)Et(e[o],t,s);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&Et(e[o],t,s)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function js(e,t,s,o){try{return o?e(...o):e()}catch(a){mn(a,t,s)}}function ct(e,t,s,o){if(_e(e)){const a=js(e,t,s,o);return a&&Oa(a)&&a.catch(i=>{mn(i,t,s)}),a}if(ue(e)){const a=[];for(let i=0;i<e.length;i++)a.push(ct(e[i],t,s,o));return a}}function mn(e,t,s,o=!0){const a=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||xe;if(t){let l=t.parent;const c=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const u=l.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,c,d)===!1)return}l=l.parent}if(i){Ht(),js(i,null,10,[e,c,d]),Bt();return}}al(e,s,a,o,r)}function al(e,t,s,o=!0,a=!1){if(a)throw e;console.error(e)}const ze=[];let yt=-1;const ls=[];let Nt=null,ns=0;const li=Promise.resolve();let nn=null;function vo(e){const t=nn||li;return e?t.then(this?e.bind(this):e):t}function il(e){let t=yt+1,s=ze.length;for(;t<s;){const o=t+s>>>1,a=ze[o],i=Rs(a);i<e||i===e&&a.flags&2?t=o+1:s=o}return t}function mo(e){if(!(e.flags&1)){const t=Rs(e),s=ze[ze.length-1];!s||!(e.flags&2)&&t>=Rs(s)?ze.push(e):ze.splice(il(t),0,e),e.flags|=1,ci()}}function ci(){nn||(nn=li.then(di))}function rl(e){ue(e)?ls.push(...e):Nt&&e.id===-1?Nt.splice(ns+1,0,e):e.flags&1||(ls.push(e),e.flags|=1),ci()}function Io(e,t,s=yt+1){for(;s<ze.length;s++){const o=ze[s];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;ze.splice(s,1),s--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function ui(e){if(ls.length){const t=[...new Set(ls)].sort((s,o)=>Rs(s)-Rs(o));if(ls.length=0,Nt){Nt.push(...t);return}for(Nt=t,ns=0;ns<Nt.length;ns++){const s=Nt[ns];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Nt=null,ns=0}}const Rs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function di(e){try{for(yt=0;yt<ze.length;yt++){const t=ze[yt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),js(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;yt<ze.length;yt++){const t=ze[yt];t&&(t.flags&=-2)}yt=-1,ze.length=0,ui(),nn=null,(ze.length||ls.length)&&di()}}let Ze=null,fi=null;function on(e){const t=Ze;return Ze=e,fi=e&&e.type.__scopeId||null,t}function Re(e,t=Ze,s){if(!t||e._n)return e;const o=(...a)=>{o._d&&Bo(-1);const i=on(t);let r;try{r=e(...a)}finally{on(i),o._d&&Bo(1)}return r};return o._n=!0,o._c=!0,o._d=!0,o}function be(e,t){if(Ze===null)return e;const s=Sn(Ze),o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[i,r,l,c=xe]=t[a];i&&(_e(i)&&(i={mounted:i,updated:i}),i.deep&&Et(r),o.push({dir:i,instance:s,value:r,oldValue:void 0,arg:l,modifiers:c}))}return e}function Kt(e,t,s,o){const a=e.dirs,i=t&&t.dirs;for(let r=0;r<a.length;r++){const l=a[r];i&&(l.oldValue=i[r].value);let c=l.dir[o];c&&(Ht(),ct(c,s,8,[e.el,l,e,t]),Bt())}}const ll=Symbol("_vte"),pi=e=>e.__isTeleport,Ft=Symbol("_leaveCb"),zs=Symbol("_enterCb");function gi(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Fe(()=>{e.isMounted=!0}),_n(()=>{e.isUnmounting=!0}),e}const ot=[Function,Array],vi={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ot,onEnter:ot,onAfterEnter:ot,onEnterCancelled:ot,onBeforeLeave:ot,onLeave:ot,onAfterLeave:ot,onLeaveCancelled:ot,onBeforeAppear:ot,onAppear:ot,onAfterAppear:ot,onAppearCancelled:ot},mi=e=>{const t=e.subTree;return t.component?mi(t.component):t},cl={name:"BaseTransition",props:vi,setup(e,{slots:t}){const s=qi(),o=gi();return()=>{const a=t.default&&ho(t.default(),!0);if(!a||!a.length)return;const i=hi(a),r=Se(e),{mode:l}=r;if(o.isLeaving)return In(i);const c=No(i);if(!c)return In(i);let d=Is(c,r,o,s,f=>d=f);c.type!==Qe&&es(c,d);let u=s.subTree&&No(s.subTree);if(u&&u.type!==Qe&&!Qt(c,u)&&mi(s).type!==Qe){let f=Is(u,r,o,s);if(es(u,f),l==="out-in"&&c.type!==Qe)return o.isLeaving=!0,f.afterLeave=()=>{o.isLeaving=!1,s.job.flags&8||s.update(),delete f.afterLeave,u=void 0},In(i);l==="in-out"&&c.type!==Qe?f.delayLeave=(_,h,S)=>{const k=yi(o,u);k[String(u.key)]=u,_[Ft]=()=>{h(),_[Ft]=void 0,delete d.delayedLeave,u=void 0},d.delayedLeave=()=>{S(),delete d.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function hi(e){let t=e[0];if(e.length>1){for(const s of e)if(s.type!==Qe){t=s;break}}return t}const ul=cl;function yi(e,t){const{leavingVNodes:s}=e;let o=s.get(t.type);return o||(o=Object.create(null),s.set(t.type,o)),o}function Is(e,t,s,o,a){const{appear:i,mode:r,persisted:l=!1,onBeforeEnter:c,onEnter:d,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:_,onLeave:h,onAfterLeave:S,onLeaveCancelled:k,onBeforeAppear:N,onAppear:R,onAfterAppear:y,onAppearCancelled:v}=t,b=String(e.key),p=yi(s,e),P=(Q,V)=>{Q&&ct(Q,o,9,V)},T=(Q,V)=>{const L=V[1];P(Q,V),ue(Q)?Q.every(G=>G.length<=1)&&L():Q.length<=1&&L()},X={mode:r,persisted:l,beforeEnter(Q){let V=c;if(!s.isMounted)if(i)V=N||c;else return;Q[Ft]&&Q[Ft](!0);const L=p[b];L&&Qt(e,L)&&L.el[Ft]&&L.el[Ft](),P(V,[Q])},enter(Q){let V=d,L=u,G=f;if(!s.isMounted)if(i)V=R||d,L=y||u,G=v||f;else return;let ee=!1;const z=Q[zs]=D=>{ee||(ee=!0,D?P(G,[Q]):P(L,[Q]),X.delayedLeave&&X.delayedLeave(),Q[zs]=void 0)};V?T(V,[Q,z]):z()},leave(Q,V){const L=String(e.key);if(Q[zs]&&Q[zs](!0),s.isUnmounting)return V();P(_,[Q]);let G=!1;const ee=Q[Ft]=z=>{G||(G=!0,V(),z?P(k,[Q]):P(S,[Q]),Q[Ft]=void 0,p[L]===e&&delete p[L])};p[L]=e,h?T(h,[Q,ee]):ee()},clone(Q){const V=Is(Q,t,s,o,a);return a&&a(V),V}};return X}function In(e){if(hn(e))return e=jt(e),e.children=null,e}function No(e){if(!hn(e))return pi(e.type)&&e.children?hi(e.children):e;const{shapeFlag:t,children:s}=e;if(s){if(t&16)return s[0];if(t&32&&_e(s.default))return s.default()}}function es(e,t){e.shapeFlag&6&&e.component?(e.transition=t,es(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ho(e,t=!1,s){let o=[],a=0;for(let i=0;i<e.length;i++){let r=e[i];const l=s==null?r.key:String(s)+String(r.key!=null?r.key:i);r.type===he?(r.patchFlag&128&&a++,o=o.concat(ho(r.children,t,l))):(t||r.type!==Qe)&&o.push(l!=null?jt(r,{key:l}):r)}if(a>1)for(let i=0;i<o.length;i++)o[i].patchFlag=-2;return o}/*! #__NO_SIDE_EFFECTS__ */function Ne(e,t){return _e(e)?Me({name:e.name},t,{setup:e}):e}function _i(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function an(e,t,s,o,a=!1){if(ue(e)){e.forEach((S,k)=>an(S,t&&(ue(t)?t[k]:t),s,o,a));return}if(ks(o)&&!a){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&an(e,t,s,o.component.subTree);return}const i=o.shapeFlag&4?Sn(o.component):o.el,r=a?null:i,{i:l,r:c}=e,d=t&&t.r,u=l.refs===xe?l.refs={}:l.refs,f=l.setupState,_=Se(f),h=f===xe?()=>!1:S=>Ce(_,S);if(d!=null&&d!==c&&(Le(d)?(u[d]=null,h(d)&&(f[d]=null)):qe(d)&&(d.value=null)),_e(c))js(c,l,12,[r,u]);else{const S=Le(c),k=qe(c);if(S||k){const N=()=>{if(e.f){const R=S?h(c)?f[c]:u[c]:c.value;a?ue(R)&&oo(R,i):ue(R)?R.includes(i)||R.push(i):S?(u[c]=[i],h(c)&&(f[c]=u[c])):(c.value=[i],e.k&&(u[e.k]=c.value))}else S?(u[c]=r,h(c)&&(f[c]=r)):k&&(c.value=r,e.k&&(u[e.k]=r))};r?(N.id=-1,tt(N,s)):N()}}}gn().requestIdleCallback;gn().cancelIdleCallback;const ks=e=>!!e.type.__asyncLoader,hn=e=>e.type.__isKeepAlive;function dl(e,t){bi(e,"a",t)}function fl(e,t){bi(e,"da",t)}function bi(e,t,s=je){const o=e.__wdc||(e.__wdc=()=>{let a=s;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(yn(t,o,s),s){let a=s.parent;for(;a&&a.parent;)hn(a.parent.vnode)&&pl(o,t,s,a),a=a.parent}}function pl(e,t,s,o){const a=yn(t,e,o,!0);Wt(()=>{oo(o[t],a)},s)}function yn(e,t,s=je,o=!1){if(s){const a=s[e]||(s[e]=[]),i=t.__weh||(t.__weh=(...r)=>{Ht();const l=Hs(s),c=ct(t,s,e,r);return l(),Bt(),c});return o?a.unshift(i):a.push(i),i}}const At=e=>(t,s=je)=>{(!Fs||e==="sp")&&yn(e,(...o)=>t(...o),s)},gl=At("bm"),Fe=At("m"),vl=At("bu"),wi=At("u"),_n=At("bum"),Wt=At("um"),ml=At("sp"),hl=At("rtg"),yl=At("rtc");function _l(e,t=je){yn("ec",e,t)}const Si="components";function us(e,t){return ki(Si,e,!0,t)||e}const $i=Symbol.for("v-ndc");function bl(e){return Le(e)?ki(Si,e,!1)||e:e||$i}function ki(e,t,s=!0,o=!1){const a=Ze||je;if(a){const i=a.type;{const l=ic(i,!1);if(l&&(l===t||l===it(t)||l===pn(it(t))))return i}const r=Fo(a[e]||i[e],t)||Fo(a.appContext[e],t);return!r&&o?i:r}}function Fo(e,t){return e&&(e[t]||e[it(t)]||e[pn(it(t))])}function $e(e,t,s,o){let a;const i=s,r=ue(e);if(r||Le(e)){const l=r&&rs(e);let c=!1;l&&(c=!at(e),e=vn(e)),a=new Array(e.length);for(let d=0,u=e.length;d<u;d++)a[d]=t(c?Be(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){a=new Array(e);for(let l=0;l<e;l++)a[l]=t(l+1,l,void 0,i)}else if(Te(e))if(e[Symbol.iterator])a=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);a=new Array(l.length);for(let c=0,d=l.length;c<d;c++){const u=l[c];a[c]=t(e[u],u,c,i)}}else a=[];return a}const Gn=e=>e?Gi(e)?Sn(e):Gn(e.parent):null,Cs=Me(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Gn(e.parent),$root:e=>Gn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ei(e),$forceUpdate:e=>e.f||(e.f=()=>{mo(e.update)}),$nextTick:e=>e.n||(e.n=vo.bind(e.proxy)),$watch:e=>jl.bind(e)}),Nn=(e,t)=>e!==xe&&!e.__isScriptSetup&&Ce(e,t),wl={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:o,data:a,props:i,accessCache:r,type:l,appContext:c}=e;let d;if(t[0]!=="$"){const h=r[t];if(h!==void 0)switch(h){case 1:return o[t];case 2:return a[t];case 4:return s[t];case 3:return i[t]}else{if(Nn(o,t))return r[t]=1,o[t];if(a!==xe&&Ce(a,t))return r[t]=2,a[t];if((d=e.propsOptions[0])&&Ce(d,t))return r[t]=3,i[t];if(s!==xe&&Ce(s,t))return r[t]=4,s[t];Kn&&(r[t]=0)}}const u=Cs[t];let f,_;if(u)return t==="$attrs"&&He(e.attrs,"get",""),u(e);if((f=l.__cssModules)&&(f=f[t]))return f;if(s!==xe&&Ce(s,t))return r[t]=4,s[t];if(_=c.config.globalProperties,Ce(_,t))return _[t]},set({_:e},t,s){const{data:o,setupState:a,ctx:i}=e;return Nn(a,t)?(a[t]=s,!0):o!==xe&&Ce(o,t)?(o[t]=s,!0):Ce(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:o,appContext:a,propsOptions:i}},r){let l;return!!s[r]||e!==xe&&Ce(e,r)||Nn(t,r)||(l=i[0])&&Ce(l,r)||Ce(o,r)||Ce(Cs,r)||Ce(a.config.globalProperties,r)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:Ce(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Oo(e){return ue(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Kn=!0;function Sl(e){const t=Ei(e),s=e.proxy,o=e.ctx;Kn=!1,t.beforeCreate&&Lo(t.beforeCreate,e,"bc");const{data:a,computed:i,methods:r,watch:l,provide:c,inject:d,created:u,beforeMount:f,mounted:_,beforeUpdate:h,updated:S,activated:k,deactivated:N,beforeDestroy:R,beforeUnmount:y,destroyed:v,unmounted:b,render:p,renderTracked:P,renderTriggered:T,errorCaptured:X,serverPrefetch:Q,expose:V,inheritAttrs:L,components:G,directives:ee,filters:z}=t;if(d&&$l(d,o,null),r)for(const M in r){const W=r[M];_e(W)&&(o[M]=W.bind(s))}if(a){const M=a.call(s,s);Te(M)&&(e.data=Vt(M))}if(Kn=!0,i)for(const M in i){const W=i[M],B=_e(W)?W.bind(s,s):_e(W.get)?W.get.bind(s,s):bt,se=!_e(W)&&_e(W.set)?W.set.bind(s):bt,re=pe({get:B,set:se});Object.defineProperty(o,M,{enumerable:!0,configurable:!0,get:()=>re.value,set:me=>re.value=me})}if(l)for(const M in l)Ci(l[M],o,s,M);if(c){const M=_e(c)?c.call(s):c;Reflect.ownKeys(M).forEach(W=>{Qs(W,M[W])})}u&&Lo(u,e,"c");function A(M,W){ue(W)?W.forEach(B=>M(B.bind(s))):W&&M(W.bind(s))}if(A(gl,f),A(Fe,_),A(vl,h),A(wi,S),A(dl,k),A(fl,N),A(_l,X),A(yl,P),A(hl,T),A(_n,y),A(Wt,b),A(ml,Q),ue(V))if(V.length){const M=e.exposed||(e.exposed={});V.forEach(W=>{Object.defineProperty(M,W,{get:()=>s[W],set:B=>s[W]=B})})}else e.exposed||(e.exposed={});p&&e.render===bt&&(e.render=p),L!=null&&(e.inheritAttrs=L),G&&(e.components=G),ee&&(e.directives=ee),Q&&_i(e)}function $l(e,t,s=bt){ue(e)&&(e=zn(e));for(const o in e){const a=e[o];let i;Te(a)?"default"in a?i=lt(a.from||o,a.default,!0):i=lt(a.from||o):i=lt(a),qe(i)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>i.value,set:r=>i.value=r}):t[o]=i}}function Lo(e,t,s){ct(ue(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,s)}function Ci(e,t,s,o){let a=o.includes(".")?Vi(s,o):()=>s[o];if(Le(e)){const i=t[e];_e(i)&&Je(a,i)}else if(_e(e))Je(a,e.bind(s));else if(Te(e))if(ue(e))e.forEach(i=>Ci(i,t,s,o));else{const i=_e(e.handler)?e.handler.bind(s):t[e.handler];_e(i)&&Je(a,i,e)}}function Ei(e){const t=e.type,{mixins:s,extends:o}=t,{mixins:a,optionsCache:i,config:{optionMergeStrategies:r}}=e.appContext,l=i.get(t);let c;return l?c=l:!a.length&&!s&&!o?c=t:(c={},a.length&&a.forEach(d=>rn(c,d,r,!0)),rn(c,t,r)),Te(t)&&i.set(t,c),c}function rn(e,t,s,o=!1){const{mixins:a,extends:i}=t;i&&rn(e,i,s,!0),a&&a.forEach(r=>rn(e,r,s,!0));for(const r in t)if(!(o&&r==="expose")){const l=kl[r]||s&&s[r];e[r]=l?l(e[r],t[r]):t[r]}return e}const kl={data:Do,props:Mo,emits:Mo,methods:bs,computed:bs,beforeCreate:Ke,created:Ke,beforeMount:Ke,mounted:Ke,beforeUpdate:Ke,updated:Ke,beforeDestroy:Ke,beforeUnmount:Ke,destroyed:Ke,unmounted:Ke,activated:Ke,deactivated:Ke,errorCaptured:Ke,serverPrefetch:Ke,components:bs,directives:bs,watch:El,provide:Do,inject:Cl};function Do(e,t){return t?e?function(){return Me(_e(e)?e.call(this,this):e,_e(t)?t.call(this,this):t)}:t:e}function Cl(e,t){return bs(zn(e),zn(t))}function zn(e){if(ue(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function Ke(e,t){return e?[...new Set([].concat(e,t))]:t}function bs(e,t){return e?Me(Object.create(null),e,t):t}function Mo(e,t){return e?ue(e)&&ue(t)?[...new Set([...e,...t])]:Me(Object.create(null),Oo(e),Oo(t??{})):t}function El(e,t){if(!e)return t;if(!t)return e;const s=Me(Object.create(null),e);for(const o in t)s[o]=Ke(e[o],t[o]);return s}function xi(){return{app:null,config:{isNativeTag:_r,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xl=0;function Tl(e,t){return function(o,a=null){_e(o)||(o=Me({},o)),a!=null&&!Te(a)&&(a=null);const i=xi(),r=new WeakSet,l=[];let c=!1;const d=i.app={_uid:xl++,_component:o,_props:a,_container:null,_context:i,_instance:null,version:lc,get config(){return i.config},set config(u){},use(u,...f){return r.has(u)||(u&&_e(u.install)?(r.add(u),u.install(d,...f)):_e(u)&&(r.add(u),u(d,...f))),d},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),d},component(u,f){return f?(i.components[u]=f,d):i.components[u]},directive(u,f){return f?(i.directives[u]=f,d):i.directives[u]},mount(u,f,_){if(!c){const h=d._ceVNode||ge(o,a);return h.appContext=i,_===!0?_="svg":_===!1&&(_=void 0),e(h,u,_),c=!0,d._container=u,u.__vue_app__=d,Sn(h.component)}},onUnmount(u){l.push(u)},unmount(){c&&(ct(l,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(u,f){return i.provides[u]=f,d},runWithContext(u){const f=cs;cs=d;try{return u()}finally{cs=f}}};return d}}let cs=null;function Qs(e,t){if(je){let s=je.provides;const o=je.parent&&je.parent.provides;o===s&&(s=je.provides=Object.create(o)),s[e]=t}}function lt(e,t,s=!1){const o=je||Ze;if(o||cs){const a=cs?cs._context.provides:o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return s&&_e(t)?t.call(o&&o.proxy):t}}const Ti={},Ai=()=>Object.create(Ti),Pi=e=>Object.getPrototypeOf(e)===Ti;function Al(e,t,s,o=!1){const a={},i=Ai();e.propsDefaults=Object.create(null),Ri(e,t,a,i);for(const r in e.propsOptions[0])r in a||(a[r]=void 0);s?e.props=o?a:ni(a):e.type.props?e.props=a:e.props=i,e.attrs=i}function Pl(e,t,s,o){const{props:a,attrs:i,vnode:{patchFlag:r}}=e,l=Se(a),[c]=e.propsOptions;let d=!1;if((o||r>0)&&!(r&16)){if(r&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let _=u[f];if(bn(e.emitsOptions,_))continue;const h=t[_];if(c)if(Ce(i,_))h!==i[_]&&(i[_]=h,d=!0);else{const S=it(_);a[S]=Jn(c,l,S,h,e,!1)}else h!==i[_]&&(i[_]=h,d=!0)}}}else{Ri(e,t,a,i)&&(d=!0);let u;for(const f in l)(!t||!Ce(t,f)&&((u=ts(f))===f||!Ce(t,u)))&&(c?s&&(s[f]!==void 0||s[u]!==void 0)&&(a[f]=Jn(c,l,f,void 0,e,!0)):delete a[f]);if(i!==l)for(const f in i)(!t||!Ce(t,f))&&(delete i[f],d=!0)}d&&Ct(e.attrs,"set","")}function Ri(e,t,s,o){const[a,i]=e.propsOptions;let r=!1,l;if(t)for(let c in t){if(ws(c))continue;const d=t[c];let u;a&&Ce(a,u=it(c))?!i||!i.includes(u)?s[u]=d:(l||(l={}))[u]=d:bn(e.emitsOptions,c)||(!(c in o)||d!==o[c])&&(o[c]=d,r=!0)}if(i){const c=Se(s),d=l||xe;for(let u=0;u<i.length;u++){const f=i[u];s[f]=Jn(a,c,f,d[f],e,!Ce(d,f))}}return r}function Jn(e,t,s,o,a,i){const r=e[s];if(r!=null){const l=Ce(r,"default");if(l&&o===void 0){const c=r.default;if(r.type!==Function&&!r.skipFactory&&_e(c)){const{propsDefaults:d}=a;if(s in d)o=d[s];else{const u=Hs(a);o=d[s]=c.call(null,t),u()}}else o=c;a.ce&&a.ce._setProp(s,o)}r[0]&&(i&&!l?o=!1:r[1]&&(o===""||o===ts(s))&&(o=!0))}return o}const Rl=new WeakMap;function Ii(e,t,s=!1){const o=s?Rl:t.propsCache,a=o.get(e);if(a)return a;const i=e.props,r={},l=[];let c=!1;if(!_e(e)){const u=f=>{c=!0;const[_,h]=Ii(f,t,!0);Me(r,_),h&&l.push(...h)};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!c)return Te(e)&&o.set(e,as),as;if(ue(i))for(let u=0;u<i.length;u++){const f=it(i[u]);Uo(f)&&(r[f]=xe)}else if(i)for(const u in i){const f=it(u);if(Uo(f)){const _=i[u],h=r[f]=ue(_)||_e(_)?{type:_}:Me({},_),S=h.type;let k=!1,N=!0;if(ue(S))for(let R=0;R<S.length;++R){const y=S[R],v=_e(y)&&y.name;if(v==="Boolean"){k=!0;break}else v==="String"&&(N=!1)}else k=_e(S)&&S.name==="Boolean";h[0]=k,h[1]=N,(k||Ce(h,"default"))&&l.push(f)}}const d=[r,l];return Te(e)&&o.set(e,d),d}function Uo(e){return e[0]!=="$"&&!ws(e)}const Ni=e=>e[0]==="_"||e==="$stable",yo=e=>ue(e)?e.map(_t):[_t(e)],Il=(e,t,s)=>{if(t._n)return t;const o=Re((...a)=>yo(t(...a)),s);return o._c=!1,o},Fi=(e,t,s)=>{const o=e._ctx;for(const a in e){if(Ni(a))continue;const i=e[a];if(_e(i))t[a]=Il(a,i,o);else if(i!=null){const r=yo(i);t[a]=()=>r}}},Oi=(e,t)=>{const s=yo(t);e.slots.default=()=>s},Li=(e,t,s)=>{for(const o in t)(s||o!=="_")&&(e[o]=t[o])},Nl=(e,t,s)=>{const o=e.slots=Ai();if(e.vnode.shapeFlag&32){const a=t._;a?(Li(o,t,s),s&&Ma(o,"_",a,!0)):Fi(t,o)}else t&&Oi(e,t)},Fl=(e,t,s)=>{const{vnode:o,slots:a}=e;let i=!0,r=xe;if(o.shapeFlag&32){const l=t._;l?s&&l===1?i=!1:Li(a,t,s):(i=!t.$stable,Fi(t,a)),r=t}else t&&(Oi(e,t),r={default:1});if(i)for(const l in a)!Ni(l)&&r[l]==null&&delete a[l]},tt=zl;function Ol(e){return Ll(e)}function Ll(e,t){const s=gn();s.__VUE__=!0;const{insert:o,remove:a,patchProp:i,createElement:r,createText:l,createComment:c,setText:d,setElementText:u,parentNode:f,nextSibling:_,setScopeId:h=bt,insertStaticContent:S}=e,k=(w,$,I,q=null,Y=null,K=null,oe=void 0,ne=null,te=!!$.dynamicChildren)=>{if(w===$)return;w&&!Qt(w,$)&&(q=j(w),me(w,Y,K,!0),w=null),$.patchFlag===-2&&(te=!1,$.dynamicChildren=null);const{type:Z,ref:ve,shapeFlag:ae}=$;switch(Z){case wn:N(w,$,I,q);break;case Qe:R(w,$,I,q);break;case Zs:w==null&&y($,I,q,oe);break;case he:G(w,$,I,q,Y,K,oe,ne,te);break;default:ae&1?p(w,$,I,q,Y,K,oe,ne,te):ae&6?ee(w,$,I,q,Y,K,oe,ne,te):(ae&64||ae&128)&&Z.process(w,$,I,q,Y,K,oe,ne,te,U)}ve!=null&&Y&&an(ve,w&&w.ref,K,$||w,!$)},N=(w,$,I,q)=>{if(w==null)o($.el=l($.children),I,q);else{const Y=$.el=w.el;$.children!==w.children&&d(Y,$.children)}},R=(w,$,I,q)=>{w==null?o($.el=c($.children||""),I,q):$.el=w.el},y=(w,$,I,q)=>{[w.el,w.anchor]=S(w.children,$,I,q,w.el,w.anchor)},v=({el:w,anchor:$},I,q)=>{let Y;for(;w&&w!==$;)Y=_(w),o(w,I,q),w=Y;o($,I,q)},b=({el:w,anchor:$})=>{let I;for(;w&&w!==$;)I=_(w),a(w),w=I;a($)},p=(w,$,I,q,Y,K,oe,ne,te)=>{$.type==="svg"?oe="svg":$.type==="math"&&(oe="mathml"),w==null?P($,I,q,Y,K,oe,ne,te):Q(w,$,Y,K,oe,ne,te)},P=(w,$,I,q,Y,K,oe,ne)=>{let te,Z;const{props:ve,shapeFlag:ae,transition:fe,dirs:ye}=w;if(te=w.el=r(w.type,K,ve&&ve.is,ve),ae&8?u(te,w.children):ae&16&&X(w.children,te,null,q,Y,Fn(w,K),oe,ne),ye&&Kt(w,null,q,"created"),T(te,w,w.scopeId,oe,q),ve){for(const Ae in ve)Ae!=="value"&&!ws(Ae)&&i(te,Ae,null,ve[Ae],K,q);"value"in ve&&i(te,"value",null,ve.value,K),(Z=ve.onVnodeBeforeMount)&&gt(Z,q,w)}ye&&Kt(w,null,q,"beforeMount");const we=Dl(Y,fe);we&&fe.beforeEnter(te),o(te,$,I),((Z=ve&&ve.onVnodeMounted)||we||ye)&&tt(()=>{Z&&gt(Z,q,w),we&&fe.enter(te),ye&&Kt(w,null,q,"mounted")},Y)},T=(w,$,I,q,Y)=>{if(I&&h(w,I),q)for(let K=0;K<q.length;K++)h(w,q[K]);if(Y){let K=Y.subTree;if($===K||Hi(K.type)&&(K.ssContent===$||K.ssFallback===$)){const oe=Y.vnode;T(w,oe,oe.scopeId,oe.slotScopeIds,Y.parent)}}},X=(w,$,I,q,Y,K,oe,ne,te=0)=>{for(let Z=te;Z<w.length;Z++){const ve=w[Z]=ne?Ot(w[Z]):_t(w[Z]);k(null,ve,$,I,q,Y,K,oe,ne)}},Q=(w,$,I,q,Y,K,oe)=>{const ne=$.el=w.el;let{patchFlag:te,dynamicChildren:Z,dirs:ve}=$;te|=w.patchFlag&16;const ae=w.props||xe,fe=$.props||xe;let ye;if(I&&zt(I,!1),(ye=fe.onVnodeBeforeUpdate)&&gt(ye,I,$,w),ve&&Kt($,w,I,"beforeUpdate"),I&&zt(I,!0),(ae.innerHTML&&fe.innerHTML==null||ae.textContent&&fe.textContent==null)&&u(ne,""),Z?V(w.dynamicChildren,Z,ne,I,q,Fn($,Y),K):oe||W(w,$,ne,null,I,q,Fn($,Y),K,!1),te>0){if(te&16)L(ne,ae,fe,I,Y);else if(te&2&&ae.class!==fe.class&&i(ne,"class",null,fe.class,Y),te&4&&i(ne,"style",ae.style,fe.style,Y),te&8){const we=$.dynamicProps;for(let Ae=0;Ae<we.length;Ae++){const Ee=we[Ae],Xe=ae[Ee],Ye=fe[Ee];(Ye!==Xe||Ee==="value")&&i(ne,Ee,Xe,Ye,Y,I)}}te&1&&w.children!==$.children&&u(ne,$.children)}else!oe&&Z==null&&L(ne,ae,fe,I,Y);((ye=fe.onVnodeUpdated)||ve)&&tt(()=>{ye&&gt(ye,I,$,w),ve&&Kt($,w,I,"updated")},q)},V=(w,$,I,q,Y,K,oe)=>{for(let ne=0;ne<$.length;ne++){const te=w[ne],Z=$[ne],ve=te.el&&(te.type===he||!Qt(te,Z)||te.shapeFlag&70)?f(te.el):I;k(te,Z,ve,null,q,Y,K,oe,!0)}},L=(w,$,I,q,Y)=>{if($!==I){if($!==xe)for(const K in $)!ws(K)&&!(K in I)&&i(w,K,$[K],null,Y,q);for(const K in I){if(ws(K))continue;const oe=I[K],ne=$[K];oe!==ne&&K!=="value"&&i(w,K,ne,oe,Y,q)}"value"in I&&i(w,"value",$.value,I.value,Y)}},G=(w,$,I,q,Y,K,oe,ne,te)=>{const Z=$.el=w?w.el:l(""),ve=$.anchor=w?w.anchor:l("");let{patchFlag:ae,dynamicChildren:fe,slotScopeIds:ye}=$;ye&&(ne=ne?ne.concat(ye):ye),w==null?(o(Z,I,q),o(ve,I,q),X($.children||[],I,ve,Y,K,oe,ne,te)):ae>0&&ae&64&&fe&&w.dynamicChildren?(V(w.dynamicChildren,fe,I,Y,K,oe,ne),($.key!=null||Y&&$===Y.subTree)&&Di(w,$,!0)):W(w,$,I,ve,Y,K,oe,ne,te)},ee=(w,$,I,q,Y,K,oe,ne,te)=>{$.slotScopeIds=ne,w==null?$.shapeFlag&512?Y.ctx.activate($,I,q,oe,te):z($,I,q,Y,K,oe,te):D(w,$,te)},z=(w,$,I,q,Y,K,oe)=>{const ne=w.component=tc(w,q,Y);if(hn(w)&&(ne.ctx.renderer=U),sc(ne,!1,oe),ne.asyncDep){if(Y&&Y.registerDep(ne,A,oe),!w.el){const te=ne.subTree=ge(Qe);R(null,te,$,I)}}else A(ne,w,$,I,Y,K,oe)},D=(w,$,I)=>{const q=$.component=w.component;if(Gl(w,$,I))if(q.asyncDep&&!q.asyncResolved){M(q,$,I);return}else q.next=$,q.update();else $.el=w.el,q.vnode=$},A=(w,$,I,q,Y,K,oe)=>{const ne=()=>{if(w.isMounted){let{next:ae,bu:fe,u:ye,parent:we,vnode:Ae}=w;{const ft=Mi(w);if(ft){ae&&(ae.el=Ae.el,M(w,ae,oe)),ft.asyncDep.then(()=>{w.isUnmounted||ne()});return}}let Ee=ae,Xe;zt(w,!1),ae?(ae.el=Ae.el,M(w,ae,oe)):ae=Ae,fe&&Ys(fe),(Xe=ae.props&&ae.props.onVnodeBeforeUpdate)&&gt(Xe,we,ae,Ae),zt(w,!0);const Ye=jo(w),dt=w.subTree;w.subTree=Ye,k(dt,Ye,f(dt.el),j(dt),w,Y,K),ae.el=Ye.el,Ee===null&&Kl(w,Ye.el),ye&&tt(ye,Y),(Xe=ae.props&&ae.props.onVnodeUpdated)&&tt(()=>gt(Xe,we,ae,Ae),Y)}else{let ae;const{el:fe,props:ye}=$,{bm:we,m:Ae,parent:Ee,root:Xe,type:Ye}=w,dt=ks($);zt(w,!1),we&&Ys(we),!dt&&(ae=ye&&ye.onVnodeBeforeMount)&&gt(ae,Ee,$),zt(w,!0);{Xe.ce&&Xe.ce._injectChildStyle(Ye);const ft=w.subTree=jo(w);k(null,ft,I,q,w,Y,K),$.el=ft.el}if(Ae&&tt(Ae,Y),!dt&&(ae=ye&&ye.onVnodeMounted)){const ft=$;tt(()=>gt(ae,Ee,ft),Y)}($.shapeFlag&256||Ee&&ks(Ee.vnode)&&Ee.vnode.shapeFlag&256)&&w.a&&tt(w.a,Y),w.isMounted=!0,$=I=q=null}};w.scope.on();const te=w.effect=new Ba(ne);w.scope.off();const Z=w.update=te.run.bind(te),ve=w.job=te.runIfDirty.bind(te);ve.i=w,ve.id=w.uid,te.scheduler=()=>mo(ve),zt(w,!0),Z()},M=(w,$,I)=>{$.component=w;const q=w.vnode.props;w.vnode=$,w.next=null,Pl(w,$.props,q,I),Fl(w,$.children,I),Ht(),Io(w),Bt()},W=(w,$,I,q,Y,K,oe,ne,te=!1)=>{const Z=w&&w.children,ve=w?w.shapeFlag:0,ae=$.children,{patchFlag:fe,shapeFlag:ye}=$;if(fe>0){if(fe&128){se(Z,ae,I,q,Y,K,oe,ne,te);return}else if(fe&256){B(Z,ae,I,q,Y,K,oe,ne,te);return}}ye&8?(ve&16&&O(Z,Y,K),ae!==Z&&u(I,ae)):ve&16?ye&16?se(Z,ae,I,q,Y,K,oe,ne,te):O(Z,Y,K,!0):(ve&8&&u(I,""),ye&16&&X(ae,I,q,Y,K,oe,ne,te))},B=(w,$,I,q,Y,K,oe,ne,te)=>{w=w||as,$=$||as;const Z=w.length,ve=$.length,ae=Math.min(Z,ve);let fe;for(fe=0;fe<ae;fe++){const ye=$[fe]=te?Ot($[fe]):_t($[fe]);k(w[fe],ye,I,null,Y,K,oe,ne,te)}Z>ve?O(w,Y,K,!0,!1,ae):X($,I,q,Y,K,oe,ne,te,ae)},se=(w,$,I,q,Y,K,oe,ne,te)=>{let Z=0;const ve=$.length;let ae=w.length-1,fe=ve-1;for(;Z<=ae&&Z<=fe;){const ye=w[Z],we=$[Z]=te?Ot($[Z]):_t($[Z]);if(Qt(ye,we))k(ye,we,I,null,Y,K,oe,ne,te);else break;Z++}for(;Z<=ae&&Z<=fe;){const ye=w[ae],we=$[fe]=te?Ot($[fe]):_t($[fe]);if(Qt(ye,we))k(ye,we,I,null,Y,K,oe,ne,te);else break;ae--,fe--}if(Z>ae){if(Z<=fe){const ye=fe+1,we=ye<ve?$[ye].el:q;for(;Z<=fe;)k(null,$[Z]=te?Ot($[Z]):_t($[Z]),I,we,Y,K,oe,ne,te),Z++}}else if(Z>fe)for(;Z<=ae;)me(w[Z],Y,K,!0),Z++;else{const ye=Z,we=Z,Ae=new Map;for(Z=we;Z<=fe;Z++){const et=$[Z]=te?Ot($[Z]):_t($[Z]);et.key!=null&&Ae.set(et.key,Z)}let Ee,Xe=0;const Ye=fe-we+1;let dt=!1,ft=0;const ms=new Array(Ye);for(Z=0;Z<Ye;Z++)ms[Z]=0;for(Z=ye;Z<=ae;Z++){const et=w[Z];if(Xe>=Ye){me(et,Y,K,!0);continue}let pt;if(et.key!=null)pt=Ae.get(et.key);else for(Ee=we;Ee<=fe;Ee++)if(ms[Ee-we]===0&&Qt(et,$[Ee])){pt=Ee;break}pt===void 0?me(et,Y,K,!0):(ms[pt-we]=Z+1,pt>=ft?ft=pt:dt=!0,k(et,$[pt],I,null,Y,K,oe,ne,te),Xe++)}const Co=dt?Ml(ms):as;for(Ee=Co.length-1,Z=Ye-1;Z>=0;Z--){const et=we+Z,pt=$[et],Eo=et+1<ve?$[et+1].el:q;ms[Z]===0?k(null,pt,I,Eo,Y,K,oe,ne,te):dt&&(Ee<0||Z!==Co[Ee]?re(pt,I,Eo,2):Ee--)}}},re=(w,$,I,q,Y=null)=>{const{el:K,type:oe,transition:ne,children:te,shapeFlag:Z}=w;if(Z&6){re(w.component.subTree,$,I,q);return}if(Z&128){w.suspense.move($,I,q);return}if(Z&64){oe.move(w,$,I,U);return}if(oe===he){o(K,$,I);for(let ae=0;ae<te.length;ae++)re(te[ae],$,I,q);o(w.anchor,$,I);return}if(oe===Zs){v(w,$,I);return}if(q!==2&&Z&1&&ne)if(q===0)ne.beforeEnter(K),o(K,$,I),tt(()=>ne.enter(K),Y);else{const{leave:ae,delayLeave:fe,afterLeave:ye}=ne,we=()=>o(K,$,I),Ae=()=>{ae(K,()=>{we(),ye&&ye()})};fe?fe(K,we,Ae):Ae()}else o(K,$,I)},me=(w,$,I,q=!1,Y=!1)=>{const{type:K,props:oe,ref:ne,children:te,dynamicChildren:Z,shapeFlag:ve,patchFlag:ae,dirs:fe,cacheIndex:ye}=w;if(ae===-2&&(Y=!1),ne!=null&&an(ne,null,I,w,!0),ye!=null&&($.renderCache[ye]=void 0),ve&256){$.ctx.deactivate(w);return}const we=ve&1&&fe,Ae=!ks(w);let Ee;if(Ae&&(Ee=oe&&oe.onVnodeBeforeUnmount)&&gt(Ee,$,w),ve&6)ie(w.component,I,q);else{if(ve&128){w.suspense.unmount(I,q);return}we&&Kt(w,null,$,"beforeUnmount"),ve&64?w.type.remove(w,$,I,U,q):Z&&!Z.hasOnce&&(K!==he||ae>0&&ae&64)?O(Z,$,I,!1,!0):(K===he&&ae&384||!Y&&ve&16)&&O(te,$,I),q&&Ie(w)}(Ae&&(Ee=oe&&oe.onVnodeUnmounted)||we)&&tt(()=>{Ee&&gt(Ee,$,w),we&&Kt(w,null,$,"unmounted")},I)},Ie=w=>{const{type:$,el:I,anchor:q,transition:Y}=w;if($===he){Ge(I,q);return}if($===Zs){b(w);return}const K=()=>{a(I),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(w.shapeFlag&1&&Y&&!Y.persisted){const{leave:oe,delayLeave:ne}=Y,te=()=>oe(I,K);ne?ne(w.el,K,te):te()}else K()},Ge=(w,$)=>{let I;for(;w!==$;)I=_(w),a(w),w=I;a($)},ie=(w,$,I)=>{const{bum:q,scope:Y,job:K,subTree:oe,um:ne,m:te,a:Z}=w;Vo(te),Vo(Z),q&&Ys(q),Y.stop(),K&&(K.flags|=8,me(oe,w,$,I)),ne&&tt(ne,$),tt(()=>{w.isUnmounted=!0},$),$&&$.pendingBranch&&!$.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===$.pendingId&&($.deps--,$.deps===0&&$.resolve())},O=(w,$,I,q=!1,Y=!1,K=0)=>{for(let oe=K;oe<w.length;oe++)me(w[oe],$,I,q,Y)},j=w=>{if(w.shapeFlag&6)return j(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const $=_(w.anchor||w.el),I=$&&$[ll];return I?_(I):$};let E=!1;const C=(w,$,I)=>{w==null?$._vnode&&me($._vnode,null,null,!0):k($._vnode||null,w,$,null,null,null,I),$._vnode=w,E||(E=!0,Io(),ui(),E=!1)},U={p:k,um:me,m:re,r:Ie,mt:z,mc:X,pc:W,pbc:V,n:j,o:e};return{render:C,hydrate:void 0,createApp:Tl(C)}}function Fn({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function zt({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Dl(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Di(e,t,s=!1){const o=e.children,a=t.children;if(ue(o)&&ue(a))for(let i=0;i<o.length;i++){const r=o[i];let l=a[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=a[i]=Ot(a[i]),l.el=r.el),!s&&l.patchFlag!==-2&&Di(r,l)),l.type===wn&&(l.el=r.el)}}function Ml(e){const t=e.slice(),s=[0];let o,a,i,r,l;const c=e.length;for(o=0;o<c;o++){const d=e[o];if(d!==0){if(a=s[s.length-1],e[a]<d){t[o]=a,s.push(o);continue}for(i=0,r=s.length-1;i<r;)l=i+r>>1,e[s[l]]<d?i=l+1:r=l;d<e[s[i]]&&(i>0&&(t[o]=s[i-1]),s[i]=o)}}for(i=s.length,r=s[i-1];i-- >0;)s[i]=r,r=t[r];return s}function Mi(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Mi(t)}function Vo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Ul=Symbol.for("v-scx"),Vl=()=>lt(Ul);function Je(e,t,s){return Ui(e,t,s)}function Ui(e,t,s=xe){const{immediate:o,deep:a,flush:i,once:r}=s,l=Me({},s),c=t&&o||!t&&i!=="post";let d;if(Fs){if(i==="sync"){const h=Vl();d=h.__watcherHandles||(h.__watcherHandles=[])}else if(!c){const h=()=>{};return h.stop=bt,h.resume=bt,h.pause=bt,h}}const u=je;l.call=(h,S,k)=>ct(h,u,S,k);let f=!1;i==="post"?l.scheduler=h=>{tt(h,u&&u.suspense)}:i!=="sync"&&(f=!0,l.scheduler=(h,S)=>{S?h():mo(h)}),l.augmentJob=h=>{t&&(h.flags|=4),f&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const _=ol(e,t,l);return Fs&&(d?d.push(_):c&&_()),_}function jl(e,t,s){const o=this.proxy,a=Le(e)?e.includes(".")?Vi(o,e):()=>o[e]:e.bind(o,o);let i;_e(t)?i=t:(i=t.handler,s=t);const r=Hs(this),l=Ui(a,i.bind(o),s);return r(),l}function Vi(e,t){const s=t.split(".");return()=>{let o=e;for(let a=0;a<s.length&&o;a++)o=o[s[a]];return o}}const Hl=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${it(t)}Modifiers`]||e[`${ts(t)}Modifiers`];function Bl(e,t,...s){if(e.isUnmounted)return;const o=e.vnode.props||xe;let a=s;const i=t.startsWith("update:"),r=i&&Hl(o,t.slice(7));r&&(r.trim&&(a=s.map(u=>Le(u)?u.trim():u)),r.number&&(a=s.map(tn)));let l,c=o[l=xn(t)]||o[l=xn(it(t))];!c&&i&&(c=o[l=xn(ts(t))]),c&&ct(c,e,6,a);const d=o[l+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,ct(d,e,6,a)}}function ji(e,t,s=!1){const o=t.emitsCache,a=o.get(e);if(a!==void 0)return a;const i=e.emits;let r={},l=!1;if(!_e(e)){const c=d=>{const u=ji(d,t,!0);u&&(l=!0,Me(r,u))};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(Te(e)&&o.set(e,null),null):(ue(i)?i.forEach(c=>r[c]=null):Me(r,i),Te(e)&&o.set(e,r),r)}function bn(e,t){return!e||!dn(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ce(e,t[0].toLowerCase()+t.slice(1))||Ce(e,ts(t))||Ce(e,t))}function jo(e){const{type:t,vnode:s,proxy:o,withProxy:a,propsOptions:[i],slots:r,attrs:l,emit:c,render:d,renderCache:u,props:f,data:_,setupState:h,ctx:S,inheritAttrs:k}=e,N=on(e);let R,y;try{if(s.shapeFlag&4){const b=a||o,p=b;R=_t(d.call(p,b,u,f,h,_,S)),y=l}else{const b=t;R=_t(b.length>1?b(f,{attrs:l,slots:r,emit:c}):b(f,null)),y=t.props?l:Wl(l)}}catch(b){Es.length=0,mn(b,e,1),R=ge(Qe)}let v=R;if(y&&k!==!1){const b=Object.keys(y),{shapeFlag:p}=v;b.length&&p&7&&(i&&b.some(no)&&(y=ql(y,i)),v=jt(v,y,!1,!0))}return s.dirs&&(v=jt(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(s.dirs):s.dirs),s.transition&&es(v,s.transition),R=v,on(N),R}const Wl=e=>{let t;for(const s in e)(s==="class"||s==="style"||dn(s))&&((t||(t={}))[s]=e[s]);return t},ql=(e,t)=>{const s={};for(const o in e)(!no(o)||!(o.slice(9)in t))&&(s[o]=e[o]);return s};function Gl(e,t,s){const{props:o,children:a,component:i}=e,{props:r,children:l,patchFlag:c}=t,d=i.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return o?Ho(o,r,d):!!r;if(c&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const _=u[f];if(r[_]!==o[_]&&!bn(d,_))return!0}}}else return(a||l)&&(!l||!l.$stable)?!0:o===r?!1:o?r?Ho(o,r,d):!0:!!r;return!1}function Ho(e,t,s){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let a=0;a<o.length;a++){const i=o[a];if(t[i]!==e[i]&&!bn(s,i))return!0}return!1}function Kl({vnode:e,parent:t},s){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=s,t=t.parent;else break}}const Hi=e=>e.__isSuspense;function zl(e,t){t&&t.pendingBranch?ue(e)?t.effects.push(...e):t.effects.push(e):rl(e)}const he=Symbol.for("v-fgt"),wn=Symbol.for("v-txt"),Qe=Symbol.for("v-cmt"),Zs=Symbol.for("v-stc"),Es=[];let nt=null;function g(e=!1){Es.push(nt=e?null:[])}function Jl(){Es.pop(),nt=Es[Es.length-1]||null}let Ns=1;function Bo(e,t=!1){Ns+=e,e<0&&nt&&t&&(nt.hasOnce=!0)}function Bi(e){return e.dynamicChildren=Ns>0?nt||as:null,Jl(),Ns>0&&nt&&nt.push(e),e}function m(e,t,s,o,a,i){return Bi(n(e,t,s,o,a,i,!0))}function qt(e,t,s,o,a){return Bi(ge(e,t,s,o,a,!0))}function ln(e){return e?e.__v_isVNode===!0:!1}function Qt(e,t){return e.type===t.type&&e.key===t.key}const Wi=({key:e})=>e??null,Xs=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Le(e)||qe(e)||_e(e)?{i:Ze,r:e,k:t,f:!!s}:e:null);function n(e,t=null,s=null,o=0,a=null,i=e===he?0:1,r=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Wi(t),ref:t&&Xs(t),scopeId:fi,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:o,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Ze};return l?(_o(c,s),i&128&&e.normalize(c)):s&&(c.shapeFlag|=Le(s)?8:16),Ns>0&&!r&&nt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&nt.push(c),c}const ge=Yl;function Yl(e,t=null,s=null,o=0,a=null,i=!1){if((!e||e===$i)&&(e=Qe),ln(e)){const l=jt(e,t,!0);return s&&_o(l,s),Ns>0&&!i&&nt&&(l.shapeFlag&6?nt[nt.indexOf(e)]=l:nt.push(l)),l.patchFlag=-2,l}if(rc(e)&&(e=e.__vccOpts),t){t=Ql(t);let{class:l,style:c}=t;l&&!Le(l)&&(t.class=ce(l)),Te(c)&&(go(c)&&!ue(c)&&(c=Me({},c)),t.style=Us(c))}const r=Le(e)?1:Hi(e)?128:pi(e)?64:Te(e)?4:_e(e)?2:0;return n(e,t,s,o,a,r,i,!0)}function Ql(e){return e?go(e)||Pi(e)?Me({},e):e:null}function jt(e,t,s=!1,o=!1){const{props:a,ref:i,patchFlag:r,children:l,transition:c}=e,d=t?Zl(a||{},t):a,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&Wi(d),ref:t&&t.ref?s&&i?ue(i)?i.concat(Xs(t)):[i,Xs(t)]:Xs(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==he?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&jt(e.ssContent),ssFallback:e.ssFallback&&jt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&o&&es(u,c.clone(u)),u}function J(e=" ",t=0){return ge(wn,null,e,t)}function Tt(e,t){const s=ge(Zs,null,e);return s.staticCount=t,s}function H(e="",t=!1){return t?(g(),qt(Qe,null,e)):ge(Qe,null,e)}function _t(e){return e==null||typeof e=="boolean"?ge(Qe):ue(e)?ge(he,null,e.slice()):ln(e)?Ot(e):ge(wn,null,String(e))}function Ot(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:jt(e)}function _o(e,t){let s=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(ue(t))s=16;else if(typeof t=="object")if(o&65){const a=t.default;a&&(a._c&&(a._d=!1),_o(e,a()),a._c&&(a._d=!0));return}else{s=32;const a=t._;!a&&!Pi(t)?t._ctx=Ze:a===3&&Ze&&(Ze.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else _e(t)?(t={default:t,_ctx:Ze},s=32):(t=String(t),o&64?(s=16,t=[J(t)]):s=8);e.children=t,e.shapeFlag|=s}function Zl(...e){const t={};for(let s=0;s<e.length;s++){const o=e[s];for(const a in o)if(a==="class")t.class!==o.class&&(t.class=ce([t.class,o.class]));else if(a==="style")t.style=Us([t.style,o.style]);else if(dn(a)){const i=t[a],r=o[a];r&&i!==r&&!(ue(i)&&i.includes(r))&&(t[a]=i?[].concat(i,r):r)}else a!==""&&(t[a]=o[a])}return t}function gt(e,t,s,o=null){ct(e,t,7,[s,o])}const Xl=xi();let ec=0;function tc(e,t,s){const o=e.type,a=(t?t.appContext:e.appContext)||Xl,i={uid:ec++,vnode:e,type:o,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ha(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ii(o,a),emitsOptions:ji(o,a),emit:null,emitted:null,propsDefaults:xe,inheritAttrs:o.inheritAttrs,ctx:xe,data:xe,props:xe,attrs:xe,slots:xe,refs:xe,setupState:xe,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Bl.bind(null,i),e.ce&&e.ce(i),i}let je=null;const qi=()=>je||Ze;let cn,Yn;{const e=gn(),t=(s,o)=>{let a;return(a=e[s])||(a=e[s]=[]),a.push(o),i=>{a.length>1?a.forEach(r=>r(i)):a[0](i)}};cn=t("__VUE_INSTANCE_SETTERS__",s=>je=s),Yn=t("__VUE_SSR_SETTERS__",s=>Fs=s)}const Hs=e=>{const t=je;return cn(e),e.scope.on(),()=>{e.scope.off(),cn(t)}},Wo=()=>{je&&je.scope.off(),cn(null)};function Gi(e){return e.vnode.shapeFlag&4}let Fs=!1;function sc(e,t=!1,s=!1){t&&Yn(t);const{props:o,children:a}=e.vnode,i=Gi(e);Al(e,o,i,t),Nl(e,a,s);const r=i?nc(e,t):void 0;return t&&Yn(!1),r}function nc(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,wl);const{setup:o}=s;if(o){Ht();const a=e.setupContext=o.length>1?ac(e):null,i=Hs(e),r=js(o,e,0,[e.props,a]),l=Oa(r);if(Bt(),i(),(l||e.sp)&&!ks(e)&&_i(e),l){if(r.then(Wo,Wo),t)return r.then(c=>{qo(e,c)}).catch(c=>{mn(c,e,0)});e.asyncDep=r}else qo(e,r)}else Ki(e)}function qo(e,t,s){_e(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Te(t)&&(e.setupState=ri(t)),Ki(e)}function Ki(e,t,s){const o=e.type;e.render||(e.render=o.render||bt);{const a=Hs(e);Ht();try{Sl(e)}finally{Bt(),a()}}}const oc={get(e,t){return He(e,"get",""),e[t]}};function ac(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,oc),slots:e.slots,emit:e.emit,expose:t}}function Sn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ri(ai(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in Cs)return Cs[s](e)},has(t,s){return s in t||s in Cs}})):e.proxy}function ic(e,t=!0){return _e(e)?e.displayName||e.name:e.name||t&&e.__name}function rc(e){return _e(e)&&"__vccOpts"in e}const pe=(e,t)=>sl(e,t,Fs);function bo(e,t,s){const o=arguments.length;return o===2?Te(t)&&!ue(t)?ln(t)?ge(e,null,[t]):ge(e,t):ge(e,null,t):(o>3?s=Array.prototype.slice.call(arguments,2):o===3&&ln(s)&&(s=[s]),ge(e,t,s))}const lc="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qn;const Go=typeof window<"u"&&window.trustedTypes;if(Go)try{Qn=Go.createPolicy("vue",{createHTML:e=>e})}catch{}const zi=Qn?e=>Qn.createHTML(e):e=>e,cc="http://www.w3.org/2000/svg",uc="http://www.w3.org/1998/Math/MathML",kt=typeof document<"u"?document:null,Ko=kt&&kt.createElement("template"),dc={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,o)=>{const a=t==="svg"?kt.createElementNS(cc,e):t==="mathml"?kt.createElementNS(uc,e):s?kt.createElement(e,{is:s}):kt.createElement(e);return e==="select"&&o&&o.multiple!=null&&a.setAttribute("multiple",o.multiple),a},createText:e=>kt.createTextNode(e),createComment:e=>kt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>kt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,o,a,i){const r=s?s.previousSibling:t.lastChild;if(a&&(a===i||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),s),!(a===i||!(a=a.nextSibling)););else{Ko.innerHTML=zi(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const l=Ko.content;if(o==="svg"||o==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Pt="transition",ys="animation",ds=Symbol("_vtc"),Ji={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Yi=Me({},vi,Ji),fc=e=>(e.displayName="Transition",e.props=Yi,e),pc=fc((e,{slots:t})=>bo(ul,Qi(e),t)),Jt=(e,t=[])=>{ue(e)?e.forEach(s=>s(...t)):e&&e(...t)},zo=e=>e?ue(e)?e.some(t=>t.length>1):e.length>1:!1;function Qi(e){const t={};for(const G in e)G in Ji||(t[G]=e[G]);if(e.css===!1)return t;const{name:s="v",type:o,duration:a,enterFromClass:i=`${s}-enter-from`,enterActiveClass:r=`${s}-enter-active`,enterToClass:l=`${s}-enter-to`,appearFromClass:c=i,appearActiveClass:d=r,appearToClass:u=l,leaveFromClass:f=`${s}-leave-from`,leaveActiveClass:_=`${s}-leave-active`,leaveToClass:h=`${s}-leave-to`}=e,S=gc(a),k=S&&S[0],N=S&&S[1],{onBeforeEnter:R,onEnter:y,onEnterCancelled:v,onLeave:b,onLeaveCancelled:p,onBeforeAppear:P=R,onAppear:T=y,onAppearCancelled:X=v}=t,Q=(G,ee,z,D)=>{G._enterCancelled=D,It(G,ee?u:l),It(G,ee?d:r),z&&z()},V=(G,ee)=>{G._isLeaving=!1,It(G,f),It(G,h),It(G,_),ee&&ee()},L=G=>(ee,z)=>{const D=G?T:y,A=()=>Q(ee,G,z);Jt(D,[ee,A]),Jo(()=>{It(ee,G?c:i),mt(ee,G?u:l),zo(D)||Yo(ee,o,k,A)})};return Me(t,{onBeforeEnter(G){Jt(R,[G]),mt(G,i),mt(G,r)},onBeforeAppear(G){Jt(P,[G]),mt(G,c),mt(G,d)},onEnter:L(!1),onAppear:L(!0),onLeave(G,ee){G._isLeaving=!0;const z=()=>V(G,ee);mt(G,f),G._enterCancelled?(mt(G,_),Zn()):(Zn(),mt(G,_)),Jo(()=>{G._isLeaving&&(It(G,f),mt(G,h),zo(b)||Yo(G,o,N,z))}),Jt(b,[G,z])},onEnterCancelled(G){Q(G,!1,void 0,!0),Jt(v,[G])},onAppearCancelled(G){Q(G,!0,void 0,!0),Jt(X,[G])},onLeaveCancelled(G){V(G),Jt(p,[G])}})}function gc(e){if(e==null)return null;if(Te(e))return[On(e.enter),On(e.leave)];{const t=On(e);return[t,t]}}function On(e){return kr(e)}function mt(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[ds]||(e[ds]=new Set)).add(t)}function It(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const s=e[ds];s&&(s.delete(t),s.size||(e[ds]=void 0))}function Jo(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let vc=0;function Yo(e,t,s,o){const a=e._endId=++vc,i=()=>{a===e._endId&&o()};if(s!=null)return setTimeout(i,s);const{type:r,timeout:l,propCount:c}=Zi(e,t);if(!r)return o();const d=r+"end";let u=0;const f=()=>{e.removeEventListener(d,_),i()},_=h=>{h.target===e&&++u>=c&&f()};setTimeout(()=>{u<c&&f()},l+1),e.addEventListener(d,_)}function Zi(e,t){const s=window.getComputedStyle(e),o=S=>(s[S]||"").split(", "),a=o(`${Pt}Delay`),i=o(`${Pt}Duration`),r=Qo(a,i),l=o(`${ys}Delay`),c=o(`${ys}Duration`),d=Qo(l,c);let u=null,f=0,_=0;t===Pt?r>0&&(u=Pt,f=r,_=i.length):t===ys?d>0&&(u=ys,f=d,_=c.length):(f=Math.max(r,d),u=f>0?r>d?Pt:ys:null,_=u?u===Pt?i.length:c.length:0);const h=u===Pt&&/\b(transform|all)(,|$)/.test(o(`${Pt}Property`).toString());return{type:u,timeout:f,propCount:_,hasTransform:h}}function Qo(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((s,o)=>Zo(s)+Zo(e[o])))}function Zo(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Zn(){return document.body.offsetHeight}function mc(e,t,s){const o=e[ds];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Xo=Symbol("_vod"),hc=Symbol("_vsh"),yc=Symbol(""),_c=/(^|;)\s*display\s*:/;function bc(e,t,s){const o=e.style,a=Le(s);let i=!1;if(s&&!a){if(t)if(Le(t))for(const r of t.split(";")){const l=r.slice(0,r.indexOf(":")).trim();s[l]==null&&en(o,l,"")}else for(const r in t)s[r]==null&&en(o,r,"");for(const r in s)r==="display"&&(i=!0),en(o,r,s[r])}else if(a){if(t!==s){const r=o[yc];r&&(s+=";"+r),o.cssText=s,i=_c.test(s)}}else t&&e.removeAttribute("style");Xo in e&&(e[Xo]=i?o.display:"",e[hc]&&(o.display="none"))}const ea=/\s*!important$/;function en(e,t,s){if(ue(s))s.forEach(o=>en(e,t,o));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const o=wc(e,t);ea.test(s)?e.setProperty(ts(o),s.replace(ea,""),"important"):e[o]=s}}const ta=["Webkit","Moz","ms"],Ln={};function wc(e,t){const s=Ln[t];if(s)return s;let o=it(t);if(o!=="filter"&&o in e)return Ln[t]=o;o=pn(o);for(let a=0;a<ta.length;a++){const i=ta[a]+o;if(i in e)return Ln[t]=i}return t}const sa="http://www.w3.org/1999/xlink";function na(e,t,s,o,a,i=Pr(t)){o&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(sa,t.slice(6,t.length)):e.setAttributeNS(sa,t,s):s==null||i&&!Ua(s)?e.removeAttribute(t):e.setAttribute(t,i?"":wt(s)?String(s):s)}function oa(e,t,s,o,a){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?zi(s):s);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=s==null?e.type==="checkbox"?"on":"":String(s);(l!==c||!("_value"in e))&&(e.value=c),s==null&&e.removeAttribute(t),e._value=s;return}let r=!1;if(s===""||s==null){const l=typeof e[t];l==="boolean"?s=Ua(s):s==null&&l==="string"?(s="",r=!0):l==="number"&&(s=0,r=!0)}try{e[t]=s}catch{}r&&e.removeAttribute(a||t)}function Dt(e,t,s,o){e.addEventListener(t,s,o)}function Sc(e,t,s,o){e.removeEventListener(t,s,o)}const aa=Symbol("_vei");function $c(e,t,s,o,a=null){const i=e[aa]||(e[aa]={}),r=i[t];if(o&&r)r.value=o;else{const[l,c]=kc(t);if(o){const d=i[t]=xc(o,a);Dt(e,l,d,c)}else r&&(Sc(e,l,r,c),i[t]=void 0)}}const ia=/(?:Once|Passive|Capture)$/;function kc(e){let t;if(ia.test(e)){t={};let o;for(;o=e.match(ia);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ts(e.slice(2)),t]}let Dn=0;const Cc=Promise.resolve(),Ec=()=>Dn||(Cc.then(()=>Dn=0),Dn=Date.now());function xc(e,t){const s=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=s.attached)return;ct(Tc(o,s.value),t,5,[o])};return s.value=e,s.attached=Ec(),s}function Tc(e,t){if(ue(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(o=>a=>!a._stopped&&o&&o(a))}else return t}const ra=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ac=(e,t,s,o,a,i)=>{const r=a==="svg";t==="class"?mc(e,o,r):t==="style"?bc(e,s,o):dn(t)?no(t)||$c(e,t,s,o,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Pc(e,t,o,r))?(oa(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&na(e,t,o,r,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Le(o))?oa(e,it(t),o,i,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),na(e,t,o,r))};function Pc(e,t,s,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&ra(t)&&_e(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return ra(t)&&Le(s)?!1:t in e}const Xi=new WeakMap,er=new WeakMap,un=Symbol("_moveCb"),la=Symbol("_enterCb"),Rc=e=>(delete e.props.mode,e),Ic=Rc({name:"TransitionGroup",props:Me({},Yi,{tag:String,moveClass:String}),setup(e,{slots:t}){const s=qi(),o=gi();let a,i;return wi(()=>{if(!a.length)return;const r=e.moveClass||`${e.name||"v"}-move`;if(!Lc(a[0].el,s.vnode.el,r))return;a.forEach(Nc),a.forEach(Fc);const l=a.filter(Oc);Zn(),l.forEach(c=>{const d=c.el,u=d.style;mt(d,r),u.transform=u.webkitTransform=u.transitionDuration="";const f=d[un]=_=>{_&&_.target!==d||(!_||/transform$/.test(_.propertyName))&&(d.removeEventListener("transitionend",f),d[un]=null,It(d,r))};d.addEventListener("transitionend",f)})}),()=>{const r=Se(e),l=Qi(r);let c=r.tag||he;if(a=[],i)for(let d=0;d<i.length;d++){const u=i[d];u.el&&u.el instanceof Element&&(a.push(u),es(u,Is(u,l,o,s)),Xi.set(u,u.el.getBoundingClientRect()))}i=t.default?ho(t.default()):[];for(let d=0;d<i.length;d++){const u=i[d];u.key!=null&&es(u,Is(u,l,o,s))}return ge(c,null,i)}}}),wo=Ic;function Nc(e){const t=e.el;t[un]&&t[un](),t[la]&&t[la]()}function Fc(e){er.set(e,e.el.getBoundingClientRect())}function Oc(e){const t=Xi.get(e),s=er.get(e),o=t.left-s.left,a=t.top-s.top;if(o||a){const i=e.el.style;return i.transform=i.webkitTransform=`translate(${o}px,${a}px)`,i.transitionDuration="0s",e}}function Lc(e,t,s){const o=e.cloneNode(),a=e[ds];a&&a.forEach(l=>{l.split(/\s+/).forEach(c=>c&&o.classList.remove(c))}),s.split(/\s+/).forEach(l=>l&&o.classList.add(l)),o.style.display="none";const i=t.nodeType===1?t:t.parentNode;i.appendChild(o);const{hasTransform:r}=Zi(o);return i.removeChild(o),r}const fs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ue(t)?s=>Ys(t,s):t};function Dc(e){e.target.composing=!0}function ca(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const xt=Symbol("_assign"),Ue={created(e,{modifiers:{lazy:t,trim:s,number:o}},a){e[xt]=fs(a);const i=o||a.props&&a.props.type==="number";Dt(e,t?"change":"input",r=>{if(r.target.composing)return;let l=e.value;s&&(l=l.trim()),i&&(l=tn(l)),e[xt](l)}),s&&Dt(e,"change",()=>{e.value=e.value.trim()}),t||(Dt(e,"compositionstart",Dc),Dt(e,"compositionend",ca),Dt(e,"change",ca))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:o,trim:a,number:i}},r){if(e[xt]=fs(r),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?tn(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(o&&t===s||a&&e.value.trim()===c)||(e.value=c))}},We={deep:!0,created(e,t,s){e[xt]=fs(s),Dt(e,"change",()=>{const o=e._modelValue,a=Os(e),i=e.checked,r=e[xt];if(ue(o)){const l=io(o,a),c=l!==-1;if(i&&!c)r(o.concat(a));else if(!i&&c){const d=[...o];d.splice(l,1),r(d)}}else if(vs(o)){const l=new Set(o);i?l.add(a):l.delete(a),r(l)}else r(tr(e,i))})},mounted:ua,beforeUpdate(e,t,s){e[xt]=fs(s),ua(e,t,s)}};function ua(e,{value:t,oldValue:s},o){e._modelValue=t;let a;if(ue(t))a=io(t,o.props.value)>-1;else if(vs(t))a=t.has(o.props.value);else{if(t===s)return;a=Vs(t,tr(e,!0))}e.checked!==a&&(e.checked=a)}const Ut={deep:!0,created(e,{value:t,modifiers:{number:s}},o){const a=vs(t);Dt(e,"change",()=>{const i=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>s?tn(Os(r)):Os(r));e[xt](e.multiple?a?new Set(i):i:i[0]),e._assigning=!0,vo(()=>{e._assigning=!1})}),e[xt]=fs(o)},mounted(e,{value:t}){da(e,t)},beforeUpdate(e,t,s){e[xt]=fs(s)},updated(e,{value:t}){e._assigning||da(e,t)}};function da(e,t){const s=e.multiple,o=ue(t);if(!(s&&!o&&!vs(t))){for(let a=0,i=e.options.length;a<i;a++){const r=e.options[a],l=Os(r);if(s)if(o){const c=typeof l;c==="string"||c==="number"?r.selected=t.some(d=>String(d)===String(l)):r.selected=io(t,l)>-1}else r.selected=t.has(l);else if(Vs(Os(r),t)){e.selectedIndex!==a&&(e.selectedIndex=a);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Os(e){return"_value"in e?e._value:e.value}function tr(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const Mc=["ctrl","shift","alt","meta"],Uc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Mc.some(s=>e[`${s}Key`]&&!t.includes(s))},De=(e,t)=>{const s=e._withMods||(e._withMods={}),o=t.join(".");return s[o]||(s[o]=(a,...i)=>{for(let r=0;r<t.length;r++){const l=Uc[t[r]];if(l&&l(a,t))return}return e(a,...i)})},Vc=Me({patchProp:Ac},dc);let fa;function jc(){return fa||(fa=Ol(Vc))}const Hc=(...e)=>{const t=jc().createApp(...e),{mount:s}=t;return t.mount=o=>{const a=Wc(o);if(!a)return;const i=t._component;!_e(i)&&!i.render&&!i.template&&(i.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const r=s(a,!1,Bc(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),r},t};function Bc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Wc(e){return Le(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const qc=Symbol();var pa;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(pa||(pa={}));function Gc(){const e=Ir(!0),t=e.run(()=>F({}));let s=[],o=[];const a=ai({install(i){a._a=i,i.provide(qc,a),i.config.globalProperties.$pinia=a,o.forEach(r=>s.push(r)),o=[]},use(i){return this._a?s.push(i):o.push(i),this},_p:s,_a:null,_e:e,_s:new Map,state:t});return a}function $n(){const e=F([]),t=F("disconnected"),o=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;let a=null,i=null;const r=()=>{if(a&&a.readyState===WebSocket.OPEN){console.log("🔌 WebSocket already connected, skipping...");return}a&&a.close(),a=new WebSocket(o),a.onopen=()=>{t.value="connected",console.log("WebSocket connected")},a.onmessage=l=>{var c,d;try{const u=JSON.parse(l.data);if(console.log("🔌 WebSocket raw message received:",l.data),console.log("🔌 WebSocket parsed message:",u),(u==null?void 0:u.type)==="connection.status"){console.log("⚡ WebSocket connection status message received, updating status only"),t.value=((c=u==null?void 0:u.data)==null?void 0:c.status)||"connected";return}if(u&&u.type){if(e.value.length>0&&u.type===e.value[e.value.length-1].type&&JSON.stringify(u.data)===JSON.stringify(e.value[e.value.length-1].data)){console.log("🔄 Duplicate message detected, ignoring:",u.type);return}console.log("✅ Message type accepted:",u.type),console.log("📨 Adding message to messages array:",u),console.log("📊 Messages array before push:",e.value.length),u.type==="channel.update"&&((d=u.data)==null?void 0:d.username)==="TestUser"&&!u.data.test_id&&(u.data.test_id=`test_${Date.now()}`);const _=[...e.value,u];e.value=_,console.log("📊 Messages array after push:",e.value.length),console.log("📋 Current messages array:",e.value),console.log("🎯 Latest message:",e.value[e.value.length-1])}else console.warn("❌ Message type not recognized or data invalid:",u==null?void 0:u.type,"Full data:",u)}catch(u){console.error("💥 Error parsing WebSocket message:",u)}},a.onclose=l=>{t.value="disconnected",console.log("WebSocket disconnected with code:",l.code,"reason:",l.reason),console.log("WebSocket disconnected, attempting reconnect..."),i&&(clearTimeout(i),i=null);const c=Math.min(5e3*Math.pow(1.5,Math.floor(Math.random()*3)),3e4);console.log(`WebSocket will attempt reconnection in ${c/1e3} seconds`),i=window.setTimeout(()=>{t.value==="disconnected"&&(console.log("WebSocket attempting reconnection now"),r())},c)},a.onerror=l=>{console.error("WebSocket error:",l)}};return Fe(()=>{r()}),Wt(()=>{t.value="disconnected",i&&(clearTimeout(i),i=null),a&&(a.close(),a=null)}),{messages:e,connectionStatus:t}}const vt=Vt({}),Js=new Set;function Bs(){const e=l=>l?vt[l]?vt[l]:(Js.has(l)||s(l),t(l)):"/images/categories/default-category.svg",t=l=>`icon:${{"Just Chatting":"fa-comments","League of Legends":"fa-gamepad",Valorant:"fa-crosshairs",Minecraft:"fa-cube","Grand Theft Auto V":"fa-car","Counter-Strike 2":"fa-bullseye","World of Warcraft":"fa-magic",Fortnite:"fa-gamepad","Apex Legends":"fa-trophy","Call of Duty":"fa-bomb",Music:"fa-music",Art:"fa-palette","Science & Technology":"fa-microscope",Sports:"fa-football-ball","Travel & Outdoors":"fa-mountain","Dota 2":"fa-shield-alt","Overwatch 2":"fa-gamepad",Hearthstone:"fa-magic","Rocket League":"fa-car-side","Among Us":"fa-user-astronaut"}[l]||"fa-gamepad"}`,s=async l=>{if(!Js.has(l))try{Js.add(l);const c=await fetch(`/api/categories/image/${encodeURIComponent(l)}`);if(c.ok){const d=await c.json();d.image_url&&d.image_url.startsWith("icon:"),vt[l]=d.image_url}}catch(c){console.warn(`Failed to fetch category image for ${l}:`,c),vt[l]=t(l)}finally{Js.delete(l)}};return{getCategoryImage:e,getIconFallback:t,preloadCategoryImages:async l=>{try{const c=await fetch("/api/categories/preload-images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(c.ok){const d=await c.json();return console.log("Preloading category images:",d.message),d}}catch(c){console.warn("Failed to preload category images:",c)}},getCacheStatus:async()=>{try{const l=await fetch("/api/categories/cache-status");if(l.ok)return await l.json()}catch(l){console.warn("Failed to get cache status:",l)}},refreshImages:async l=>{try{const c=await fetch("/api/categories/refresh-images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(c.ok){const d=await c.json();return console.log("Refreshing category images:",d.message),l.forEach(u=>{vt[u]&&delete vt[u]}),d}}catch(c){console.warn("Failed to refresh category images:",c)}},clearCache:()=>{Object.keys(vt).forEach(l=>{delete vt[l]}),console.log("Category image cache cleared")},categoryImageCache:vt}}const Kc={class:"notification-feed"},zc={class:"feed-header"},Jc={class:"header-content"},Yc={class:"header-text"},Qc={class:"section-subtitle"},Zc={key:0,class:"no-notifications"},Xc={class:"notification-icon"},eu={key:0},tu={key:1},su={key:2},nu={key:3},ou={key:4},au={key:5},iu={key:6},ru={key:7},lu={class:"notification-content"},cu={class:"notification-header"},uu={class:"notification-title"},du={class:"notification-time"},fu={class:"notification-message"},pu={key:0,class:"notification-meta"},gu={class:"category-tag"},vu={class:"category-image-small"},mu=["src","alt"],hu=["onClick"],ga=100,yu=2e3,_u=Ne({__name:"NotificationFeed",emits:["notifications-read","close-panel","clear-all"],setup(e,{emit:t}){const s=t,o=F([]),{messages:a}=$n(),{getCategoryImage:i}=Bs(),r=new Map,l=p=>{var P;return`${p.type}_${p.streamer_username}_${((P=p.data)==null?void 0:P.title)||""}`},c=pe(()=>[...o.value].sort((p,P)=>new Date(P.timestamp).getTime()-new Date(p.timestamp).getTime())),d=p=>{const P=new Date,T=new Date(p),X=P.getTime()-T.getTime();if(X<60*1e3)return"Just now";if(X<60*60*1e3){const Q=Math.floor(X/6e4);return`${Q} minute${Q!==1?"s":""} ago`}if(X<24*60*60*1e3){const Q=Math.floor(X/36e5);return`${Q} hour${Q!==1?"s":""} ago`}if(X<7*24*60*60*1e3){const Q=Math.floor(X/864e5);return`${Q} day${Q!==1?"s":""} ago`}return T.toLocaleDateString()},u=p=>{var T,X,Q;const P=p.streamer_username||((T=p.data)==null?void 0:T.streamer_name)||((X=p.data)==null?void 0:X.username)||"Unknown";if((Q=p.data)!=null&&Q.test_id)return"Test Notification";switch(p.type){case"stream.online":return`${P} is Live`;case"stream.offline":return`${P} Stream Ended`;case"channel.update":case"stream.update":return`${P} Updated Stream`;case"recording.started":return"Recording Started";case"recording.completed":return"Recording Completed";case"recording.failed":return"Recording Failed";default:return p.title||"Notification"}},f=p=>{const{type:P,data:T}=p,X=p.streamer_username||(T==null?void 0:T.streamer_name)||(T==null?void 0:T.username)||"Unknown";if(T!=null&&T.message)return T.message;switch(P){case"stream.online":return T!=null&&T.title?`${X} is live: "${T.title}"`:`${X} is now streaming`;case"stream.offline":return`${X} has gone offline`;case"channel.update":case"stream.update":return T!=null&&T.title?`New title: ${T.title}`:`${X} updated their stream`;case"recording.started":return`Started recording ${X}'s stream`;case"recording.completed":return`Successfully completed recording ${X}'s stream`;case"recording.failed":return T!=null&&T.error?`Failed to record ${X}'s stream: ${T.error}`:`Failed to record ${X}'s stream`;case"test":return(T==null?void 0:T.message)||"This is a test notification to verify the system is working properly";default:return`New notification for ${X}`}},_=p=>{switch(p){case"stream.online":return"online";case"stream.offline":return"offline";case"channel.update":case"stream.update":return"update";case"recording.started":return"recording";case"recording.completed":return"success";case"recording.failed":return"error";case"test":return"test";default:return"info"}},h=p=>{var P,T,X,Q;console.log("🔥 NotificationFeed: ADDING NOTIFICATION:",p);try{const V=((P=p.data)==null?void 0:P.test_id)||`${p.type}_${Date.now()}_${Math.random()}`,L=(T=p.data)!=null&&T.timestamp?new Date(parseInt(p.data.timestamp)||p.data.timestamp).toISOString():new Date().toISOString(),G=((X=p.data)==null?void 0:X.username)||((Q=p.data)==null?void 0:Q.streamer_name)||"Unknown",ee={id:V,type:p.type,timestamp:L,streamer_username:G,data:p.data||{}};console.log("🔥 NotificationFeed: CREATED NOTIFICATION:",ee);const z=l(ee),D=Date.now(),A=r.get(z);if(A&&D-A<yu){console.log("🔥 NotificationFeed: Notification debounced (too soon after last identical notification)");return}r.set(z,D);for(const[B,se]of r.entries())D-se>3e5&&r.delete(B);const M=(B,se)=>{var re,me;if(B.type!==se.type||B.streamer_username!==se.streamer_username)return!1;if(se.type==="channel.update"||se.type==="stream.update"){const Ie=((re=B.data)==null?void 0:re.title)||"",Ge=((me=se.data)==null?void 0:me.title)||"",ie=Math.abs(new Date(B.timestamp).getTime()-new Date(se.timestamp).getTime());if(Ie===Ge&&ie<3e4)return!0}return se.type==="stream.online"?Math.abs(new Date(B.timestamp).getTime()-new Date(se.timestamp).getTime())<1e4:se.type.startsWith("recording.")?Math.abs(new Date(B.timestamp).getTime()-new Date(se.timestamp).getTime())<5e3:!1},W=o.value.findIndex(B=>M(B,ee));W>=0?(console.log("🔥 NotificationFeed: Duplicate notification found, replacing"),o.value[W]=ee):(console.log("🔥 NotificationFeed: Adding new notification"),o.value.unshift(ee)),o.value.length>ga&&(o.value=o.value.slice(0,ga)),console.log("🔥 NotificationFeed: NOTIFICATIONS ARRAY NOW HAS:",o.value.length,"items"),console.log("🔥 NotificationFeed: ALL NOTIFICATIONS:",o.value),N()}catch(V){console.error("❌ NotificationFeed: Error adding notification:",V)}},S=p=>{o.value=o.value.filter(P=>P.id!==p),N()},k=p=>{console.log("🗑️ NotificationFeed: Clear all button clicked!"),console.log("🗑️ NotificationFeed: Event object:",p),console.log("🗑️ NotificationFeed: Event target:",p==null?void 0:p.target),console.log("🗑️ NotificationFeed: Current notifications count:",o.value.length),p&&(p.preventDefault(),p.stopPropagation(),p.stopImmediatePropagation()),o.value=[],console.log("🗑️ NotificationFeed: Cleared notifications array directly");try{localStorage.removeItem("streamvault_notifications");const P=localStorage.getItem("streamvault_notifications");console.log("🗑️ NotificationFeed: localStorage after removal:",P),localStorage.setItem("streamvault_notifications",JSON.stringify([]));const T=localStorage.getItem("streamvault_notifications");console.log("🗑️ NotificationFeed: localStorage after setting empty array:",T)}catch(P){console.error("❌ NotificationFeed: Error clearing localStorage:",P)}window.dispatchEvent(new CustomEvent("notificationsUpdated",{detail:{count:0}})),console.log("🗑️ NotificationFeed: Dispatched notificationsUpdated event"),s("clear-all"),console.log("🗑️ NotificationFeed: Emitted clear-all event to App.vue"),s("close-panel"),console.log("🗑️ NotificationFeed: Emitted close-panel event")},N=()=>{try{localStorage.setItem("streamvault_notifications",JSON.stringify(o.value)),console.log("💾 NotificationFeed: Saved",o.value.length,"notifications to localStorage"),window.dispatchEvent(new CustomEvent("notificationsUpdated",{detail:{count:o.value.length}}))}catch(p){console.error("❌ NotificationFeed: Error saving notifications:",p)}},R=()=>{try{const p=localStorage.getItem("streamvault_notifications");if(console.log("📂 NotificationFeed: Raw localStorage value:",p),p){const P=JSON.parse(p);console.log("📂 NotificationFeed: Parsed localStorage value:",P),Array.isArray(P)&&P.length>0?(o.value=P,console.log("📂 NotificationFeed: Loaded",P.length,"notifications from localStorage")):(o.value=[],console.log("📂 NotificationFeed: Empty or invalid array in localStorage, starting with empty notifications"))}else o.value=[],console.log("📂 NotificationFeed: No localStorage data found, starting with empty notifications")}catch(p){console.error("❌ NotificationFeed: Error loading notifications:",p),o.value=[]}},y=p=>{if(console.log("⚡ NotificationFeed: PROCESSING MESSAGE:",p),!p||!p.type){console.log("❌ NotificationFeed: Invalid message");return}if(p.type==="connection.status"){console.log("⏭️ NotificationFeed: Skipping connection status");return}["stream.online","stream.offline","channel.update","stream.update","recording.started","recording.completed","recording.failed","test"].includes(p.type)?(console.log("✅ NotificationFeed: Valid message type, adding notification"),h(p)):console.log("❌ NotificationFeed: Invalid message type:",p.type)},v=F(0);Je(()=>a.value.length,p=>{if(console.log("🔥 NotificationFeed: Message count changed to",p,"from",v.value),p>v.value){console.log("🔥 NotificationFeed: NEW MESSAGES DETECTED!");const P=p-v.value,T=a.value.slice(-P);console.log("🔥 NotificationFeed: Processing",T.length,"new messages"),T.forEach((X,Q)=>{console.log(`🔥 NotificationFeed: Processing new message ${Q+1}:`,X),y(X)}),v.value=p}},{immediate:!1}),Fe(()=>{console.log("🚀 NotificationFeed: Component mounted"),R(),v.value=a.value.length,console.log("🚀 NotificationFeed: Set initial message count to",v.value),console.log("🚀 NotificationFeed: Processing",a.value.length,"existing WebSocket messages"),a.value.forEach((p,P)=>{console.log(`🚀 NotificationFeed: Processing existing message ${P+1}:`,p),y(p)}),console.log("🚀 NotificationFeed: Component fully loaded with",o.value.length,"notifications"),window.addEventListener("notificationsUpdated",b)});const b=p=>{console.log("📡 NotificationFeed: Received notificationsUpdated event:",p.detail),R()};return Wt(()=>{console.log("🚀 NotificationFeed: Component unmounting, marking notifications as read"),window.removeEventListener("notificationsUpdated",b),s("notifications-read")}),(p,P)=>(g(),m("div",Kc,[n("div",zc,[n("div",Jc,[P[3]||(P[3]=n("div",{class:"header-icon"},[n("div",{class:"icon-ring"},[n("span",{class:"bell-icon"},"🔔")])],-1)),n("div",Yc,[P[2]||(P[2]=n("h2",{class:"section-title"},"Notifications",-1)),n("p",Qc,x(o.value.length)+" recent update"+x(o.value.length!==1?"s":""),1)])]),o.value.length>0?(g(),m("button",{key:0,onClick:De(k,["stop"]),onMousedown:P[0]||(P[0]=De(()=>{},["stop"])),onMouseup:P[1]||(P[1]=De(()=>{},["stop"])),onTouchstart:De(k,["stop"]),class:"clear-all-btn","aria-label":"Clear all notifications",type:"button",ref:"clearButton"},[n("span",{class:"clear-icon",onClick:De(k,["stop"])},"🗑️"),n("span",{class:"clear-text",onClick:De(k,["stop"])},"Clear")],544)):H("",!0)]),o.value.length===0?(g(),m("div",Zc,P[4]||(P[4]=[n("div",{class:"empty-state"},[n("div",{class:"empty-icon"},[n("div",{class:"icon-circle"},[n("span",null,"📭")])]),n("h3",null,"All caught up!"),n("p",null,"No new notifications")],-1)]))):(g(),qt(wo,{key:1,name:"notification",tag:"div",class:"notification-list"},{default:Re(()=>[(g(!0),m(he,null,$e(c.value,T=>{var X,Q,V,L,G,ee,z,D,A,M,W,B;return g(),m("div",{key:T.id,class:ce(["notification-item",_(T.type)])},[n("div",{class:ce(["notification-indicator",_(T.type)])},null,2),n("div",Xc,[n("div",{class:ce(["icon-wrapper",_(T.type)])},[T.type==="stream.online"?(g(),m("span",eu,"🔴")):T.type==="stream.offline"?(g(),m("span",tu,"⭕")):T.type==="channel.update"||T.type==="stream.update"?(g(),m("span",su,"📝")):T.type==="recording.started"?(g(),m("span",nu,"🎥")):T.type==="recording.completed"?(g(),m("span",ou,"✅")):T.type==="recording.failed"?(g(),m("span",au,"❌")):T.type==="test"?(g(),m("span",iu,"🧪")):(g(),m("span",ru,"ℹ️"))],2)]),n("div",lu,[n("div",cu,[n("span",uu,x(u(T)),1),n("span",du,x(d(T.timestamp)),1)]),n("p",fu,x(f(T)),1),(X=T.data)!=null&&X.game_name||(Q=T.data)!=null&&Q.category_name?(g(),m("div",pu,[n("span",gu,[n("span",vu,[le(i)(((V=T.data)==null?void 0:V.game_name)||((L=T.data)==null?void 0:L.category_name)||"").startsWith("icon:")?(g(),m("i",{key:1,class:ce([le(i)(((A=T.data)==null?void 0:A.game_name)||((M=T.data)==null?void 0:M.category_name)||"").replace("icon:",""),"category-icon"])},null,2)):(g(),m("img",{key:0,src:le(i)(((G=T.data)==null?void 0:G.game_name)||((ee=T.data)==null?void 0:ee.category_name)||""),alt:((z=T.data)==null?void 0:z.game_name)||((D=T.data)==null?void 0:D.category_name),loading:"lazy"},null,8,mu))]),J(" "+x(((W=T.data)==null?void 0:W.game_name)||((B=T.data)==null?void 0:B.category_name)),1)])])):H("",!0)]),n("button",{onClick:se=>S(T.id),class:"notification-dismiss","aria-label":"Dismiss notification"},P[5]||(P[5]=[n("span",{class:"dismiss-icon"},"×",-1)]),8,hu)],2)}),128))]),_:1}))]))}}),Oe=(e,t)=>{const s=e.__vccOpts||e;for(const[o,a]of t)s[o]=a;return s},bu=Oe(_u,[["__scopeId","data-v-a62c455a"]]);function sr(){const e=F(!1),t=F(!1),s=F(navigator.onLine),o=F(null),a=F(null),i=F("serviceWorker"in navigator&&"PushManager"in window),r=F("default"),l=()=>{t.value=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||window.matchMedia("(display-mode: fullscreen)").matches||window.matchMedia("(display-mode: minimal-ui)").matches},c=async()=>{if("serviceWorker"in navigator)try{const p=await navigator.serviceWorker.register("/sw.js");return o.value=p,console.log("Service Worker registered successfully:",p),p.addEventListener("updatefound",()=>{const P=p.installing;P&&P.addEventListener("statechange",()=>{P.state==="installed"&&navigator.serviceWorker.controller&&console.log("New version available!")})}),p}catch(p){return console.error("Service Worker registration failed:",p),null}return null},d=async()=>{if(a.value)try{await a.value.prompt(),(await a.value.userChoice).outcome==="accepted"&&(console.log("PWA installed successfully"),e.value=!1,a.value=null)}catch(p){console.error("PWA installation failed:",p)}},u=async()=>{if(!("Notification"in window))return console.warn("This browser does not support notifications"),"denied";let p=Notification.permission;return p==="default"&&(p=await Notification.requestPermission()),r.value=p,p},f=async()=>{if(!o.value||!i.value)return console.warn("Push notifications not supported"),null;try{if(await u()!=="granted")throw new Error("Notification permission denied");let P=await o.value.pushManager.getSubscription();if(!P){const T=await fetch("/api/push/vapid-public-key"),{publicKey:X}=await T.json();P=await o.value.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:wu(X)})}return await fetch("/api/push/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:P.toJSON(),userAgent:navigator.userAgent})}),console.log("Push subscription successful:",P),P}catch(p){return console.error("Push subscription failed:",p),null}},_=async()=>{if(!o.value)return!1;try{const p=await o.value.pushManager.getSubscription();return p&&(await p.unsubscribe(),await fetch("/api/push/unsubscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:p.endpoint})})),!0}catch(p){return console.error("Push unsubscription failed:",p),!1}},h=async(p,P={})=>{if(!o.value){console.warn("Service Worker not registered");return}if(await u()!=="granted"){console.warn("Notification permission not granted");return}const X={icon:"/android-icon-192x192.png",badge:"/android-icon-96x96.png",tag:"streamvault-notification",...P};return"vibrate"in navigator&&navigator.vibrate&&navigator.vibrate([200,100,200]),console.log("Showing notification:",p,X),o.value.showNotification(p,X)},S=()=>{const p=navigator.userAgent;let P="Unknown",T="Unknown";return/iPad|iPhone|iPod/.test(p)?P="iOS":/Android/.test(p)?P="Android":/Windows/.test(p)?P="Windows":/Macintosh|Mac OS X/.test(p)?P="macOS":/Linux/.test(p)&&!/Android/.test(p)&&(P="Linux"),/Edge/.test(p)?T="Microsoft Edge":/Chrome/.test(p)&&!/Edge/.test(p)?T="Google Chrome":/Safari/.test(p)&&!/Chrome/.test(p)?T="Safari":/Firefox/.test(p)?T="Firefox":/Opera|OPR/.test(p)?T="Opera":/SamsungBrowser/.test(p)&&(T="Samsung Internet"),{platform:P,browser:T}},k=()=>{const p={hasManifest:!!document.querySelector('link[rel="manifest"]'),hasServiceWorker:"serviceWorker"in navigator,hasHTTPS:location.protocol==="https:"||location.hostname==="localhost",hasIcons:!0,hasStartUrl:!0,hasName:!0,hasDisplay:!0},P=Object.values(p).every(Boolean);return{criteria:p,allCriteriaMet:P}},N=()=>{const{platform:p,browser:P}=S();return p==="iOS"&&P==="Safari"?{steps:["Tap the Share button (box with arrow) at the bottom of the screen",'Scroll down and tap "Add to Home Screen"','Edit the name if desired, then tap "Add"',"StreamVault will appear on your home screen"],icon:"📱"}:p==="Android"&&(P==="Google Chrome"||P==="Samsung Internet")?{steps:['Look for the "Install" or "Add to Home Screen" prompt','If no prompt appears, tap the menu (⋮) and select "Install App" or "Add to Home Screen"','Tap "Install" in the confirmation dialog',"StreamVault will be added to your app drawer and home screen"],icon:"🤖"}:p==="Windows"&&(P==="Google Chrome"||P==="Microsoft Edge")?{steps:["Look for the install icon (⊞) in the address bar",'Click the install icon and select "Install"','Or open browser menu and select "Install StreamVault"',"The app will be added to your Start Menu and taskbar"],icon:"🪟"}:p==="macOS"&&(P==="Google Chrome"||P==="Safari"||P==="Microsoft Edge")?{steps:["Look for the install icon in the address bar",'Click the install icon and select "Install"','Or use browser menu and select "Install StreamVault"',"The app will be added to your Applications folder and Dock"],icon:"🍎"}:p==="Linux"&&P==="Google Chrome"?{steps:["Look for the install icon in the address bar",'Click the install icon and select "Install"','Or open browser menu and select "Install StreamVault"',"The app will be added to your applications menu"],icon:"🐧"}:{steps:["PWA installation may not be supported on this platform/browser combination","For the best experience, use Chrome, Edge, or Safari on a supported platform"],icon:"❓"}},R=()=>{s.value=!0,console.log("App is online")},y=()=>{s.value=!1,console.log("App is offline")},v=p=>{p.preventDefault(),a.value=p,e.value=!0,console.log("PWA install prompt available")},b=p=>{if(console.log("Message from Service Worker:",p.data),p.data.type==="NOTIFICATION_CLICK"){const{action:P,data:T,url:X}=p.data;console.log("Notification clicked:",{action:P,data:T,url:X})}};return Fe(()=>{l(),c(),"Notification"in window&&(r.value=Notification.permission),window.addEventListener("online",R),window.addEventListener("offline",y),window.addEventListener("beforeinstallprompt",v),window.addEventListener("appinstalled",()=>{console.log("PWA was installed"),t.value=!0,e.value=!1,a.value=null}),window.matchMedia("(display-mode: standalone)").addEventListener("change",l),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",b)}),Wt(()=>{window.removeEventListener("online",R),window.removeEventListener("offline",y),window.removeEventListener("beforeinstallprompt",v),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",b)}),{isInstallable:e,isInstalled:t,isOnline:s,pushSupported:i,notificationPermission:r,registration:o,installPWA:d,subscribeToPush:f,unsubscribeFromPush:_,showNotification:h,requestNotificationPermission:u,getPlatformInfo:S,checkPWAInstallCriteria:k,getInstallInstructions:N}}function wu(e){const t="=".repeat((4-e.length%4)%4),s=(e+t).replace(/-/g,"+").replace(/_/g,"/"),o=window.atob(s),a=new Uint8Array(o.length);for(let i=0;i<o.length;++i)a[i]=o.charCodeAt(i);return a}const Su={key:0,class:"install-prompt"},$u={class:"install-prompt__content"},ku={class:"install-prompt__text"},Cu=Ne({__name:"PWAInstallPrompt",setup(e){const{isInstallable:t,isInstalled:s,installPWA:o}=sr(),a=F(!1),i=F(!1),r=F(null),l=pe(()=>{if(!r.value)return"Install StreamVault";const{platform:f,browser:_}=r.value;return f==="iOS"&&_==="Safari"?"Add StreamVault to Home Screen":f==="Android"?"Install StreamVault App":f==="Windows"?"Install StreamVault":f==="macOS"?"Add StreamVault to Dock":"Install StreamVault"}),c=pe(()=>{if(!r.value)return"Install this app on your device for a better experience";const{platform:f,browser:_}=r.value;return f==="iOS"&&_==="Safari"?'Tap the Share button, then "Add to Home Screen" for quick access':f==="Android"?"Install for faster loading and offline access":f==="Windows"?"Install to your Start Menu and taskbar":f==="macOS"?"Add to your Dock for quick access":f==="Linux"?"Install for better performance and offline use":"Install this app on your device for a better experience"});Fe(()=>{const f=localStorage.getItem("pwa-install-dismissed");i.value=f==="true",setTimeout(()=>{t.value&&!s.value&&!i.value&&(a.value=!0)},3e3),setInterval(()=>{t.value&&!s.value&&!i.value&&!a.value&&(a.value=!0)},1e4)});const d=async()=>{try{await o(),a.value=!1}catch(f){console.error("Installation failed:",f)}},u=()=>{a.value=!1,i.value=!0,localStorage.setItem("pwa-install-dismissed","true"),setTimeout(()=>{localStorage.removeItem("pwa-install-dismissed")},7*24*60*60*1e3)};return(f,_)=>a.value?(g(),m("div",Su,[n("div",$u,[_[0]||(_[0]=n("div",{class:"install-prompt__icon"},[n("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z",fill:"currentColor"})])],-1)),n("div",ku,[n("h3",null,x(l.value),1),n("p",null,x(c.value),1)]),n("div",{class:"install-prompt__actions"},[n("button",{onClick:d,class:"install-btn"},"Install"),n("button",{onClick:u,class:"dismiss-btn"},"Not now")])])])):H("",!0)}}),Eu=Oe(Cu,[["__scopeId","data-v-f8bd6d04"]]),xu={class:"app"},Tu={class:"app-header"},Au={class:"header-content"},Pu={class:"main-nav"},Ru={class:"notification-bell-container"},Iu={key:0,class:"notification-count"},Nu={key:0,class:"notification-overlay"},Fu={class:"main-content"},Ou={class:"mobile-nav-bottom"},Lu={key:0,class:"mobile-notification-indicator"},Du={__name:"App",setup(e){const t=F(!1),s=F(0),o=F(localStorage.getItem("lastReadTimestamp")||"0"),{messages:a}=$n(),i=S=>{if(console.log("🔥 App: Processing WebSocket message:",S),!S||!S.type){console.log("❌ App: Invalid message");return}if(S.type==="connection.status"){console.log("⏭️ App: Skipping connection status");return}["stream.online","stream.offline","channel.update","stream.update","recording.started","recording.completed","recording.failed","test"].includes(S.type)?(console.log("✅ App: Valid message type, adding to localStorage"),r(S)):console.log("❌ App: Invalid message type:",S.type)},r=S=>{var k,N,R,y;try{const v=((k=S.data)==null?void 0:k.test_id)||`${S.type}_${Date.now()}_${Math.random()}`,b=(N=S.data)!=null&&N.timestamp?new Date(parseInt(S.data.timestamp)||S.data.timestamp).toISOString():new Date().toISOString(),p=((R=S.data)==null?void 0:R.username)||((y=S.data)==null?void 0:y.streamer_name)||"Unknown",P={id:v,type:S.type,timestamp:b,streamer_username:p,data:S.data||{}};console.log("🔥 App: Created notification:",P);let T=[];try{const X=localStorage.getItem("streamvault_notifications");X&&(T=JSON.parse(X))}catch{T=[]}T.unshift(P),T.length>100&&(T=T.slice(0,100)),localStorage.setItem("streamvault_notifications",JSON.stringify(T)),console.log("💾 App: Saved notification to localStorage. Total notifications:",T.length),_(),window.dispatchEvent(new CustomEvent("notificationsUpdated",{detail:{count:T.length}}))}catch(v){console.error("❌ App: Error adding notification to localStorage:",v)}};let l=0;Je(()=>a.value.length,S=>{if(console.log("🔥 App: Message count changed to",S,"from",l),S>l){console.log("🔥 App: NEW MESSAGES DETECTED!");const k=S-l,N=a.value.slice(-k);console.log("🔥 App: Processing",N.length,"new messages"),N.forEach((R,y)=>{console.log(`🔥 App: Processing new message ${y+1}:`,R),i(R)}),l=S}},{immediate:!1});function c(){console.log("🔔 App: Toggling notifications panel"),t.value=!t.value,t.value?console.log("🔔 Notifications panel opened"):console.log("🔔 Notifications panel closed")}function d(){console.log("🔔 App: Marking all notifications as read"),s.value=0,o.value=Date.now().toString(),localStorage.setItem("lastReadTimestamp",o.value),console.log("🔔 App: Updated lastReadTimestamp in localStorage to:",o.value)}function u(){console.log("🔔 App: Clearing all notifications - Event received from NotificationFeed"),localStorage.removeItem("streamvault_notifications"),d(),notificationCount.value=0,window.dispatchEvent(new CustomEvent("notificationsUpdated",{detail:{count:0}})),console.log("🔔 App: All notifications cleared successfully")}function f(){t.value&&(console.log("🔔 App: Closing notification panel"),t.value=!1,d())}function _(){const S=localStorage.getItem("streamvault_notifications");if(console.log("🔄 App: Checking localStorage for notifications"),S)try{const k=JSON.parse(S);if(console.log("🔄 App: Found notifications in localStorage:",k.length),Array.isArray(k)){const N=["stream.online","stream.offline","channel.update","stream.update","recording.started","recording.completed","recording.failed","test"],R=k.filter(y=>{const v=new Date(y.timestamp).getTime(),b=N.includes(y.type),p=v>parseInt(o.value);return console.log(`🔄 App: Notification ${y.id} - Type: ${y.type}, Valid: ${b}, Unread: ${p}`),b&&p});s.value=R.length,console.log("🔢 App: Updated unread count to:",s.value,"notifications"),R.length>0&&console.log("🔢 App: Unread notifications:",R)}}catch(k){console.error("❌ App: Failed to parse notifications from localStorage",k)}else console.log("🔄 App: No notifications found in localStorage"),s.value=0}Fe(()=>{_(),l=a.value.length,console.log("🚀 App: Set initial message count to",l),a.value.length>0&&(console.log("🚀 App: Processing",a.value.length,"existing WebSocket messages"),a.value.forEach((S,k)=>{console.log(`🚀 App: Processing existing message ${k+1}:`,S),i(S)})),document.addEventListener("click",S=>{const k=document.querySelector(".notification-feed"),N=document.querySelector(".notification-bell");t.value&&k&&N&&!k.contains(S.target)&&!N.contains(S.target)&&f()}),window.addEventListener("storage",S=>{S.key==="streamvault_notifications"&&(console.log("📦 App: localStorage notifications changed, updating count"),_())}),window.addEventListener("notificationsUpdated",()=>{console.log("📦 App: Custom notificationsUpdated event received, updating count"),_()})});const h=F(0);return Je(a,S=>{if(console.log("🔄 App: Messages watcher triggered. Messages count:",S.length),!(!S||S.length===0))if(S.length>h.value){const k=S.length-h.value,N=S.slice(-k);h.value=S.length,N.forEach(R=>{var v;if(console.log("🔄 App: Processing new message for counting:",R),["stream.online","stream.offline","channel.update","stream.update","recording.started","recording.completed","recording.failed","test"].includes(R.type)&&!t.value){console.log("🔢 App: Valid notification type for counter:",R.type);const b=((v=R.data)==null?void 0:v.timestamp)||Date.now();parseInt(b)>parseInt(o.value)?(s.value++,console.log("🔢 App: Unread count is now",s.value)):console.log("🔢 App: Notification timestamp older than last read, not incrementing count")}else console.log("⏭️ App: Skipping unread count for message type:",R.type,"or panel is open:",t.value)})}else console.log("🔄 App: No new messages detected")},{deep:!0,immediate:!1}),(S,k)=>{const N=us("router-link"),R=us("router-view");return g(),m("div",xu,[n("header",Tu,[n("div",Au,[k[7]||(k[7]=n("h1",{class:"app-logo"},"StreamVault",-1)),n("nav",Pu,[ge(N,{to:"/",class:"nav-link"},{default:Re(()=>k[0]||(k[0]=[J("Home")])),_:1}),ge(N,{to:"/streamers",class:"nav-link"},{default:Re(()=>k[1]||(k[1]=[J("Streamers")])),_:1}),ge(N,{to:"/videos",class:"nav-link"},{default:Re(()=>k[2]||(k[2]=[J("Videos")])),_:1}),ge(N,{to:"/add-streamer",class:"nav-link"},{default:Re(()=>k[3]||(k[3]=[J("Add Streamer")])),_:1}),ge(N,{to:"/subscriptions",class:"nav-link"},{default:Re(()=>k[4]||(k[4]=[J("Subscriptions")])),_:1}),ge(N,{to:"/settings",class:"nav-link"},{default:Re(()=>k[5]||(k[5]=[J("Settings")])),_:1}),n("div",Ru,[n("button",{onClick:c,class:ce(["notification-bell",{"has-unread":s.value>0}])},[k[6]||(k[6]=n("svg",{class:"bell-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),n("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})],-1)),s.value>0?(g(),m("span",Iu,x(s.value>99?"99+":s.value),1)):H("",!0)],2)])])])]),t.value?(g(),m("div",Nu,[ge(bu,{onNotificationsRead:d,onClosePanel:f,onClearAll:u})])):H("",!0),n("div",Fu,[ge(R,null,{default:Re(({Component:y})=>[ge(pc,{name:"page",mode:"out-in"},{default:Re(()=>[(g(),qt(bl(y)))]),_:2},1024)]),_:1})]),n("div",Ou,[ge(N,{to:"/",class:"mobile-nav-item"},{default:Re(()=>k[8]||(k[8]=[n("svg",{class:"mobile-nav-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),n("polyline",{points:"9 22 9 12 15 12 15 22"})],-1),n("span",null,"Home",-1)])),_:1}),ge(N,{to:"/streamers",class:"mobile-nav-item"},{default:Re(()=>k[9]||(k[9]=[n("svg",{class:"mobile-nav-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"3"}),n("path",{d:"M20 12v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-6"}),n("path",{d:"M2 12h20"})],-1),n("span",null,"Streamers",-1)])),_:1}),ge(N,{to:"/videos",class:"mobile-nav-item"},{default:Re(()=>k[10]||(k[10]=[n("svg",{class:"mobile-nav-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("polygon",{points:"23 7 16 12 23 17 23 7"}),n("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})],-1),n("span",null,"Videos",-1)])),_:1}),ge(N,{to:"/add-streamer",class:"mobile-nav-item"},{default:Re(()=>k[11]||(k[11]=[n("svg",{class:"mobile-nav-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"10"}),n("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),n("line",{x1:"8",y1:"12",x2:"16",y2:"12"})],-1),n("span",null,"Add",-1)])),_:1}),ge(N,{to:"/subscriptions",class:"mobile-nav-item"},{default:Re(()=>k[12]||(k[12]=[n("svg",{class:"mobile-nav-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),n("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})],-1),n("span",null,"Subs",-1)])),_:1}),ge(N,{to:"/settings",class:"mobile-nav-item"},{default:Re(()=>k[13]||(k[13]=[n("svg",{class:"mobile-nav-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"3"})],-1),n("span",null,"Settings",-1)])),_:1}),n("button",{onClick:c,class:"mobile-nav-item mobile-notification-btn"},[k[14]||(k[14]=n("svg",{class:"mobile-nav-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),n("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})],-1)),k[15]||(k[15]=n("span",null,"Alerts",-1)),s.value>0?(g(),m("span",Lu)):H("",!0)])]),ge(Eu)])}}},Mu=Oe(Du,[["__scopeId","data-v-22ba959f"]]);/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const os=typeof document<"u";function nr(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Uu(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&nr(e.default)}const ke=Object.assign;function Mn(e,t){const s={};for(const o in t){const a=t[o];s[o]=ut(a)?a.map(e):e(a)}return s}const xs=()=>{},ut=Array.isArray,or=/#/g,Vu=/&/g,ju=/\//g,Hu=/=/g,Bu=/\?/g,ar=/\+/g,Wu=/%5B/g,qu=/%5D/g,ir=/%5E/g,Gu=/%60/g,rr=/%7B/g,Ku=/%7C/g,lr=/%7D/g,zu=/%20/g;function So(e){return encodeURI(""+e).replace(Ku,"|").replace(Wu,"[").replace(qu,"]")}function Ju(e){return So(e).replace(rr,"{").replace(lr,"}").replace(ir,"^")}function Xn(e){return So(e).replace(ar,"%2B").replace(zu,"+").replace(or,"%23").replace(Vu,"%26").replace(Gu,"`").replace(rr,"{").replace(lr,"}").replace(ir,"^")}function Yu(e){return Xn(e).replace(Hu,"%3D")}function Qu(e){return So(e).replace(or,"%23").replace(Bu,"%3F")}function Zu(e){return e==null?"":Qu(e).replace(ju,"%2F")}function Ls(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Xu=/\/$/,ed=e=>e.replace(Xu,"");function Un(e,t,s="/"){let o,a={},i="",r="";const l=t.indexOf("#");let c=t.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(o=t.slice(0,c),i=t.slice(c+1,l>-1?l:t.length),a=e(i)),l>-1&&(o=o||t.slice(0,l),r=t.slice(l,t.length)),o=od(o??t,s),{fullPath:o+(i&&"?")+i+r,path:o,query:a,hash:Ls(r)}}function td(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function va(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function sd(e,t,s){const o=t.matched.length-1,a=s.matched.length-1;return o>-1&&o===a&&ps(t.matched[o],s.matched[a])&&cr(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function ps(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function cr(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(!nd(e[s],t[s]))return!1;return!0}function nd(e,t){return ut(e)?ma(e,t):ut(t)?ma(t,e):e===t}function ma(e,t){return ut(t)?e.length===t.length&&e.every((s,o)=>s===t[o]):e.length===1&&e[0]===t}function od(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),o=e.split("/"),a=o[o.length-1];(a===".."||a===".")&&o.push("");let i=s.length-1,r,l;for(r=0;r<o.length;r++)if(l=o[r],l!==".")if(l==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+o.slice(r).join("/")}const Rt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ds;(function(e){e.pop="pop",e.push="push"})(Ds||(Ds={}));var Ts;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ts||(Ts={}));function ad(e){if(!e)if(os){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ed(e)}const id=/^[^#]+#/;function rd(e,t){return e.replace(id,"#")+t}function ld(e,t){const s=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:t.behavior,left:o.left-s.left-(t.left||0),top:o.top-s.top-(t.top||0)}}const kn=()=>({left:window.scrollX,top:window.scrollY});function cd(e){let t;if("el"in e){const s=e.el,o=typeof s=="string"&&s.startsWith("#"),a=typeof s=="string"?o?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!a)return;t=ld(a,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function ha(e,t){return(history.state?history.state.position-t:-1)+e}const eo=new Map;function ud(e,t){eo.set(e,t)}function dd(e){const t=eo.get(e);return eo.delete(e),t}let fd=()=>location.protocol+"//"+location.host;function ur(e,t){const{pathname:s,search:o,hash:a}=t,i=e.indexOf("#");if(i>-1){let l=a.includes(e.slice(i))?e.slice(i).length:1,c=a.slice(l);return c[0]!=="/"&&(c="/"+c),va(c,"")}return va(s,e)+o+a}function pd(e,t,s,o){let a=[],i=[],r=null;const l=({state:_})=>{const h=ur(e,location),S=s.value,k=t.value;let N=0;if(_){if(s.value=h,t.value=_,r&&r===S){r=null;return}N=k?_.position-k.position:0}else o(h);a.forEach(R=>{R(s.value,S,{delta:N,type:Ds.pop,direction:N?N>0?Ts.forward:Ts.back:Ts.unknown})})};function c(){r=s.value}function d(_){a.push(_);const h=()=>{const S=a.indexOf(_);S>-1&&a.splice(S,1)};return i.push(h),h}function u(){const{history:_}=window;_.state&&_.replaceState(ke({},_.state,{scroll:kn()}),"")}function f(){for(const _ of i)_();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:d,destroy:f}}function ya(e,t,s,o=!1,a=!1){return{back:e,current:t,forward:s,replaced:o,position:window.history.length,scroll:a?kn():null}}function gd(e){const{history:t,location:s}=window,o={value:ur(e,s)},a={value:t.state};a.value||i(o.value,{back:null,current:o.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,d,u){const f=e.indexOf("#"),_=f>-1?(s.host&&document.querySelector("base")?e:e.slice(f))+c:fd()+e+c;try{t[u?"replaceState":"pushState"](d,"",_),a.value=d}catch(h){console.error(h),s[u?"replace":"assign"](_)}}function r(c,d){const u=ke({},t.state,ya(a.value.back,c,a.value.forward,!0),d,{position:a.value.position});i(c,u,!0),o.value=c}function l(c,d){const u=ke({},a.value,t.state,{forward:c,scroll:kn()});i(u.current,u,!0);const f=ke({},ya(o.value,c,null),{position:u.position+1},d);i(c,f,!1),o.value=c}return{location:o,state:a,push:l,replace:r}}function vd(e){e=ad(e);const t=gd(e),s=pd(e,t.state,t.location,t.replace);function o(i,r=!0){r||s.pauseListeners(),history.go(i)}const a=ke({location:"",base:e,go:o,createHref:rd.bind(null,e)},t,s);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>t.state.value}),a}function md(e){return typeof e=="string"||e&&typeof e=="object"}function dr(e){return typeof e=="string"||typeof e=="symbol"}const fr=Symbol("");var _a;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(_a||(_a={}));function gs(e,t){return ke(new Error,{type:e,[fr]:!0},t)}function $t(e,t){return e instanceof Error&&fr in e&&(t==null||!!(e.type&t))}const ba="[^/]+?",hd={sensitive:!1,strict:!1,start:!0,end:!0},yd=/[.+*?^${}()[\]/\\]/g;function _d(e,t){const s=ke({},hd,t),o=[];let a=s.start?"^":"";const i=[];for(const d of e){const u=d.length?[]:[90];s.strict&&!d.length&&(a+="/");for(let f=0;f<d.length;f++){const _=d[f];let h=40+(s.sensitive?.25:0);if(_.type===0)f||(a+="/"),a+=_.value.replace(yd,"\\$&"),h+=40;else if(_.type===1){const{value:S,repeatable:k,optional:N,regexp:R}=_;i.push({name:S,repeatable:k,optional:N});const y=R||ba;if(y!==ba){h+=10;try{new RegExp(`(${y})`)}catch(b){throw new Error(`Invalid custom RegExp for param "${S}" (${y}): `+b.message)}}let v=k?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(v=N&&d.length<2?`(?:/${v})`:"/"+v),N&&(v+="?"),a+=v,h+=20,N&&(h+=-8),k&&(h+=-20),y===".*"&&(h+=-50)}u.push(h)}o.push(u)}if(s.strict&&s.end){const d=o.length-1;o[d][o[d].length-1]+=.7000000000000001}s.strict||(a+="/?"),s.end?a+="$":s.strict&&!a.endsWith("/")&&(a+="(?:/|$)");const r=new RegExp(a,s.sensitive?"":"i");function l(d){const u=d.match(r),f={};if(!u)return null;for(let _=1;_<u.length;_++){const h=u[_]||"",S=i[_-1];f[S.name]=h&&S.repeatable?h.split("/"):h}return f}function c(d){let u="",f=!1;for(const _ of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const h of _)if(h.type===0)u+=h.value;else if(h.type===1){const{value:S,repeatable:k,optional:N}=h,R=S in d?d[S]:"";if(ut(R)&&!k)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const y=ut(R)?R.join("/"):R;if(!y)if(N)_.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${S}"`);u+=y}}return u||"/"}return{re:r,score:o,keys:i,parse:l,stringify:c}}function bd(e,t){let s=0;for(;s<e.length&&s<t.length;){const o=t[s]-e[s];if(o)return o;s++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function pr(e,t){let s=0;const o=e.score,a=t.score;for(;s<o.length&&s<a.length;){const i=bd(o[s],a[s]);if(i)return i;s++}if(Math.abs(a.length-o.length)===1){if(wa(o))return 1;if(wa(a))return-1}return a.length-o.length}function wa(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const wd={type:0,value:""},Sd=/[a-zA-Z0-9_]/;function $d(e){if(!e)return[[]];if(e==="/")return[[wd]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${s})/"${d}": ${h}`)}let s=0,o=s;const a=[];let i;function r(){i&&a.push(i),i=[]}let l=0,c,d="",u="";function f(){d&&(s===0?i.push({type:0,value:d}):s===1||s===2||s===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:d,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),d="")}function _(){d+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&s!==2){o=s,s=4;continue}switch(s){case 0:c==="/"?(d&&f(),r()):c===":"?(f(),s=1):_();break;case 4:_(),s=o;break;case 1:c==="("?s=2:Sd.test(c)?_():(f(),s=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:s=3:u+=c;break;case 3:f(),s=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,u="";break;default:t("Unknown state");break}}return s===2&&t(`Unfinished custom RegExp for param "${d}"`),f(),r(),a}function kd(e,t,s){const o=_d($d(e.path),s),a=ke(o,{record:e,parent:t,children:[],alias:[]});return t&&!a.record.aliasOf==!t.record.aliasOf&&t.children.push(a),a}function Cd(e,t){const s=[],o=new Map;t=Ca({strict:!1,end:!0,sensitive:!1},t);function a(f){return o.get(f)}function i(f,_,h){const S=!h,k=$a(f);k.aliasOf=h&&h.record;const N=Ca(t,f),R=[k];if("alias"in f){const b=typeof f.alias=="string"?[f.alias]:f.alias;for(const p of b)R.push($a(ke({},k,{components:h?h.record.components:k.components,path:p,aliasOf:h?h.record:k})))}let y,v;for(const b of R){const{path:p}=b;if(_&&p[0]!=="/"){const P=_.record.path,T=P[P.length-1]==="/"?"":"/";b.path=_.record.path+(p&&T+p)}if(y=kd(b,_,N),h?h.alias.push(y):(v=v||y,v!==y&&v.alias.push(y),S&&f.name&&!ka(y)&&r(f.name)),gr(y)&&c(y),k.children){const P=k.children;for(let T=0;T<P.length;T++)i(P[T],y,h&&h.children[T])}h=h||y}return v?()=>{r(v)}:xs}function r(f){if(dr(f)){const _=o.get(f);_&&(o.delete(f),s.splice(s.indexOf(_),1),_.children.forEach(r),_.alias.forEach(r))}else{const _=s.indexOf(f);_>-1&&(s.splice(_,1),f.record.name&&o.delete(f.record.name),f.children.forEach(r),f.alias.forEach(r))}}function l(){return s}function c(f){const _=Td(f,s);s.splice(_,0,f),f.record.name&&!ka(f)&&o.set(f.record.name,f)}function d(f,_){let h,S={},k,N;if("name"in f&&f.name){if(h=o.get(f.name),!h)throw gs(1,{location:f});N=h.record.name,S=ke(Sa(_.params,h.keys.filter(v=>!v.optional).concat(h.parent?h.parent.keys.filter(v=>v.optional):[]).map(v=>v.name)),f.params&&Sa(f.params,h.keys.map(v=>v.name))),k=h.stringify(S)}else if(f.path!=null)k=f.path,h=s.find(v=>v.re.test(k)),h&&(S=h.parse(k),N=h.record.name);else{if(h=_.name?o.get(_.name):s.find(v=>v.re.test(_.path)),!h)throw gs(1,{location:f,currentLocation:_});N=h.record.name,S=ke({},_.params,f.params),k=h.stringify(S)}const R=[];let y=h;for(;y;)R.unshift(y.record),y=y.parent;return{name:N,path:k,params:S,matched:R,meta:xd(R)}}e.forEach(f=>i(f));function u(){s.length=0,o.clear()}return{addRoute:i,resolve:d,removeRoute:r,clearRoutes:u,getRoutes:l,getRecordMatcher:a}}function Sa(e,t){const s={};for(const o of t)o in e&&(s[o]=e[o]);return s}function $a(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Ed(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Ed(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const o in e.components)t[o]=typeof s=="object"?s[o]:s;return t}function ka(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function xd(e){return e.reduce((t,s)=>ke(t,s.meta),{})}function Ca(e,t){const s={};for(const o in e)s[o]=o in t?t[o]:e[o];return s}function Td(e,t){let s=0,o=t.length;for(;s!==o;){const i=s+o>>1;pr(e,t[i])<0?o=i:s=i+1}const a=Ad(e);return a&&(o=t.lastIndexOf(a,o-1)),o}function Ad(e){let t=e;for(;t=t.parent;)if(gr(t)&&pr(e,t)===0)return t}function gr({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Pd(e){const t={};if(e===""||e==="?")return t;const o=(e[0]==="?"?e.slice(1):e).split("&");for(let a=0;a<o.length;++a){const i=o[a].replace(ar," "),r=i.indexOf("="),l=Ls(r<0?i:i.slice(0,r)),c=r<0?null:Ls(i.slice(r+1));if(l in t){let d=t[l];ut(d)||(d=t[l]=[d]),d.push(c)}else t[l]=c}return t}function Ea(e){let t="";for(let s in e){const o=e[s];if(s=Yu(s),o==null){o!==void 0&&(t+=(t.length?"&":"")+s);continue}(ut(o)?o.map(i=>i&&Xn(i)):[o&&Xn(o)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+s,i!=null&&(t+="="+i))})}return t}function Rd(e){const t={};for(const s in e){const o=e[s];o!==void 0&&(t[s]=ut(o)?o.map(a=>a==null?null:""+a):o==null?o:""+o)}return t}const Id=Symbol(""),xa=Symbol(""),Cn=Symbol(""),$o=Symbol(""),to=Symbol("");function _s(){let e=[];function t(o){return e.push(o),()=>{const a=e.indexOf(o);a>-1&&e.splice(a,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function Lt(e,t,s,o,a,i=r=>r()){const r=o&&(o.enterCallbacks[a]=o.enterCallbacks[a]||[]);return()=>new Promise((l,c)=>{const d=_=>{_===!1?c(gs(4,{from:s,to:t})):_ instanceof Error?c(_):md(_)?c(gs(2,{from:t,to:_})):(r&&o.enterCallbacks[a]===r&&typeof _=="function"&&r.push(_),l())},u=i(()=>e.call(o&&o.instances[a],t,s,d));let f=Promise.resolve(u);e.length<3&&(f=f.then(d)),f.catch(_=>c(_))})}function Vn(e,t,s,o,a=i=>i()){const i=[];for(const r of e)for(const l in r.components){let c=r.components[l];if(!(t!=="beforeRouteEnter"&&!r.instances[l]))if(nr(c)){const u=(c.__vccOpts||c)[t];u&&i.push(Lt(u,s,o,r,l,a))}else{let d=c();i.push(()=>d.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${r.path}"`);const f=Uu(u)?u.default:u;r.mods[l]=u,r.components[l]=f;const h=(f.__vccOpts||f)[t];return h&&Lt(h,s,o,r,l,a)()}))}}return i}function Ta(e){const t=lt(Cn),s=lt($o),o=pe(()=>{const c=le(e.to);return t.resolve(c)}),a=pe(()=>{const{matched:c}=o.value,{length:d}=c,u=c[d-1],f=s.matched;if(!u||!f.length)return-1;const _=f.findIndex(ps.bind(null,u));if(_>-1)return _;const h=Aa(c[d-2]);return d>1&&Aa(u)===h&&f[f.length-1].path!==h?f.findIndex(ps.bind(null,c[d-2])):_}),i=pe(()=>a.value>-1&&Dd(s.params,o.value.params)),r=pe(()=>a.value>-1&&a.value===s.matched.length-1&&cr(s.params,o.value.params));function l(c={}){if(Ld(c)){const d=t[le(e.replace)?"replace":"push"](le(e.to)).catch(xs);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:o,href:pe(()=>o.value.href),isActive:i,isExactActive:r,navigate:l}}function Nd(e){return e.length===1?e[0]:e}const Fd=Ne({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ta,setup(e,{slots:t}){const s=Vt(Ta(e)),{options:o}=lt(Cn),a=pe(()=>({[Pa(e.activeClass,o.linkActiveClass,"router-link-active")]:s.isActive,[Pa(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const i=t.default&&Nd(t.default(s));return e.custom?i:bo("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:a.value},i)}}}),Od=Fd;function Ld(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Dd(e,t){for(const s in t){const o=t[s],a=e[s];if(typeof o=="string"){if(o!==a)return!1}else if(!ut(a)||a.length!==o.length||o.some((i,r)=>i!==a[r]))return!1}return!0}function Aa(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Pa=(e,t,s)=>e??t??s,Md=Ne({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const o=lt(to),a=pe(()=>e.route||o.value),i=lt(xa,0),r=pe(()=>{let d=le(i);const{matched:u}=a.value;let f;for(;(f=u[d])&&!f.components;)d++;return d}),l=pe(()=>a.value.matched[r.value]);Qs(xa,pe(()=>r.value+1)),Qs(Id,l),Qs(to,a);const c=F();return Je(()=>[c.value,l.value,e.name],([d,u,f],[_,h,S])=>{u&&(u.instances[f]=d,h&&h!==u&&d&&d===_&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),d&&u&&(!h||!ps(u,h)||!_)&&(u.enterCallbacks[f]||[]).forEach(k=>k(d))},{flush:"post"}),()=>{const d=a.value,u=e.name,f=l.value,_=f&&f.components[u];if(!_)return Ra(s.default,{Component:_,route:d});const h=f.props[u],S=h?h===!0?d.params:typeof h=="function"?h(d):h:null,N=bo(_,ke({},S,t,{onVnodeUnmounted:R=>{R.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return Ra(s.default,{Component:N,route:d})||N}}});function Ra(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Ud=Md;function Vd(e){const t=Cd(e.routes,e),s=e.parseQuery||Pd,o=e.stringifyQuery||Ea,a=e.history,i=_s(),r=_s(),l=_s(),c=Zr(Rt);let d=Rt;os&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Mn.bind(null,j=>""+j),f=Mn.bind(null,Zu),_=Mn.bind(null,Ls);function h(j,E){let C,U;return dr(j)?(C=t.getRecordMatcher(j),U=E):U=j,t.addRoute(U,C)}function S(j){const E=t.getRecordMatcher(j);E&&t.removeRoute(E)}function k(){return t.getRoutes().map(j=>j.record)}function N(j){return!!t.getRecordMatcher(j)}function R(j,E){if(E=ke({},E||c.value),typeof j=="string"){const I=Un(s,j,E.path),q=t.resolve({path:I.path},E),Y=a.createHref(I.fullPath);return ke(I,q,{params:_(q.params),hash:Ls(I.hash),redirectedFrom:void 0,href:Y})}let C;if(j.path!=null)C=ke({},j,{path:Un(s,j.path,E.path).path});else{const I=ke({},j.params);for(const q in I)I[q]==null&&delete I[q];C=ke({},j,{params:f(I)}),E.params=f(E.params)}const U=t.resolve(C,E),de=j.hash||"";U.params=u(_(U.params));const w=td(o,ke({},j,{hash:Ju(de),path:U.path})),$=a.createHref(w);return ke({fullPath:w,hash:de,query:o===Ea?Rd(j.query):j.query||{}},U,{redirectedFrom:void 0,href:$})}function y(j){return typeof j=="string"?Un(s,j,c.value.path):ke({},j)}function v(j,E){if(d!==j)return gs(8,{from:E,to:j})}function b(j){return T(j)}function p(j){return b(ke(y(j),{replace:!0}))}function P(j){const E=j.matched[j.matched.length-1];if(E&&E.redirect){const{redirect:C}=E;let U=typeof C=="function"?C(j):C;return typeof U=="string"&&(U=U.includes("?")||U.includes("#")?U=y(U):{path:U},U.params={}),ke({query:j.query,hash:j.hash,params:U.path!=null?{}:j.params},U)}}function T(j,E){const C=d=R(j),U=c.value,de=j.state,w=j.force,$=j.replace===!0,I=P(C);if(I)return T(ke(y(I),{state:typeof I=="object"?ke({},de,I.state):de,force:w,replace:$}),E||C);const q=C;q.redirectedFrom=E;let Y;return!w&&sd(o,U,C)&&(Y=gs(16,{to:q,from:U}),re(U,U,!0,!1)),(Y?Promise.resolve(Y):V(q,U)).catch(K=>$t(K)?$t(K,2)?K:se(K):W(K,q,U)).then(K=>{if(K){if($t(K,2))return T(ke({replace:$},y(K.to),{state:typeof K.to=="object"?ke({},de,K.to.state):de,force:w}),E||q)}else K=G(q,U,!0,$,de);return L(q,U,K),K})}function X(j,E){const C=v(j,E);return C?Promise.reject(C):Promise.resolve()}function Q(j){const E=Ge.values().next().value;return E&&typeof E.runWithContext=="function"?E.runWithContext(j):j()}function V(j,E){let C;const[U,de,w]=jd(j,E);C=Vn(U.reverse(),"beforeRouteLeave",j,E);for(const I of U)I.leaveGuards.forEach(q=>{C.push(Lt(q,j,E))});const $=X.bind(null,j,E);return C.push($),O(C).then(()=>{C=[];for(const I of i.list())C.push(Lt(I,j,E));return C.push($),O(C)}).then(()=>{C=Vn(de,"beforeRouteUpdate",j,E);for(const I of de)I.updateGuards.forEach(q=>{C.push(Lt(q,j,E))});return C.push($),O(C)}).then(()=>{C=[];for(const I of w)if(I.beforeEnter)if(ut(I.beforeEnter))for(const q of I.beforeEnter)C.push(Lt(q,j,E));else C.push(Lt(I.beforeEnter,j,E));return C.push($),O(C)}).then(()=>(j.matched.forEach(I=>I.enterCallbacks={}),C=Vn(w,"beforeRouteEnter",j,E,Q),C.push($),O(C))).then(()=>{C=[];for(const I of r.list())C.push(Lt(I,j,E));return C.push($),O(C)}).catch(I=>$t(I,8)?I:Promise.reject(I))}function L(j,E,C){l.list().forEach(U=>Q(()=>U(j,E,C)))}function G(j,E,C,U,de){const w=v(j,E);if(w)return w;const $=E===Rt,I=os?history.state:{};C&&(U||$?a.replace(j.fullPath,ke({scroll:$&&I&&I.scroll},de)):a.push(j.fullPath,de)),c.value=j,re(j,E,C,$),se()}let ee;function z(){ee||(ee=a.listen((j,E,C)=>{if(!ie.listening)return;const U=R(j),de=P(U);if(de){T(ke(de,{replace:!0,force:!0}),U).catch(xs);return}d=U;const w=c.value;os&&ud(ha(w.fullPath,C.delta),kn()),V(U,w).catch($=>$t($,12)?$:$t($,2)?(T(ke(y($.to),{force:!0}),U).then(I=>{$t(I,20)&&!C.delta&&C.type===Ds.pop&&a.go(-1,!1)}).catch(xs),Promise.reject()):(C.delta&&a.go(-C.delta,!1),W($,U,w))).then($=>{$=$||G(U,w,!1),$&&(C.delta&&!$t($,8)?a.go(-C.delta,!1):C.type===Ds.pop&&$t($,20)&&a.go(-1,!1)),L(U,w,$)}).catch(xs)}))}let D=_s(),A=_s(),M;function W(j,E,C){se(j);const U=A.list();return U.length?U.forEach(de=>de(j,E,C)):console.error(j),Promise.reject(j)}function B(){return M&&c.value!==Rt?Promise.resolve():new Promise((j,E)=>{D.add([j,E])})}function se(j){return M||(M=!j,z(),D.list().forEach(([E,C])=>j?C(j):E()),D.reset()),j}function re(j,E,C,U){const{scrollBehavior:de}=e;if(!os||!de)return Promise.resolve();const w=!C&&dd(ha(j.fullPath,0))||(U||!C)&&history.state&&history.state.scroll||null;return vo().then(()=>de(j,E,w)).then($=>$&&cd($)).catch($=>W($,j,E))}const me=j=>a.go(j);let Ie;const Ge=new Set,ie={currentRoute:c,listening:!0,addRoute:h,removeRoute:S,clearRoutes:t.clearRoutes,hasRoute:N,getRoutes:k,resolve:R,options:e,push:b,replace:p,go:me,back:()=>me(-1),forward:()=>me(1),beforeEach:i.add,beforeResolve:r.add,afterEach:l.add,onError:A.add,isReady:B,install(j){const E=this;j.component("RouterLink",Od),j.component("RouterView",Ud),j.config.globalProperties.$router=E,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>le(c)}),os&&!Ie&&c.value===Rt&&(Ie=!0,b(a.location).catch(de=>{}));const C={};for(const de in Rt)Object.defineProperty(C,de,{get:()=>c.value[de],enumerable:!0});j.provide(Cn,E),j.provide($o,ni(C)),j.provide(to,c);const U=j.unmount;Ge.add(j),j.unmount=function(){Ge.delete(j),Ge.size<1&&(d=Rt,ee&&ee(),ee=null,c.value=Rt,Ie=!1,M=!1),U()}}};function O(j){return j.reduce((E,C)=>E.then(()=>Q(C)),Promise.resolve())}return ie}function jd(e,t){const s=[],o=[],a=[],i=Math.max(t.matched.length,e.matched.length);for(let r=0;r<i;r++){const l=t.matched[r];l&&(e.matched.find(d=>ps(d,l))?o.push(l):s.push(l));const c=e.matched[r];c&&(t.matched.find(d=>ps(d,c))||a.push(c))}return[s,o,a]}function Gt(){return lt(Cn)}function En(e){return lt($o)}function vr(){const e=F([]),t=F(!1);return{streamers:e,isLoading:t,updateStreamer:async(i,r)=>{console.log("useStreamers: Updating streamer:",{streamerId:i,updateData:r});const l=e.value.findIndex(c=>c.id===i);l!==-1?(console.log("useStreamers: Found streamer at index:",l),e.value[l]={...e.value[l],...r},console.log("useStreamers: Updated streamer:",e.value[l])):console.warn("useStreamers: Streamer not found:",i)},fetchStreamers:async()=>{t.value=!0;try{const i=await fetch("/api/streamers");if(!i.ok)throw new Error("Failed to fetch streamers");const r=await i.json();e.value=r.streamers||[]}catch(i){console.error("Error fetching streamers:",i)}finally{t.value=!1}},deleteStreamer:async i=>(await fetch(`/api/streamers/${i}`,{method:"DELETE"})).ok?(e.value=e.value.filter(l=>l.id!==i),!0):!1}}var Ve;(function(e){e.COUNT="count",e.SIZE="size",e.AGE="age",e.CUSTOM="custom"})(Ve||(Ve={}));const Ia=[{value:"best",label:"Best Available"},{value:"1080p60",label:"1080p (60 fps)"},{value:"1080p",label:"1080p (30 fps)"},{value:"720p60",label:"720p (60 fps)"},{value:"720p",label:"720p (30 fps)"},{value:"480p",label:"480p"},{value:"360p",label:"360p"},{value:"160p",label:"160p"},{value:"audio_only",label:"Audio Only"}],Hd=[{key:"streamer",description:"Streamer username"},{key:"title",description:"Stream title"},{key:"game",description:"Game/category name"},{key:"twitch_id",description:"Twitch ID"},{key:"year",description:"Year (YYYY)"},{key:"month",description:"Month (MM)"},{key:"day",description:"Day (DD)"},{key:"hour",description:"Hour (HH)"},{key:"minute",description:"Minute (MM)"},{key:"second",description:"Second (SS)"},{key:"timestamp",description:"Timestamp (YYYYMMDD_HHMMSS)"},{key:"datetime",description:"Formatted datetime (YYYY-MM-DD_HH-MM-SS)"},{key:"id",description:"Stream ID"},{key:"season",description:"Season format (S2024-01)"},{key:"episode",description:"Episode number (E01, E02, ...)"},{key:"unique",description:"Unique identifier"}],Bd=[{value:"default",label:"Default",description:"{streamer}/{streamer}_{year}-{month}-{day}_{hour}-{minute}_{title}_{game}"},{value:"plex",label:"Plex/Emby/Jellyfin",description:"{streamer}/Season {year}-{month}/{streamer} - S{year}{month}E{episode:02d} - {title}"},{value:"emby",label:"Emby Alternative",description:"{streamer}/Season {year}-{month}/{streamer} - S{year}{month}E{episode:02d} - {title}"},{value:"jellyfin",label:"Jellyfin Alternative",description:"{streamer}/Season {year}-{month}/{streamer} - S{year}{month}E{episode:02d} - {title}"},{value:"kodi",label:"Kodi",description:"{streamer}/Season {year}-{month}/{streamer} - S{year}{month}E{episode:02d} - {title}"},{value:"chronological",label:"Chronological",description:"{year}/{month}/{day}/{streamer} - E{episode:02d} - {title} - {hour}-{minute}"}];function Ws(){const e=F(null),t=F([]),s=F([]),o=F(!1),a=F(null),i=async()=>{try{o.value=!0,a.value=null;const y=await fetch("/api/recording/settings");if(y.ok){const v=await y.json();e.value={enabled:v.enabled,output_directory:v.output_directory,filename_template:v.filename_template,filename_preset:v.filename_preset,default_quality:v.default_quality,use_chapters:v.use_chapters,use_category_as_chapter_title:v.use_category_as_chapter_title,cleanup_policy:v.cleanup_policy}}else a.value="Failed to load settings"}catch(y){a.value=y instanceof Error?y.message:String(y)}finally{o.value=!1}},r=async y=>{try{o.value=!0,a.value=null;const v=await fetch("/api/recording/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:y.enabled,output_directory:y.output_directory,filename_template:y.filename_template,filename_preset:y.filename_preset,default_quality:y.default_quality,use_chapters:y.use_chapters,use_category_as_chapter_title:y.use_category_as_chapter_title,cleanup_policy:y.cleanup_policy})});if(v.ok){const b=await v.json();e.value={enabled:b.enabled,output_directory:b.output_directory,filename_template:b.filename_template,filename_preset:b.filename_preset,default_quality:b.default_quality,use_chapters:b.use_chapters,use_category_as_chapter_title:b.use_category_as_chapter_title,cleanup_policy:b.cleanup_policy}}else a.value="Failed to update settings"}catch(v){a.value=v instanceof Error?v.message:String(v)}finally{o.value=!1}},l=async()=>{try{o.value=!0,a.value=null,console.log("Fetching streamer recording settings...");const y=await fetch("/api/recording/streamers");if(!y.ok){const b=await y.text();throw console.error("Error response:",b),new Error(`HTTP error! Status: ${y.status}`)}const v=await y.json();return console.log("Received streamer settings:",v),t.value=v,v}catch(y){return a.value=y instanceof Error?y.message:"Unknown error",console.error("Error fetching streamer recording settings:",y),[]}finally{o.value=!1}},c=async(y,v)=>{try{o.value=!0,a.value=null;const b=await fetch(`/api/recording/streamers/${y}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({streamer_id:y,...v})});if(!b.ok){const T=await b.json();throw new Error(T.detail||`HTTP error! Status: ${b.status}`)}const p=await b.json(),P=t.value.findIndex(T=>T.streamer_id===y);return P!==-1&&(t.value[P]=p),p}catch(b){throw a.value=b instanceof Error?b.message:"Unknown error",b}finally{o.value=!1}},d=async()=>{try{o.value=!0;const y=await fetch("/api/recording/active");if(!y.ok)throw new Error(`Failed to fetch active recordings: ${y.status}`);const v=await y.json();console.log("Fetched active recordings:",v),Array.isArray(v)?s.value=v.map(b=>({...b,streamer_id:parseInt(b.streamer_id.toString())})):(console.error("Invalid active recordings response:",v),s.value=[])}catch(y){console.error("Error fetching active recordings:",y),a.value=y instanceof Error?y.message:String(y),s.value=[]}finally{o.value=!1}};return{settings:e,streamerSettings:t,activeRecordings:s,isLoading:o,error:a,fetchSettings:i,updateSettings:r,fetchStreamerSettings:l,updateStreamerSettings:c,fetchActiveRecordings:d,stopRecording:async y=>{try{o.value=!0;const v=await fetch(`/api/recording/stop/${y}`,{method:"POST"});if(!v.ok)throw new Error(`HTTP error! Status: ${v.status}`);return await d(),!0}catch(v){return console.error("Error stopping recording:",v),!1}finally{o.value=!1}},cleanupOldRecordings:async y=>{try{o.value=!0;const v=await fetch(`/api/recording/cleanup/${y}`,{method:"POST"});if(!v.ok)throw new Error(`Failed to cleanup old recordings: ${v.statusText}`);return await v.json()}catch(v){throw console.error("Error cleaning up recordings:",v),a.value=v instanceof Error?v.message:String(v),v}finally{o.value=!1}},getDefaultCleanupPolicy:()=>({type:Ve.COUNT,threshold:10,preserve_favorites:!0,preserve_categories:[]}),updateCleanupPolicy:async y=>{try{if(o.value=!0,e.value||await i(),e.value){const v={...e.value,cleanup_policy:y};return await r(v),!0}return!1}catch(v){return console.error("Error updating cleanup policy:",v),a.value=v instanceof Error?v.message:String(v),!1}finally{o.value=!1}},updateStreamerCleanupPolicy:async(y,v)=>{try{if(o.value=!0,!(await fetch(`/api/recording/streamers/${y}/cleanup-policy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)})).ok)throw new Error("Failed to update streamer cleanup policy");return await l(),!0}catch(b){return console.error("Error updating streamer cleanup policy:",b),!1}finally{o.value=!1}},runCustomCleanup:async(y,v)=>{try{o.value=!0;const b=v?`/api/recording/cleanup/${y}/custom`:`/api/recording/cleanup/${y}`,p=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:v?JSON.stringify(v):void 0});if(!p.ok)throw new Error(`Failed to run cleanup: ${p.statusText}`);return await p.json()}catch(b){throw console.error("Error running custom cleanup:",b),a.value=b instanceof Error?b.message:String(b),b}finally{o.value=!1}},getStreamerStorageUsage:async y=>{try{o.value=!0;const v=await fetch(`/api/recording/storage/${y}`);if(!v.ok)throw new Error(`Failed to get storage usage: ${v.statusText}`);return await v.json()}catch(v){return console.error("Error getting streamer storage usage:",v),a.value=v instanceof Error?v.message:String(v),{totalSize:0,recordingCount:0,oldestRecording:"",newestRecording:""}}finally{o.value=!1}},getAvailableCategories:async()=>{try{const y=await fetch("/api/categories");if(!y.ok)throw new Error("Failed to fetch categories");return(await y.json()).categories.map(b=>({id:b.id,name:b.name}))}catch(y){return console.error("Error fetching categories:",y),[]}}}}const Wd={class:"home-view"},qd={class:"container"},Gd={class:"status-box"},Kd={class:"dashboard-stats"},zd={class:"stat-item"},Jd={class:"stat-value"},Yd={class:"stat-item"},Qd={class:"stat-value"},Zd={class:"stat-item"},Xd={class:"stat-value"},ef={class:"stat-item"},tf={class:"stat-value"},sf={class:"dashboard-actions"},nf=Ne({__name:"HomeView",setup(e){const{streamers:t,fetchStreamers:s}=vr(),{activeRecordings:o,fetchActiveRecordings:a}=Ws(),i=pe(()=>t.value.length),r=pe(()=>t.value.filter(_=>_.is_live).length),l=pe(()=>o.value.length),c=F(null),d=F(null),u=F(!1);async function f(){u.value=!0;let _=[];for(const k of t.value)try{const N=await fetch(`/api/streamers/${k.id}/streams`);if(N.ok){const R=await N.json();if(R.streams&&Array.isArray(R.streams)){const y=R.streams.map(v=>({...v,streamer_name:k.username,streamer_id:k.id}));_=_.concat(y)}}}catch{}const h=_.filter(k=>k.ended_at);h.sort((k,N)=>new Date(N.ended_at).getTime()-new Date(k.ended_at).getTime());const S=h[0]||null;c.value=S,S&&(d.value=t.value.find(k=>k.id===S.streamer_id)),u.value=!1}return Fe(async()=>{await s(),await a(),await f()}),(_,h)=>{const S=us("router-link");return g(),m("div",Wd,[n("div",qd,[n("div",Gd,[h[9]||(h[9]=n("h2",null,"Dashboard",-1)),h[10]||(h[10]=n("p",null,"Welcome back to StreamVault! Here you can see the current status of your streamers and recordings.",-1)),n("div",Kd,[n("div",zd,[h[0]||(h[0]=n("span",{class:"stat-label"},"Total Streamers",-1)),n("span",Jd,x(i.value),1)]),n("div",Yd,[h[1]||(h[1]=n("span",{class:"stat-label"},"Live Streamers",-1)),n("span",Qd,x(r.value),1)]),n("div",Zd,[h[2]||(h[2]=n("span",{class:"stat-label"},"Active Recordings",-1)),n("span",Xd,x(l.value),1)]),h[6]||(h[6]=J()),n("div",ef,[h[5]||(h[5]=n("span",{class:"stat-label"},"Last Recording",-1)),n("span",tf,[u.value?(g(),m(he,{key:0},[J("Loading...")],64)):c.value?(g(),m(he,{key:1},[n("strong",null,x(c.value.streamer_name),1),h[3]||(h[3]=n("br",null,null,-1)),J(" "+x(c.value.title||"Untitled"),1),h[4]||(h[4]=n("br",null,null,-1)),n("small",null,x(c.value.ended_at?new Date(c.value.ended_at).toLocaleString():""),1)],64)):(g(),m(he,{key:2},[J("No recordings found")],64))])])]),n("div",sf,[ge(S,{to:"/streamers",class:"btn btn-primary"},{default:Re(()=>h[7]||(h[7]=[J("Manage Streamers")])),_:1}),ge(S,{to:"/add-streamer",class:"btn btn-secondary"},{default:Re(()=>h[8]||(h[8]=[J("Add New Streamer")])),_:1})])])])])}}}),of=Oe(nf,[["__scopeId","data-v-28ebbc5b"]]),af={class:"subscriptions-view"},rf={class:"subscriptions-container"},lf={class:"content-section"},cf={class:"controls"},uf=["disabled"],df={key:0,class:"loader"},ff=["disabled"],pf=["disabled"],gf={key:0,class:"loader"},vf={key:0,class:"loading-state"},mf={key:1,class:"table-container"},hf={class:"streamer-table"},yf={"data-label":"Streamer"},_f={class:"streamer-info"},bf={class:"streamer-name"},wf={"data-label":"Type"},Sf={"data-label":"Status"},$f={"data-label":"Created At"},kf={"data-label":"Actions"},Cf=["onClick","disabled"],Ef={key:2,class:"empty-state"},xf=Ne({__name:"SubscriptionsView",setup(e){const t=F([]),s=F([]),o=F({}),a=F(!1),i=F(!1),r=pe(()=>{const S={};return s.value.forEach(k=>{S[k.twitch_id]=k}),S});function l(S){switch(S){case"stream.online":return"Stream Start";case"stream.offline":return"Stream End";case"channel.update":return"Channel Update";default:return S}}function c(S){if(!S)return"Unknown";const k=r.value[S];return k?k.username:(console.log(`Could not find streamer for ID: ${S}`),console.log("Available streamers:",s.value),`Unknown (${S})`)}async function d(){try{const k=await(await fetch("/api/streamers")).json();Array.isArray(k)?s.value=k:k.streamers&&Array.isArray(k.streamers)?s.value=k.streamers:(console.error("Unexpected streamer data format:",k),s.value=[]),console.log("Loaded streamers:",s.value),s.value.forEach(N=>{o.value[N.twitch_id]=N}),t.value.length>0&&(t.value=[...t.value])}catch(S){console.error("Failed to load streamers:",S)}}async function u(){i.value=!0;try{const k=await(await fetch("/api/streamers/subscriptions")).json();t.value=k.subscriptions,await d()}catch(S){console.error("Failed to load subscriptions:",S)}finally{i.value=!1}}async function f(){a.value=!0;try{const S=await fetch("/api/streamers/resubscribe-all",{method:"POST",headers:{Accept:"application/json"}});if(!S.ok){const N=await S.text();throw console.error("Server response:",N),new Error(`Failed to resubscribe: ${S.status}`)}const k=await S.json();alert(`Success: ${k.message}`),await u()}catch(S){console.error("Failed to resubscribe all:",S.message),alert(`Error: ${S.message}`)}finally{a.value=!1}}async function _(S){try{if(!(await fetch(`/api/streamers/subscriptions/${S}`,{method:"DELETE"})).ok)throw new Error("Failed to delete subscription");t.value=t.value.filter(N=>N.id!==S)}catch(k){console.error("Failed to delete subscription:",k)}}async function h(){if(confirm("Are you sure you want to delete all subscriptions?")){i.value=!0;try{const S=await fetch("/api/streamers/subscriptions",{method:"DELETE",headers:{Accept:"application/json"}});if(!S.ok){const N=await S.text();throw console.error("Server response:",N),new Error(`Failed to delete subscriptions: ${S.status}`)}const k=await S.json();console.log("Deleted subscriptions:",k),alert("All subscriptions successfully deleted!"),t.value=[],await u()}catch(S){console.error("Failed to delete all subscriptions:",S.message),alert(`Error: ${S.message}`)}finally{i.value=!1}}}return Fe(u),(S,k)=>(g(),m("div",af,[n("div",rf,[k[3]||(k[3]=n("div",{class:"page-header"},[n("h1",null,"Subscription Management"),n("p",{class:"description"},"Manage your Twitch EventSub subscriptions for tracked streamers")],-1)),n("div",lf,[n("div",cf,[n("button",{onClick:u,disabled:i.value,class:"btn btn-primary"},[i.value?(g(),m("span",df)):H("",!0),J(" "+x(i.value?"Loading...":"Refresh Subscriptions"),1)],8,uf),n("button",{onClick:h,disabled:i.value||!t.value.length,class:"btn btn-danger"}," Delete All Subscriptions ",8,ff),n("button",{onClick:f,class:"btn btn-success",disabled:a.value},[a.value?(g(),m("span",gf)):H("",!0),J(" "+x(a.value?"Resubscribing...":"Resubscribe All Streamers"),1)],8,pf)]),i.value?(g(),m("div",vf,k[0]||(k[0]=[n("div",{class:"spinner"},null,-1),n("p",null,"Loading subscriptions...",-1)]))):t.value.length?(g(),m("div",mf,[n("table",hf,[k[1]||(k[1]=n("thead",null,[n("tr",null,[n("th",null,"Streamer"),n("th",null,"Type"),n("th",null,"Status"),n("th",null,"Created At"),n("th",null,"Actions")])],-1)),n("tbody",null,[(g(!0),m(he,null,$e(t.value,N=>{var R;return g(),m("tr",{key:N.id},[n("td",yf,[n("div",_f,[n("span",bf,x(c((R=N.condition)==null?void 0:R.broadcaster_user_id)),1)])]),n("td",wf,x(l(N.type)),1),n("td",Sf,[n("span",{class:ce(["status-badge",N.status])},x(N.status),3)]),n("td",$f,x(new Date(N.created_at).toLocaleString()),1),n("td",kf,[n("button",{onClick:y=>_(N.id),class:"btn btn-danger",disabled:i.value}," Delete ",8,Cf)])])}),128))])])])):(g(),m("div",Ef,[k[2]||(k[2]=n("p",null,"No subscriptions found",-1)),n("button",{onClick:u,class:"btn btn-primary"}," Refresh ")]))])])]))}}),Tf={class:"input-group"},Af=["disabled"],Pf=["disabled"],Rf={key:0,class:"loader"},If={key:1,class:"settings-panel content-section"},Nf={class:"streamer-preview"},Ff=["src"],Of={class:"streamer-info"},Lf={class:"streamer-name"},Df={key:0,class:"streamer-details"},Mf={class:"settings-section"},Uf={class:"form-group"},Vf=["disabled"],jf={class:"settings-section"},Hf={class:"notification-options"},Bf={class:"option-item"},Wf={class:"checkbox-container"},qf={class:"option-item"},Gf={class:"checkbox-container"},Kf={class:"option-item"},zf={class:"checkbox-container"},Jf={class:"option-item"},Yf={class:"checkbox-container"},Qf={class:"settings-section"},Zf={class:"recording-options"},Xf={class:"option-item"},ep={class:"checkbox-container"},tp={key:0,class:"form-group"},sp={key:1,class:"form-group"},np={class:"form-actions"},op=["disabled"],ap={key:0,class:"loader"},ip={__name:"AddStreamerForm",emits:["streamer-added"],setup(e,{emit:t}){const s=F(""),o=F("best"),a=F(!1),i=F(!1),r=F(""),l=F(!1),c=F(!1),d=F(""),u=F(null),f=Vt({notify_online:!0,notify_offline:!0,notify_update:!0,notify_favorite_category:!0}),_=Vt({enabled:!0,quality:"",custom_filename:""}),h=async()=>{if(s.value.trim()){i.value=!0,d.value="Checking username...",c.value=!1,u.value=null;try{const R=await fetch(`/api/streamers/validate/${s.value.trim().toLowerCase()}`),y=await R.json();R.ok&&y.valid?(c.value=!0,d.value="Valid Twitch username!",u.value=y.streamer_info):(c.value=!1,d.value=y.message||"Invalid Twitch username")}catch(R){c.value=!1,d.value="Error checking username",console.error("Error:",R)}finally{i.value=!1}}},S=()=>{if(!c.value){h();return}k()},k=async()=>{if(!(!s.value.trim()||!c.value)){a.value=!0,r.value="Adding streamer...",l.value=!1;try{const R=s.value.trim().toLowerCase(),y=await fetch(`/api/streamers/${R}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({quality:o.value,notifications:{notify_online:f.notify_online,notify_offline:f.notify_offline,notify_update:f.notify_update,notify_favorite_category:f.notify_favorite_category},recording:{enabled:_.enabled,quality:_.quality,custom_filename:_.custom_filename}})}),v=await y.json();y.ok?(r.value="Streamer added successfully!",s.value="",c.value=!1,u.value=null,N("streamer-added")):(l.value=!0,r.value=v.message||"Failed to add streamer")}catch(R){l.value=!0,r.value="Error connecting to server",console.error("Error:",R)}finally{a.value=!1}}},N=t;return(R,y)=>(g(),m("form",{onSubmit:De(S,["prevent"]),class:"streamer-form"},[n("div",Tf,[be(n("input",{type:"text","onUpdate:modelValue":y[0]||(y[0]=v=>s.value=v),disabled:a.value||i.value,placeholder:"Enter Twitch username",required:"",class:"input-field interactive-element",onBlur:h},null,40,Af),[[Ue,s.value]]),n("button",{type:"button",onClick:h,disabled:a.value||i.value||!s.value.trim(),class:"validate-button interactive-element"},[i.value?(g(),m("span",Rf)):H("",!0),J(" "+x(i.value?"Checking...":"Check"),1)],8,Pf)]),d.value?(g(),m("div",{key:0,class:ce(["notification-item",{error:!c.value,success:c.value}])},x(d.value),3)):H("",!0),c.value&&u.value?(g(),m("div",If,[n("h3",null,"Streamer Settings for "+x(u.value.display_name),1),n("div",Nf,[u.value.profile_image_url?(g(),m("img",{key:0,src:u.value.profile_image_url,alt:"Profile",class:"profile-image"},null,8,Ff)):H("",!0),n("div",Of,[n("div",Lf,x(u.value.display_name),1),u.value.description?(g(),m("div",Df,x(u.value.description),1)):H("",!0)])]),n("div",Mf,[y[11]||(y[11]=n("h4",null,"Stream Quality",-1)),n("div",Uf,[y[10]||(y[10]=n("label",{for:"quality-select"},"Quality:",-1)),be(n("select",{id:"quality-select","onUpdate:modelValue":y[1]||(y[1]=v=>o.value=v),disabled:a.value,class:"input-field"},y[9]||(y[9]=[Tt('<option value="best" data-v-2fa581a1>Best</option><option value="1080p60" data-v-2fa581a1>1080p60</option><option value="1080p" data-v-2fa581a1>1080p</option><option value="720p60" data-v-2fa581a1>720p60</option><option value="720p" data-v-2fa581a1>720p</option><option value="480p" data-v-2fa581a1>480p</option><option value="360p" data-v-2fa581a1>360p</option><option value="160p" data-v-2fa581a1>160p</option><option value="audio_only" data-v-2fa581a1>Audio Only</option>',9)]),8,Vf),[[Ut,o.value]])])]),n("div",jf,[y[20]||(y[20]=n("h4",null,"Notification Settings",-1)),n("div",Hf,[n("div",Bf,[n("label",Wf,[be(n("input",{type:"checkbox","onUpdate:modelValue":y[2]||(y[2]=v=>f.notify_online=v)},null,512),[[We,f.notify_online]]),y[12]||(y[12]=n("span",{class:"checkmark"},null,-1)),y[13]||(y[13]=n("div",{class:"option-text"},[n("span",{class:"option-title"},"Online"),n("span",{class:"option-description"},"Notify when stream starts")],-1))])]),n("div",qf,[n("label",Gf,[be(n("input",{type:"checkbox","onUpdate:modelValue":y[3]||(y[3]=v=>f.notify_offline=v)},null,512),[[We,f.notify_offline]]),y[14]||(y[14]=n("span",{class:"checkmark"},null,-1)),y[15]||(y[15]=n("div",{class:"option-text"},[n("span",{class:"option-title"},"Offline"),n("span",{class:"option-description"},"Notify when stream ends")],-1))])]),n("div",Kf,[n("label",zf,[be(n("input",{type:"checkbox","onUpdate:modelValue":y[4]||(y[4]=v=>f.notify_update=v)},null,512),[[We,f.notify_update]]),y[16]||(y[16]=n("span",{class:"checkmark"},null,-1)),y[17]||(y[17]=n("div",{class:"option-text"},[n("span",{class:"option-title"},"Updates"),n("span",{class:"option-description"},"Notify on title/category changes")],-1))])]),n("div",Jf,[n("label",Yf,[be(n("input",{type:"checkbox","onUpdate:modelValue":y[5]||(y[5]=v=>f.notify_favorite_category=v)},null,512),[[We,f.notify_favorite_category]]),y[18]||(y[18]=n("span",{class:"checkmark"},null,-1)),y[19]||(y[19]=n("div",{class:"option-text"},[n("span",{class:"option-title"},"Favorites"),n("span",{class:"option-description"},"Notify when streaming favorite games")],-1))])])])]),n("div",Qf,[y[27]||(y[27]=n("h4",null,"Recording Settings",-1)),n("div",Zf,[n("div",Xf,[n("label",ep,[be(n("input",{type:"checkbox","onUpdate:modelValue":y[6]||(y[6]=v=>_.enabled=v)},null,512),[[We,_.enabled]]),y[21]||(y[21]=n("span",{class:"checkmark"},null,-1)),y[22]||(y[22]=n("div",{class:"option-text"},[n("span",{class:"option-title"},"Enable Recording"),n("span",{class:"option-description"},"Automatically record streams")],-1))])]),_.enabled?(g(),m("div",tp,[y[24]||(y[24]=n("label",{for:"recording-quality"},"Recording Quality:",-1)),be(n("select",{id:"recording-quality","onUpdate:modelValue":y[7]||(y[7]=v=>_.quality=v),class:"input-field"},y[23]||(y[23]=[Tt('<option value="" data-v-2fa581a1>Use global default</option><option value="best" data-v-2fa581a1>Best</option><option value="1080p60" data-v-2fa581a1>1080p60</option><option value="1080p" data-v-2fa581a1>1080p</option><option value="720p60" data-v-2fa581a1>720p60</option><option value="720p" data-v-2fa581a1>720p</option><option value="480p" data-v-2fa581a1>480p</option><option value="360p" data-v-2fa581a1>360p</option><option value="160p" data-v-2fa581a1>160p</option>',9)]),512),[[Ut,_.quality]])])):H("",!0),_.enabled?(g(),m("div",sp,[y[25]||(y[25]=n("label",{for:"custom-filename"},"Custom Filename Template:",-1)),be(n("input",{id:"custom-filename",type:"text","onUpdate:modelValue":y[8]||(y[8]=v=>_.custom_filename=v),placeholder:"Use global template",class:"input-field"},null,512),[[Ue,_.custom_filename]]),y[26]||(y[26]=n("div",{class:"help-text"}," Leave empty to use global template ",-1))])):H("",!0)])])])):H("",!0),n("div",np,[n("button",{type:"submit",disabled:a.value||i.value||!c.value,class:"btn btn-primary"},[a.value?(g(),m("span",ap)):H("",!0),J(" "+x(a.value?"Adding...":"Add Streamer"),1)],8,op)]),r.value?(g(),m("div",{key:2,class:ce(["notification-item",{error:l.value}])},x(r.value),3)):H("",!0)],32))}},rp=Oe(ip,[["__scopeId","data-v-2fa581a1"]]),lp={class:"twitch-import-container"},cp={key:0,class:"error-message"},up={key:0,class:"callback-url-hint"},dp={key:0,class:"callback-url"},fp={key:1},pp={key:1,class:"auth-section"},gp={class:"setup-hint"},vp={key:0,class:"callback-url"},mp={key:1},hp={viewBox:"0 0 24 24",width:"16",height:"16",style:{"margin-right":"8px"}},yp={key:2,class:"loading-container"},_p={key:3,class:"selection-section"},bp={class:"filter-container"},wp={class:"search-box"},Sp={class:"filter-buttons"},$p=["disabled"],kp=["disabled"],Cp=["disabled"],Ep={key:0,class:"no-data-container"},xp={key:1,class:"no-data-container"},Tp={key:2,class:"channels-grid"},Ap=["onClick"],Pp={class:"channel-content"},Rp={class:"channel-name"},Ip={class:"channel-login"},Np={key:4,class:"import-results content-section"},Fp={class:"results-summary"},Op={class:"result-item"},Lp={class:"result-value"},Dp={class:"result-item"},Mp={class:"result-value success"},Up={class:"result-item"},Vp={class:"result-value info"},jp={class:"result-item"},Hp={class:"result-value error"},Bp={key:0,class:"failure-list"},Wp=Ne({__name:"TwitchImportForm",emits:["streamers-imported"],setup(e,{emit:t}){const s=t,o=En(),a=Gt(),i=F([]),r=F([]),l=F(null),c=F(null),d=F(!1),u=F("Loading..."),f=F(""),_=F(!1),h=F(null),S=F(null),k=pe(()=>!!l.value),N=pe(()=>{if(!f.value)return i.value;const V=f.value.toLowerCase();return i.value.filter(L=>L.login.toLowerCase().includes(V)||L.display_name.toLowerCase().includes(V))});async function R(){try{const V=await fetch("/api/twitch/callback-url");if(V.ok){const L=await V.json();S.value=L.url}}catch(V){console.error("Failed to fetch callback URL:",V)}}function y(V){return r.value.some(L=>L.id===V.id)}function v(V){const L=r.value.findIndex(G=>G.id===V.id);L===-1?r.value.push(V):r.value.splice(L,1)}function b(){r.value=[...N.value]}function p(){r.value=[]}async function P(){try{d.value=!0,u.value="Connecting to Twitch...";const L=await(await fetch("/api/twitch/auth-url")).json();window.location.href=L.auth_url}catch(V){c.value=V.message||"Failed to start Twitch authentication",d.value=!1}}async function T(V){try{d.value=!0,u.value="Loading channels you follow...";const L=await fetch(`/api/twitch/followed-channels?access_token=${V}`);if(!L.ok)throw new Error("Failed to load followed channels");const G=await L.json();i.value=G.channels||[]}catch(L){c.value=L.message||"Failed to load followed channels"}finally{d.value=!1}}async function X(){if(r.value.length!==0)try{_.value=!0,d.value=!0,u.value="Importing selected streamers...";const V=await fetch("/api/twitch/import-streamers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r.value)});if(!V.ok)throw new Error("Failed to import streamers");const L=await V.json();h.value=L,L.added>0&&s("streamers-imported")}catch(V){c.value=V.message||"Failed to import streamers"}finally{d.value=!1,_.value=!1}}function Q(){h.value=null,r.value=[]}return Fe(async()=>{await R();const V=o.query.token,L=o.query.error;L&&(L==="redirect_mismatch"?c.value="redirect_mismatch: The Redirect URL in your Twitch Developer Dashboard does not match your StreamVault configuration.":c.value=L==="auth_failed"?"Authentication failed. Please try again.":L),V&&(l.value=V,a.replace({query:{}}),await T(V))}),(V,L)=>(g(),m("div",lp,[c.value?(g(),m("div",cp,[J(x(c.value)+" ",1),c.value.includes("redirect_mismatch")?(g(),m("div",up,[L[4]||(L[4]=n("p",null,[n("strong",null,"Important:"),J(" The Redirect URI in your Twitch Developer Dashboard must match the callback URL of your StreamVault installation.")],-1)),S.value?(g(),m("p",dp,[L[1]||(L[1]=J(" Configure this URL in your Twitch Developer Dashboard:")),L[2]||(L[2]=n("br",null,null,-1)),n("code",null,x(S.value),1)])):(g(),m("p",fp,L[3]||(L[3]=[J(" Configure the following URL in your Twitch Developer Dashboard:"),n("br",null,null,-1),n("code",null,"https://your-streamvault-domain.com/api/twitch/callback",-1),n("br",null,null,-1),J(' Replace "your-streamvault-domain.com" with your actual domain. ')])))])):H("",!0)])):H("",!0),!k.value&&!d.value?(g(),m("div",pp,[n("div",gp,[L[8]||(L[8]=n("p",null,"Before connecting to Twitch, make sure the callback URL is correctly configured in your Twitch Developer Dashboard.",-1)),S.value?(g(),m("p",vp,[L[5]||(L[5]=n("strong",null,"Callback URL:",-1)),L[6]||(L[6]=J()),n("code",null,x(S.value),1)])):(g(),m("p",mp,L[7]||(L[7]=[n("strong",null,"Callback URL format:",-1),J(),n("code",null,"https://your-streamvault-domain.com/api/twitch/callback",-1)])))]),n("button",{onClick:P,class:"btn btn-twitch"},[(g(),m("svg",hp,L[9]||(L[9]=[n("path",{fill:"white",d:"M11.64 5.93H13.07V10.21H11.64M15.57 5.93H17V10.21H15.57M7 2L3.43 5.57V18.43H7.71V22L11.29 18.43H14.14L20.57 12V2M19.14 11.29L16.29 14.14H13.43L10.93 16.64V14.14H7.71V3.43H19.14Z"},null,-1)]))),L[10]||(L[10]=J(" Connect with Twitch "))])])):H("",!0),d.value?(g(),m("div",yp,[L[11]||(L[11]=n("div",{class:"spinner"},null,-1)),n("p",null,x(u.value),1)])):H("",!0),k.value&&!_.value?(g(),m("div",_p,[n("div",bp,[n("div",wp,[be(n("input",{type:"text","onUpdate:modelValue":L[0]||(L[0]=G=>f.value=G),placeholder:"Search streamers...",class:"form-control"},null,512),[[Ue,f.value]])]),n("div",Sp,[n("button",{onClick:b,class:"btn btn-secondary",disabled:N.value.length===0}," Select All ",8,$p),n("button",{onClick:p,class:"btn btn-secondary",disabled:r.value.length===0}," Deselect All ",8,kp),n("button",{onClick:X,class:"btn btn-primary",disabled:r.value.length===0}," Import "+x(r.value.length)+" Streamers ",9,Cp)])]),i.value.length===0?(g(),m("div",Ep," You don't follow any channels on Twitch. ")):N.value.length===0?(g(),m("div",xp," No channels match your search. ")):(g(),m("div",Tp,[(g(!0),m(he,null,$e(N.value,G=>(g(),m("div",{key:G.id,class:ce(["channel-card",{selected:y(G)}]),onClick:ee=>v(G)},[n("div",Pp,[n("div",Rp,x(G.display_name),1),n("div",Ip,x(G.login),1)]),L[12]||(L[12]=n("div",{class:"selection-indicator"},[n("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[n("path",{fill:"currentColor",d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})])],-1))],10,Ap))),128))]))])):H("",!0),h.value?(g(),m("div",Np,[L[18]||(L[18]=n("h3",null,"Import Results",-1)),n("div",Fp,[n("div",Op,[L[13]||(L[13]=n("span",{class:"result-label"},"Total:",-1)),n("span",Lp,x(h.value.total),1)]),n("div",Dp,[L[14]||(L[14]=n("span",{class:"result-label"},"Added:",-1)),n("span",Mp,x(h.value.added),1)]),n("div",Up,[L[15]||(L[15]=n("span",{class:"result-label"},"Skipped:",-1)),n("span",Vp,x(h.value.skipped),1)]),n("div",jp,[L[16]||(L[16]=n("span",{class:"result-label"},"Failed:",-1)),n("span",Hp,x(h.value.failed),1)])]),h.value.failures&&h.value.failures.length>0?(g(),m("div",Bp,[L[17]||(L[17]=n("h4",null,"Failures:",-1)),n("ul",null,[(g(!0),m(he,null,$e(h.value.failures,(G,ee)=>(g(),m("li",{key:ee},[n("strong",null,x(G.username),1),J(": "+x(G.reason),1)]))),128))])])):H("",!0),n("button",{onClick:Q,class:"btn btn-primary"},"Import More Streamers")])):H("",!0)]))}}),qp=Oe(Wp,[["__scopeId","data-v-971daf3b"]]),Gp={class:"add-streamer-view"},Kp={class:"add-streamer-container"},zp={class:"content-section"},Jp={class:"content-section import-section"},Yp={__name:"AddStreamerView",setup(e){const t=Gt(),s=()=>{t.push("/")},o=()=>{t.push("/")};return(a,i)=>(g(),m("div",Gp,[n("div",Kp,[i[2]||(i[2]=n("div",{class:"page-header"},[n("h2",null,"Add New Streamer"),n("p",{class:"description"},"Add your favorite Twitch streamers to get notifications when they go live.")],-1)),n("div",zp,[ge(rp,{onStreamerAdded:s})]),n("div",Jp,[i[0]||(i[0]=n("h3",null,"Import from Twitch",-1)),i[1]||(i[1]=n("p",{class:"import-description"},"Or import streamers you already follow on Twitch",-1)),ge(qp,{onStreamersImported:o})])])]))}},Qp={class:"setup-page"},Zp={class:"form-group"},Xp={key:0,class:"error-msg"},eg={class:"form-group"},tg={key:0,class:"error-msg"},sg={class:"form-group"},ng={key:0,class:"error-msg"},og=["disabled"],ag={key:0,class:"loader"},ig={key:0,class:"error-msg"},rg={__name:"SetupView",setup(e){const t=Gt(),s=F(""),o=F(""),a=F(""),i=F(!1),r=F(""),l=pe(()=>s.value.length>=3&&o.value.length>=6&&o.value===a.value),c=async()=>{if(l.value){i.value=!0,r.value="";try{const d=await fetch("/auth/setup",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({username:s.value,password:o.value})});if(d.ok){const u=await d.json();alert(u.message||"Setup completed successfully."),t.push("/")}else{const u=await d.json().catch(()=>({detail:"Unknown error"}));r.value=u.detail||"Setup failed."}}catch(d){r.value="An error occurred while submitting the setup.",console.error("Setup submission error:",d)}finally{i.value=!1}}};return(d,u)=>(g(),m("div",Qp,[n("form",{onSubmit:De(c,["prevent"]),class:"setup-form"},[u[3]||(u[3]=n("h2",null,"Initial Setup",-1)),u[4]||(u[4]=n("p",{class:"description"},"Create your admin account",-1)),n("div",Zp,[be(n("input",{class:"input-field",type:"text","onUpdate:modelValue":u[0]||(u[0]=f=>s.value=f),placeholder:"Admin Username",required:""},null,512),[[Ue,s.value]]),s.value&&s.value.length<3?(g(),m("div",Xp," Username must be at least 3 characters ")):H("",!0)]),n("div",eg,[be(n("input",{class:"input-field",type:"password","onUpdate:modelValue":u[1]||(u[1]=f=>o.value=f),placeholder:"Password",required:""},null,512),[[Ue,o.value]]),o.value&&o.value.length<6?(g(),m("div",tg," Password must be at least 6 characters ")):H("",!0)]),n("div",sg,[be(n("input",{class:"input-field",type:"password","onUpdate:modelValue":u[2]||(u[2]=f=>a.value=f),placeholder:"Confirm Password",required:""},null,512),[[Ue,a.value]]),a.value&&o.value!==a.value?(g(),m("div",ng," Passwords do not match ")):H("",!0)]),n("button",{type:"submit",class:"submit-button",disabled:i.value||!l.value},[i.value?(g(),m("span",ag)):H("",!0),n("span",null,x(i.value?"Creating Account...":"Create Admin Account"),1)],8,og),r.value?(g(),m("div",ig,x(r.value),1)):H("",!0)],32)]))}},lg={class:"auth-view login-page"},cg={class:"form-group"},ug={class:"form-group"},dg=["disabled"],fg={key:0,class:"loader","aria-hidden":"true"},pg={key:0,class:"error-msg",role:"alert"},gg={__name:"LoginView",setup(e){const t=Gt(),s=F(""),o=F(""),a=F(!1),i=F(""),r=async()=>{a.value=!0,i.value="";try{const l=await fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s.value,password:o.value})});if(l.ok)t.push("/");else{const c=await l.json();i.value=c.detail||"Login failed"}}catch{i.value="An error occurred"}finally{a.value=!1}};return(l,c)=>(g(),m("div",lg,[n("form",{onSubmit:De(r,["prevent"]),class:"auth-form login-form","aria-labelledby":"login-heading"},[c[4]||(c[4]=n("h2",{id:"login-heading"},"Login",-1)),n("div",cg,[c[2]||(c[2]=n("label",{for:"username",class:"sr-only"},"Username",-1)),be(n("input",{id:"username",class:"auth-input",type:"text","onUpdate:modelValue":c[0]||(c[0]=d=>s.value=d),placeholder:"Username",autocomplete:"username",required:""},null,512),[[Ue,s.value]])]),n("div",ug,[c[3]||(c[3]=n("label",{for:"password",class:"sr-only"},"Password",-1)),be(n("input",{id:"password",class:"auth-input",type:"password","onUpdate:modelValue":c[1]||(c[1]=d=>o.value=d),placeholder:"Password",autocomplete:"current-password",required:""},null,512),[[Ue,o.value]])]),n("button",{type:"submit",class:"auth-submit-btn",disabled:a.value,"aria-live":"polite"},[a.value?(g(),m("span",fg)):H("",!0),n("span",null,x(a.value?"Logging in...":"Login"),1)],8,dg),i.value?(g(),m("div",pg,x(i.value),1)):H("",!0)],32)]))}},vg={class:"admin-panel"},mg={class:"health-section"},hg={class:"section-header"},yg=["disabled"],_g={class:"status-indicator"},bg={class:"status-text"},wg={class:"timestamp"},Sg={class:"health-checks"},$g={class:"check-name"},kg={class:"check-message"},Cg={class:"system-info-section"},Eg={class:"section-header"},xg=["disabled"],Tg={key:0,class:"system-info-grid"},Ag={class:"info-card"},Pg={class:"info-card"},Rg={class:"info-card"},Ig={key:0},Ng={key:1,class:"error"},Fg={class:"info-card"},Og={class:"test-suite-section"},Lg={class:"section-header"},Dg={class:"test-controls"},Mg=["disabled"],Ug={key:0,class:"test-progress"},Vg={key:1,class:"test-results"},jg={class:"results-summary"},Hg={class:"summary-stats"},Bg={class:"stat passed"},Wg={class:"count"},qg={class:"stat failed"},Gg={class:"count"},Kg={class:"stat total"},zg={class:"count"},Jg={class:"stat success-rate"},Yg={class:"count"},Qg={class:"detailed-results"},Zg={class:"results-filters"},Xg={class:"test-results-list"},ev={class:"result-header"},tv={class:"test-name"},sv={class:"test-time"},nv={class:"result-message"},ov={key:0,class:"result-details"},av=["onClick"],iv={key:0,class:"details-content"},rv={key:2,class:"available-tests"},lv={class:"test-categories"},cv={class:"maintenance-section"},uv={class:"maintenance-actions"},dv=["disabled"],fv={key:0,class:"cleanup-result"},pv={key:0},gv={class:"error-list"},vv={class:"modal-header"},mv={class:"modal-body"},hv={class:"log-controls"},yv={class:"logs-content"},_v={key:0},bv=Ne({__name:"AdminPanel",setup(e){const t=F(null),s=F(!1),o=F(null),a=F(!1),i=F(null),r=F(!1),l=F(null),c=F(!1),d=F(null),u=F(!1),f=F(!1),_=F(null),h=F("INFO"),S=F(200),k=F("all"),N=F([]),R=pe(()=>{if(!i.value)return[];const D=i.value.results;switch(k.value){case"passed":return D.filter(A=>A.success);case"failed":return D.filter(A=>!A.success);default:return D}}),y=async()=>{s.value=!0;try{const D=await fetch("/api/admin/tests/quick-health",{method:"POST",headers:{"Content-Type":"application/json"}});t.value=await D.json()}catch(D){console.error("Health check failed:",D)}finally{s.value=!1}},v=async()=>{a.value=!0;try{const D=await fetch("/api/admin/system/info");o.value=await D.json()}catch(D){console.error("Failed to load system info:",D)}finally{a.value=!1}},b=async()=>{r.value=!0;try{const D=await fetch("/api/admin/tests/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});i.value=await D.json()}catch(D){console.error("Tests failed:",D)}finally{r.value=!1}},p=async()=>{try{const D=await fetch("/api/admin/tests/available");l.value=await D.json(),c.value=!c.value}catch(D){console.error("Failed to load available tests:",D)}},P=async()=>{u.value=!0;try{const D=await fetch("/api/admin/maintenance/cleanup-temp",{method:"POST",headers:{"Content-Type":"application/json"}});d.value=await D.json()}catch(D){console.error("Cleanup failed:",D)}finally{u.value=!1}},T=async()=>{f.value=!0,await X()},X=async()=>{try{const D=await fetch(`/api/admin/logs/recent?lines=${S.value}&level=${h.value}`);_.value=await D.json()}catch(D){console.error("Failed to load logs:",D)}},Q=D=>{const A=N.value.indexOf(D);A>-1?N.value.splice(A,1):N.value.push(D)},V=D=>{switch(D){case"healthy":return"fas fa-check-circle text-green";case"warning":return"fas fa-exclamation-triangle text-yellow";case"error":return"fas fa-times-circle text-red";default:return"fas fa-question-circle text-gray"}},L=D=>new Date(D).toLocaleTimeString(),G=D=>D.replace(/_/g," ").replace(/\b\w/g,A=>A.toUpperCase()),ee=D=>D.replace(/_/g," ").replace(/\b\w/g,A=>A.toUpperCase()),z=D=>D.replace(/_/g," ").replace(/\b\w/g,A=>A.toUpperCase());return Fe(()=>{y(),v()}),(D,A)=>(g(),m("div",vg,[A[49]||(A[49]=n("div",{class:"header"},[n("h1",null,"StreamVault Admin Panel"),n("p",{class:"subtitle"},"System Testing & Diagnostics")],-1)),n("div",mg,[n("div",hg,[A[9]||(A[9]=n("h2",null,"System Health",-1)),n("button",{onClick:y,disabled:s.value,class:"btn btn-primary"},[A[8]||(A[8]=n("i",{class:"fas fa-heartbeat"},null,-1)),J(" "+x(s.value?"Checking...":"Quick Health Check"),1)],8,yg)]),t.value?(g(),m("div",{key:0,class:ce(["health-status",t.value.overall_status])},[n("div",_g,[n("i",{class:ce(V(t.value.overall_status))},null,2),n("span",bg,x(t.value.overall_status.toUpperCase()),1),n("span",wg,x(L(t.value.timestamp)),1)]),A[10]||(A[10]=Tt('<div class="health-legend" data-v-b384020d><div class="legend-item" data-v-b384020d><i class="fas fa-check-circle text-green" data-v-b384020d></i> Healthy </div><div class="legend-item" data-v-b384020d><i class="fas fa-exclamation-triangle text-yellow" data-v-b384020d></i> Warning </div><div class="legend-item" data-v-b384020d><i class="fas fa-times-circle text-red" data-v-b384020d></i> Error </div></div>',1)),n("div",Sg,[(g(!0),m(he,null,$e(t.value.checks,(M,W)=>(g(),m("div",{key:W,class:ce(["health-check",M.status])},[n("i",{class:ce(V(M.status))},null,2),n("span",$g,x(G(String(W))),1),n("span",kg,x(M.message),1)],2))),128))])],2)):H("",!0)]),n("div",Cg,[n("div",Eg,[A[12]||(A[12]=n("h2",null,"System Information",-1)),n("button",{onClick:v,disabled:a.value,class:"btn btn-secondary"},[A[11]||(A[11]=n("i",{class:"fas fa-info-circle"},null,-1)),J(" "+x(a.value?"Loading...":"Refresh Info"),1)],8,xg)]),o.value?(g(),m("div",Tg,[n("div",Ag,[A[16]||(A[16]=n("h3",null,"System",-1)),n("ul",null,[n("li",null,[A[13]||(A[13]=n("strong",null,"Platform:",-1)),J(" "+x(o.value.system.platform),1)]),n("li",null,[A[14]||(A[14]=n("strong",null,"Python:",-1)),J(" "+x(o.value.system.python_version),1)]),n("li",null,[A[15]||(A[15]=n("strong",null,"Architecture:",-1)),J(" "+x(o.value.system.architecture),1)])])]),n("div",Pg,[A[20]||(A[20]=n("h3",null,"Resources",-1)),n("ul",null,[n("li",null,[A[17]||(A[17]=n("strong",null,"CPU Cores:",-1)),J(" "+x(o.value.resources.cpu_count),1)]),n("li",null,[A[18]||(A[18]=n("strong",null,"CPU Usage:",-1)),J(" "+x(o.value.resources.cpu_percent)+"%",1)]),n("li",null,[A[19]||(A[19]=n("strong",null,"Memory:",-1)),J(" "+x(o.value.resources.memory.available_gb)+"GB / "+x(o.value.resources.memory.total_gb)+"GB available",1)])])]),n("div",Rg,[A[22]||(A[22]=n("h3",null,"Storage",-1)),o.value.storage.recording_drive?(g(),m("div",Ig,[n("ul",null,[A[21]||(A[21]=n("li",null,[n("strong",null,"Recording Drive:")],-1)),n("li",null,"Total: "+x(o.value.storage.recording_drive.total_gb)+"GB",1),n("li",null,"Free: "+x(o.value.storage.recording_drive.free_gb)+"GB",1),n("li",null,"Used: "+x(o.value.storage.recording_drive.percent_used)+"%",1)])])):o.value.storage.error?(g(),m("div",Ng," Error: "+x(o.value.storage.error),1)):H("",!0)]),n("div",Fg,[A[26]||(A[26]=n("h3",null,"Configuration",-1)),n("ul",null,[n("li",null,[A[23]||(A[23]=n("strong",null,"Recording Dir:",-1)),J(" "+x(o.value.settings.recording_directory),1)]),n("li",null,[A[24]||(A[24]=n("strong",null,"VAPID Keys:",-1)),J(" "+x(o.value.settings.vapid_configured?"Configured":"Not Configured"),1)]),n("li",null,[A[25]||(A[25]=n("strong",null,"Proxy:",-1)),J(" "+x(o.value.settings.proxy_configured?"Configured":"Direct Connection"),1)])])])])):H("",!0)]),n("div",Og,[n("div",Lg,[A[29]||(A[29]=n("h2",null,"Comprehensive Test Suite",-1)),n("div",Dg,[n("button",{onClick:b,disabled:r.value,class:"btn btn-success"},[A[27]||(A[27]=n("i",{class:"fas fa-play"},null,-1)),J(" "+x(r.value?"Running Tests...":"Run All Tests"),1)],8,Mg),n("button",{onClick:p,class:"btn btn-secondary"},A[28]||(A[28]=[n("i",{class:"fas fa-list"},null,-1),J(" Show Available Tests ")]))])]),r.value?(g(),m("div",Ug,A[30]||(A[30]=[n("div",{class:"progress-bar"},[n("div",{class:"progress-fill",style:{width:"50%"}})],-1),n("p",null,"Running comprehensive tests...",-1)]))):H("",!0),i.value?(g(),m("div",Vg,[n("div",jg,[A[39]||(A[39]=n("h3",{class:"summary-title"},"Test Results Summary",-1)),n("div",Hg,[n("div",Bg,[A[31]||(A[31]=n("i",{class:"fas fa-check-circle"},null,-1)),n("span",Wg,x(i.value.passed),1),A[32]||(A[32]=n("span",{class:"label"},"Passed",-1))]),n("div",qg,[A[33]||(A[33]=n("i",{class:"fas fa-times-circle"},null,-1)),n("span",Gg,x(i.value.failed),1),A[34]||(A[34]=n("span",{class:"label"},"Failed",-1))]),n("div",Kg,[A[35]||(A[35]=n("i",{class:"fas fa-clipboard-list"},null,-1)),n("span",zg,x(i.value.total_tests),1),A[36]||(A[36]=n("span",{class:"label"},"Total",-1))]),n("div",Jg,[A[37]||(A[37]=n("i",{class:"fas fa-percentage"},null,-1)),n("span",Yg,x(Math.round(i.value.success_rate))+"%",1),A[38]||(A[38]=n("span",{class:"label"},"Success Rate",-1))])])]),n("div",Qg,[n("div",Zg,[n("button",{onClick:A[0]||(A[0]=M=>k.value="all"),class:ce([{active:k.value==="all"},"filter-btn"])}," All ("+x(i.value.results.length)+") ",3),n("button",{onClick:A[1]||(A[1]=M=>k.value="failed"),class:ce([{active:k.value==="failed"},"filter-btn"])}," Failed ("+x(i.value.results.filter(M=>!M.success).length)+") ",3),n("button",{onClick:A[2]||(A[2]=M=>k.value="passed"),class:ce([{active:k.value==="passed"},"filter-btn"])}," Passed ("+x(i.value.results.filter(M=>M.success).length)+") ",3)]),n("div",Xg,[(g(!0),m(he,null,$e(R.value,M=>(g(),m("div",{key:M.test_name,class:ce(["test-result-item",M.success?"passed":"failed"])},[n("div",ev,[n("i",{class:ce(M.success?"fas fa-check-circle":"fas fa-times-circle")},null,2),n("span",tv,x(ee(M.test_name)),1),n("span",sv,x(L(M.timestamp)),1)]),n("div",nv,x(M.message),1),M.details&&Object.keys(M.details).length>0?(g(),m("div",ov,[n("button",{onClick:W=>Q(M.test_name),class:"details-toggle"},[n("i",{class:ce(N.value.includes(M.test_name)?"fas fa-chevron-up":"fas fa-chevron-down")},null,2),A[40]||(A[40]=J(" Details "))],8,av),N.value.includes(M.test_name)?(g(),m("div",iv,[n("pre",null,x(JSON.stringify(M.details,null,2)),1)])):H("",!0)])):H("",!0)],2))),128))])])])):H("",!0),l.value&&c.value?(g(),m("div",rv,[A[41]||(A[41]=n("h3",null,"Available Test Categories",-1)),n("div",lv,[(g(!0),m(he,null,$e(l.value,(M,W)=>(g(),m("div",{key:W,class:"test-category"},[n("h4",null,x(z(String(W))),1),n("ul",null,[(g(!0),m(he,null,$e(M,B=>(g(),m("li",{key:B},x(ee(B)),1))),128))])]))),128))])])):H("",!0)]),n("div",cv,[A[45]||(A[45]=n("div",{class:"section-header"},[n("h2",null,"Maintenance")],-1)),n("div",uv,[n("button",{onClick:P,disabled:u.value,class:"btn btn-warning"},[A[42]||(A[42]=n("i",{class:"fas fa-broom"},null,-1)),J(" "+x(u.value?"Cleaning...":"Cleanup Temp Files"),1)],8,dv),n("button",{onClick:T,class:"btn btn-info"},A[43]||(A[43]=[n("i",{class:"fas fa-file-alt"},null,-1),J(" View Recent Logs ")]))]),d.value?(g(),m("div",fv,[A[44]||(A[44]=n("h4",null,"Cleanup Results",-1)),n("ul",null,[n("li",null,"Files removed: "+x(d.value.files_removed),1),n("li",null,"Space freed: "+x(d.value.space_freed_mb)+"MB",1),d.value.errors.length>0?(g(),m("li",pv,[J(" Errors: "+x(d.value.errors.length)+" ",1),n("ul",gv,[(g(!0),m(he,null,$e(d.value.errors,M=>(g(),m("li",{key:M},x(M),1))),128))])])):H("",!0)])])):H("",!0)]),f.value?(g(),m("div",{key:0,class:"modal-overlay",onClick:A[7]||(A[7]=M=>f.value=!1)},[n("div",{class:"modal",onClick:A[6]||(A[6]=De(()=>{},["stop"]))},[n("div",vv,[A[47]||(A[47]=n("h3",null,"Recent Logs",-1)),n("button",{onClick:A[3]||(A[3]=M=>f.value=!1),class:"close-btn"},A[46]||(A[46]=[n("i",{class:"fas fa-times"},null,-1)]))]),n("div",mv,[n("div",hv,[be(n("select",{"onUpdate:modelValue":A[4]||(A[4]=M=>h.value=M),onChange:X},A[48]||(A[48]=[Tt('<option value="ALL" data-v-b384020d>All Levels</option><option value="ERROR" data-v-b384020d>Errors Only</option><option value="WARNING" data-v-b384020d>Warnings</option><option value="INFO" data-v-b384020d>Info</option><option value="DEBUG" data-v-b384020d>Debug</option>',5)]),544),[[Ut,h.value]]),be(n("input",{"onUpdate:modelValue":A[5]||(A[5]=M=>S.value=M),onChange:X,type:"number",min:"50",max:"1000",step:"50"},null,544),[[Ue,S.value]]),n("button",{onClick:X,class:"btn btn-sm btn-primary"},"Refresh")]),n("div",yv,[_.value?(g(),m("pre",_v,x(_.value.logs.join(`
`)),1)):H("",!0)])])])])):H("",!0)]))}}),wv=Oe(bv,[["__scopeId","data-v-b384020d"]]),Sv={class:"admin-view"},$v=Ne({__name:"AdminView",setup(e){return(t,s)=>(g(),m("div",Sv,[ge(wv)]))}}),kv=Oe($v,[["__scopeId","data-v-0ba29b1c"]]);function Cv(){const e=F(null),t=F([]);return{settings:e,streamerSettings:t,fetchSettings:async()=>{try{const r=await fetch("/api/settings");if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);e.value=await r.json()}catch(r){console.error("Failed to fetch settings:",r)}},updateSettings:async r=>{const l=await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!l.ok){const c=await l.json();throw new Error(c.detail||"Failed to update settings")}e.value=await l.json()},getStreamerSettings:async()=>{try{const r=await fetch("/api/settings/streamer");if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const l=await r.json();return t.value=l,l}catch(r){return console.error("Failed to fetch streamer settings:",r),[]}},updateStreamerSettings:async(r,l)=>{const c=await fetch(`/api/settings/streamer/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!c.ok){const d=await c.json().catch(()=>null);throw console.error("Error updating settings:",d),new Error((d==null?void 0:d.detail)||`Failed to update settings for streamer ${r}`)}return await c.json()}}}const Ev={class:"settings-form"},xv={class:"form-group"},Tv={class:"input-with-tooltip"},Av={key:0,class:"invalid-feedback"},Pv={class:"tooltip"},Rv={class:"form-group"},Iv={class:"form-actions"},Nv=["disabled"],Fv=["disabled"],Ov={class:"streamer-notifications"},Lv={class:"table-controls"},Dv={class:"streamer-table"},Mv={class:"streamer-info"},Uv={key:0,class:"streamer-avatar"},Vv=["src","alt"],jv={class:"streamer-name"},Hv={"data-label":"Online"},Bv=["onUpdate:modelValue","onChange"],Wv={"data-label":"Offline"},qv=["onUpdate:modelValue","onChange"],Gv={"data-label":"Updates"},Kv=["onUpdate:modelValue","onChange"],zv={"data-label":"Favorites"},Jv=["onUpdate:modelValue","onChange"],Yv={class:"actions-cell"},Qv={class:"btn-group"},Zv=["onClick"],Xv=["onClick"],em=Ne({__name:"NotificationSettingsPanel",props:{settings:{type:Object,required:!0},streamerSettings:{type:Array,required:!0}},emits:["update-settings","update-streamer-settings","test-notification"],setup(e,{emit:t}){const s=e,o=pe(()=>s.streamerSettings),a=t,i=F({notificationUrl:s.settings.notification_url||"",notificationsEnabled:s.settings.notifications_enabled!==!1,notifyOnlineGlobal:s.settings.notify_online_global!==!1,notifyOfflineGlobal:s.settings.notify_offline_global!==!1,notifyUpdateGlobal:s.settings.notify_update_global!==!1,notifyFavoriteCategoryGlobal:s.settings.notify_favorite_category_global!==!1}),r=F(!1),l=F(null),c=F(!1);let d;const u=()=>{l.value&&clearTimeout(l.value),l.value=window.setTimeout(()=>{r.value=!0},1e3)},f=()=>{l.value&&clearTimeout(l.value),r.value=!0},_=()=>{d&&(window.clearTimeout(d),d=void 0),c.value=!0},h=()=>{d=window.setTimeout(()=>{c.value=!1},300)};Wt(()=>{l.value&&clearTimeout(l.value),d&&window.clearTimeout(d)});const S=["discord","telegram","tgram","slack","pushover","mailto","ntfy","matrix","twilio","msteams","slack","gchat","ligne","signal","whatsapp","rocket","pushbullet","apprise","http","https","twitter","slack","dbus"],k=F(!1),N=pe(()=>{const Q=i.value.notificationUrl.trim();return Q?Q.includes(",")?Q.split(",").every(V=>{const L=V.trim();return L===""||R(L)}):R(Q):!0}),R=Q=>{if(!Q.includes("://"))return!1;const V=Q.split("://")[0].toLowerCase();return S.includes(V)?!0:/^[a-zA-Z]+:\/\/.+/.test(Q)},y=pe(()=>N.value&&(i.value.notificationUrl.trim()!==""||!i.value.notificationsEnabled)),v=async()=>{if(!k.value)try{k.value=!0,a("update-settings",{notification_url:i.value.notificationUrl,notifications_enabled:i.value.notificationsEnabled,notify_online_global:i.value.notifyOnlineGlobal,notify_offline_global:i.value.notifyOfflineGlobal,notify_update_global:i.value.notifyUpdateGlobal,notify_favorite_category_global:i.value.notifyFavoriteCategoryGlobal})}catch(Q){console.error("Failed to save settings:",Q)}finally{k.value=!1}},b=(Q,V)=>{a("update-streamer-settings",Q,V)},p=(Q,V)=>{if(!Q)return;a("update-streamer-settings",Q,{notify_online:V,notify_offline:V,notify_update:V})},P=Q=>{if(s.streamerSettings)for(const V of o.value)V!=null&&V.streamer_id&&p(V.streamer_id,Q)},T=()=>{a("test-notification")},X=async()=>{try{const Q=await fetch("/api/settings/test-websocket-notification",{method:"POST",headers:{"Content-Type":"application/json"}});if(!Q.ok){const V=await Q.json();throw new Error(V.detail||"Failed to send test WebSocket notification")}alert("Test WebSocket notification sent! Check the notification bell.")}catch(Q){alert(Q instanceof Error?Q.message:"Failed to send test WebSocket notification")}};return(Q,V)=>(g(),m("div",null,[V[15]||(V[15]=n("h3",null,"Notification Settings",-1)),n("div",Ev,[n("div",xv,[V[8]||(V[8]=n("label",null,"Notification Service URL:",-1)),n("div",Tv,[be(n("input",{"onUpdate:modelValue":V[0]||(V[0]=L=>i.value.notificationUrl=L),placeholder:"e.g., discord://webhook1,telegram://bot_token/chat_id",class:ce(["form-control",{"is-invalid":r.value&&!N.value&&i.value.notificationUrl.trim()}]),onFocus:V[1]||(V[1]=L=>c.value=!0),onInput:u,onBlur:f},null,34),[[Ue,i.value.notificationUrl]]),r.value&&!N.value&&i.value.notificationUrl.trim()?(g(),m("div",Av," Please enter a valid URL (e.g., discord://webhook_id/webhook_token) ")):H("",!0),c.value?(g(),m("div",{key:1,class:"tooltip-wrapper",onMouseenter:_,onMouseleave:h},[n("div",Pv,[V[6]||(V[6]=J(" StreamVault supports over 100 notification services including Discord, Telegram, Ntfy, Pushover, Slack and more. Check the ")),n("a",{href:"https://github.com/caronc/apprise/wiki#notification-services",target:"_blank",rel:"noopener noreferrer",onClick:V[2]||(V[2]=De(()=>{},["stop"])),class:"tooltip-link"},"Apprise Documentation"),V[7]||(V[7]=J(" for supported services and URL formats. "))])],32)):H("",!0)])]),n("div",Rv,[n("label",null,[be(n("input",{type:"checkbox","onUpdate:modelValue":V[3]||(V[3]=L=>i.value.notificationsEnabled=L)},null,512),[[We,i.value.notificationsEnabled]]),V[9]||(V[9]=J(" Enable Notifications "))])]),V[10]||(V[10]=n("div",{class:"form-group"},[n("h4",null,"Global Notification Settings"),n("div",{class:"checkbox-group"})],-1)),n("div",Iv,[n("button",{onClick:v,class:"btn btn-primary",disabled:k.value||!y.value},x(k.value?"Saving...":"Save Settings"),9,Nv),n("button",{onClick:T,class:"btn btn-secondary",disabled:!i.value.notificationsEnabled||!i.value.notificationUrl}," Test Notification ",8,Fv),n("button",{onClick:X,class:"btn btn-secondary",style:{"margin-left":"10px"}}," Test WebSocket ")])]),n("div",Ov,[V[14]||(V[14]=n("h3",null,"Streamer Notifications",-1)),n("div",Lv,[n("button",{onClick:V[4]||(V[4]=L=>P(!0)),class:"btn btn-secondary"},"Enable All"),n("button",{onClick:V[5]||(V[5]=L=>P(!1)),class:"btn btn-secondary"},"Disable All")]),n("div",Dv,[n("table",null,[V[13]||(V[13]=n("thead",null,[n("tr",null,[n("th",null,"Streamer"),n("th",null,[J(" Online "),n("div",{class:"th-tooltip"},"Notify when stream starts")]),n("th",null,[J(" Offline "),n("div",{class:"th-tooltip"},"Notify when stream ends")]),n("th",null,[J(" Updates "),n("div",{class:"th-tooltip"},"Notify on title/category changes")]),n("th",null,[J(" Favorites "),n("div",{class:"th-tooltip"},"Notify when streaming favorite games")]),n("th",null,"Actions")])],-1)),n("tbody",null,[(g(!0),m(he,null,$e(o.value,L=>(g(),m("tr",{key:L.streamer_id},[n("td",Mv,[L.profile_image_url?(g(),m("div",Uv,[n("img",{src:L.profile_image_url,alt:L.username||""},null,8,Vv)])):H("",!0),n("span",jv,x(L.username||"Unknown Streamer"),1)]),V[11]||(V[11]=J()),n("td",Hv,[be(n("input",{type:"checkbox","onUpdate:modelValue":G=>L.notify_online=G,onChange:G=>b(L.streamer_id,{notify_online:L.notify_online})},null,40,Bv),[[We,L.notify_online]])]),n("td",Wv,[be(n("input",{type:"checkbox","onUpdate:modelValue":G=>L.notify_offline=G,onChange:G=>b(L.streamer_id,{notify_offline:L.notify_offline})},null,40,qv),[[We,L.notify_offline]])]),n("td",Gv,[be(n("input",{type:"checkbox","onUpdate:modelValue":G=>L.notify_update=G,onChange:G=>b(L.streamer_id,{notify_update:L.notify_update})},null,40,Kv),[[We,L.notify_update]])]),n("td",zv,[be(n("input",{type:"checkbox","onUpdate:modelValue":G=>L.notify_favorite_category=G,onChange:G=>b(L.streamer_id,{notify_favorite_category:L.notify_favorite_category})},null,40,Jv),[[We,L.notify_favorite_category]])]),V[12]||(V[12]=J()),n("td",Yv,[n("div",Qv,[n("button",{onClick:G=>p(L.streamer_id,!0),class:"btn btn-sm btn-secondary"},"On",8,Zv),n("button",{onClick:G=>p(L.streamer_id,!1),class:"btn btn-sm btn-secondary"},"Off",8,Xv)])])]))),128))])])])])]))}}),tm=Oe(em,[["__scopeId","data-v-d93f4ce3"]]);function sm(){const e=Vt([]),t=F(!1),s=F(null),o=async()=>{t.value=!0,s.value=null;try{const a=await fetch("/api/recording/filename-presets");if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const i=await a.json();if(i.status==="success")e.splice(0,e.length,...i.data);else throw new Error("Failed to load filename presets")}catch(a){console.error("Error loading filename presets:",a),s.value=a instanceof Error?a.message:"Unknown error",e.splice(0,e.length,...Bd)}finally{t.value=!1}};return Fe(()=>{o()}),{presets:e,isLoading:t,error:s,loadPresets:o}}const nm={class:"cleanup-policy-editor"},om={class:"policy-card"},am={class:"card-title"},im={class:"form-group"},rm={class:"form-row"},lm=["value"],cm={class:"help-text"},um={key:0,class:"form-group"},dm={class:"form-row"},fm={class:"help-text"},pm={class:"form-group"},gm={class:"checkbox-group"},vm={class:"checkbox-label"},mm={key:1,class:"form-group"},hm=["value"],ym={class:"form-actions"},_m=["disabled"],bm={key:0,class:"policy-card"},wm={class:"stats-grid"},Sm={class:"stat-item"},$m={class:"stat-value"},km={class:"stat-item"},Cm={class:"stat-value"},Em={class:"stat-item"},xm={class:"stat-value"},Tm={class:"stat-item"},Am={class:"stat-value"},Pm={class:"form-actions"},Rm=["disabled"],Im=["disabled"],Nm={class:"modal-body"},Fm={key:0},Om={class:"deleted-files-list"},Lm=Ne({__name:"CleanupPolicyEditor",props:{streamerId:{},title:{},isGlobal:{type:Boolean}},emits:["saved","updated"],setup(e,{emit:t}){const s=e,o=t,a=Ws(),i=F(!1),r=F(!1),l=F(!1),c=F(""),d=F("success"),u=F(!1),f=F({message:"",deleted_count:0,deleted_paths:[]}),_=F(!1),h=F({totalSize:0,recordingCount:0,oldestRecording:"",newestRecording:""}),S=F({type:Ve.COUNT,threshold:10,preserve_favorites:!0,preserve_categories:[]}),k=[{label:"Keep X newest recordings",value:Ve.COUNT},{label:"Limit total size (GB)",value:Ve.SIZE},{label:"Delete older than X days",value:Ve.AGE}],N=F([]),R=pe(()=>{switch(S.value.type){case Ve.COUNT:return`Keep only the ${S.value.threshold} most recent recordings per streamer`;case Ve.SIZE:return`Delete old recordings when total size exceeds ${S.value.threshold} GB per streamer`;case Ve.AGE:return`Delete recordings older than ${S.value.threshold} days`;default:return""}}),y=pe(()=>{switch(S.value.type){case Ve.COUNT:return"Number of recordings to keep";case Ve.SIZE:return"Maximum storage size (GB)";case Ve.AGE:return"Maximum age (days)";default:return"Threshold"}}),v=pe(()=>{switch(S.value.type){case Ve.COUNT:return"Keeps the most recent recordings, deletes older ones";case Ve.SIZE:return"Deletes oldest recordings when total size exceeds this limit";case Ve.AGE:return"Deletes recordings older than this number of days";default:return""}}),b=pe(()=>N.value.length>0);async function p(){var M;try{if(s.isGlobal){if(a.settings.value||await a.fetchSettings(),(M=a.settings.value)!=null&&M.cleanup_policy){const W=a.settings.value.cleanup_policy;S.value=A(W)}}else if(s.streamerId){_.value=!0,await T(),await a.fetchStreamerSettings();const W=a.streamerSettings.value.find(B=>B.streamer_id===s.streamerId);W!=null&&W.cleanup_policy&&(S.value=A(W.cleanup_policy))}await P()}catch(W){D("Error loading cleanup policy"),console.error("Error loading cleanup policy:",W)}}async function P(){try{const M=await a.getAvailableCategories();N.value=M}catch(M){console.error("Error loading categories:",M)}}async function T(){if(s.streamerId)try{const M=await a.getStreamerStorageUsage(s.streamerId);h.value=M}catch(M){console.error("Error loading storage stats:",M)}}async function X(){try{i.value=!0;const M=A(S.value);s.isGlobal?await a.updateCleanupPolicy(M):s.streamerId&&await a.updateStreamerCleanupPolicy(s.streamerId,M),z("Cleanup policy saved successfully"),o("saved",M)}catch(M){D("Error saving cleanup policy"),console.error("Error saving cleanup policy:",M)}finally{i.value=!1}}async function Q(){if(s.streamerId)try{r.value=!0;const M=await a.cleanupOldRecordings(s.streamerId);f.value={message:M.message||"Cleanup completed successfully",deleted_count:M.deleted_count||0,deleted_paths:M.deleted_paths||[]},u.value=!0,await T()}catch(M){D("Error running cleanup"),console.error("Error running cleanup:",M)}finally{r.value=!1}}async function V(){if(s.streamerId)try{r.value=!0;const M=A(S.value),W=await a.runCustomCleanup(s.streamerId,M);f.value={message:W.message||`Test cleanup would delete ${W.deleted_count} recordings`,deleted_count:W.deleted_count||0,deleted_paths:W.deleted_paths||[]},u.value=!0,await T()}catch(M){D("Error running custom cleanup test"),console.error("Error running custom cleanup:",M)}finally{r.value=!1}}function L(){u.value=!1,f.value={message:"",deleted_count:0,deleted_paths:[]}}function G(M){if(M===0)return"0 Bytes";const W=1024,B=["Bytes","KB","MB","GB","TB"],se=Math.floor(Math.log(M)/Math.log(W));return parseFloat((M/Math.pow(W,se)).toFixed(2))+" "+B[se]}function ee(M){if(!M)return"N/A";try{return new Date(M).toLocaleString()}catch{return"Invalid date"}}function z(M){c.value=M,d.value="success",l.value=!0,setTimeout(()=>{l.value=!1},5e3)}function D(M){c.value=M,d.value="error",l.value=!0,setTimeout(()=>{l.value=!1},8e3)}function A(M){return{type:M.type||Ve.COUNT,threshold:M.threshold||10,preserve_favorites:M.preserve_favorites!==void 0?M.preserve_favorites:!0,preserve_categories:M.preserve_categories||[]}}return Fe(()=>{p()}),(M,W)=>(g(),m("div",nm,[n("div",om,[n("h4",am,x(M.title),1),n("form",{onSubmit:De(X,["prevent"])},[n("div",im,[W[6]||(W[6]=n("label",null,"Cleanup Policy:",-1)),n("div",rm,[be(n("select",{"onUpdate:modelValue":W[0]||(W[0]=B=>S.value.type=B),class:"form-control"},[(g(),m(he,null,$e(k,B=>n("option",{key:B.value,value:B.value},x(B.label),9,lm)),64))],512),[[Ut,S.value.type]]),n("div",cm,x(R.value),1)])]),S.value.type!=="custom"?(g(),m("div",um,[n("div",dm,[n("label",null,x(y.value)+":",1),be(n("input",{type:"number","onUpdate:modelValue":W[1]||(W[1]=B=>S.value.threshold=B),min:"1",class:"form-control",required:""},null,512),[[Ue,S.value.threshold,void 0,{number:!0}]]),n("div",fm,x(v.value),1)])])):H("",!0),n("div",pm,[W[8]||(W[8]=n("label",null,"Preservation Options:",-1)),n("div",gm,[n("label",vm,[be(n("input",{type:"checkbox","onUpdate:modelValue":W[2]||(W[2]=B=>S.value.preserve_favorites=B)},null,512),[[We,S.value.preserve_favorites]]),W[7]||(W[7]=J(" Preserve favorites "))])])]),b.value?(g(),m("div",mm,[W[9]||(W[9]=n("label",null,"Preserve Categories:",-1)),be(n("select",{"onUpdate:modelValue":W[3]||(W[3]=B=>S.value.preserve_categories=B),class:"form-control",multiple:""},[(g(!0),m(he,null,$e(N.value,B=>(g(),m("option",{key:B.id,value:B.name},x(B.name),9,hm))),128))],512),[[Ut,S.value.preserve_categories]]),W[10]||(W[10]=n("div",{class:"help-text"},"Hold Ctrl/Cmd to select multiple categories",-1))])):H("",!0),n("div",ym,[n("button",{type:"submit",class:"btn btn-primary",disabled:i.value},x(i.value?"Saving...":"Save Cleanup Policy"),9,_m)])],32)]),_.value?(g(),m("div",bm,[W[15]||(W[15]=n("h4",{class:"card-title"},"Storage Statistics",-1)),n("div",wm,[n("div",Sm,[W[11]||(W[11]=n("div",{class:"stat-label"},"Total Size",-1)),n("div",$m,x(G(h.value.totalSize)),1)]),n("div",km,[W[12]||(W[12]=n("div",{class:"stat-label"},"Recording Count",-1)),n("div",Cm,x(h.value.recordingCount),1)]),n("div",Em,[W[13]||(W[13]=n("div",{class:"stat-label"},"Oldest Recording",-1)),n("div",xm,x(ee(h.value.oldestRecording)),1)]),n("div",Tm,[W[14]||(W[14]=n("div",{class:"stat-label"},"Newest Recording",-1)),n("div",Am,x(ee(h.value.newestRecording)),1)])]),n("div",Pm,[n("button",{class:"btn btn-danger",onClick:Q,disabled:r.value},x(r.value?"Cleaning...":"Run Cleanup Now"),9,Rm),n("button",{class:"btn btn-warning",onClick:V,disabled:r.value}," Test Current Settings ",8,Im)])])):H("",!0),l.value?(g(),m("div",{key:1,class:ce(["message",d.value])},[J(x(c.value)+" ",1),n("button",{onClick:W[4]||(W[4]=B=>l.value=!1),class:"close-btn"},"×")],2)):H("",!0),u.value?(g(),m("div",{key:2,class:"modal-overlay",onClick:L},[n("div",{class:"modal-content",onClick:W[5]||(W[5]=De(()=>{},["stop"]))},[n("div",{class:"modal-header"},[W[16]||(W[16]=n("h3",null,"Cleanup Results",-1)),n("button",{onClick:L,class:"close-btn"},"×")]),n("div",Nm,[n("p",null,x(f.value.message),1),n("p",null,[W[17]||(W[17]=n("strong",null,"Recordings Deleted:",-1)),J(" "+x(f.value.deleted_count),1)]),f.value.deleted_paths&&f.value.deleted_paths.length>0?(g(),m("div",Fm,[W[18]||(W[18]=n("h4",null,"Deleted Files:",-1)),n("ul",Om,[(g(!0),m(he,null,$e(f.value.deleted_paths,(B,se)=>(g(),m("li",{key:se},x(B),1))),128))])])):H("",!0)]),n("div",{class:"modal-footer"},[n("button",{onClick:L,class:"btn btn-primary"},"Close")])])])):H("",!0)]))}}),Na=Oe(Lm,[["__scopeId","data-v-90fa693f"]]),Dm={key:0,class:"loading-message"},Mm={key:1,class:"error-message"},Um={key:2,class:"settings-form"},Vm={class:"tab-navigation"},jm=["onClick"],Hm={class:"tab-content"},Bm={key:0,class:"tab-panel"},Wm={class:"settings-section"},qm={class:"form-group"},Gm={class:"form-group"},Km={class:"form-group"},zm=["value"],Jm={class:"form-group"},Ym=["disabled"],Qm={key:0,value:""},Zm=["value"],Xm={key:0,class:"error-text"},eh={class:"help-text"},th={class:"form-group"},sh={class:"form-group"},nh={key:1,class:"tab-panel"},oh={class:"settings-section"},ah={class:"form-group"},ih={key:0,class:"proxy-configuration"},rh={class:"form-group"},lh={key:0,class:"error-text"},ch={class:"form-group"},uh={key:0,class:"error-text"},dh={key:2,class:"tab-panel"},fh={class:"settings-section"},ph={class:"form-actions"},gh=["disabled"],vh={key:3,class:"active-recordings"},mh={class:"recordings-grid"},hh={class:"recording-header"},yh={class:"streamer-name"},_h={class:"recording-details"},bh={class:"output-path"},wh=["onClick","disabled"],Sh={class:"streamer-settings"},$h={key:0,class:"no-streamers-message"},kh={class:"table-controls"},Ch={class:"streamer-table"},Eh={class:"streamer-info"},xh={key:0,class:"streamer-avatar"},Th=["src","alt"],Ah={class:"streamer-name"},Ph=["onUpdate:modelValue","onChange"],Rh=["onUpdate:modelValue","onChange"],Ih=["value"],Nh=["onUpdate:modelValue","onChange"],Fh={class:"streamer-actions"},Oh=["onClick","disabled"],Lh=["onClick","disabled"],Dh={class:"modal-header"},Mh={class:"modal-body"},Uh=Ne({__name:"RecordingSettingsPanel",props:{settings:{},streamerSettings:{},activeRecordings:{}},emits:["update","updateStreamer","stopRecording"],setup(e,{emit:t}){var W,B,se,re,me,Ie,Ge;const s=e,o=t,a=F("recording"),i=[{id:"recording",label:"Recording",icon:"📹"},{id:"network",label:"Network",icon:"🌐"},{id:"storage",label:"Storage",icon:"🗂️"}],{isLoading:r,error:l}=Ws(),{presets:c,isLoading:d,error:u}=sm(),f=F(!1),_=F(null),h=F({enabled:!1,http_proxy:"",https_proxy:""}),S=pe(()=>!h.value.enabled||!h.value.http_proxy.trim()||y(h.value.http_proxy)?"":'HTTP proxy URL must start with "http://" or "https://"'),k=pe(()=>!h.value.enabled||!h.value.https_proxy.trim()||y(h.value.https_proxy)?"":'HTTPS proxy URL must start with "http://" or "https://"'),N=pe(()=>S.value!==""||k.value!==""),R=async()=>{try{const ie=await fetch("/api/settings");if(ie.ok){const O=await ie.json();h.value={enabled:!!(O.http_proxy||O.https_proxy),http_proxy:O.http_proxy||"",https_proxy:O.https_proxy||""}}}catch(ie){console.error("Failed to load proxy settings:",ie)}},y=ie=>{if(!ie||!ie.trim())return!0;const O=ie.trim();return O.startsWith("http://")||O.startsWith("https://")},v=async()=>{try{if(N.value)return;const ie=await fetch("/api/settings");if(!ie.ok)throw new Error("Failed to load current settings");const j={...await ie.json(),http_proxy:h.value.enabled?h.value.http_proxy:"",https_proxy:h.value.enabled?h.value.https_proxy:""};if(!(await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)})).ok)throw new Error("Failed to save proxy settings");console.log("Proxy settings saved successfully")}catch(ie){console.error("Failed to save proxy settings:",ie),alert("Failed to save proxy settings. Please try again.")}};Fe(()=>{R()});const b=F({enabled:((W=s.settings)==null?void 0:W.enabled)??!1,output_directory:((B=s.settings)==null?void 0:B.output_directory)??"/recordings",filename_template:((se=s.settings)==null?void 0:se.filename_template)??"{streamer}/{streamer}_{year}{month}-{day}_{hour}-{minute}_{title}_{game}",filename_preset:(re=s.settings)==null?void 0:re.filename_preset,default_quality:((me=s.settings)==null?void 0:me.default_quality)??"best",use_chapters:((Ie=s.settings)==null?void 0:Ie.use_chapters)??!0,use_category_as_chapter_title:((Ge=s.settings)==null?void 0:Ge.use_category_as_chapter_title)??!1});Je(()=>s.settings,ie=>{ie&&(b.value={...ie})},{deep:!0});const p=F(!1);pe(()=>{if(!b.value.filename_template)return"";const ie=new Date,O=ie.getFullYear().toString(),j=(ie.getMonth()+1).toString().padStart(2,"0"),E=ie.getDate().toString().padStart(2,"0"),C=ie.getHours().toString().padStart(2,"0"),U=ie.getMinutes().toString().padStart(2,"0"),de=ie.getSeconds().toString().padStart(2,"0");let w=b.value.filename_template;return w=w.replace(/{streamer}/g,"example_streamer").replace(/{title}/g,"Example Stream Title").replace(/{game}/g,"Example Game").replace(/{twitch_id}/g,"123456789").replace(/{year}/g,O).replace(/{month}/g,j).replace(/{day}/g,E).replace(/{hour}/g,C).replace(/{minute}/g,U).replace(/{second}/g,de).replace(/{timestamp}/g,`${O}${j}${E}_${C}${U}${de}`).replace(/{datetime}/g,`${O}-${j}-${E}_${C}-${U}-${de}`).replace(/{id}/g,"stream_12345").replace(/{season}/g,`S${O}-${j}`).replace(/{episode}/g,"01"),w.toLowerCase().endsWith(".mp4")||(w+=".mp4"),w});const P=()=>{const ie=c.find(O=>O.value===b.value.filename_preset);ie&&(b.value.filename_template=ie.description)},T=async()=>{try{p.value=!0,o("update",{enabled:b.value.enabled,output_directory:b.value.output_directory,filename_template:b.value.filename_template,filename_preset:b.value.filename_preset,default_quality:b.value.default_quality,use_chapters:b.value.use_chapters,use_category_as_chapter_title:b.value.use_category_as_chapter_title}),await v()}catch(ie){console.error("Failed to save settings:",ie),alert("Failed to save settings. Please try again.")}finally{p.value=!1}},X=(ie,O)=>{o("updateStreamer",ie,O)},Q=async ie=>{if(s.streamerSettings)for(const O of s.streamerSettings)O!=null&&O.streamer_id&&await X(O.streamer_id,{enabled:ie})},V=ie=>{o("stopRecording",ie)},L=ie=>s.activeRecordings.some(O=>O.streamer_id===ie),G=ie=>new Date(ie).toLocaleString(),ee=ie=>{const O=Math.floor(ie/3600),j=Math.floor(ie%3600/60);return`${O}h ${j}m`},z=ie=>{if(s.settings){const O={...s.settings,cleanup_policy:ie};o("update",O)}},D=ie=>{_.value=ie,f.value=!0},A=()=>{f.value=!1,_.value=null},M=ie=>{console.log("Streamer cleanup policy saved:",ie),A()};return(ie,O)=>{var j;return g(),m("div",null,[O[55]||(O[55]=n("h3",null,"Recording Settings",-1)),le(r)?(g(),m("div",Dm," Loading recording settings... ")):le(l)?(g(),m("div",Mm," Error loading settings: "+x(le(l)),1)):(g(),m("div",Um,[n("div",Vm,[(g(),m(he,null,$e(i,E=>n("button",{key:E.id,onClick:C=>a.value=E.id,class:ce(["tab-button",{active:a.value===E.id}])},x(E.icon)+" "+x(E.label),11,jm)),64))]),n("div",Hm,[a.value==="recording"?(g(),m("div",Bm,[n("div",Wm,[O[33]||(O[33]=n("h4",{class:"section-title"},"📹 Basic Recording Settings",-1)),n("div",qm,[n("label",null,[be(n("input",{type:"checkbox","onUpdate:modelValue":O[0]||(O[0]=E=>b.value.enabled=E)},null,512),[[We,b.value.enabled]]),O[13]||(O[13]=J(" Enable Recording "))]),O[14]||(O[14]=n("div",{class:"help-text"}," Master toggle for all recording functionality. When disabled, no streams will be recorded regardless of individual streamer settings. ",-1))]),n("div",Gm,[O[15]||(O[15]=n("label",null,"Output Directory:",-1)),be(n("input",{"onUpdate:modelValue":O[1]||(O[1]=E=>b.value.output_directory=E),class:"form-control"},null,512),[[Ue,b.value.output_directory]]),O[16]||(O[16]=n("div",{class:"help-text"}," Base directory where recordings will be saved. Individual streamers will have subdirectories created here. ",-1))]),n("div",Km,[O[17]||(O[17]=n("label",null,"Default Quality:",-1)),be(n("select",{"onUpdate:modelValue":O[2]||(O[2]=E=>b.value.default_quality=E),class:"form-control"},[(g(!0),m(he,null,$e(le(Ia),E=>(g(),m("option",{key:E.value,value:E.value},x(E.label),9,zm))),128))],512),[[Ut,b.value.default_quality]]),O[18]||(O[18]=n("div",{class:"help-text"}," Default quality setting for new streamers. Individual streamers can override this setting. ",-1))]),n("div",Jm,[O[28]||(O[28]=n("label",null,"Filename Template:",-1)),be(n("select",{"onUpdate:modelValue":O[3]||(O[3]=E=>b.value.filename_preset=E),class:"form-control",onChange:P,disabled:le(d)},[le(d)?(g(),m("option",Qm,"Loading presets...")):H("",!0),(g(!0),m(he,null,$e(le(c),E=>(g(),m("option",{key:E.value,value:E.value},x(E.label),9,Zm))),128))],40,Ym),[[Ut,b.value.filename_preset]]),le(u)?(g(),m("div",Xm," Failed to load presets: "+x(le(u)),1)):H("",!0),be(n("input",{"onUpdate:modelValue":O[4]||(O[4]=E=>b.value.filename_template=E),class:"form-control",style:{"margin-top":"10px"}},null,512),[[Ue,b.value.filename_template]]),n("div",eh,[O[19]||(O[19]=J(" Choose a preset or customize the filename template. ")),O[20]||(O[20]=n("br",null,null,-1)),O[21]||(O[21]=n("strong",null,"Available variables:",-1)),(g(!0),m(he,null,$e(le(Hd),E=>(g(),m("span",{key:E.key,class:"variable-tag"},x(E.key),1))),128)),O[22]||(O[22]=n("br",null,null,-1)),O[23]||(O[23]=n("br",null,null,-1)),O[24]||(O[24]=n("strong",null,"Example output: ",-1)),O[25]||(O[25]=n("code",{class:"example-output"},"Streamername - S202506E01 - Just Chatting Stream.mp4",-1)),O[26]||(O[26]=n("br",null,null,-1)),O[27]||(O[27]=n("small",null,"Episode numbers (E01, E02, E03) are based on stream order within the month, not date.",-1))])]),n("div",th,[n("label",null,[be(n("input",{type:"checkbox","onUpdate:modelValue":O[5]||(O[5]=E=>b.value.use_chapters=E)},null,512),[[We,b.value.use_chapters]]),O[29]||(O[29]=J(" Create Chapters From Stream Events "))]),O[30]||(O[30]=n("div",{class:"help-text"}," Create chapters in the recording based on stream title and game changes. ",-1))]),n("div",sh,[n("label",null,[be(n("input",{type:"checkbox","onUpdate:modelValue":O[6]||(O[6]=E=>b.value.use_category_as_chapter_title=E)},null,512),[[We,b.value.use_category_as_chapter_title]]),O[31]||(O[31]=J(" Use Category as Chapter Title "))]),O[32]||(O[32]=n("div",{class:"help-text"}," When enabled, chapter titles will use the game/category name instead of the stream title. ",-1))])])])):H("",!0),a.value==="network"?(g(),m("div",nh,[n("div",oh,[O[41]||(O[41]=n("h4",{class:"section-title"},"🌐 Network & Proxy Settings",-1)),O[42]||(O[42]=n("p",{class:"section-description"}," Configure proxy settings for Streamlink to route traffic through different locations. This can help reduce ads if using a proxy in a region with fewer advertisements. ",-1)),n("div",ah,[n("label",null,[be(n("input",{type:"checkbox","onUpdate:modelValue":O[7]||(O[7]=E=>h.value.enabled=E)},null,512),[[We,h.value.enabled]]),O[34]||(O[34]=J(" Enable Proxy Settings "))]),O[35]||(O[35]=n("div",{class:"help-text"},[J(" When enabled, Streamlink will use the configured proxy servers for all connections. "),n("br"),n("strong",null,"⚠️ Note:"),J(" Proxy usage may occasionally cause audio synchronization issues due to network latency. StreamVault includes optimizations to minimize these issues, but you may need to test different proxy servers for best results. ")],-1))]),h.value.enabled?(g(),m("div",ih,[n("div",rh,[O[36]||(O[36]=n("label",null,"HTTP Proxy:",-1)),be(n("input",{"onUpdate:modelValue":O[8]||(O[8]=E=>h.value.http_proxy=E),placeholder:"http://proxy.example.com:8080",class:ce(["form-control",{error:S.value}])},null,2),[[Ue,h.value.http_proxy]]),S.value?(g(),m("div",lh,x(S.value),1)):H("",!0),O[37]||(O[37]=n("div",{class:"help-text"},[J(" HTTP proxy server for non-encrypted connections. "),n("br"),n("strong",null,"Format:"),J(),n("code",null,"http://[username:password@]host:port")],-1))]),n("div",ch,[O[38]||(O[38]=n("label",null,"HTTPS Proxy:",-1)),be(n("input",{"onUpdate:modelValue":O[9]||(O[9]=E=>h.value.https_proxy=E),placeholder:"https://proxy.example.com:8080",class:ce(["form-control",{error:k.value}])},null,2),[[Ue,h.value.https_proxy]]),k.value?(g(),m("div",uh,x(k.value),1)):H("",!0),O[39]||(O[39]=n("div",{class:"help-text"},[J(" HTTPS proxy server for encrypted connections (recommended for Twitch). "),n("br"),n("strong",null,"Format:"),J(),n("code",null,"https://[username:password@]host:port")],-1))]),O[40]||(O[40]=Tt('<div class="proxy-examples" data-v-c4092ddd><h5 data-v-c4092ddd>📋 Proxy URL Examples:</h5><ul data-v-c4092ddd><li data-v-c4092ddd><code data-v-c4092ddd>http://proxy.example.com:8080</code> - Basic proxy</li><li data-v-c4092ddd><code data-v-c4092ddd>http://username:password@proxy.example.com:8080</code> - Authenticated proxy</li><li data-v-c4092ddd><code data-v-c4092ddd>https://secure-proxy.example.com:8080</code> - HTTPS proxy</li><li data-v-c4092ddd><code data-v-c4092ddd>socks5://127.0.0.1:1080</code> - SOCKS5 proxy (if supported)</li></ul></div><div class="proxy-tips" data-v-c4092ddd><h6 data-v-c4092ddd>💡 Tips:</h6><ul data-v-c4092ddd><li data-v-c4092ddd>Use HTTPS proxy for better security and compatibility with Twitch</li><li data-v-c4092ddd>Test your proxy configuration before enabling recording</li><li data-v-c4092ddd>Some regions have fewer or no Twitch advertisements</li><li data-v-c4092ddd>Ensure your proxy provider allows video streaming traffic</li><li data-v-c4092ddd>Leave fields empty to disable proxy for that protocol</li><li data-v-c4092ddd><strong data-v-c4092ddd>Audio Sync:</strong> If you experience audio/video sync issues, try a different proxy server or disable proxy temporarily</li><li data-v-c4092ddd><strong data-v-c4092ddd>Performance:</strong> StreamVault automatically optimizes settings for proxy usage, but some latency is expected</li></ul></div>',2))])):H("",!0)])])):H("",!0),a.value==="storage"?(g(),m("div",dh,[n("div",fh,[O[43]||(O[43]=n("h4",{class:"section-title"},"🗂️ Storage & Cleanup Management",-1)),O[44]||(O[44]=n("p",{class:"section-description"}," Configure automatic cleanup policies to manage storage space and organize your recordings efficiently. ",-1)),ge(Na,{"is-global":!0,title:"Global Cleanup Policy",onSaved:z})])])):H("",!0)]),n("div",ph,[n("button",{onClick:T,class:"btn btn-primary",disabled:p.value},x(p.value?"Saving...":"Save Settings"),9,gh)])])),ie.activeRecordings.length>0?(g(),m("div",vh,[O[50]||(O[50]=n("h3",null,"Active Recordings",-1)),n("div",mh,[(g(!0),m(he,null,$e(ie.activeRecordings,E=>(g(),m("div",{key:E.streamer_id,class:"recording-card"},[n("div",hh,[n("span",yh,x(E.streamer_name),1),O[45]||(O[45]=n("span",{class:"recording-indicator"},"RECORDING",-1))]),n("div",_h,[n("div",null,[O[46]||(O[46]=n("strong",null,"Started:",-1)),J(" "+x(G(E.started_at)),1)]),n("div",null,[O[47]||(O[47]=n("strong",null,"Duration:",-1)),J(" "+x(ee(E.duration)),1)]),n("div",null,[O[48]||(O[48]=n("strong",null,"Quality:",-1)),J(" "+x(E.quality),1)]),n("div",bh,[O[49]||(O[49]=n("strong",null,"Output:",-1)),J(" "+x(E.output_path),1)])]),n("button",{onClick:C=>V(E.streamer_id),class:"btn btn-danger",disabled:le(r)}," Stop Recording ",8,wh)]))),128))])])):H("",!0),n("div",Sh,[O[54]||(O[54]=n("h3",null,"Streamer Recording Settings",-1)),!ie.streamerSettings||ie.streamerSettings.length===0?(g(),m("div",$h,O[51]||(O[51]=[n("p",null,"No streamers found. Add streamers in the Streamers section to configure recording settings.",-1)]))):(g(),m(he,{key:1},[n("div",kh,[n("button",{onClick:O[10]||(O[10]=E=>Q(!0)),class:"btn btn-secondary"},"Enable All"),n("button",{onClick:O[11]||(O[11]=E=>Q(!1)),class:"btn btn-secondary"},"Disable All")]),n("div",Ch,[n("table",null,[O[53]||(O[53]=n("thead",null,[n("tr",null,[n("th",null,"Streamer"),n("th",null,[J(" Record "),n("div",{class:"th-tooltip"},"Enable/disable recording for this streamer")]),n("th",null,[J(" Quality "),n("div",{class:"th-tooltip"},"Select recording quality (defaults to global setting if empty)")]),n("th",null,[J(" Custom Filename "),n("div",{class:"th-tooltip"},"Optional custom filename template for this streamer")]),n("th",null,[J(" Actions "),n("div",{class:"th-tooltip"},"Test, stop, or clean up recordings")])])],-1)),n("tbody",null,[(g(!0),m(he,null,$e(ie.streamerSettings,E=>(g(),m("tr",{key:E.streamer_id},[n("td",Eh,[E.profile_image_url?(g(),m("div",xh,[n("img",{src:E.profile_image_url,alt:E.username||""},null,8,Th)])):H("",!0),n("span",Ah,x(E.username||"Unknown Streamer"),1)]),n("td",null,[be(n("input",{type:"checkbox","onUpdate:modelValue":C=>E.enabled=C,onChange:C=>X(E.streamer_id,{enabled:E.enabled})},null,40,Ph),[[We,E.enabled]])]),n("td",null,[be(n("select",{"onUpdate:modelValue":C=>E.quality=C,onChange:C=>X(E.streamer_id,{quality:E.quality}),class:"form-control form-control-sm"},[O[52]||(O[52]=n("option",{value:""},"Use global default",-1)),(g(!0),m(he,null,$e(le(Ia),C=>(g(),m("option",{key:C.value,value:C.value},x(C.label),9,Ih))),128))],40,Rh),[[Ut,E.quality]])]),n("td",null,[be(n("input",{type:"text","onUpdate:modelValue":C=>E.custom_filename=C,onChange:C=>X(E.streamer_id,{custom_filename:E.custom_filename}),placeholder:"Use global template",class:"form-control form-control-sm"},null,40,Nh),[[Ue,E.custom_filename]])]),n("td",null,[n("div",Fh,[L(E.streamer_id)?(g(),m("button",{key:0,onClick:C=>V(E.streamer_id),class:"btn btn-danger btn-sm",disabled:le(r)}," Stop ",8,Oh)):H("",!0),n("button",{onClick:C=>D(E),class:"btn btn-info btn-sm",disabled:le(r),title:"Configure cleanup policy for this streamer"}," Policy ",8,Lh)])])]))),128))])])])],64))]),f.value?(g(),m("div",{key:4,class:"modal-overlay",onClick:A},[n("div",{class:"modal-content",onClick:O[12]||(O[12]=De(()=>{},["stop"]))},[n("div",Dh,[n("h3",null,"Cleanup Policy for "+x(((j=_.value)==null?void 0:j.username)||"Streamer"),1),n("button",{onClick:A,class:"close-btn"},"×")]),n("div",Mh,[_.value?(g(),qt(Na,{key:0,"streamer-id":_.value.streamer_id,title:`Cleanup Policy for ${_.value.username}`,"is-global":!1,onSaved:M},null,8,["streamer-id","title"])):H("",!0)])])])):H("",!0)])}}}),Vh=Oe(Uh,[["__scopeId","data-v-c4092ddd"]]),jh={class:"filter-container"},Hh={class:"filter-row"},Bh={class:"search-box"},Wh={class:"filter-buttons"},qh={class:"button-icon"},Gh={class:"button-text"},Kh=["disabled"],zh={class:"button-icon"},Jh={class:"button-text"},Yh={key:0,class:"error-message"},Qh={class:"categories-grid"},Zh={key:0,class:"loading"},Xh={key:0,class:"no-categories"},ey={key:0},ty={key:1},sy={key:2},ny={class:"category-image-wrapper"},oy=["src"],ay={key:1,class:"category-image-placeholder"},iy={class:"category-content"},ry={class:"category-name"},ly={class:"category-meta"},cy={key:0,class:"category-date"},uy={class:"category-actions"},dy={class:"category-stats"},fy=["onClick","title"],py={viewBox:"0 0 24 24",width:"18",height:"18",class:"star-icon"},gy=["fill"],vy={class:"button-label"},my=Ne({__name:"FavoritesSettingsPanel",setup(e){const t=F(""),s=F(!1),o=F([]),a=F(!0),i=F(null),r=F(new Set),l=F(!1),{getCategoryImage:c,preloadCategoryImages:d,refreshImages:u,clearCache:f}=Bs(),_=pe(()=>{let v=o.value;if(s.value&&(v=v.filter(b=>b.is_favorite)),t.value.trim()){const b=t.value.toLowerCase();v=v.filter(p=>p.name.toLowerCase().includes(b))}return console.log(`Filtered categories: ${v.length}`),v}),h=async()=>{a.value=!0,i.value=null;try{console.log("Fetching categories...");const v=await fetch("/api/categories");if(!v.ok)throw new Error("Failed to fetch categories");const b=await v.json();if(b.categories&&Array.isArray(b.categories)){console.log(`Received ${b.categories.length} categories from API`),o.value=b.categories;const p=b.categories.map(P=>P.name).filter(P=>!!P);p.length>0&&d(p)}else throw console.error("Unexpected API response format:",b),new Error("Unexpected API response format")}catch(v){i.value=v.message||"An error occurred while fetching categories",console.error("Error fetching categories:",v)}finally{a.value=!1}},S=()=>{s.value=!s.value},k=async v=>{try{const b=v.is_favorite?`/api/categories/favorites/${v.id}`:"/api/categories/favorites",p=v.is_favorite?"DELETE":"POST",P=v.is_favorite?void 0:JSON.stringify({category_id:v.id});if(!(await fetch(b,{method:p,headers:{"Content-Type":"application/json"},body:P})).ok)throw new Error(`Failed to ${v.is_favorite?"remove from":"add to"} favorites`);v.is_favorite=!v.is_favorite}catch(b){i.value=b.message,console.error("Error toggling favorite status:",b)}},N=v=>{const b=v.target;b.src&&!r.value.has(b.src)&&(console.error(`Failed to load image: ${b.src}`),r.value.add(b.src),b.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDQiIGhlaWdodD0iMTkyIiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMTQ0IDE5MiI+PHJlY3Qgd2lkdGg9IjE0NCIgaGVpZ2h0PSIxOTIiIGZpbGw9IiMyZDJkMzUiLz48dGV4dCB4PSI3MiIgeT0iOTYiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iI2VmZWZmMSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSI+Tm8gSW1hZ2U8L3RleHQ+PC9zdmc+")},R=async()=>{try{l.value=!0,i.value=null;const v=o.value.filter(p=>{const P=c(p.name);return P.startsWith("icon:")||P.includes("default-category.svg")}).map(p=>p.name);if(v.length===0){console.log("All categories already have images");return}console.log(`Downloading images for ${v.length} categories:`,v);const b=await u(v);if(!b)throw new Error("Failed to start image refresh");console.log("Image refresh started:",b.message),await new Promise(p=>setTimeout(p,3e3)),f(),await h(),await d(v),console.log("Image download process completed")}catch(v){i.value=v.message||"Failed to download category images",console.error("Error downloading category images:",v)}finally{l.value=!1}},y=async()=>{try{const v=await fetch("/api/categories/missing-images");if(v.ok){const b=await v.json();console.log("Missing images report:",b);const p=`Images Report:
Total categories: ${b.total_categories}
Have images: ${b.have_images}
Missing images: ${b.missing_images}

Missing categories: ${b.categories_missing_images.join(", ")}`;alert(p)}else throw new Error("Failed to get missing images report")}catch(v){i.value=v.message||"Failed to check missing images",console.error("Error checking missing images:",v)}};return Fe(()=>{h()}),Je(o,v=>{v.length>0&&console.log("First category example:",v[0])},{immediate:!0,deep:!0}),(v,b)=>(g(),m("div",null,[b[5]||(b[5]=n("h3",null,"Favorite Categories",-1)),n("div",jh,[n("div",Hh,[n("div",Bh,[be(n("input",{"onUpdate:modelValue":b[0]||(b[0]=p=>t.value=p),placeholder:"Search for game...",class:"form-control"},null,512),[[Ue,t.value]])]),n("div",Wh,[n("button",{onClick:S,class:ce(["btn",{"btn-primary":s.value,"btn-secondary":!s.value}])},[n("span",qh,x(s.value?"★":"☆"),1),n("span",Gh,x(s.value?"Show All":"Favorites Only"),1)],2),n("button",{onClick:h,class:"btn btn-secondary"},b[1]||(b[1]=[n("span",{class:"button-icon"},"↻",-1),n("span",{class:"button-text"},"Refresh",-1)])),n("button",{onClick:R,class:"btn btn-info",disabled:l.value},[n("span",zh,x(l.value?"⏳":"📥"),1),n("span",Jh,x(l.value?"Downloading...":"Get Images"),1)],8,Kh),n("button",{onClick:y,class:"btn btn-warning"},b[2]||(b[2]=[n("span",{class:"button-icon"},"🔍",-1),n("span",{class:"button-text"},"Check Missing",-1)]))])])]),i.value?(g(),m("div",Yh,x(i.value),1)):H("",!0),n("div",Qh,[a.value?(g(),m("div",Zh,b[3]||(b[3]=[n("div",{class:"spinner"},null,-1),n("p",null,"Loading categories...",-1)]))):(g(),m(he,{key:1},[_.value.length===0?(g(),m("div",Xh,[s.value?(g(),m("p",ey,"You haven't marked any categories as favorites yet.")):t.value?(g(),m("p",ty,'No categories found containing "'+x(t.value)+'".',1)):(g(),m("p",sy,b[4]||(b[4]=[J(" No categories found. Categories are created when streamers change games during streams."),n("br",null,null,-1),J(" This happens automatically when a streamer changes their game on Twitch. ")])))])):(g(),qt(wo,{key:1,name:"category-cards",tag:"div",class:"category-cards"},{default:Re(()=>[(g(!0),m(he,null,$e(_.value,p=>(g(),m("div",{key:p.id,class:ce(["category-card",{"is-favorite":p.is_favorite}])},[n("div",ny,[le(c)(p.name).startsWith("icon:")?(g(),m("div",ay,[n("i",{class:ce([le(c)(p.name).replace("icon:",""),"category-icon"])},null,2)])):(g(),m("img",{key:0,src:le(c)(p.name),alt:"Game box art",class:"category-image",loading:"lazy",onError:N},null,40,oy))]),n("div",iy,[n("h4",ry,x(p.name),1),n("div",ly,[p.last_seen?(g(),m("span",cy,"Last seen: "+x(new Date(p.last_seen).toLocaleDateString()),1)):H("",!0)]),n("div",uy,[n("div",dy,[n("span",null,x(p.stream_count||0)+" streams",1)]),n("button",{onClick:P=>k(p),class:ce(["btn-icon",{"is-favorite":p.is_favorite}]),title:p.is_favorite?"Remove from favorites":"Add to favorites"},[(g(),m("svg",py,[n("path",{fill:p.is_favorite?"#FFD700":"currentColor",d:"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"},null,8,gy)])),n("span",vy,x(p.is_favorite?"Unfavorite":"Favorite"),1)],10,fy)])])],2))),128))]),_:1}))],64))])]))}}),hy=Oe(my,[["__scopeId","data-v-113b0142"]]),yy={class:"pwa-panel"},_y={class:"pwa-section"},by={class:"setting-item"},wy={class:"setting-info"},Sy={class:"setting-description"},$y={class:"setting-control"},ky={class:"setting-item"},Cy={class:"setting-info"},Ey={class:"setting-description"},xy={class:"setting-control"},Ty={class:"pwa-section"},Ay={class:"setting-item"},Py={class:"setting-info"},Ry={class:"setting-description"},Iy={class:"setting-control"},Ny={key:0,class:"setting-item"},Fy={class:"setting-control"},Oy=["disabled"],Ly=["disabled"],Dy={key:1,class:"setting-item"},My={class:"setting-control"},Uy=["disabled"],Vy=Ne({__name:"PWAPanel",setup(e){const{isInstallable:t,isInstalled:s,isOnline:o,pushSupported:a,notificationPermission:i,installPWA:r,subscribeToPush:l,unsubscribeFromPush:c,showNotification:d,requestNotificationPermission:u}=sr(),f=F(!1),_=F(!1),h=F(!1),S=F(""),k=F(""),N=pe(()=>{switch(i.value){case"granted":return"Granted";case"denied":return"Denied";case"default":return"Not Asked";default:return"Unknown"}}),R=async()=>{try{await r(),p("App installation initiated","success")}catch(P){console.error("App installation failed:",P),p("App installation failed","error")}},y=async()=>{try{f.value=!0,await u()==="granted"?await l()?p("Push notifications enabled successfully","success"):p("Failed to enable push notifications","error"):p("Notification permission denied","error")}catch(P){console.error("Failed to enable notifications:",P),p("Failed to enable notifications","error")}finally{f.value=!1}},v=async()=>{try{_.value=!0,await c()?p("Push notifications disabled","success"):p("Failed to disable push notifications","error")}catch(P){console.error("Failed to disable notifications:",P),p("Failed to disable notifications","error")}finally{_.value=!1}},b=async()=>{try{h.value=!0;const P=await fetch("/api/push/test",{method:"POST",headers:{"Content-Type":"application/json"}});if(P.ok){const T=await P.json();if(T.success&&T.sent_count>0){p(T.message,"success");return}else console.warn("Server push failed:",T.message)}console.log("Trying local notification fallback...");try{await d("🧪 StreamVault Test (Local)",{body:"This is a local test notification. If you see this, your browser supports notifications!",icon:"/android-icon-192x192.png",badge:"/android-icon-96x96.png",tag:"test-local-notification",requireInteraction:!0,data:{type:"test_local",timestamp:Date.now()}}),p("Local test notification sent successfully","success")}catch(T){if(console.error("Local notification also failed:",T),"Notification"in window&&Notification.permission==="granted")new Notification("🧪 StreamVault Test (Native)",{body:"This is a native browser notification. Notifications are working!",icon:"/android-icon-192x192.png",tag:"test-native-notification"}),p("Native test notification sent successfully","success");else throw new Error("All notification methods failed")}}catch(P){console.error("Failed to send test notification:",P),p("Failed to send test notification. Check console for details.","error")}finally{h.value=!1}},p=(P,T)=>{S.value=P,k.value=T,setTimeout(()=>{S.value="",k.value=""},5e3)};return Fe(()=>{}),(P,T)=>(g(),m("div",yy,[T[7]||(T[7]=n("div",{class:"section-header"},[n("h3",null,"PWA & Notifications"),n("p",null,"Configure Progressive Web App features and push notifications")],-1)),n("div",_y,[T[2]||(T[2]=n("h4",null,"Progressive Web App",-1)),n("div",by,[n("div",wy,[T[0]||(T[0]=n("label",null,"Installation Status",-1)),n("p",Sy,x(le(s)?"StreamVault is installed as an app":"StreamVault can be installed as an app for better experience"),1)]),n("div",$y,[n("span",{class:ce(["status-badge",{installed:le(s),"not-installed":!le(s)}])},x(le(s)?"Installed":"Not Installed"),3),le(t)&&!le(s)?(g(),m("button",{key:0,onClick:R,class:"btn btn-primary install-btn"}," Install App ")):H("",!0)])]),n("div",ky,[n("div",Cy,[T[1]||(T[1]=n("label",null,"Connection Status",-1)),n("p",Ey,x(le(o)?"You are currently online":"You are currently offline"),1)]),n("div",xy,[n("span",{class:ce(["status-badge",{online:le(o),offline:!le(o)}])},x(le(o)?"Online":"Offline"),3)])])]),n("div",Ty,[T[6]||(T[6]=n("h4",null,"Push Notifications",-1)),n("div",Ay,[n("div",Py,[T[3]||(T[3]=n("label",null,"Browser Support",-1)),n("p",Ry,x(le(a)?"Your browser supports push notifications":"Your browser does not support push notifications"),1)]),n("div",Iy,[n("span",{class:ce(["status-badge",{supported:le(a),"not-supported":!le(a)}])},x(le(a)?"Supported":"Not Supported"),3)])]),le(a)?(g(),m("div",Ny,[T[4]||(T[4]=n("div",{class:"setting-info"},[n("label",null,"Notification Permission"),n("p",{class:"setting-description"}," Allow StreamVault to send push notifications for stream events ")],-1)),n("div",Fy,[n("span",{class:ce(["status-badge",{granted:le(i)==="granted",denied:le(i)==="denied",default:le(i)==="default"}])},x(N.value),3),le(i)!=="granted"?(g(),m("button",{key:0,onClick:y,class:"btn btn-primary",disabled:f.value},x(f.value?"Enabling...":"Enable Notifications"),9,Oy)):(g(),m("button",{key:1,onClick:v,class:"btn btn-secondary",disabled:_.value},x(_.value?"Disabling...":"Disable Notifications"),9,Ly))])])):H("",!0),le(i)==="granted"?(g(),m("div",Dy,[T[5]||(T[5]=n("div",{class:"setting-info"},[n("label",null,"Test Notification"),n("p",{class:"setting-description"}," Send a test push notification to verify everything is working ")],-1)),n("div",My,[n("button",{onClick:b,class:"btn btn-secondary",disabled:h.value},x(h.value?"Sending...":"Send Test"),9,Uy)])])):H("",!0)]),T[8]||(T[8]=Tt('<div class="pwa-section" data-v-6713414e><h4 data-v-6713414e>App Features</h4><div class="setting-item" data-v-6713414e><div class="setting-info" data-v-6713414e><label data-v-6713414e>Offline Support</label><p class="setting-description" data-v-6713414e> Basic app functionality works offline with cached content </p></div><div class="setting-control" data-v-6713414e><span class="status-badge supported" data-v-6713414e>Enabled</span></div></div><div class="setting-item" data-v-6713414e><div class="setting-info" data-v-6713414e><label data-v-6713414e>Background Sync</label><p class="setting-description" data-v-6713414e> Sync data automatically when connection is restored </p></div><div class="setting-control" data-v-6713414e><span class="status-badge supported" data-v-6713414e>Enabled</span></div></div></div>',1)),S.value?(g(),m("div",{key:0,class:ce(["status-message",k.value])},x(S.value),3)):H("",!0)]))}}),jy=Oe(Vy,[["__scopeId","data-v-6713414e"]]),Hy={class:"settings-view"},By={class:"settings-container"},Wy={key:0,class:"loading-indicator"},qy={key:1},Gy={class:"settings-tabs-wrapper"},Ky={class:"settings-tabs"},zy=["onClick","aria-selected"],Jy={class:"tab-content"},Yy={key:0,class:"tab-pane",role:"tabpanel"},Qy={key:1,class:"tab-pane",role:"tabpanel"},Zy={key:2,class:"tab-pane",role:"tabpanel"},Xy={key:3,class:"tab-pane",role:"tabpanel"},e1=Ne({__name:"SettingsView",setup(e){const t=pe(()=>[{id:"notifications",label:"Notifications"},{id:"recording",label:"Recording"},{id:"favorites",label:"Favorite Games"},{id:"pwa",label:"PWA & Mobile"}]),{settings:s,fetchSettings:o,updateSettings:a,getStreamerSettings:i,updateStreamerSettings:r}=Cv(),{settings:l,streamerSettings:c,activeRecordings:d,fetchSettings:u,updateSettings:f,fetchStreamerSettings:_,updateStreamerSettings:h,fetchActiveRecordings:S,stopRecording:k,cleanupOldRecordings:N}=Ws(),R=F("notifications"),y=F([]),v=F(!0),b=F(!1);let p;Fe(async()=>{v.value=!0;try{await o(),y.value=await i();try{await u(),console.log("Recording settings:",l.value)}catch(ee){console.error("Failed to load recording settings:",ee)}try{await _(),console.log("Recording streamer settings count:",c.value.length)}catch(ee){console.error("Failed to load recording streamer settings:",ee)}try{await S()}catch(ee){console.error("Failed to load active recordings:",ee)}p=window.setInterval(()=>{S()},5e3)}catch(ee){console.error("Failed to load settings:",ee)}finally{v.value=!1}}),_n(()=>{p&&clearInterval(p)});const P=async ee=>{try{b.value=!0,await a(ee),alert("Notification settings saved successfully!")}catch(z){alert(z instanceof Error?z.message:"Failed to update notification settings")}finally{b.value=!1}},T=async(ee,z)=>{try{const D=await r(ee,z),A=y.value.findIndex(M=>M.streamer_id===ee);A!==-1&&(y.value[A]={...y.value[A],...D})}catch(D){console.error("Failed to update streamer notification settings:",D)}},X=async()=>{try{const ee=await fetch("/api/settings/test-notification",{method:"POST",headers:{"Content-Type":"application/json"}});if(!ee.ok){const z=await ee.json();throw new Error(z.detail||"Failed to send test notification")}alert("Test notification sent successfully!")}catch(ee){alert(ee instanceof Error?ee.message:"Failed to send test notification")}},Q=async ee=>{try{b.value=!0,await f(ee),alert("Recording settings saved successfully!")}catch(z){alert(z instanceof Error?z.message:"Failed to update recording settings")}finally{b.value=!1}},V=async(ee,z)=>{try{await h(ee,z)}catch(D){console.error("Failed to update streamer recording settings:",D)}},L=async ee=>{try{const z=await k(ee);alert(z?"Recording stopped successfully.":"Failed to stop recording.")}catch(z){alert(z instanceof Error?z.message:"Failed to stop recording")}},G=async ee=>{try{const z=await N(ee);alert(z?"Old recordings cleaned up successfully.":"Failed to clean up recordings.")}catch(z){alert(z instanceof Error?z.message:"Failed to clean up recordings")}};return(ee,z)=>(g(),m("div",Hy,[n("div",By,[v.value?(g(),m("div",Wy,z[0]||(z[0]=[n("div",{class:"spinner"},null,-1),n("p",null,"Loading settings...",-1)]))):(g(),m("div",qy,[n("div",Gy,[n("div",Ky,[(g(!0),m(he,null,$e(t.value,D=>(g(),m("button",{key:D.id,onClick:A=>R.value=D.id,class:ce([{active:R.value===D.id},"tab-button"]),"aria-selected":R.value===D.id,role:"tab"},x(D.label),11,zy))),128))])]),n("div",Jy,[R.value==="notifications"?(g(),m("div",Yy,[ge(tm,{settings:le(s)||{notification_url:"",notifications_enabled:!0,apprise_docs_url:"",notify_online_global:!0,notify_offline_global:!0,notify_update_global:!0,notify_favorite_category_global:!1},"streamer-settings":y.value,onUpdateSettings:P,onUpdateStreamerSettings:T,onTestNotification:X},null,8,["settings","streamer-settings"])])):H("",!0),R.value==="recording"?(g(),m("div",Qy,[ge(Vh,{settings:le(l),"streamer-settings":le(c),"active-recordings":le(d),onUpdate:Q,onUpdateStreamer:V,onStopRecording:L,onCleanupRecordings:G},null,8,["settings","streamer-settings","active-recordings"])])):H("",!0),R.value==="favorites"?(g(),m("div",Zy,[ge(hy)])):H("",!0),R.value==="pwa"?(g(),m("div",Xy,[ge(jy)])):H("",!0)])]))])]))}}),t1=Oe(e1,[["__scopeId","data-v-d13d68ce"]]);function s1(){const e=F([]),t=F(!1),s=F(null),o=F(null);return{streams:e,isLoading:t,error:s,streamerInfo:o,fetchStreams:async i=>{if(i){t.value=!0,s.value=null;try{const r=await fetch(`/api/streamers/${i}/streams`);if(!r.ok){const c=await r.json();throw new Error(c.detail||`Failed to fetch streams for streamer ID ${i}`)}const l=await r.json();e.value=l.streams,o.value=l.streamer}catch(r){console.error("Error fetching streams:",r),s.value=r instanceof Error?r.message:"Unknown error occurred",e.value=[]}finally{t.value=!1}}}}}const n1={key:0,class:"category-timeline"},o1={class:"timeline-header"},a1={class:"category-count"},i1={class:"horizontal-timeline"},r1={class:"timeline-marker"},l1={class:"marker-content"},c1={class:"category-icon-wrapper"},u1={class:"timeline-tooltip"},d1={class:"tooltip-header"},f1={class:"tooltip-time"},p1={key:0,class:"tooltip-title"},g1={key:1,class:"tooltip-duration"},v1={class:"category-list"},m1={class:"category-marker"},h1={class:"category-details"},y1={class:"category-name"},_1={class:"category-time"},b1={key:0,class:"category-duration"},w1={key:1,class:"no-category-history"},S1=Ne({__name:"CategoryTimeline",props:{events:{},streamStarted:{},streamEnded:{}},setup(e){const t=e,{getCategoryImage:s}=Bs(),o=pe(()=>t.events.filter(d=>d.category_name&&(d.event_type==="channel.update"||d.event_type==="stream.online")).sort((d,u)=>new Date(d.timestamp||"").getTime()-new Date(u.timestamp||"").getTime())),a=d=>{if(!d)return"fas fa-video";const u=s(d);return u.startsWith("icon:")?u.replace("icon:",""):"fas fa-gamepad"},i=(d,u)=>{if(o.value.length<=1)return 50;const f=o.value.length,_=5,h=100-_*2;return _+u*(h/(f-1))},r=d=>d?new Date(d).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Unknown time",l=d=>d<o.value.length-1?o.value[d+1].timestamp:t.streamEnded||new Date().toISOString(),c=(d,u)=>{if(!d||!u)return"Unknown";const f=new Date(d),h=new Date(u).getTime()-f.getTime();if(h<0)return"Unknown";const S=Math.floor(h/(1e3*60*60)),k=Math.floor(h%(1e3*60*60)/(1e3*60)),N=Math.floor(h%(1e3*60)/1e3);return S>0?`${S}h ${k}m ${N}s`:k>0?`${k}m ${N}s`:`${N}s`};return(d,u)=>o.value.length>0?(g(),m("div",n1,[n("div",o1,[u[0]||(u[0]=n("h4",null,[n("i",{class:"fas fa-history"}),J(" Category Timeline")],-1)),n("span",a1,x(o.value.length)+" "+x(o.value.length===1?"category":"categories"),1)]),u[4]||(u[4]=Tt('<div class="timeline-legend" data-v-6e830d11><div class="legend-item" data-v-6e830d11><div class="legend-marker" data-v-6e830d11></div><span data-v-6e830d11>Category change points</span></div><div class="legend-note" data-v-6e830d11><i class="fas fa-info-circle" data-v-6e830d11></i><span data-v-6e830d11>The timeline shows when the stream changed categories</span></div></div>',1)),n("div",i1,[u[1]||(u[1]=n("div",{class:"timeline-track"},null,-1)),(g(!0),m(he,null,$e(o.value,(f,_)=>(g(),m("div",{key:f.id,class:"timeline-item",style:Us({left:i(f,_)+"%"})},[n("div",r1,[n("div",l1,[n("div",c1,[n("i",{class:ce([a(f.category_name),"category-icon"])},null,2)])])]),n("div",u1,[n("div",d1,[n("strong",null,x(f.category_name||"Unknown Category"),1)]),n("div",f1,x(r(f.timestamp)),1),f.title?(g(),m("div",p1,x(f.title),1)):H("",!0),_<o.value.length-1?(g(),m("div",g1," Duration: "+x(c(f.timestamp,l(_))),1)):H("",!0)])],4))),128))]),u[5]||(u[5]=n("div",{class:"category-list-header"},[n("h5",null,[n("i",{class:"fas fa-list"}),J(" Stream Categories Timeline")])],-1)),n("div",v1,[(g(!0),m(he,null,$e(o.value,(f,_)=>(g(),m("div",{key:f.id,class:"category-item"},[n("div",m1,[n("i",{class:ce([a(f.category_name),"category-icon"])},null,2)]),n("div",h1,[n("div",y1,x(f.category_name||"Unknown"),1),n("div",_1,[u[2]||(u[2]=n("i",{class:"far fa-clock"},null,-1)),J(" "+x(r(f.timestamp)),1)]),_<o.value.length-1?(g(),m("div",b1,[u[3]||(u[3]=n("i",{class:"fas fa-hourglass-half"},null,-1)),J(" Duration: "+x(c(f.timestamp,l(_))),1)])):H("",!0)])]))),128))])])):(g(),m("div",w1,u[6]||(u[6]=[n("div",{class:"no-data-content"},[n("i",{class:"fas fa-info-circle"}),n("p",null,"No category changes recorded for this stream"),n("p",{class:"help-text"},"When a streamer changes games or activities during a stream, they appear as purple markers on the timeline")],-1)])))}}),$1=Oe(S1,[["__scopeId","data-v-6e830d11"]]),k1={class:"streams-container"},C1={key:0,class:"loading-container"},E1={key:1,class:"no-data-container"},x1={class:"action-buttons"},T1={key:2},A1={class:"streams-header"},P1={class:"header-info"},R1={class:"streams-summary"},I1={class:"stream-count"},N1={key:0,class:"live-indicator"},F1={class:"header-actions"},O1=["disabled"],L1=["disabled","title"],D1={class:"stream-list"},M1=["onClick"],U1={class:"stream-thumbnail"},V1={key:0,class:"category-image-container"},j1={key:0,class:"category-icon-wrapper"},H1=["src","alt","onError"],B1={key:1,class:"category-placeholder"},W1={class:"stream-info"},q1={class:"stream-badges"},G1={class:"stream-title"},K1={class:"stream-meta"},z1={class:"meta-item duration-item"},J1={key:0,class:"meta-item category-item"},Y1={class:"stream-actions"},Q1=["onClick"],Z1=["onClick","disabled"],X1={key:0,class:"fas fa-spinner fa-spin"},e_={key:1,class:"fas fa-trash"},t_=["onClick","data-tooltip"],s_={key:0,class:"stream-expanded-content"},n_={class:"stream-details"},o_={class:"detail-row"},a_={class:"value"},i_={key:0,class:"detail-row"},r_={class:"value"},l_={key:1,class:"detail-row"},c_={class:"value"},u_={key:2,class:"detail-row"},d_={class:"value"},f_={class:"stream-full-actions"},p_={key:0,class:"recording-controls"},g_=["disabled"],v_=["disabled"],m_=["onClick"],h_=["onClick","disabled"],y_={key:0,class:"fas fa-spinner fa-spin"},__={key:1,class:"fas fa-trash-alt"},b_={class:"modal-content"},w_={key:0,class:"stream-stream"},S_={class:"modal-actions"},$_=["disabled"],k_={key:0,class:"loader"},C_={key:1},E_={class:"modal-content"},x_={class:"modal-actions"},T_=["disabled"],A_={key:0,class:"loader"},P_={key:1},R_=["title"],I_={class:"fab-text"},N_=Ne({__name:"StreamList",setup(e){const t=En(),s=Gt(),o=pe(()=>t.params.id||t.query.id),a=pe(()=>t.query.name),{streams:i,isLoading:r,fetchStreams:l}=s1(),{activeRecordings:c,fetchActiveRecordings:d,stopRecording:u}=Ws(),{messages:f}=$n(),{getCategoryImage:_,preloadCategoryImages:h}=Bs(),S=F(!1),k=F(!1),N=F(!1),R=F({}),y=F(!1),v=F(null),b=F(null),p=F(null),P=F(!1),T=F(!1),X=F({}),Q=pe(()=>i.value.some(E=>!E.ended_at)),V=E=>_(E),L=E=>E?new Date(E).toLocaleString():"Unknown",G=(E,C)=>{if(!E)return"Unknown";const U=new Date(E).getTime(),w=(C?new Date(C).getTime():Date.now())-U;if(w<0)return"Invalid time";const $=Math.floor(w/1e3),I=Math.floor($/60),q=Math.floor(I/60);return q>0?`${q}h ${I%60}m`:`${I}m ${$%60}s`},ee=()=>{s.push("/")},z=E=>{s.push({name:"VideoPlayer",params:{streamerId:o.value,streamId:E.id},query:{title:E.title||`Stream ${E.id}`,streamerName:a.value}})},D=E=>{if(R.value[E]!==void 0)return console.log(`Using local recording state for ${E}: ${R.value[E]}`),R.value[E];if(!c.value||!Array.isArray(c.value))return console.log(`No active recordings available for ${E}`),!1;console.log(`Active recordings for ${E}:`,c.value);const C=c.value.some(U=>parseInt(U.streamer_id.toString())===parseInt(E.toString()));return console.log(`Stream ${E} recording status: ${C}`),C},A=async E=>{try{S.value=!0,R.value[E]=!0;const C=await fetch(`/api/recording/force/${E}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!C.ok){const U=await C.json();throw new Error(U.detail||"Failed to start recording")}console.log(`Successfully started recording for streamer ${E}`),await d()}catch(C){console.error("Failed to start recording:",C),alert(`Failed to start recording: ${C instanceof Error?C.message:String(C)}`),R.value[E]=!1}finally{S.value=!1}},M=async E=>{try{N.value=!0,R.value[E]=!0;const C=await fetch(`/api/recording/force-offline/${E}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!C.ok){const U=await C.json();throw new Error(U.detail||"Failed to start offline recording")}console.log(`Successfully started offline recording for streamer ${E}`),await d(),await l(o.value)}catch(C){console.error("Failed to start offline recording:",C),alert(`Failed to start offline recording: ${C instanceof Error?C.message:String(C)}`),R.value[E]=!1}finally{N.value=!1}},W=async E=>{try{k.value=!0,R.value[E]=!1,await u(E),await d()}catch(C){console.error("Failed to stop recording:",C),alert(`Failed to stop recording: ${C instanceof Error?C.message:String(C)}`),R.value[E]=!0}finally{k.value=!1}},B=E=>{X.value[E]=!X.value[E]},se=E=>{v.value=E,y.value=!0},re=()=>{y.value=!1,v.value=null},me=async()=>{if(!(!v.value||!o.value))try{b.value=v.value.id;const E=await fetch(`/api/streamers/${o.value}/streams/${v.value.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!E.ok){const U=await E.json();throw new Error(U.detail||"Failed to delete stream")}const C=await E.json();p.value=C,console.log("Delete stream result:",C),i.value=i.value.filter(U=>U.id!==v.value.id),y.value=!1,v.value=null,alert(`Stream deleted successfully. Removed ${C.deleted_files_count} associated files.`)}catch(E){console.error("Failed to delete stream:",E),alert(`Failed to delete stream: ${E instanceof Error?E.message:String(E)}`)}finally{b.value=null}},Ie=()=>{P.value=!0},Ge=()=>{P.value=!1},ie=async()=>{if(o.value)try{T.value=!0;const E=await fetch(`/api/streamers/${o.value}/streams`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!E.ok){const U=await E.json();throw new Error(U.detail||"Failed to delete all streams")}const C=await E.json();console.log("Delete all streams result:",C),i.value=[],P.value=!1,alert(`All streams deleted successfully. Removed ${C.deleted_files_count} associated files.`)}catch(E){console.error("Failed to delete all streams:",E),alert(`Failed to delete all streams: ${E instanceof Error?E.message:String(E)}`)}finally{T.value=!1}},O=async()=>{if(o.value){await l(o.value),await d(),console.log("Loaded active recordings:",c.value);const E=i.value.map(C=>C.category_name).filter(C=>!!C).filter((C,U,de)=>de.indexOf(C)===U);E.length>0&&h(E)}};Fe(async()=>{await O(),await d(),console.log("Initial active recordings:",c.value);const E=setInterval(async()=>{try{await d(),console.log("Updated active recordings:",c.value)}catch(C){console.error("Error fetching active recordings:",C)}},5e3);Wt(()=>{clearInterval(E)})}),Je(f,E=>{if(E.length===0)return;const C=E[E.length-1];if(console.log("Received WebSocket message:",C),C.type==="recording.started"){const U=parseInt(C.data.streamer_id);console.log(`Recording started for streamer ${U}`),R.value[U]=!0,c.value||(c.value=[]);const de=c.value.findIndex(w=>parseInt(w.streamer_id.toString())===U);de>=0?c.value[de]=C.data:c.value.push(C.data),d()}else if(C.type==="recording.stopped"){const U=parseInt(C.data.streamer_id);console.log(`Recording stopped for streamer ${U}`),R.value[U]=!1,c.value&&(c.value=c.value.filter(de=>parseInt(de.streamer_id.toString())!==U)),d()}else C.type==="stream.online"&&parseInt(C.data.streamer_id)===parseInt(o.value)&&l(o.value)},{deep:!0}),Je(o,(E,C)=>{E&&E!==C&&O()});const j=(E,C)=>{const U=E.target,de=U.parentElement;if(console.error(`Failed to load category image for: ${C}`),U.style.display="none",de){const w=document.createElement("div");w.className="category-icon-wrapper";const $=document.createElement("i");$.className=`fas ${_(C).replace("icon:","")}`,w.appendChild($),de.appendChild(w)}};return(E,C)=>(g(),m("div",k1,[le(r)?(g(),m("div",C1,C[4]||(C[4]=[n("div",{class:"spinner"},null,-1),n("p",null,"Loading streams...",-1)]))):le(i).length===0?(g(),m("div",E1,[C[7]||(C[7]=n("p",null,"No streams found for this streamer.",-1)),n("div",x1,[n("button",{onClick:ee,class:"btn btn-primary back-btn"},C[5]||(C[5]=[n("i",{class:"fas fa-arrow-left"},null,-1),n("span",null,"Back to streamers",-1)])),n("button",{onClick:C[0]||(C[0]=U=>M(parseInt(o.value))),class:"btn btn-warning"},C[6]||(C[6]=[n("i",{class:"fas fa-record-vinyl"},null,-1),n("span",null,"Force Recording (Offline Mode)",-1)]))])])):(g(),m("div",T1,[n("div",A1,[n("div",P1,[C[8]||(C[8]=n("h2",null,"Streams Overview",-1)),n("div",R1,[n("span",I1,x(le(i).length)+" streams found",1),Q.value?(g(),m("span",N1,"• Live stream active")):H("",!0)])]),n("div",F1,[n("button",{onClick:ee,class:"btn btn-secondary back-btn"},C[9]||(C[9]=[n("i",{class:"fas fa-arrow-left"},null,-1),n("span",null,"Back to Streamers",-1)])),Q.value?H("",!0):(g(),m("button",{key:0,onClick:C[1]||(C[1]=U=>M(parseInt(o.value))),class:"btn btn-warning",disabled:N.value},[C[10]||(C[10]=n("i",{class:"fas fa-record-vinyl"},null,-1)),n("span",null,x(N.value?"Starting Recording...":"Force Recording (Offline)"),1)],8,O1)),n("button",{onClick:Ie,class:"btn btn-danger delete-all-btn",disabled:T.value||le(i).length===0,title:`Delete all ${le(i).length} streams`},[C[11]||(C[11]=n("i",{class:"fas fa-trash-alt"},null,-1)),n("span",null,x(T.value?"Deleting All...":`Delete All (${le(i).length})`),1)],8,L1)])]),n("div",D1,[(g(!0),m(he,null,$e(le(i),U=>(g(),m("div",{key:U.id,class:ce(["stream-card",{expanded:X.value[U.id]}])},[n("div",{class:"stream-compact-header",onClick:de=>B(U.id)},[n("div",U1,[U.category_name?(g(),m("div",V1,[V(U.category_name).startsWith("icon:")?(g(),m("div",j1,[n("i",{class:ce(`fas ${V(U.category_name).replace("icon:","")}`)},null,2)])):(g(),m("img",{key:1,src:V(U.category_name),alt:U.category_name,onError:de=>j(de,U.category_name),loading:"lazy",class:"category-image"},null,40,H1))])):(g(),m("div",B1,C[12]||(C[12]=[n("i",{class:"fas fa-video"},null,-1)])))]),n("div",W1,[n("div",q1,[n("span",{class:ce(["status-badge",{live:!U.ended_at}])},x(U.ended_at?"ENDED":"LIVE"),3),U.ended_at?H("",!0):(g(),m("span",{key:0,class:ce(["recording-badge",D(parseInt(o.value))?"recording":"not-recording"])},x(D(parseInt(o.value))?"REC":"OFF"),3))]),n("h3",G1,x(U.title||L(U.started_at)),1),n("div",K1,[n("div",z1,[C[13]||(C[13]=n("i",{class:"fas fa-clock"},null,-1)),n("span",null,x(G(U.started_at,U.ended_at)),1)]),U.category_name?(g(),m("div",J1,[C[14]||(C[14]=n("i",{class:"fas fa-gamepad"},null,-1)),n("span",null,x(U.category_name),1)])):H("",!0)])]),n("div",Y1,[U.ended_at?(g(),m("button",{key:0,onClick:De(de=>z(U),["stop"]),class:"action-btn play-btn","data-tooltip":"Play Video"},C[15]||(C[15]=[n("i",{class:"fas fa-play"},null,-1)]),8,Q1)):H("",!0),n("button",{onClick:De(de=>se(U),["stop"]),class:"action-btn delete-btn",disabled:b.value===U.id||!U.ended_at&&D(parseInt(o.value)),"data-tooltip":"Delete Stream"},[b.value===U.id?(g(),m("i",X1)):(g(),m("i",e_))],8,Z1),n("button",{class:"action-btn expand-btn",onClick:De(de=>B(U.id),["stop"]),"data-tooltip":X.value[U.id]?"Collapse Details":"Show Details"},[n("i",{class:ce(["fas fa-chevron-down",{rotated:X.value[U.id]}])},null,2)],8,t_)])],8,M1),X.value[U.id]?(g(),m("div",s_,[U.events&&U.events.length>0?(g(),qt($1,{key:0,events:U.events,"stream-started":U.started_at,"stream-ended":U.ended_at},null,8,["events","stream-started","stream-ended"])):H("",!0),n("div",n_,[n("div",o_,[C[16]||(C[16]=n("span",{class:"label"},"Started:",-1)),n("span",a_,x(L(U.started_at)),1)]),U.ended_at?(g(),m("div",i_,[C[17]||(C[17]=n("span",{class:"label"},"Ended:",-1)),n("span",r_,x(L(U.ended_at)),1)])):H("",!0),U.title?(g(),m("div",l_,[C[18]||(C[18]=n("span",{class:"label"},"Title:",-1)),n("span",c_,x(U.title),1)])):H("",!0),U.category_name?(g(),m("div",u_,[C[19]||(C[19]=n("span",{class:"label"},"Category:",-1)),n("span",d_,x(U.category_name),1)])):H("",!0)]),n("div",f_,[U.ended_at?H("",!0):(g(),m("div",p_,[D(parseInt(o.value))?(g(),m("button",{key:1,onClick:C[3]||(C[3]=de=>W(parseInt(o.value))),class:"btn btn-danger",disabled:k.value},x(k.value?"Stopping...":"Stop Recording"),9,v_)):(g(),m("button",{key:0,onClick:C[2]||(C[2]=de=>A(parseInt(o.value))),class:"btn btn-success",disabled:S.value},x(S.value?"Starting...":"Force Record"),9,g_))])),U.ended_at?(g(),m("button",{key:1,onClick:de=>z(U),class:"btn btn-primary"},C[20]||(C[20]=[n("i",{class:"fas fa-play"},null,-1),J(" Watch Video ")]),8,m_)):H("",!0),n("button",{onClick:de=>se(U),class:"btn btn-danger",disabled:b.value===U.id||!U.ended_at&&D(parseInt(o.value))},[b.value===U.id?(g(),m("i",y_)):(g(),m("i",__)),C[21]||(C[21]=J(" Delete Stream "))],8,h_)])])):H("",!0)],2))),128))])])),y.value?(g(),m("div",{key:3,class:"modal-overlay",onClick:De(re,["self"])},[n("div",b_,[C[25]||(C[25]=n("h3",null,"Delete Stream",-1)),C[26]||(C[26]=n("p",null,"Are you sure you want to delete this stream?",-1)),C[27]||(C[27]=n("p",{class:"warning-text"},"This will permanently delete the stream record and all associated metadata files.",-1)),v.value?(g(),m("div",w_,[n("p",null,[C[22]||(C[22]=n("strong",null,"Date:",-1)),J(" "+x(L(v.value.started_at)),1)]),n("p",null,[C[23]||(C[23]=n("strong",null,"Title:",-1)),J(" "+x(v.value.title||"-"),1)]),n("p",null,[C[24]||(C[24]=n("strong",null,"Category:",-1)),J(" "+x(v.value.category_name||"-"),1)])])):H("",!0),n("div",S_,[n("button",{onClick:re,class:"btn btn-secondary"},"Cancel"),n("button",{onClick:me,class:"btn btn-danger",disabled:b.value!==null},[b.value!==null?(g(),m("span",k_)):(g(),m("span",C_,"Delete"))],8,$_)])])])):H("",!0),P.value?(g(),m("div",{key:4,class:"modal-overlay",onClick:De(Ge,["self"])},[n("div",E_,[C[30]||(C[30]=n("h3",null,"Delete All Streams",-1)),n("p",null,[C[28]||(C[28]=J("Are you sure you want to delete ")),n("strong",null,"ALL "+x(le(i).length)+" streams",1),C[29]||(C[29]=J(" for this streamer?"))]),C[31]||(C[31]=n("p",{class:"warning-text"},"This will permanently delete ALL stream records and associated metadata files. This action cannot be undone!",-1)),n("div",x_,[n("button",{onClick:Ge,class:"btn btn-secondary"},"Cancel"),n("button",{onClick:ie,class:"btn btn-danger",disabled:T.value},[T.value?(g(),m("span",A_)):(g(),m("span",P_,"Delete All Streams"))],8,T_)])])])):H("",!0),le(i).length>10&&!T.value?(g(),m("div",{key:5,class:"floating-delete-btn",onClick:Ie,title:`Delete all ${le(i).length} streams`},[C[32]||(C[32]=n("i",{class:"fas fa-trash-alt"},null,-1)),n("span",I_,"Delete All ("+x(le(i).length)+")",1)],8,R_)):H("",!0),C[33]||(C[33]=n("div",{style:{position:"fixed",bottom:"100px",right:"20px","z-index":"9999"}},[n("button",{class:"action-btn test-tooltip-btn","data-tooltip":"Test Tooltip Works!",style:{background:"#333",color:"white",border:"1px solid #555",padding:"10px"}}," TEST ")],-1))]))}}),F_=Oe(N_,[["__scopeId","data-v-a51c3a55"]]),O_={class:"streamer-detail-view"},L_={class:"streamer-detail-container"},D_={class:"back-btn-container"},M_={key:0,class:"streamer-header"},U_={class:"streamer-content"},V_={class:"streamer-section"},j_=Ne({__name:"StreamerDetailView",setup(e){const t=En(),s=pe(()=>t.query.name);return(o,a)=>{const i=us("router-link");return g(),m("div",O_,[n("div",L_,[n("div",D_,[ge(i,{to:"/streamers",class:"back-btn"},{default:Re(()=>a[0]||(a[0]=[J("Back to streamers")])),_:1})]),s.value?(g(),m("div",M_,[n("h1",null,x(s.value),1)])):H("",!0),n("div",U_,[n("div",V_,[a[1]||(a[1]=n("h2",null,"Recent Streams",-1)),ge(F_)])])])])}}}),H_={class:"welcome-page"},B_=Ne({__name:"WelcomeView",setup(e){const t=Gt();function s(){localStorage.setItem("welcome_seen","1"),t.replace("/home")}return(o,a)=>{const i=us("router-link");return g(),m("div",H_,[a[3]||(a[3]=n("h2",null,"Welcome to StreamVault!",-1)),a[4]||(a[4]=n("p",null,"How to get started:",-1)),n("ol",null,[n("li",null,[ge(i,{to:"/settings"},{default:Re(()=>a[0]||(a[0]=[J("Set up recording settings")])),_:1})]),n("li",null,[ge(i,{to:"/settings"},{default:Re(()=>a[1]||(a[1]=[J("Configure notifications")])),_:1})]),n("li",null,[ge(i,{to:"/streamers"},{default:Re(()=>a[2]||(a[2]=[J("Add & manage streamers")])),_:1})])]),a[5]||(a[5]=n("p",null,"You can change these settings at any time from the menu.",-1)),n("button",{class:"btn btn-primary",onClick:s},"Continue")])}}}),W_=Oe(B_,[["__scopeId","data-v-648fcca8"]]),q_={class:"streamer-grid"},G_={class:"streamer-header"},K_={class:"streamer-info"},z_={class:"profile-image-wrapper"},J_=["src","alt"],Y_=["onClick"],Q_={class:"status-badges"},Z_={key:0,class:"status-badge recording",title:"Currently recording"},X_={key:1,class:"status-badge not-recording",title:"Recording disabled for this streamer"},eb={class:"streamer-content"},tb={key:0},sb={key:1},nb={class:"streamer-footer"},ob=["onClick","disabled"],ab={key:0,class:"loader"},ib=["onClick"],rb={key:0,class:"empty-state"},lb=Ne({__name:"StreamerList",emits:["streamerDeleted"],setup(e,{emit:t}){const{streamers:s,updateStreamer:o,fetchStreamers:a,deleteStreamer:i}=vr(),{messages:r,connectionStatus:l}=$n(),c=Gt(),d=F(null),u=t,f=pe(()=>[...s.value].sort((N,R)=>N.is_live&&!R.is_live?-1:!N.is_live&&R.is_live?1:N.username.localeCompare(R.username))),_=N=>{if(!N)return"Never";const R=new Date,y=new Date(N),v=R.getTime()-y.getTime();if(v<60*1e3)return"Just now";if(v<60*60*1e3){const b=Math.floor(v/6e4);return`${b} minute${b>1?"s":""} ago`}if(v<24*60*60*1e3){const b=Math.floor(v/36e5);return`${b} hour${b>1?"s":""} ago`}return y.toLocaleString()},h=N=>{window.open(`https://twitch.tv/${N}`,"_blank")},S=async N=>{if(confirm("Are you sure you want to delete this streamer?")){d.value=N;try{await i(N)&&u("streamerDeleted")}finally{d.value=null}}},k=(N,R)=>{c.push({name:"streamer-detail",params:{id:N},query:{name:R}})};return Je(r,N=>{const R=N[N.length-1];if(R)switch(console.log("StreamerList: New message detected:",R),R.type){case"channel.update":{console.log("StreamerList: Processing channel update:",R.data);const y=R.data.streamer_id;s.value.find(b=>b.id===y);const v={title:R.data.title||"",category_name:R.data.category_name||"",language:R.data.language||"",last_updated:new Date().toISOString()};console.log("StreamerList: Updating streamer with data:",v),o(y,v);break}case"stream.online":{console.log("StreamerList: Processing stream online:",R.data);const y={is_live:!0,title:R.data.title||"",category_name:R.data.category_name||"",language:R.data.language||"",last_updated:new Date().toISOString()};o(R.data.streamer_id,y);break}case"stream.offline":{console.log("StreamerList: Processing stream offline:",R.data);const y={is_live:!1,last_updated:new Date().toISOString()};o(R.data.streamer_id,y);break}case"recording.started":{console.log("StreamerList: Processing recording started:",R.data);const y=R.data.streamer_id,v=s.value.find(b=>b.id===y);v&&(v.is_recording=!0);break}case"recording.stopped":{console.log("StreamerList: Processing recording stopped:",R.data);const y=R.data.streamer_id,v=s.value.find(b=>b.id===y);v&&(v.is_recording=!1);break}}},{deep:!0}),Je(l,N=>{N==="connected"&&a()},{immediate:!0}),Fe(()=>{console.log("StreamerList mounted"),a()}),(N,R)=>(g(),m("div",q_,[ge(wo,{name:"streamer-card"},{default:Re(()=>[(g(!0),m(he,null,$e(f.value,y=>(g(),m("div",{key:y.id,class:ce(["streamer-card",{live:y.is_live}])},[n("div",G_,[n("div",K_,[n("div",z_,[y.profile_image_url?(g(),m("img",{key:0,src:y.profile_image_url,class:"profile-image",alt:y.username,loading:"lazy"},null,8,J_)):H("",!0),n("span",{class:ce(["status-dot",{live:y.is_live}])},null,2)]),n("h3",{class:"streamer-name-link",onClick:v=>h(y.username)},x(y.username),9,Y_)]),n("div",Q_,[n("span",{class:ce(["status-badge",{live:y.is_live}])},x(y.is_live?"LIVE":"OFFLINE"),3),y.is_live&&y.is_recording?(g(),m("span",Z_," REC ")):y.is_live&&!y.recording_enabled?(g(),m("span",X_," NO REC ")):H("",!0)])]),n("div",eb,[y.title?(g(),m("p",tb,[R[0]||(R[0]=n("strong",null,"Title:",-1)),J(" "+x(y.title||"-"),1)])):H("",!0),y.category_name?(g(),m("p",sb,[R[1]||(R[1]=n("strong",null,"Category:",-1)),J(" "+x(y.category_name||"-"),1)])):H("",!0),n("p",null,[R[2]||(R[2]=n("strong",null,"Language:",-1)),J(" "+x(y.language||"-"),1)]),n("p",null,[R[3]||(R[3]=n("strong",null,"Last Updated:",-1)),J(" "+x(_(y.last_updated)),1)])]),n("div",nb,[n("button",{onClick:v=>S(y.id),class:"btn btn-danger",disabled:d.value===y.id},[d.value===y.id?(g(),m("span",ab)):H("",!0),J(" "+x(d.value===y.id?"":"Remove"),1)],8,ob),n("button",{onClick:v=>k(y.id,y.username),class:"btn btn-primary"}," View Streams ",8,ib)])],2))),128))]),_:1}),f.value.length?H("",!0):(g(),m("div",rb,R[4]||(R[4]=[n("div",{class:"empty-state-content"},[n("div",{class:"empty-state-icon"},"🎬"),n("h3",null,"No Streamers Yet"),n("p",null,"Add your favorite Twitch streamers to get started")],-1)])))]))}}),cb=Oe(lb,[["__scopeId","data-v-2382cfee"]]),ub={class:"streamers-page"},db={class:"page-header"},fb={class:"header-actions"},pb=Ne({__name:"StreamersView",setup(e){return(t,s)=>{const o=us("router-link");return g(),m("div",ub,[n("div",db,[s[2]||(s[2]=n("div",{class:"header-content"},[n("h2",null,"Your Streamers"),n("p",{class:"description"},"Manage your tracked streamers and their recordings")],-1)),n("div",fb,[ge(o,{to:"/",class:"btn btn-secondary"},{default:Re(()=>s[0]||(s[0]=[J("Back to Dashboard")])),_:1}),ge(o,{to:"/add-streamer",class:"btn btn-primary"},{default:Re(()=>s[1]||(s[1]=[J("Add Streamer")])),_:1})])]),ge(cb)])}}}),gb=Oe(pb,[["__scopeId","data-v-2c35ec68"]]),vb={class:"video-player-container"},mb=["src"],hb=["src"],yb={key:0,class:"chapter-overlay"},_b={class:"chapter-navigation"},bb={class:"chapter-list"},wb=["onClick"],Sb={key:0,class:"chapter-thumbnail"},$b=["src","alt"],kb={class:"chapter-info"},Cb={class:"chapter-title"},Eb={class:"chapter-time"},xb={key:0,class:"chapter-duration"},Tb={key:1,class:"chapter-game-icon"},Ab=["src","alt"],Pb={key:1,class:"chapter-progress-bar"},Rb=["title","onClick"],Ib={class:"video-controls-extension"},Nb={class:"chapter-controls"},Fb=["disabled"],Ob=["disabled"],Lb={key:0,class:"current-chapter-info"},Db={class:"current-chapter-title"},Mb={class:"current-chapter-progress"},Ub={key:0,class:"loading-overlay"},Vb={key:1,class:"error-overlay"},jb={class:"error-message"},Hb=Ne({__name:"VideoPlayer",props:{videoSrc:{},streamId:{},chaptersUrl:{},autoChapters:{type:Boolean,default:!0},chapters:{},streamTitle:{}},emits:["chapter-change","video-ready","time-update"],setup(e,{emit:t}){const s=e,o=t,a=F(),i=F(),r=F(!0),l=F(""),c=F(0),d=F(0),u=F(!1),f=F([]),{getCategoryImage:_}=Bs(),h=pe(()=>{for(let B=f.value.length-1;B>=0;B--)if(c.value>=f.value[B].startTime)return B;return 0}),S=pe(()=>f.value[h.value]||null),k=()=>{a.value&&(d.value=a.value.duration,o("video-ready",d.value))},N=()=>{a.value&&(c.value=a.value.currentTime,o("time-update",c.value))},R=()=>{r.value=!0,l.value=""},y=()=>{r.value=!1},v=()=>{r.value=!1,l.value="Failed to load video. Please check the video file and try again."},b=()=>{a.value&&a.value.load()},p=B=>{a.value&&(a.value.currentTime=B)},P=()=>{h.value>0&&p(f.value[h.value-1].startTime)},T=()=>{h.value<f.value.length-1&&p(f.value[h.value+1].startTime)},X=()=>{u.value=!u.value},Q=async()=>{if(s.chapters&&s.chapters.length>0){f.value=V(s.chapters),console.log("Loaded",f.value.length,"chapters from props");return}if(s.streamId&&s.autoChapters)try{const B=await fetch(`/api/streams/${s.streamId}/chapters`);if(B.ok){const se=await B.json();f.value=se.map(re=>({title:re.category_name||re.title||"Stream Segment",startTime:re.start_time||0,duration:re.duration||60,gameIcon:_(re.category_name)}))}}catch(B){console.warn("Failed to load auto-generated chapters:",B)}if(s.chaptersUrl)try{const B=await fetch(s.chaptersUrl);if(B.ok){const se=await B.text();G(se)}}catch(B){console.warn("Failed to load WebVTT chapters:",B)}},V=B=>B.map((se,re)=>({title:se.title||`Chapter ${re+1}`,startTime:L(se.start_time),duration:60,gameIcon:void 0})),L=B=>{if(!B||B.includes("T"))return 0;const se=B.split(":");if(se.length===2){const[re,me]=se;return parseInt(re)*60+parseFloat(me)}else if(se.length===3){const[re,me,Ie]=se;return parseInt(re)*3600+parseInt(me)*60+parseFloat(Ie)}return 0},G=B=>{var Ie;const se=B.split(`
`),re=[];let me=0;for(;me<se.length;){const ie=se[me].trim().match(/(\d{2}:\d{2}:\d{2}\.\d{3})\s*-->\s*(\d{2}:\d{2}:\d{2}\.\d{3})/);if(ie){const O=ee(ie[1]),E=ee(ie[2])-O;me++;const C=((Ie=se[me])==null?void 0:Ie.trim())||"Chapter";re.push({title:C,startTime:O,duration:E})}me++}re.length>0&&(f.value=re)},ee=B=>{const[se,re,me]=B.split(":");return parseInt(se)*3600+parseInt(re)*60+parseFloat(me)},z=B=>{const se=Math.floor(B/3600),re=Math.floor(B%3600/60),me=Math.floor(B%60);return se>0?`${se}:${re.toString().padStart(2,"0")}:${me.toString().padStart(2,"0")}`:`${re}:${me.toString().padStart(2,"0")}`},D=B=>{const se=Math.floor(B/60),re=Math.floor(B%60);if(se>60){const me=Math.floor(se/60),Ie=se%60;return`${me}h ${Ie}m`}return`${se}m ${re}s`},A=B=>{let se=0;for(let me=0;me<B.length;me++)se=B.charCodeAt(me)+((se<<5)-se);return`hsl(${Math.abs(se%360)}, 70%, 60%)`};Je(h,(B,se)=>{B!==se&&f.value[B]&&o("chapter-change",f.value[B],B)});const M=B=>{if(a.value)switch(B.key){case"ArrowLeft":(B.ctrlKey||B.metaKey)&&(B.preventDefault(),P());break;case"ArrowRight":(B.ctrlKey||B.metaKey)&&(B.preventDefault(),T());break;case"c":case"C":!B.ctrlKey&&!B.metaKey&&(B.preventDefault(),X());break}};Fe(()=>{Q(),document.addEventListener("keydown",M)}),Wt(()=>{document.removeEventListener("keydown",M)}),Je(()=>s.chapters,B=>{B&&B.length>0&&(f.value=V(B),console.log("Updated",f.value.length,"chapters from props"))},{immediate:!0});const W=pe(()=>{if(!s.videoSrc)return"";try{const B=decodeURIComponent(s.videoSrc);return console.log("Original video src:",s.videoSrc),console.log("Decoded video src:",B),B}catch(B){return console.error("Error decoding video src:",B),s.videoSrc}});return(B,se)=>(g(),m("div",vb,[n("div",{class:"video-wrapper",ref_key:"videoWrapper",ref:i},[n("video",{ref_key:"videoElement",ref:a,src:W.value,onLoadedmetadata:k,onTimeupdate:N,onLoadstart:R,onCanplay:y,onError:v,onAbort:v,controls:"",preload:"metadata",class:"video-element"},[B.chaptersUrl?(g(),m("track",{key:0,kind:"chapters",src:B.chaptersUrl,srclang:"en",label:"Chapters",default:""},null,8,hb)):H("",!0),se[0]||(se[0]=J(" Your browser does not support the video tag. "))],40,mb),f.value.length>0&&u.value?(g(),m("div",yb,[n("div",_b,[n("div",bb,[(g(!0),m(he,null,$e(f.value,(re,me)=>(g(),m("div",{key:me,class:ce(["chapter-item",{active:h.value===me}]),onClick:Ie=>p(re.startTime)},[re.thumbnail?(g(),m("div",Sb,[n("img",{src:re.thumbnail,alt:re.title},null,8,$b)])):H("",!0),n("div",kb,[n("div",Cb,x(re.title),1),n("div",Eb,x(z(re.startTime)),1),re.duration?(g(),m("div",xb,x(D(re.duration)),1)):H("",!0)]),re.gameIcon?(g(),m("div",Tb,[re.gameIcon.startsWith("icon:")?(g(),m("i",{key:1,class:ce([re.gameIcon.replace("icon:",""),"category-icon"])},null,2)):(g(),m("img",{key:0,src:re.gameIcon,alt:re.title},null,8,Ab))])):H("",!0)],10,wb))),128))])])])):H("",!0),f.value.length>0?(g(),m("div",Pb,[(g(!0),m(he,null,$e(f.value,(re,me)=>(g(),m("div",{key:me,class:"chapter-segment",style:Us({width:`${re.duration/d.value*100}%`,backgroundColor:A(re.title)}),title:`${re.title} - ${z(re.startTime)}`,onClick:Ie=>p(re.startTime)},null,12,Rb))),128))])):H("",!0)],512),n("div",Ib,[n("div",Nb,[n("button",{onClick:X,class:ce(["chapter-toggle-btn",{active:u.value}])},[se[1]||(se[1]=n("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor"},[n("path",{d:"M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"})],-1)),J(" Chapters ("+x(f.value.length)+") ",1)],2),n("button",{onClick:P,disabled:h.value<=0},se[2]||(se[2]=[n("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor"},[n("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"})],-1),J(" Previous ")]),8,Fb),n("button",{onClick:T,disabled:h.value>=f.value.length-1},se[3]||(se[3]=[n("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor"},[n("path",{d:"M6 18l8.5-6L6 6v12zm8.5-6l8.5 6V6z"})],-1),J(" Next ")]),8,Ob)]),S.value?(g(),m("div",Lb,[n("div",Db,x(S.value.title),1),n("div",Mb,x(z(c.value-S.value.startTime))+" / "+x(D(S.value.duration)),1)])):H("",!0)]),r.value?(g(),m("div",Ub,se[4]||(se[4]=[n("div",{class:"spinner"},null,-1),n("div",null,"Loading video...",-1)]))):H("",!0),l.value?(g(),m("div",Vb,[se[5]||(se[5]=n("div",{class:"error-icon"},"⚠️",-1)),n("div",jb,x(l.value),1),n("button",{onClick:b,class:"retry-btn"},"Retry")])):H("",!0)]))}}),Bb=Oe(Hb,[["__scopeId","data-v-fd4a31ae"]]),Wb={class:"video-player-view"},qb={class:"player-header"},Gb={class:"stream-info"},Kb={key:0},zb={key:0,class:"loading-container"},Jb={key:1,class:"error-container"},Yb={class:"error-message"},Qb={key:2,class:"no-video-container"},Zb=Ne({__name:"VideoPlayerView",setup(e){const t=En(),s=Gt(),o=pe(()=>t.params.streamerId),a=pe(()=>t.params.streamId),i=pe(()=>t.query.title||`Stream ${a.value}`),r=pe(()=>t.query.streamerName),l=F(null),c=F(!0),d=F(null),u=async()=>{try{c.value=!0,d.value=null;const h=await fetch(`/api/streamers/${o.value}/streams/${a.value}/chapters`);if(!h.ok)throw h.status===404?new Error("Stream not found"):new Error(`Failed to load video data: ${h.statusText}`);l.value=await h.json()}catch(h){console.error("Error loading chapter data:",h),d.value=h instanceof Error?h.message:"Failed to load video data"}finally{c.value=!1}},f=()=>{u()},_=()=>{s.back()};return Fe(()=>{u()}),(h,S)=>{var k;return g(),m("div",Wb,[n("div",qb,[n("button",{onClick:_,class:"back-btn"}," ← Back to Streams "),n("div",Gb,[n("h1",null,x(i.value),1),r.value?(g(),m("p",Kb,x(r.value),1)):H("",!0)])]),c.value?(g(),m("div",zb,S[0]||(S[0]=[n("div",{class:"spinner"},null,-1),n("p",null,"Loading video player...",-1)]))):d.value?(g(),m("div",Jb,[n("p",Yb,x(d.value),1),n("button",{onClick:f,class:"btn btn-primary"},"Retry")])):(k=l.value)!=null&&k.video_url?(g(),qt(Bb,{key:3,"video-src":l.value.video_url,chapters:l.value.chapters,"stream-title":l.value.stream_title,class:"video-player-container"},null,8,["video-src","chapters","stream-title"])):(g(),m("div",Qb,[S[1]||(S[1]=n("p",null,"No video file available for this stream.",-1)),n("button",{onClick:f,class:"btn btn-secondary"},"Refresh")]))])}}}),Xb=Oe(Zb,[["__scopeId","data-v-8ada6172"]]);class e0{constructor(){this.baseURL=""}async request(t,s={}){const o=`${this.baseURL}${t}`,a={headers:{"Content-Type":"application/json",...s.headers},...s};a.body&&typeof a.body=="object"&&(a.body=JSON.stringify(a.body));try{const i=await fetch(o,a);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const r=i.headers.get("content-type");return r&&r.includes("application/json")?await i.json():i}catch(i){throw console.error("API request failed:",i),i}}async get(t,s={}){const o=new URLSearchParams(s),a=o.toString()?`${t}?${o}`:t;return this.request(a,{method:"GET"})}async post(t,s={}){return this.request(t,{method:"POST",body:s})}async put(t,s={}){return this.request(t,{method:"PUT",body:s})}async delete(t){return this.request(t,{method:"DELETE"})}async patch(t,s={}){return this.request(t,{method:"PATCH",body:s})}}const ht=new e0,t0={async getAllStreamers(){return ht.get("/api/streamers")},async getStreamer(e){return ht.get(`/api/streamers/${e}`)},async addStreamer(e){return ht.post("/api/streamers",e)},async updateStreamer(e,t){return ht.put(`/api/streamers/${e}`,t)},async deleteStreamer(e){return ht.delete(`/api/streamers/${e}`)},async getStreamerStreams(e){return ht.get(`/api/streamers/${encodeURIComponent(e)}/streams`)},async getStreamChapters(e,t){return ht.get(`/api/streamers/${e}/streams/${t}/chapters`)},async deleteStream(e,t){return ht.delete(`/api/streamers/${e}/streams/${t}`)},async deleteAllStreams(e){return ht.delete(`/api/streamers/${e}/streams`)}},s0={class:"modal-header"},n0={class:"modal-content"},o0={class:"video-container"},a0=["src"],i0={key:0,class:"video-loading"},r0={key:1,class:"video-error"},l0={key:2,class:"chapter-navigation"},c0={key:0,class:"chapters-list"},u0=["onClick"],d0={class:"chapter-time"},f0={class:"chapter-title"},p0={class:"video-details"},g0={class:"video-info"},v0={class:"video-date"},m0={class:"video-stats"},h0={key:0,class:"stat"},y0={key:1,class:"stat"},_0={__name:"VideoModal",props:{video:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const s=e,o=t,a=F(null),i=F(!0),r=F(!1),l=F(""),c=F([]),d=F(!1),u=F(-1),f=pe(()=>`/api/videos/stream/${s.video.id}`),_=()=>{a.value&&(a.value.pause(),a.value.removeEventListener("timeupdate",G)),o("close")},h=()=>{i.value=!0,r.value=!1},S=()=>{i.value=!1,r.value=!1,a.value&&a.value.addEventListener("timeupdate",G)},k=z=>{i.value=!1,r.value=!0;const D=z.target;if(D.error)switch(D.error.code){case D.error.MEDIA_ERR_ABORTED:l.value="Video playback was aborted.";break;case D.error.MEDIA_ERR_NETWORK:l.value="Network error while loading video.";break;case D.error.MEDIA_ERR_DECODE:l.value="Video could not be decoded.";break;case D.error.MEDIA_ERR_SRC_NOT_SUPPORTED:l.value="Video format is not supported.";break;default:l.value="Unknown error while loading video."}else l.value="Video could not be found. Please check the path and try again.";console.error("Video error:",z.target.error,"URL:",f.value)},N=()=>{a.value&&(r.value=!1,i.value=!0,a.value.load())},R=()=>{const z=document.createElement("a");z.href=f.value,z.download=s.video.title||"video.mp4",document.body.appendChild(z),z.click(),document.body.removeChild(z)},y=async()=>{const z={title:s.video.title,text:`Check out this video from ${s.video.streamer_name}!`,url:window.location.href};if(navigator.share)try{await navigator.share(z)}catch(D){D.name!=="AbortError"&&v()}else v()},v=()=>{const z=window.location.href;navigator.clipboard.writeText(z).then(()=>{alert("Link copied to clipboard!")}).catch(()=>{alert(`Share link: ${z}`)})},b=z=>new Date(z).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=z=>{if(!z)return"Unknown";const D=Math.round(z),A=Math.floor(D/3600),M=Math.floor(D%3600/60),W=D%60;return A>0?`${A}:${M.toString().padStart(2,"0")}:${W.toString().padStart(2,"0")}`:`${M}:${W.toString().padStart(2,"0")}`},P=z=>{if(!z)return"Unknown";const D=["B","KB","MB","GB","TB"],A=Math.floor(Math.log(z)/Math.log(1024));return`${(z/Math.pow(1024,A)).toFixed(1)} ${D[A]}`},T=async()=>{try{if(!s.video.streamer_id||!s.video.id){console.warn("Missing streamer_id or stream id for loading chapters",{streamer_id:s.video.streamer_id,video_id:s.video.id});return}const z=await t0.getStreamChapters(s.video.streamer_id,s.video.id);c.value=z.chapters||[],console.log(`Loaded ${c.value.length} chapters for stream ${s.video.id}`)}catch(z){console.error("Failed to load chapters:",z),c.value=[]}},X=()=>{d.value=!d.value},Q=z=>{if(a.value)try{const D=V(z.start_time);a.value.currentTime=D;const A=c.value.indexOf(z);u.value=A,console.log(`Jumped to chapter: ${z.title} at ${z.start_time} (${D}s)`)}catch(D){console.error("Failed to jump to chapter:",D)}},V=z=>{if(!z)return 0;if(z.includes("T")){const A=new Date(z),M=new Date(s.video.created_at||s.video.started_at);return Math.max(0,(A-M)/1e3)}const D=z.split(":");if(D.length===2){const[A,M]=D;return parseInt(A)*60+parseFloat(M)}else if(D.length===3){const[A,M,W]=D;return parseInt(A)*3600+parseInt(M)*60+parseFloat(W)}return 0},L=z=>{try{const D=V(z),A=Math.floor(D/3600),M=Math.floor(D%3600/60),W=Math.floor(D%60);return A>0?`${A}:${M.toString().padStart(2,"0")}:${W.toString().padStart(2,"0")}`:`${M}:${W.toString().padStart(2,"0")}`}catch{return z}},G=()=>{if(!a.value||c.value.length===0)return;const z=a.value.currentTime;let D=-1;for(let A=c.value.length-1;A>=0;A--){const M=V(c.value[A].start_time);if(z>=M){D=A;break}}D!==u.value&&(u.value=D)},ee=z=>{z.key==="Escape"&&_()};return Fe(()=>{document.addEventListener("keydown",ee),document.body.style.overflow="hidden",T()}),_n(()=>{document.removeEventListener("keydown",ee),document.body.style.overflow=""}),(z,D)=>(g(),m("div",{class:"video-modal-overlay",onClick:_},[n("div",{class:"video-modal",onClick:D[0]||(D[0]=De(()=>{},["stop"]))},[n("div",s0,[n("h2",null,x(e.video.title),1),n("button",{onClick:_,class:"close-btn"},D[1]||(D[1]=[n("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),n("div",n0,[n("div",o0,[n("video",{ref_key:"videoPlayer",ref:a,src:f.value,controls:"",preload:"metadata",class:"video-player",onLoadstart:h,onCanplay:S,onError:k}," Your browser does not support the video tag. ",40,a0),i.value?(g(),m("div",i0,D[2]||(D[2]=[n("div",{class:"loading-spinner"},null,-1),n("p",null,"Loading video...",-1)]))):H("",!0),r.value?(g(),m("div",r0,[D[3]||(D[3]=n("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("circle",{cx:"12",cy:"12",r:"10"}),n("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),n("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1)),D[4]||(D[4]=n("h3",null,"Could not load video",-1)),n("p",null,x(l.value),1),n("button",{onClick:N,class:"retry-btn"},"Retry")])):H("",!0),c.value.length>0&&!i.value&&!r.value?(g(),m("div",l0,[n("button",{onClick:X,class:ce(["chapters-toggle-btn",{active:d.value}])},[D[5]||(D[5]=Tt('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-dc9ae9d3><rect x="3" y="3" width="18" height="18" rx="2" ry="2" data-v-dc9ae9d3></rect><line x1="9" y1="9" x2="15" y2="9" data-v-dc9ae9d3></line><line x1="9" y1="12" x2="15" y2="12" data-v-dc9ae9d3></line><line x1="9" y1="15" x2="15" y2="15" data-v-dc9ae9d3></line></svg>',1)),J(" Chapters ("+x(c.value.length)+") ",1)],2),d.value?(g(),m("div",c0,[(g(!0),m(he,null,$e(c.value,(A,M)=>(g(),m("div",{key:M,onClick:W=>Q(A),class:ce(["chapter-item",{active:u.value===M}])},[n("div",d0,x(L(A.start_time)),1),n("div",f0,x(A.title||`Chapter ${M+1}`),1)],10,u0))),128))])):H("",!0)])):H("",!0)]),n("div",p0,[n("div",g0,[n("h3",null,x(e.video.streamer_name),1),n("p",v0,x(b(e.video.created_at)),1),n("div",m0,[e.video.duration?(g(),m("span",h0,[D[6]||(D[6]=n("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("circle",{cx:"12",cy:"12",r:"10"}),n("polyline",{points:"12,6 12,12 16,14"})],-1)),J(" "+x(p(e.video.duration)),1)])):H("",!0),e.video.file_size?(g(),m("span",y0,[D[7]||(D[7]=n("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),n("polyline",{points:"14,2 14,8 20,8"})],-1)),J(" "+x(P(e.video.file_size)),1)])):H("",!0)])]),n("div",{class:"video-actions"},[n("button",{onClick:R,class:"action-btn download-btn"},D[8]||(D[8]=[n("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n("polyline",{points:"7 10 12 15 17 10"}),n("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),J(" Download ")])),n("button",{onClick:y,class:"action-btn share-btn"},D[9]||(D[9]=[Tt('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-dc9ae9d3><circle cx="18" cy="5" r="3" data-v-dc9ae9d3></circle><circle cx="6" cy="12" r="3" data-v-dc9ae9d3></circle><circle cx="18" cy="19" r="3" data-v-dc9ae9d3></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49" data-v-dc9ae9d3></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49" data-v-dc9ae9d3></line></svg> Share ',2)]))])])])])]))}},b0=Oe(_0,[["__scopeId","data-v-dc9ae9d3"]]),w0={class:"videos-view"},S0={class:"filters"},$0={class:"search-box"},k0={class:"filter-buttons"},C0=["onClick"],E0={key:0,class:"category-filter"},x0={class:"category-buttons"},T0=["onClick"],A0={key:0,class:"loading-container"},P0={key:1,class:"error-state"},R0={key:2,class:"videos-grid"},I0=["onClick"],N0={class:"video-thumbnail"},F0=["src","alt"],O0={key:1,class:"thumbnail-placeholder"},L0={key:2,class:"video-duration"},D0={class:"video-info"},M0={class:"video-title"},U0={class:"video-streamer"},V0={key:0,class:"video-category"},j0={class:"video-meta"},H0={class:"video-date"},B0={key:0,class:"video-size"},W0={key:3,class:"empty-state"},q0={key:0},G0={key:1},K0={__name:"VideosView",setup(e){const t=F(!0),s=F(""),o=F("all"),a=F("all"),i=F(null),r=F([]),l=F(null),c=[{label:"All",value:"all"},{label:"Today",value:"today"},{label:"This Week",value:"week"},{label:"This Month",value:"month"}],d=pe(()=>{const v=r.value.map(b=>b.category_name).filter(b=>b&&b.trim()!=="").filter((b,p,P)=>P.indexOf(b)===p).sort();return[{label:"All Categories",value:"all"},...v.map(b=>({label:b,value:b}))]}),u=pe(()=>{let v=r.value;if(s.value){const p=s.value.toLowerCase();v=v.filter(P=>(P.title||"").toLowerCase().includes(p)||(P.streamer_name||"").toLowerCase().includes(p))}if(a.value!=="all"&&(v=v.filter(p=>p.category_name===a.value)),o.value!=="all"){const p=new Date,P=new Date;switch(o.value){case"today":P.setHours(0,0,0,0);break;case"week":P.setDate(p.getDate()-7);break;case"month":P.setMonth(p.getMonth()-1);break}v=v.filter(T=>{if(!T.created_at)return!1;try{return new Date(T.created_at)>=P}catch{return console.warn("Invalid date format:",T.created_at),!1}})}return v.sort((p,P)=>{try{const T=new Date(p.created_at||0);return new Date(P.created_at||0)-T}catch{return 0}})}),f=async()=>{var v,b;try{t.value=!0,l.value=null;const p=await ht.get("/api/videos");r.value=Array.isArray(p)?p:p.data||[]}catch(p){console.error("Error loading videos:",p),l.value=((b=(v=p.response)==null?void 0:v.data)==null?void 0:b.detail)||"Failed to load videos",r.value=[]}finally{t.value=!1}},_=()=>{},h=v=>{i.value=v},S=()=>{i.value=null},k=v=>{v.target.style.display="none"},N=v=>{const b=new Date(v),P=(new Date-b)/(1e3*60*60);return P<24?`${Math.floor(P)} hours ago`:P<24*7?`${Math.floor(P/24)} days ago`:b.toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})},R=v=>{if(!v)return"";const b=Math.round(v),p=Math.floor(b/3600),P=Math.floor(b%3600/60),T=b%60;return p>0?`${p}:${P.toString().padStart(2,"0")}:${T.toString().padStart(2,"0")}`:`${P}:${T.toString().padStart(2,"0")}`},y=v=>{if(!v)return"";const b=["B","KB","MB","GB","TB"],p=Math.floor(Math.log(v)/Math.log(1024));return`${(v/Math.pow(1024,p)).toFixed(1)} ${b[p]}`};return Fe(()=>{f()}),(v,b)=>(g(),m("div",w0,[b[10]||(b[10]=n("div",{class:"view-header"},[n("h1",null,"📹 Videos"),n("p",null,"Browse and watch all recorded streams")],-1)),n("div",S0,[n("div",$0,[be(n("input",{"onUpdate:modelValue":b[0]||(b[0]=p=>s.value=p),type:"text",placeholder:"Search videos...",class:"search-input"},null,512),[[Ue,s.value]]),n("button",{onClick:_,class:"search-btn"},b[1]||(b[1]=[n("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("circle",{cx:"11",cy:"11",r:"8"}),n("path",{d:"m21 21-4.35-4.35"})],-1)]))]),n("div",k0,[(g(),m(he,null,$e(c,p=>n("button",{key:p.value,onClick:P=>o.value=p.value,class:ce(["filter-btn",{active:o.value===p.value}])},x(p.label),11,C0)),64))]),d.value.length>1?(g(),m("div",E0,[b[2]||(b[2]=n("h4",null,"Filter by Category:",-1)),n("div",x0,[(g(!0),m(he,null,$e(d.value,p=>(g(),m("button",{key:p.value,onClick:P=>a.value=p.value,class:ce(["category-btn",{active:a.value===p.value}])},x(p.label),11,T0))),128))])])):H("",!0)]),t.value?(g(),m("div",A0,b[3]||(b[3]=[n("div",{class:"loading-spinner"},null,-1),n("p",null,"Loading videos...",-1)]))):l.value?(g(),m("div",P0,[b[4]||(b[4]=n("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[n("circle",{cx:"12",cy:"12",r:"10"}),n("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),n("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1)),b[5]||(b[5]=n("h3",null,"Error loading videos",-1)),n("p",null,x(l.value),1),n("button",{onClick:f,class:"retry-btn"},"Try Again")])):u.value.length>0?(g(),m("div",R0,[(g(!0),m(he,null,$e(u.value,p=>(g(),m("div",{key:p.id,class:"video-card",onClick:P=>h(p)},[n("div",N0,[p.thumbnail_url?(g(),m("img",{key:0,src:p.thumbnail_url,alt:p.title,class:"thumbnail-image",onError:k},null,40,F0)):(g(),m("div",O0,b[6]||(b[6]=[n("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("polygon",{points:"23 7 16 12 23 17 23 7"}),n("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})],-1)]))),p.duration?(g(),m("div",L0,x(R(p.duration)),1)):H("",!0),b[7]||(b[7]=n("div",{class:"video-overlay"},[n("svg",{class:"play-icon",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("polygon",{points:"5 3 19 12 5 21 5 3"})])],-1))]),n("div",D0,[n("h3",M0,x(p.title),1),n("p",U0,x(p.streamer_name),1),p.category_name?(g(),m("p",V0,"🎮 "+x(p.category_name),1)):H("",!0),n("div",j0,[n("span",H0,x(N(p.created_at)),1),p.file_size?(g(),m("span",B0,x(y(p.file_size)),1)):H("",!0)])])],8,I0))),128))])):!t.value&&!l.value?(g(),m("div",W0,[b[8]||(b[8]=n("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[n("polygon",{points:"23 7 16 12 23 17 23 7"}),n("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})],-1)),b[9]||(b[9]=n("h3",null,"No videos found",-1)),s.value?(g(),m("p",q0,'No videos match your search for "'+x(s.value)+'"',1)):(g(),m("p",G0,"No videos have been recorded yet."))])):H("",!0),i.value?(g(),qt(b0,{key:4,video:i.value,onClose:S},null,8,["video"])):H("",!0)]))}},z0=Oe(K0,[["__scopeId","data-v-7b7f0d91"]]),mr=Vd({history:vd("/"),routes:[{path:"/",name:"home",component:of},{path:"/welcome",name:"welcome",component:W_},{path:"/streamers",name:"streamers",component:gb},{path:"/videos",name:"videos",component:z0},{path:"/subscriptions",name:"subscriptions",component:xf},{path:"/add-streamer",name:"add-streamer",component:Yp},{path:"/auth/setup",name:"setup",component:rg},{path:"/auth/login",name:"login",component:gg},{path:"/admin",name:"Admin",component:kv},{path:"/settings",name:"settings",component:t1},{path:"/streamer/:id",name:"streamer-detail",component:j_},{path:"/streamer/:streamerId/stream/:streamId/watch",name:"VideoPlayer",component:Xb}]});mr.beforeEach(async(e,t,s)=>{if(e.path==="/"&&!localStorage.getItem("welcome_seen"))return s("/welcome");if(e.path==="/welcome"&&localStorage.getItem("welcome_seen"))return s("/");try{return(await(await fetch("/auth/setup",{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})).json()).setup_required?e.path!=="/auth/setup"?s("/auth/setup"):s():e.path==="/auth/setup"?s("/"):!(await fetch("/auth/check",{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})).ok&&e.path!=="/auth/login"?s("/auth/login"):s()}catch(o){return console.error("Router error:",o),s("/auth/setup")}});function J0(e={}){const{immediate:t=!1,onNeedRefresh:s,onOfflineReady:o,onRegistered:a,onRegisteredSW:i,onRegisterError:r}=e;let l,c;const d=async(f=!0)=>{await c};async function u(){if("serviceWorker"in navigator){if(l=await Fa(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/sw.js",{scope:"/",type:"classic"})).catch(f=>{r==null||r(f)}),!l)return;l.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),l.addEventListener("installed",f=>{f.isUpdate||o==null||o()}),l.register({immediate:t}).then(f=>{i?i("/sw.js",f):a==null||a(f)}).catch(f=>{r==null||r(f)})}}return c=u(),d}Fa(()=>import("./pwaDebug-DEAyeGsa.js"),[]);const ko=Hc(Mu);ko.use(Gc());ko.use(mr);ko.mount("#app");J0({onNeedRefresh(){console.log("PWA needs refresh")},onOfflineReady(){console.log("PWA is ready for offline use")},onRegistered(e){console.log("Service Worker registered successfully",e)},onRegisterError(e){console.error("Service Worker registration failed:",e)}});window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),console.log("PWA install prompt available"),window.dispatchEvent(new CustomEvent("pwa-installable",{detail:e}))});window.addEventListener("appinstalled",()=>{console.log("PWA was installed")});
